(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{"/6Yf":function(t,e,n){"use strict";n.d(e,"a",function(){return o}),n.d(e,"b",function(){return u}),n.d(e,"c",function(){return a});var r=n("mrSG"),i=n("qOnz"),o=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY"}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t}(),s="[DEFAULT]",a=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map}return t.prototype.get=function(t){void 0===t&&(t=s);var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new i.a;this.instancesDeferred.set(e,n);try{var r=this.getOrInitializeService({instanceIdentifier:e});r&&n.resolve(r)}catch(o){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e=Object(r.a)({identifier:s,optional:!1},t),n=e.optional,i=this.normalizeInstanceIdentifier(e.identifier);try{var o=this.getOrInitializeService({instanceIdentifier:i});if(!o){if(n)return null;throw Error("Service "+this.name+" is not available")}return o}catch(a){if(n)return null;throw a}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,function(t){return"EAGER"===t.instantiationMode}(t))try{this.getOrInitializeService({instanceIdentifier:s})}catch(h){}try{for(var i=Object(r.g)(this.instancesDeferred.entries()),o=i.next();!o.done;o=i.next()){var a=Object(r.e)(o.value,2),u=a[1],c=this.normalizeInstanceIdentifier(a[0]);try{var l=this.getOrInitializeService({instanceIdentifier:c});u.resolve(l)}catch(h){}}}catch(d){e={error:d}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}},t.prototype.clearInstance=function(t){void 0===t&&(t=s),this.instancesDeferred.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return Object(r.b)(this,void 0,void 0,function(){var t;return Object(r.d)(this,function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all(Object(r.f)(Object(r.f)([],Object(r.e)(t.filter(function(t){return"INTERNAL"in t}).map(function(t){return t.INTERNAL.delete()}))),Object(r.e)(t.filter(function(t){return"_delete"in t}).map(function(t){return t._delete()}))))];case 1:return e.sent(),[2]}})})},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.isInitialized=function(t){return void 0===t&&(t=s),this.instances.has(t)},t.prototype.initialize=function(t){void 0===t&&(t={});var e=t.instanceIdentifier,n=t.options,r=void 0===n?{}:n,i=this.normalizeInstanceIdentifier(void 0===e?s:e);if(this.isInitialized(i))throw Error(this.name+"("+i+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");return this.getOrInitializeService({instanceIdentifier:i,options:r})},t.prototype.getOrInitializeService=function(t){var e,n=t.instanceIdentifier,r=t.options,i=void 0===r?{}:r,o=this.instances.get(n);return!o&&this.component&&(o=this.component.instanceFactory(this.container,{instanceIdentifier:(e=n,e===s?void 0:e),options:i}),this.instances.set(n,o)),o||null},t.prototype.normalizeInstanceIdentifier=function(t){return this.component?this.component.multipleInstances?t:s:t},t}(),u=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new a(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}()},0:function(t,e,n){t.exports=n("zUnb")},"2QA8":function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=(()=>"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random())()},"2fFW":function(t,e,n){"use strict";n.d(e,"a",function(){return i});let r=!1;const i={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){if(t){const t=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+t.stack)}else r&&console.log("RxJS: Back to a better error behavior. Thank you. <3");r=t},get useDeprecatedSynchronousErrorHandling(){return r}}},"3N8a":function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("quSY");class i extends r.a{constructor(t,e){super()}schedule(t,e=0){return this}}class o extends i{constructor(t,e){super(t,e),this.scheduler=t,this.work=e,this.pending=!1}schedule(t,e=0){if(this.closed)return this;this.state=t;const n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(r,this.id,e),this}requestAsyncId(t,e,n=0){return setInterval(t.flush.bind(t,this),n)}recycleAsyncId(t,e,n=0){if(null!==n&&this.delay===n&&!1===this.pending)return e;clearInterval(e)}execute(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const n=this._execute(t,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,e){let n,r=!1;try{this.work(t)}catch(i){r=!0,n=!!i&&i||new Error(i)}if(r)return this.unsubscribe(),n}_unsubscribe(){const t=this.id,e=this.scheduler,n=e.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null}}},"3UD+":function(t,e){t.exports=function(t){if(!t.webpackPolyfill){var e=Object.create(t);e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),Object.defineProperty(e,"exports",{enumerable:!0}),e.webpackPolyfill=1}return e}},"5+tZ":function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("lJxs"),i=n("Cfvw"),o=n("zx2A");function s(t,e,n=Number.POSITIVE_INFINITY){return"function"==typeof e?o=>o.pipe(s((n,o)=>Object(i.a)(t(n,o)).pipe(Object(r.a)((t,r)=>e(n,t,o,r))),n)):("number"==typeof e&&(n=e),e=>e.lift(new a(t,n)))}class a{constructor(t,e=Number.POSITIVE_INFINITY){this.project=t,this.concurrent=e}call(t,e){return e.subscribe(new u(t,this.project,this.concurrent))}}class u extends o.b{constructor(t,e,n=Number.POSITIVE_INFINITY){super(t),this.project=e,this.concurrent=n,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)}_tryNext(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this.active++,this._innerSub(e)}_innerSub(t){const e=new o.a(this),n=this.destination;n.add(e);const r=Object(o.c)(t,e);r!==e&&n.add(r)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(t){this.destination.next(t)}notifyComplete(){const t=this.buffer;this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}},"6Uf2":function(t,e,n){"use strict";(function(t){var e,r=n("zIRd"),i=n("mrSG"),o=n("qOnz"),s=n("q/0M"),a=n("/6Yf"),u=function(){function t(t){this.domStorage_=t,this.prefix_="firebase:"}return t.prototype.set=function(t,e){null==e?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),Object(o.F)(e))},t.prototype.get=function(t){var e=this.domStorage_.getItem(this.prefixedName_(t));return null==e?null:Object(o.z)(e)},t.prototype.remove=function(t){this.domStorage_.removeItem(this.prefixedName_(t))},t.prototype.prefixedName_=function(t){return this.prefix_+t},t.prototype.toString=function(){return this.domStorage_.toString()},t}(),c=function(){function t(){this.cache_={},this.isInMemoryStorage=!0}return t.prototype.set=function(t,e){null==e?delete this.cache_[t]:this.cache_[t]=e},t.prototype.get=function(t){return Object(o.h)(this.cache_,t)?this.cache_[t]:null},t.prototype.remove=function(t){delete this.cache_[t]},t}(),l=function(t){try{if("undefined"!=typeof window&&void 0!==window[t]){var e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new u(e)}}catch(n){}return new c},h=l("localStorage"),d=l("sessionStorage"),f=new s.b("@firebase/database"),p=(e=1,function(){return e++}),g=function(t){var e=Object(o.E)(t),n=new o.c;n.update(e);var r=n.digest();return o.f.encodeByteArray(r)},y=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n="",r=0;r<t.length;r++){var i=t[r];Array.isArray(i)||i&&"object"==typeof i&&"number"==typeof i.length?n+=y.apply(null,i):n+="object"==typeof i?Object(o.F)(i):i,n+=" "}return n},m=null,v=!0,b=function(t,e){Object(o.d)(!e||!0===t||!1===t,"Can't turn on custom loggers persistently."),!0===t?(f.logLevel=s.a.VERBOSE,m=f.log.bind(f),e&&d.set("logging_enabled",!0)):"function"==typeof t?m=t:(m=null,d.remove("logging_enabled"))},_=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(!0===v&&(v=!1,null===m&&!0===d.get("logging_enabled")&&b(!0)),m){var n=y.apply(null,t);m(n)}},w=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];_.apply(void 0,Object(i.f)([t],Object(i.e)(e)))}},C=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE INTERNAL ERROR: "+y.apply(void 0,Object(i.f)([],Object(i.e)(t)));f.error(n)},O=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE FATAL ERROR: "+y.apply(void 0,Object(i.f)([],Object(i.e)(t)));throw f.error(n),new Error(n)},E=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE WARNING: "+y.apply(void 0,Object(i.f)([],Object(i.e)(t)));f.warn(n)},S=function(t){return"number"==typeof t&&(t!=t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},T="[MIN_NAME]",I="[MAX_NAME]",x=function(t,e){if(t===e)return 0;if(t===T||e===I)return-1;if(e===T||t===I)return 1;var n=M(t),r=M(e);return null!==n?null!==r?n-r==0?t.length-e.length:n-r:-1:null!==r?1:t<e?-1:1},A=function(t,e){return t===e?0:t<e?-1:1},j=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+Object(o.F)(e))},k=function(t){if("object"!=typeof t||null===t)return Object(o.F)(t);var e=[];for(var n in t)e.push(n);e.sort();for(var r="{",i=0;i<e.length;i++)0!==i&&(r+=","),r+=Object(o.F)(e[i]),r+=":",r+=k(t[e[i]]);return r+"}"},N=function(t,e){var n=t.length;if(n<=e)return[t];for(var r=[],i=0;i<n;i+=e)r.push(t.substring(i,i+e>n?n:i+e));return r};function P(t,e){for(var n in t)t.hasOwnProperty(n)&&e(n,t[n])}var R=function(t){var e,n,r,i,s;Object(o.d)(!S(t),"Invalid JSON number"),0===t?(n=0,r=0,e=1/t==-1/0?1:0):(e=t<0,(t=Math.abs(t))>=Math.pow(2,-1022)?(n=(i=Math.min(Math.floor(Math.log(t)/Math.LN2),1023))+1023,r=Math.round(t*Math.pow(2,52-i)-Math.pow(2,52))):(n=0,r=Math.round(t/Math.pow(2,-1074))));var a=[];for(s=52;s;s-=1)a.push(r%2?1:0),r=Math.floor(r/2);for(s=11;s;s-=1)a.push(n%2?1:0),n=Math.floor(n/2);a.push(e?1:0),a.reverse();var u=a.join(""),c="";for(s=0;s<64;s+=8){var l=parseInt(u.substr(s,8),2).toString(16);1===l.length&&(l="0"+l),c+=l}return c.toLowerCase()},D=new RegExp("^-?(0*)\\d{1,10}$"),M=function(t){if(D.test(t)){var e=Number(t);if(e>=-2147483648&&e<=2147483647)return e}return null},L=function(t){try{t()}catch(e){setTimeout(function(){throw E("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},F=function(t,e){var n=setTimeout(t,e);return"object"==typeof n&&n.unref&&n.unref(),n},V=function(){function t(t,e){if(void 0===e){this.pieces_=t.split("/");for(var n=0,r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[n]=this.pieces_[r],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}return t.prototype.toString=function(){for(var t="",e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+this.pieces_[e]);return t||"/"},t}();function U(){return new V("")}function q(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function B(t){return t.pieces_.length-t.pieceNum_}function H(t){var e=t.pieceNum_;return e<t.pieces_.length&&e++,new V(t.pieces_,e)}function z(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function G(t){for(var e="",n=t.pieceNum_;n<t.pieces_.length;n++)""!==t.pieces_[n]&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function Q(t,e){return void 0===e&&(e=0),t.pieces_.slice(t.pieceNum_+e)}function W(t){if(t.pieceNum_>=t.pieces_.length)return null;for(var e=[],n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new V(e,0)}function K(t,e){for(var n=[],r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof V)for(r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{var i=e.split("/");for(r=0;r<i.length;r++)i[r].length>0&&n.push(i[r])}return new V(n,0)}function Y(t){return t.pieceNum_>=t.pieces_.length}function $(t,e){var n=q(t),r=q(e);if(null===n)return e;if(n===r)return $(H(t),H(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function J(t,e){for(var n=Q(t,0),r=Q(e,0),i=0;i<n.length&&i<r.length;i++){var o=x(n[i],r[i]);if(0!==o)return o}return n.length===r.length?0:n.length<r.length?-1:1}function X(t,e){if(B(t)!==B(e))return!1;for(var n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function Z(t,e){var n=t.pieceNum_,r=e.pieceNum_;if(B(t)>B(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}var tt=function(){return function(t,e){this.errorPrefix_=e,this.parts_=Q(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(var n=0;n<this.parts_.length;n++)this.byteLength_+=Object(o.D)(this.parts_[n]);et(this)}}();function et(t){if(t.byteLength_>768)throw new Error(t.errorPrefix_+"has a key path longer than 768 bytes ("+t.byteLength_+").");if(t.parts_.length>32)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+nt(t))}function nt(t){return 0===t.parts_.length?"":"in property '"+t.parts_.join(".")+"'"}var rt=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,it="websocket",ot="long_polling",st=function(){function t(t,e,n,r,i,o,s){void 0===i&&(i=!1),void 0===o&&(o=""),void 0===s&&(s=!1),this.secure=e,this.namespace=n,this.webSocketOnly=r,this.nodeAdmin=i,this.persistenceKey=o,this.includeNamespaceInQueryParams=s,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=h.get("host:"+t)||this._host}return t.prototype.isCacheableHost=function(){return"s-"===this.internalHost.substr(0,2)},t.prototype.isCustomHost=function(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain},Object.defineProperty(t.prototype,"host",{get:function(){return this._host},set:function(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&h.set("host:"+this._host,this.internalHost))},enumerable:!1,configurable:!0}),t.prototype.toString=function(){var t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t},t.prototype.toURLString=function(){return(this.secure?"https://":"http://")+this.host+"/"+(this.includeNamespaceInQueryParams?"?ns="+this.namespace:"")},t}();function at(t,e,n){var r;if(Object(o.d)("string"==typeof e,"typeof type must == string"),Object(o.d)("object"==typeof n,"typeof params must == object"),e===it)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else{if(e!==ot)throw new Error("Unknown connection type: "+e);r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?"}(function(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams})(t)&&(n.ns=t.namespace);var i=[];return P(n,function(t,e){i.push(t+"="+e)}),r+i.join("&")}var ut,ct,lt,ht,dt,ft,pt,gt=function(t,e){var n=yt(t),r=n.namespace;return"firebase.com"===n.domain&&O(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||O("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&E("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new st(n.host,n.secure,r,e,"ws"===n.scheme||"wss"===n.scheme,"",r!==n.subdomain),path:new V(n.pathString)}},yt=function(t){var e="",n="",r="",o="",s="",a=!0,u="https",c=443;if("string"==typeof t){var l=t.indexOf("//");l>=0&&(u=t.substring(0,l-1),t=t.substring(l+2));var h=t.indexOf("/");-1===h&&(h=t.length);var d=t.indexOf("?");-1===d&&(d=t.length),e=t.substring(0,Math.min(h,d)),h<d&&(o=function(t){for(var e="",n=t.split("/"),r=0;r<n.length;r++)if(n[r].length>0){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(o){}e+="/"+i}return e}(t.substring(h,d)));var f=function(t){var e,n,r={};"?"===t.charAt(0)&&(t=t.substring(1));try{for(var o=Object(i.g)(t.split("&")),s=o.next();!s.done;s=o.next()){var a=s.value;if(0!==a.length){var u=a.split("=");2===u.length?r[decodeURIComponent(u[0])]=decodeURIComponent(u[1]):E("Invalid query segment '"+a+"' in query '"+t+"'")}}}catch(c){e={error:c}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}return r}(t.substring(Math.min(t.length,d)));(l=e.indexOf(":"))>=0?(a="https"===u||"wss"===u,c=parseInt(e.substring(l+1),10)):l=e.length;var p=e.slice(0,l);if("localhost"===p.toLowerCase())n="localhost";else if(p.split(".").length<=2)n=p;else{var g=e.indexOf(".");r=e.substring(0,g).toLowerCase(),n=e.substring(g+1),s=r}"ns"in f&&(s=f.ns)}return{host:e,port:c,domain:n,subdomain:r,secure:a,scheme:u,pathString:o,namespace:s}},mt=/[\[\].#$\/\u0000-\u001F\u007F]/,vt=/[\[\].#$\u0000-\u001F\u007F]/,bt=10485760,_t=function(t){return"string"==typeof t&&0!==t.length&&!mt.test(t)},wt=function(t){return"string"==typeof t&&0!==t.length&&!vt.test(t)},Ct=function(t){return null===t||"string"==typeof t||"number"==typeof t&&!S(t)||t&&"object"==typeof t&&Object(o.h)(t,".sv")},Ot=function(t,e,n,r,i){i&&void 0===n||Et(Object(o.l)(t,e,i),n,r)},Et=function(t,e,n){var r=n instanceof V?new tt(n,t):n;if(void 0===e)throw new Error(t+"contains undefined "+nt(r));if("function"==typeof e)throw new Error(t+"contains a function "+nt(r)+" with contents = "+e.toString());if(S(e))throw new Error(t+"contains "+e.toString()+" "+nt(r));if("string"==typeof e&&e.length>bt/3&&Object(o.D)(e)>bt)throw new Error(t+"contains a string greater than 10485760 utf8 bytes "+nt(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){var i=!1,s=!1;if(P(e,function(e,n){if(".value"===e)i=!0;else if(".priority"!==e&&".sv"!==e&&(s=!0,!_t(e)))throw new Error(t+" contains an invalid key ("+e+") "+nt(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');var a,u;u=e,(a=r).parts_.length>0&&(a.byteLength_+=1),a.parts_.push(u),a.byteLength_+=Object(o.D)(u),et(a),Et(t,n,r),function(t){var e=t.parts_.pop();t.byteLength_-=Object(o.D)(e),t.parts_.length>0&&(t.byteLength_-=1)}(r)}),i&&s)throw new Error(t+' contains ".value" child '+nt(r)+" in addition to actual children.")}},St=function(t,e,n,r,i){if(!i||void 0!==n){var s=Object(o.l)(t,e,i);if(!n||"object"!=typeof n||Array.isArray(n))throw new Error(s+" must be an object containing the children to replace.");var a=[];P(n,function(t,e){var n=new V(t);if(Et(s,e,K(r,n)),".priority"===z(n)&&!Ct(e))throw new Error(s+"contains an invalid value for '"+n.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");a.push(n)}),function(t,e){var n,r;for(n=0;n<e.length;n++)for(var i=Q(r=e[n]),o=0;o<i.length;o++)if(".priority"===i[o]&&o===i.length-1);else if(!_t(i[o]))throw new Error(t+"contains an invalid key ("+i[o]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');e.sort(J);var s=null;for(n=0;n<e.length;n++){if(r=e[n],null!==s&&Z(s,r))throw new Error(t+"contains a path "+s.toString()+" that is ancestor of another path "+r.toString());s=r}}(s,a)}},Tt=function(t,e,n,r){if(!r||void 0!==n){if(S(n))throw new Error(Object(o.l)(t,e,r)+"is "+n.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Ct(n))throw new Error(Object(o.l)(t,e,r)+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},It=function(t,e,n,r){if(!r||void 0!==n)switch(n){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(Object(o.l)(t,e,r)+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},xt=function(t,e,n,r){if(!(r&&void 0===n||_t(n)))throw new Error(Object(o.l)(t,e,r)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},At=function(t,e,n,r){if(!(r&&void 0===n||wt(n)))throw new Error(Object(o.l)(t,e,r)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},jt=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),At(t,e,n,r)},kt=function(t,e){if(".info"===q(e))throw new Error(t+" failed = Can't modify data under /.info/")},Nt=function(t,e,n){var r=n.path.toString();if("string"!=typeof n.repoInfo.host||0===n.repoInfo.host.length||!_t(n.repoInfo.namespace)&&"localhost"!==n.repoInfo.host.split(":")[0]||0!==r.length&&!function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),wt(t)}(r))throw new Error(Object(o.l)(t,e,!1)+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},Pt=function(t,e,n,r){if((!r||void 0!==n)&&"boolean"!=typeof n)throw new Error(Object(o.l)(t,e,r)+"must be a boolean.")},Rt=function(t){return"number"==typeof t?"number:"+R(t):"string:"+t},Dt=function(t){if(t.isLeafNode()){var e=t.val();Object(o.d)("string"==typeof e||"number"==typeof e||"object"==typeof e&&Object(o.h)(e,".sv"),"Priority must be a string or number.")}else Object(o.d)(t===ut||t.isEmpty(),"priority of unexpected type.");Object(o.d)(t===ut||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},Mt=function(){function t(e,n){void 0===n&&(n=t.__childrenNodeConstructor.EMPTY_NODE),this.value_=e,this.priorityNode_=n,this.lazyHash_=null,Object(o.d)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),Dt(this.priorityNode_)}return Object.defineProperty(t,"__childrenNodeConstructor",{get:function(){return ct},set:function(t){ct=t},enumerable:!1,configurable:!0}),t.prototype.isLeafNode=function(){return!0},t.prototype.getPriority=function(){return this.priorityNode_},t.prototype.updatePriority=function(e){return new t(this.value_,e)},t.prototype.getImmediateChild=function(e){return".priority"===e?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.getChild=function(e){return Y(e)?this:".priority"===q(e)?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.hasChild=function(){return!1},t.prototype.getPredecessorChildName=function(t,e){return null},t.prototype.updateImmediateChild=function(e,n){return".priority"===e?this.updatePriority(n):n.isEmpty()&&".priority"!==e?this:t.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)},t.prototype.updateChild=function(e,n){var r=q(e);return null===r?n:n.isEmpty()&&".priority"!==r?this:(Object(o.d)(".priority"!==r||1===B(e),".priority must be the last token in a path"),this.updateImmediateChild(r,t.__childrenNodeConstructor.EMPTY_NODE.updateChild(H(e),n)))},t.prototype.isEmpty=function(){return!1},t.prototype.numChildren=function(){return 0},t.prototype.forEachChild=function(t,e){return!1},t.prototype.val=function(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.priorityNode_.isEmpty()||(t+="priority:"+Rt(this.priorityNode_.val())+":");var e=typeof this.value_;t+=e+":",t+="number"===e?R(this.value_):this.value_,this.lazyHash_=g(t)}return this.lazyHash_},t.prototype.getValue=function(){return this.value_},t.prototype.compareTo=function(e){return e===t.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof t.__childrenNodeConstructor?-1:(Object(o.d)(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))},t.prototype.compareToLeafNode_=function(e){var n=typeof e.value_,r=typeof this.value_,i=t.VALUE_TYPE_ORDER.indexOf(n),s=t.VALUE_TYPE_ORDER.indexOf(r);return Object(o.d)(i>=0,"Unknown leaf type: "+n),Object(o.d)(s>=0,"Unknown leaf type: "+r),i===s?"object"===r?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:s-i},t.prototype.withIndex=function(){return this},t.prototype.isIndexed=function(){return!0},t.prototype.equals=function(t){return t===this||!!t.isLeafNode()&&this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)},t.VALUE_TYPE_ORDER=["object","boolean","number","string"],t}(),Lt=function(){function t(t,e,n,r,i){void 0===i&&(i=null),this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];for(var o=1;!t.isEmpty();)if(t=t,o=e?n(t.key,e):1,r&&(o*=-1),o<0)t=this.isReverse_?t.left:t.right;else{if(0===o){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}return t.prototype.getNext=function(){if(0===this.nodeStack_.length)return null;var t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t},t.prototype.hasNext=function(){return this.nodeStack_.length>0},t.prototype.peek=function(){if(0===this.nodeStack_.length)return null;var t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}},t}(),Ft=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:Ut.EMPTY_NODE,this.right=null!=o?o:Ut.EMPTY_NODE}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.count=function(){return this.left.count()+1+this.right.count()},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min_=function(){return this.left.isEmpty()?this:this.left.min_()},t.prototype.minKey=function(){return this.min_().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp_()},t.prototype.removeMin_=function(){if(this.left.isEmpty())return Ut.EMPTY_NODE;var t=this;return t.left.isRed_()||t.left.left.isRed_()||(t=t.moveRedLeft_()),(t=t.copy(null,null,null,t.left.removeMin_(),null)).fixUp_()},t.prototype.remove=function(t,e){var n,r;if(e(t,(n=this).key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(t,e),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===e(t,n.key)){if(n.right.isEmpty())return Ut.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(t,e))}return n.fixUp_()},t.prototype.isRed_=function(){return this.color},t.prototype.fixUp_=function(){var t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t},t.prototype.moveRedLeft_=function(){var t=this.colorFlip_();return t.right.left.isRed_()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight_())).rotateLeft_()).colorFlip_()),t},t.prototype.moveRedRight_=function(){var t=this.colorFlip_();return t.left.left.isRed_()&&(t=(t=t.rotateRight_()).colorFlip_()),t},t.prototype.rotateLeft_=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight_=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip_=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth_=function(){var t=this.check_();return Math.pow(2,t)<=this.count()+1},t.prototype.check_=function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)},t.RED=!0,t.BLACK=!1,t}(),Vt=function(){function t(){}return t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new Ft(t,e,null)},t.prototype.remove=function(t,e){return this},t.prototype.count=function(){return 0},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.check_=function(){return 0},t.prototype.isRed_=function(){return!1},t}(),Ut=function(){function t(e,n){void 0===n&&(n=t.EMPTY_NODE),this.comparator_=e,this.root_=n}return t.prototype.insert=function(e,n){return new t(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,Ft.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Ft.BLACK,null,null))},t.prototype.get=function(t){for(var e,n=this.root_;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key)))return n.value;e<0?n=n.left:e>0&&(n=n.right)}return null},t.prototype.getPredecessorKey=function(t){for(var e,n=this.root_,r=null;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}e<0?n=n.left:e>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")},t.prototype.isEmpty=function(){return this.root_.isEmpty()},t.prototype.count=function(){return this.root_.count()},t.prototype.minKey=function(){return this.root_.minKey()},t.prototype.maxKey=function(){return this.root_.maxKey()},t.prototype.inorderTraversal=function(t){return this.root_.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.root_.reverseTraversal(t)},t.prototype.getIterator=function(t){return new Lt(this.root_,null,this.comparator_,!1,t)},t.prototype.getIteratorFrom=function(t,e){return new Lt(this.root_,t,this.comparator_,!1,e)},t.prototype.getReverseIteratorFrom=function(t,e){return new Lt(this.root_,t,this.comparator_,!0,e)},t.prototype.getReverseIterator=function(t){return new Lt(this.root_,null,this.comparator_,!0,t)},t.EMPTY_NODE=new Vt,t}(),qt=function(){function t(t,e){this.name=t,this.node=e}return t.Wrap=function(e,n){return new t(e,n)},t}(),Bt=function(){function t(){}return t.prototype.getCompare=function(){return this.compare.bind(this)},t.prototype.indexedValueChanged=function(t,e){var n=new qt(T,t),r=new qt(T,e);return 0!==this.compare(n,r)},t.prototype.minPost=function(){return qt.MIN},t}(),Ht=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(i.c)(e,t),e.prototype.compare=function(t,e){var n=t.node.getPriority(),r=e.node.getPriority(),i=n.compareTo(r);return 0===i?x(t.name,e.name):i},e.prototype.isDefinedOn=function(t){return!t.getPriority().isEmpty()},e.prototype.indexedValueChanged=function(t,e){return!t.getPriority().equals(e.getPriority())},e.prototype.minPost=function(){return qt.MIN},e.prototype.maxPost=function(){return new qt(I,new Mt("[PRIORITY-POST]",ht))},e.prototype.makePost=function(t,e){var n=lt(t);return new qt(e,new Mt("[PRIORITY-POST]",n))},e.prototype.toString=function(){return".priority"},e}(Bt)),zt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(i.c)(e,t),Object.defineProperty(e,"__EMPTY_NODE",{get:function(){return dt},set:function(t){dt=t},enumerable:!1,configurable:!0}),e.prototype.compare=function(t,e){return x(t.name,e.name)},e.prototype.isDefinedOn=function(t){throw Object(o.e)("KeyIndex.isDefinedOn not expected to be called.")},e.prototype.indexedValueChanged=function(t,e){return!1},e.prototype.minPost=function(){return qt.MIN},e.prototype.maxPost=function(){return new qt(I,dt)},e.prototype.makePost=function(t,e){return Object(o.d)("string"==typeof t,"KeyIndex indexValue must always be a string."),new qt(t,dt)},e.prototype.toString=function(){return".key"},e}(Bt),Gt=new zt,Qt=Math.log(2),Wt=function(){function t(t){this.count=parseInt(Math.log(t+1)/Qt,10),this.current_=this.count-1;var e=parseInt(Array(this.count+1).join("1"),2);this.bits_=t+1&e}return t.prototype.nextBitIsOne=function(){var t=!(this.bits_&1<<this.current_);return this.current_--,t},t}(),Kt=function(t,e,n,r){t.sort(e);var i=function(e,r){var o,s,a=r-e;if(0===a)return null;if(1===a)return o=t[e],s=n?n(o):o,new Ft(s,o.node,Ft.BLACK,null,null);var u=parseInt(a/2,10)+e,c=i(e,u),l=i(u+1,r);return o=t[u],s=n?n(o):o,new Ft(s,o.node,Ft.BLACK,c,l)},o=function(e){for(var r=null,o=null,s=t.length,a=function(e,r){var o=s-e,a=s;s-=e;var c=i(o+1,a),l=t[o],h=n?n(l):l;u(new Ft(h,l.node,r,null,c))},u=function(t){r?(r.left=t,r=t):(o=t,r=t)},c=0;c<e.count;++c){var l=e.nextBitIsOne(),h=Math.pow(2,e.count-(c+1));l?a(h,Ft.BLACK):(a(h,Ft.BLACK),a(h,Ft.RED))}return o}(new Wt(t.length));return new Ut(r||e,o)},Yt={},$t=function(){function t(t,e){this.indexes_=t,this.indexSet_=e}return Object.defineProperty(t,"Default",{get:function(){return Object(o.d)(Yt&&Ht,"ChildrenNode.ts has not been loaded"),ft=ft||new t({".priority":Yt},{".priority":Ht})},enumerable:!1,configurable:!0}),t.prototype.get=function(t){var e=Object(o.C)(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e instanceof Ut?e:null},t.prototype.hasIndex=function(t){return Object(o.h)(this.indexSet_,t.toString())},t.prototype.addIndex=function(e,n){Object(o.d)(e!==Gt,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var r,s=[],a=!1,u=n.getIterator(qt.Wrap),c=u.getNext();c;)a=a||e.isDefinedOn(c.node),s.push(c),c=u.getNext();r=a?Kt(s,e.getCompare()):Yt;var l=e.toString(),h=Object(i.a)({},this.indexSet_);h[l]=e;var d=Object(i.a)({},this.indexes_);return d[l]=r,new t(d,h)},t.prototype.addToIndexes=function(e,n){var r=this;return new t(Object(o.A)(this.indexes_,function(t,i){var s=Object(o.C)(r.indexSet_,i);if(Object(o.d)(s,"Missing index implementation for "+i),t===Yt){if(s.isDefinedOn(e.node)){for(var a=[],u=n.getIterator(qt.Wrap),c=u.getNext();c;)c.name!==e.name&&a.push(c),c=u.getNext();return a.push(e),Kt(a,s.getCompare())}return Yt}var l=n.get(e.name),h=t;return l&&(h=h.remove(new qt(e.name,l))),h.insert(e,e.node)}),this.indexSet_)},t.prototype.removeFromIndexes=function(e,n){return new t(Object(o.A)(this.indexes_,function(t){if(t===Yt)return t;var r=n.get(e.name);return r?t.remove(new qt(e.name,r)):t}),this.indexSet_)},t}();function Jt(t,e){return x(t.name,e.name)}function Xt(t,e){return x(t,e)}var Zt=function(){function t(t,e,n){this.children_=t,this.priorityNode_=e,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&Dt(this.priorityNode_),this.children_.isEmpty()&&Object(o.d)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return Object.defineProperty(t,"EMPTY_NODE",{get:function(){return pt||(pt=new t(new Ut(Xt),null,$t.Default))},enumerable:!1,configurable:!0}),t.prototype.isLeafNode=function(){return!1},t.prototype.getPriority=function(){return this.priorityNode_||pt},t.prototype.updatePriority=function(e){return this.children_.isEmpty()?this:new t(this.children_,e,this.indexMap_)},t.prototype.getImmediateChild=function(t){if(".priority"===t)return this.getPriority();var e=this.children_.get(t);return null===e?pt:e},t.prototype.getChild=function(t){var e=q(t);return null===e?this:this.getImmediateChild(e).getChild(H(t))},t.prototype.hasChild=function(t){return null!==this.children_.get(t)},t.prototype.updateImmediateChild=function(e,n){if(Object(o.d)(n,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(n);var r=new qt(e,n),i=void 0,s=void 0;n.isEmpty()?(i=this.children_.remove(e),s=this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(e,n),s=this.indexMap_.addToIndexes(r,this.children_));var a=i.isEmpty()?pt:this.priorityNode_;return new t(i,a,s)},t.prototype.updateChild=function(t,e){var n=q(t);if(null===n)return e;Object(o.d)(".priority"!==q(t)||1===B(t),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(H(t),e);return this.updateImmediateChild(n,r)},t.prototype.isEmpty=function(){return this.children_.isEmpty()},t.prototype.numChildren=function(){return this.children_.count()},t.prototype.val=function(e){if(this.isEmpty())return null;var n={},r=0,i=0,o=!0;if(this.forEachChild(Ht,function(s,a){n[s]=a.val(e),r++,o&&t.INTEGER_REGEXP_.test(s)?i=Math.max(i,Number(s)):o=!1}),!e&&o&&i<2*r){var s=[];for(var a in n)s[a]=n[a];return s}return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.getPriority().isEmpty()||(t+="priority:"+Rt(this.getPriority().val())+":"),this.forEachChild(Ht,function(e,n){var r=n.hash();""!==r&&(t+=":"+e+":"+r)}),this.lazyHash_=""===t?"":g(t)}return this.lazyHash_},t.prototype.getPredecessorChildName=function(t,e,n){var r=this.resolveIndex_(n);if(r){var i=r.getPredecessorKey(new qt(t,e));return i?i.name:null}return this.children_.getPredecessorKey(t)},t.prototype.getFirstChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.minKey();return n&&n.name}return this.children_.minKey()},t.prototype.getFirstChild=function(t){var e=this.getFirstChildName(t);return e?new qt(e,this.children_.get(e)):null},t.prototype.getLastChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.maxKey();return n&&n.name}return this.children_.maxKey()},t.prototype.getLastChild=function(t){var e=this.getLastChildName(t);return e?new qt(e,this.children_.get(e)):null},t.prototype.forEachChild=function(t,e){var n=this.resolveIndex_(t);return n?n.inorderTraversal(function(t){return e(t.name,t.node)}):this.children_.inorderTraversal(e)},t.prototype.getIterator=function(t){return this.getIteratorFrom(t.minPost(),t)},t.prototype.getIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getIteratorFrom(t,function(t){return t});for(var r=this.children_.getIteratorFrom(t.name,qt.Wrap),i=r.peek();null!=i&&e.compare(i,t)<0;)r.getNext(),i=r.peek();return r},t.prototype.getReverseIterator=function(t){return this.getReverseIteratorFrom(t.maxPost(),t)},t.prototype.getReverseIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getReverseIteratorFrom(t,function(t){return t});for(var r=this.children_.getReverseIteratorFrom(t.name,qt.Wrap),i=r.peek();null!=i&&e.compare(i,t)>0;)r.getNext(),i=r.peek();return r},t.prototype.compareTo=function(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===te?-1:0},t.prototype.withIndex=function(e){if(e===Gt||this.indexMap_.hasIndex(e))return this;var n=this.indexMap_.addIndex(e,this.children_);return new t(this.children_,this.priorityNode_,n)},t.prototype.isIndexed=function(t){return t===Gt||this.indexMap_.hasIndex(t)},t.prototype.equals=function(t){if(t===this)return!0;if(t.isLeafNode())return!1;var e=t;if(this.getPriority().equals(e.getPriority())){if(this.children_.count()===e.children_.count()){for(var n=this.getIterator(Ht),r=e.getIterator(Ht),i=n.getNext(),o=r.getNext();i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=n.getNext(),o=r.getNext()}return null===i&&null===o}return!1}return!1},t.prototype.resolveIndex_=function(t){return t===Gt?null:this.indexMap_.get(t.toString())},t.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,t}(),te=new(function(t){function e(){return t.call(this,new Ut(Xt),Zt.EMPTY_NODE,$t.Default)||this}return Object(i.c)(e,t),e.prototype.compareTo=function(t){return t===this?0:1},e.prototype.equals=function(t){return t===this},e.prototype.getPriority=function(){return this},e.prototype.getImmediateChild=function(t){return Zt.EMPTY_NODE},e.prototype.isEmpty=function(){return!1},e}(Zt));function ee(t,e){if(void 0===e&&(e=null),null===t)return Zt.EMPTY_NODE;if("object"==typeof t&&".priority"in t&&(e=t[".priority"]),Object(o.d)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof t&&".value"in t&&null!==t[".value"]&&(t=t[".value"]),"object"!=typeof t||".sv"in t)return new Mt(t,ee(e));if(t instanceof Array){var n=Zt.EMPTY_NODE;return P(t,function(e,r){if(Object(o.h)(t,e)&&"."!==e.substring(0,1)){var i=ee(r);!i.isLeafNode()&&i.isEmpty()||(n=n.updateImmediateChild(e,i))}}),n.updatePriority(ee(e))}var r=[],i=!1;if(P(t,function(t,e){if("."!==t.substring(0,1)){var n=ee(e);n.isEmpty()||(i=i||!n.getPriority().isEmpty(),r.push(new qt(t,n)))}}),0===r.length)return Zt.EMPTY_NODE;var s=Kt(r,Jt,function(t){return t.name},Xt);if(i){var a=Kt(r,Ht.getCompare());return new Zt(s,ee(e),new $t({".priority":a},{".priority":Ht}))}return new Zt(s,ee(e),$t.Default)}Object.defineProperties(qt,{MIN:{value:new qt(T,Zt.EMPTY_NODE)},MAX:{value:new qt(I,te)}}),zt.__EMPTY_NODE=Zt.EMPTY_NODE,Mt.__childrenNodeConstructor=Zt,ut=te,ht=te,lt=ee;var ne=function(t){return t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",t}({});function re(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}var ie,oe=function(){function t(t,e,n){this.path=t,this.affectedTree=e,this.revert=n,this.type=ne.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}return t.prototype.operationForChild=function(e){if(Y(this.path)){if(null!=this.affectedTree.value)return Object(o.d)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new V(e));return new t(U(),n,this.revert)}return Object(o.d)(q(this.path)===e,"operationForChild called for unrelated child."),new t(H(this.path),this.affectedTree,this.revert)},t}(),se=function(){function t(t,e){void 0===e&&(ie||(ie=new Ut(A)),e=ie),this.value=t,this.children=e}return t.fromObject=function(e){var n=new t(null);return P(e,function(t,e){n=n.set(new V(t),e)}),n},t.prototype.isEmpty=function(){return null===this.value&&this.children.isEmpty()},t.prototype.findRootMostMatchingPathAndValue=function(t,e){if(null!=this.value&&e(this.value))return{path:U(),value:this.value};if(Y(t))return null;var n=q(t),r=this.children.get(n);if(null!==r){var i=r.findRootMostMatchingPathAndValue(H(t),e);return null!=i?{path:K(new V(n),i.path),value:i.value}:null}return null},t.prototype.findRootMostValueAndPath=function(t){return this.findRootMostMatchingPathAndValue(t,function(){return!0})},t.prototype.subtree=function(e){if(Y(e))return this;var n=q(e),r=this.children.get(n);return null!==r?r.subtree(H(e)):new t(null)},t.prototype.set=function(e,n){if(Y(e))return new t(n,this.children);var r=q(e),i=(this.children.get(r)||new t(null)).set(H(e),n),o=this.children.insert(r,i);return new t(this.value,o)},t.prototype.remove=function(e){if(Y(e))return this.children.isEmpty()?new t(null):new t(null,this.children);var n=q(e),r=this.children.get(n);if(r){var i=r.remove(H(e)),o=void 0;return o=i.isEmpty()?this.children.remove(n):this.children.insert(n,i),null===this.value&&o.isEmpty()?new t(null):new t(this.value,o)}return this},t.prototype.get=function(t){if(Y(t))return this.value;var e=q(t),n=this.children.get(e);return n?n.get(H(t)):null},t.prototype.setTree=function(e,n){if(Y(e))return n;var r,i=q(e),o=(this.children.get(i)||new t(null)).setTree(H(e),n);return r=o.isEmpty()?this.children.remove(i):this.children.insert(i,o),new t(this.value,r)},t.prototype.fold=function(t){return this.fold_(U(),t)},t.prototype.fold_=function(t,e){var n={};return this.children.inorderTraversal(function(r,i){n[r]=i.fold_(K(t,r),e)}),e(t,this.value,n)},t.prototype.findOnPath=function(t,e){return this.findOnPath_(t,U(),e)},t.prototype.findOnPath_=function(t,e,n){var r=!!this.value&&n(e,this.value);if(r)return r;if(Y(t))return null;var i=q(t),o=this.children.get(i);return o?o.findOnPath_(H(t),K(e,i),n):null},t.prototype.foreachOnPath=function(t,e){return this.foreachOnPath_(t,U(),e)},t.prototype.foreachOnPath_=function(e,n,r){if(Y(e))return this;this.value&&r(n,this.value);var i=q(e),o=this.children.get(i);return o?o.foreachOnPath_(H(e),K(n,i),r):new t(null)},t.prototype.foreach=function(t){this.foreach_(U(),t)},t.prototype.foreach_=function(t,e){this.children.inorderTraversal(function(n,r){r.foreach_(K(t,n),e)}),this.value&&e(t,this.value)},t.prototype.foreachChild=function(t){this.children.inorderTraversal(function(e,n){n.value&&t(e,n.value)})},t}(),ae=function(){function t(t,e){this.source=t,this.path=e,this.type=ne.LISTEN_COMPLETE}return t.prototype.operationForChild=function(e){return Y(this.path)?new t(this.source,U()):new t(this.source,H(this.path))},t}(),ue=function(){function t(t,e,n){this.source=t,this.path=e,this.snap=n,this.type=ne.OVERWRITE}return t.prototype.operationForChild=function(e){return Y(this.path)?new t(this.source,U(),this.snap.getImmediateChild(e)):new t(this.source,H(this.path),this.snap)},t}(),ce=function(){function t(t,e,n){this.source=t,this.path=e,this.children=n,this.type=ne.MERGE}return t.prototype.operationForChild=function(e){if(Y(this.path)){var n=this.children.subtree(new V(e));return n.isEmpty()?null:n.value?new ue(this.source,U(),n.value):new t(this.source,U(),n)}return Object(o.d)(q(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new t(this.source,H(this.path),this.children)},t.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"},t}(),le=function(){function t(t,e,n){this.node_=t,this.fullyInitialized_=e,this.filtered_=n}return t.prototype.isFullyInitialized=function(){return this.fullyInitialized_},t.prototype.isFiltered=function(){return this.filtered_},t.prototype.isCompleteForPath=function(t){if(Y(t))return this.isFullyInitialized()&&!this.filtered_;var e=q(t);return this.isCompleteForChild(e)},t.prototype.isCompleteForChild=function(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)},t.prototype.getNode=function(){return this.node_},t}();function he(t,e){return{eventCache:t,serverCache:e}}function de(t,e,n,r){return he(new le(e,n,r),t.serverCache)}function fe(t,e,n,r){return he(t.eventCache,new le(e,n,r))}function pe(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function ge(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}function ye(t){return{type:"value",snapshotNode:t}}function me(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function ve(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function be(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}var _e=function(){function t(t){this.index_=t}return t.prototype.updateChild=function(t,e,n,r,i,s){Object(o.d)(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");var a=t.getImmediateChild(e);return a.getChild(r).equals(n.getChild(r))&&a.isEmpty()===n.isEmpty()?t:(null!=s&&(n.isEmpty()?t.hasChild(e)?s.trackChildChange(ve(e,a)):Object(o.d)(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?s.trackChildChange(me(e,n)):s.trackChildChange(be(e,n,a))),t.isLeafNode()&&n.isEmpty()?t:t.updateImmediateChild(e,n).withIndex(this.index_))},t.prototype.updateFullNode=function(t,e,n){return null!=n&&(t.isLeafNode()||t.forEachChild(Ht,function(t,r){e.hasChild(t)||n.trackChildChange(ve(t,r))}),e.isLeafNode()||e.forEachChild(Ht,function(e,r){if(t.hasChild(e)){var i=t.getImmediateChild(e);i.equals(r)||n.trackChildChange(be(e,r,i))}else n.trackChildChange(me(e,r))})),e.withIndex(this.index_)},t.prototype.updatePriority=function(t,e){return t.isEmpty()?Zt.EMPTY_NODE:t.updatePriority(e)},t.prototype.filtersNodes=function(){return!1},t.prototype.getIndexedFilter=function(){return this},t.prototype.getIndex=function(){return this.index_},t}(),we=function(){function t(){this.changeMap=new Map}return t.prototype.trackChildChange=function(t){var e=t.type,n=t.childName;Object(o.d)("child_added"===e||"child_changed"===e||"child_removed"===e,"Only child changes supported for tracking"),Object(o.d)(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var i=r.type;if("child_added"===e&&"child_removed"===i)this.changeMap.set(n,be(n,t.snapshotNode,r.snapshotNode));else if("child_removed"===e&&"child_added"===i)this.changeMap.delete(n);else if("child_removed"===e&&"child_changed"===i)this.changeMap.set(n,ve(n,r.oldSnap));else if("child_changed"===e&&"child_added"===i)this.changeMap.set(n,me(n,t.snapshotNode));else{if("child_changed"!==e||"child_changed"!==i)throw Object(o.e)("Illegal combination of changes: "+t+" occurred after "+r);this.changeMap.set(n,be(n,t.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,t)},t.prototype.getChanges=function(){return Array.from(this.changeMap.values())},t}(),Ce=function(){function t(t){this.writeTree_=t}return t.empty=function(){return new t(new se(null))},t}();function Oe(t,e,n){if(Y(e))return new Ce(new se(n));var r=t.writeTree_.findRootMostValueAndPath(e);if(null!=r){var i=r.path,o=r.value,s=$(i,e);return o=o.updateChild(s,n),new Ce(t.writeTree_.set(i,o))}var a=new se(n),u=t.writeTree_.setTree(e,a);return new Ce(u)}function Ee(t,e,n){var r=t;return P(n,function(t,n){r=Oe(r,K(e,t),n)}),r}function Se(t,e){if(Y(e))return Ce.empty();var n=t.writeTree_.setTree(e,new se(null));return new Ce(n)}function Te(t,e){return null!=Ie(t,e)}function Ie(t,e){var n=t.writeTree_.findRootMostValueAndPath(e);return null!=n?t.writeTree_.get(n.path).getChild($(n.path,e)):null}function xe(t){var e=[],n=t.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(Ht,function(t,n){e.push(new qt(t,n))}):t.writeTree_.children.inorderTraversal(function(t,n){null!=n.value&&e.push(new qt(t,n.value))}),e}function Ae(t,e){if(Y(e))return t;var n=Ie(t,e);return new Ce(null!=n?new se(n):t.writeTree_.subtree(e))}function je(t){return t.writeTree_.isEmpty()}function ke(t,e){return Ne(U(),t.writeTree_,e)}function Ne(t,e,n){if(null!=e.value)return n.updateChild(t,e.value);var r=null;return e.children.inorderTraversal(function(e,i){".priority"===e?(Object(o.d)(null!==i.value,"Priority writes must always be leaf nodes"),r=i.value):n=Ne(K(t,e),i,n)}),n.getChild(t).isEmpty()||null===r||(n=n.updateChild(K(t,".priority"),r)),n}function Pe(t,e){return ze(e,t)}function Re(t,e){if(t.snap)return Z(t.path,e);for(var n in t.children)if(t.children.hasOwnProperty(n)&&Z(K(t.path,n),e))return!0;return!1}function De(t){return t.visible}function Me(t,e,n){for(var r=Ce.empty(),i=0;i<t.length;++i){var s=t[i];if(e(s)){var a=s.path,u=void 0;if(s.snap)Z(n,a)?r=Oe(r,u=$(n,a),s.snap):Z(a,n)&&(u=$(a,n),r=Oe(r,U(),s.snap.getChild(u)));else{if(!s.children)throw Object(o.e)("WriteRecord should have .snap or .children");if(Z(n,a))r=Ee(r,u=$(n,a),s.children);else if(Z(a,n))if(Y(u=$(a,n)))r=Ee(r,U(),s.children);else{var c=Object(o.C)(s.children,q(u));if(c){var l=c.getChild(H(u));r=Oe(r,U(),l)}}}}}return r}function Le(t,e,n,r,i){if(r||i){var o=Ae(t.visibleWrites,e);return!i&&je(o)?n:i||null!=n||Te(o,U())?ke(Me(t.allWrites,function(t){return(t.visible||i)&&(!r||!~r.indexOf(t.writeId))&&(Z(t.path,e)||Z(e,t.path))},e),n||Zt.EMPTY_NODE):null}var s=Ie(t.visibleWrites,e);if(null!=s)return s;var a=Ae(t.visibleWrites,e);return je(a)?n:null!=n||Te(a,U())?ke(a,n||Zt.EMPTY_NODE):null}function Fe(t,e,n,r){return Le(t.writeTree,t.treePath,e,n,r)}function Ve(t,e){return function(t,e,n){var r=Zt.EMPTY_NODE,i=Ie(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(Ht,function(t,e){r=r.updateImmediateChild(t,e)}),r;if(n){var o=Ae(t.visibleWrites,e);return n.forEachChild(Ht,function(t,e){var n=ke(Ae(o,new V(t)),e);r=r.updateImmediateChild(t,n)}),xe(o).forEach(function(t){r=r.updateImmediateChild(t.name,t.node)}),r}return xe(Ae(t.visibleWrites,e)).forEach(function(t){r=r.updateImmediateChild(t.name,t.node)}),r}(t.writeTree,t.treePath,e)}function Ue(t,e,n,r){return function(t,e,n,r,i){Object(o.d)(r||i,"Either existingEventSnap or existingServerSnap must exist");var s=K(e,n);if(Te(t.visibleWrites,s))return null;var a=Ae(t.visibleWrites,s);return je(a)?i.getChild(n):ke(a,i.getChild(n))}(t.writeTree,t.treePath,e,n,r)}function qe(t,e){return function(t,e){return Ie(t.visibleWrites,e)}(t.writeTree,K(t.treePath,e))}function Be(t,e,n){return function(t,e,n,r){var i=K(e,n),o=Ie(t.visibleWrites,i);return null!=o?o:r.isCompleteForChild(n)?ke(Ae(t.visibleWrites,i),r.getNode().getImmediateChild(n)):null}(t.writeTree,t.treePath,e,n)}function He(t,e){return ze(K(t.treePath,e),t.writeTree)}function ze(t,e){return{treePath:t,writeTree:e}}var Ge=new(function(){function t(){}return t.prototype.getCompleteChild=function(t){return null},t.prototype.getChildAfterChild=function(t,e,n){return null},t}()),Qe=function(){function t(t,e,n){void 0===n&&(n=null),this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=n}return t.prototype.getCompleteChild=function(t){var e=this.viewCache_.eventCache;if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);var n=null!=this.optCompleteServerCache_?new le(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Be(this.writes_,t,n)},t.prototype.getChildAfterChild=function(t,e,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:ge(this.viewCache_),i=function(t,e,n,r,i,o){return function(t,e,n,r,i,o,s){var a,u=Ae(t.visibleWrites,e),c=Ie(u,U());if(null!=c)a=c;else{if(null==n)return[];a=ke(u,n)}if((a=a.withIndex(s)).isEmpty()||a.isLeafNode())return[];for(var l=[],h=s.getCompare(),d=o?a.getReverseIteratorFrom(r,s):a.getIteratorFrom(r,s),f=d.getNext();f&&l.length<1;)0!==h(f,r)&&l.push(f),f=d.getNext();return l}(t.writeTree,t.treePath,e,n,0,i,o)}(this.writes_,r,e,0,n,t);return 0===i.length?null:i[0]},t}();function We(t,e,n,r,i,s){var a=e.eventCache;if(null!=qe(r,n))return e;var u=void 0,c=void 0;if(Y(n))if(Object(o.d)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){var l=ge(e),h=Ve(r,l instanceof Zt?l:Zt.EMPTY_NODE);u=t.filter.updateFullNode(e.eventCache.getNode(),h,s)}else{var d=Fe(r,ge(e));u=t.filter.updateFullNode(e.eventCache.getNode(),d,s)}else{var f=q(n);if(".priority"===f){Object(o.d)(1===B(n),"Can't have a priority with additional path components");var p=a.getNode(),g=Ue(r,n,p,c=e.serverCache.getNode());u=null!=g?t.filter.updatePriority(p,g):a.getNode()}else{var y=H(n),m=void 0;if(a.isCompleteForChild(f)){c=e.serverCache.getNode();var v=Ue(r,n,a.getNode(),c);m=null!=v?a.getNode().getImmediateChild(f).updateChild(y,v):a.getNode().getImmediateChild(f)}else m=Be(r,f,e.serverCache);u=null!=m?t.filter.updateChild(a.getNode(),f,m,y,i,s):a.getNode()}}return de(e,u,a.isFullyInitialized()||Y(n),t.filter.filtersNodes())}function Ke(t,e,n,r,i,o,s,a){var u,c=e.serverCache,l=s?t.filter:t.filter.getIndexedFilter();if(Y(n))u=l.updateFullNode(c.getNode(),r,null);else if(l.filtersNodes()&&!c.isFiltered()){var h=c.getNode().updateChild(n,r);u=l.updateFullNode(c.getNode(),h,null)}else{var d=q(n);if(!c.isCompleteForPath(n)&&B(n)>1)return e;var f=H(n),p=c.getNode().getImmediateChild(d).updateChild(f,r);u=".priority"===d?l.updatePriority(c.getNode(),p):l.updateChild(c.getNode(),d,p,f,Ge,null)}var g=fe(e,u,c.isFullyInitialized()||Y(n),l.filtersNodes());return We(t,g,n,i,new Qe(i,g,o),a)}function Ye(t,e,n,r,i,o,s){var a,u,c=e.eventCache,l=new Qe(i,e,o);if(Y(n))u=t.filter.updateFullNode(e.eventCache.getNode(),r,s),a=de(e,u,!0,t.filter.filtersNodes());else{var h=q(n);if(".priority"===h)u=t.filter.updatePriority(e.eventCache.getNode(),r),a=de(e,u,c.isFullyInitialized(),c.isFiltered());else{var d=H(n),f=c.getNode().getImmediateChild(h),p=void 0;if(Y(d))p=r;else{var g=l.getCompleteChild(h);p=null!=g?".priority"===z(d)&&g.getChild(W(d)).isEmpty()?g:g.updateChild(d,r):Zt.EMPTY_NODE}a=f.equals(p)?e:de(e,t.filter.updateChild(c.getNode(),h,p,d,l,s),c.isFullyInitialized(),t.filter.filtersNodes())}}return a}function $e(t,e){return t.eventCache.isCompleteForChild(e)}function Je(t,e,n){return n.foreach(function(t,n){e=e.updateChild(t,n)}),e}function Xe(t,e,n,r,i,o,s,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;var u,c=e;u=Y(n)?r:new se(null).setTree(n,r);var l=e.serverCache.getNode();return u.children.inorderTraversal(function(n,r){if(l.hasChild(n)){var u=Je(0,e.serverCache.getNode().getImmediateChild(n),r);c=Ke(t,c,new V(n),u,i,o,s,a)}}),u.children.inorderTraversal(function(n,r){var u=!e.serverCache.isCompleteForChild(n)&&void 0===r.value;if(!l.hasChild(n)&&!u){var h=Je(0,e.serverCache.getNode().getImmediateChild(n),r);c=Ke(t,c,new V(n),h,i,o,s,a)}}),c}var Ze=function(){return function(t){this.query_=t,this.index_=this.query_.getQueryParams().getIndex()}}();function tn(t,e,n,r,i,s){var a=r.filter(function(t){return t.type===n});a.sort(function(e,n){return function(t,e,n){if(null==e.childName||null==n.childName)throw Object(o.e)("Should only compare child_ events.");var r=new qt(e.childName,e.snapshotNode),i=new qt(n.childName,n.snapshotNode);return t.index_.compare(r,i)}(t,e,n)}),a.forEach(function(n){var r=function(t,e,n){return"value"===e.type||"child_removed"===e.type||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}(t,n,s);i.forEach(function(i){i.respondsTo(n.type)&&e.push(i.createEvent(r,t.query_))})})}var en,nn,rn="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",on=(en=0,nn=[],function(t){var e,n=t===en;en=t;var r=new Array(8);for(e=7;e>=0;e--)r[e]=rn.charAt(t%64),t=Math.floor(t/64);Object(o.d)(0===t,"Cannot push at time == 0");var i=r.join("");if(n){for(e=11;e>=0&&63===nn[e];e--)nn[e]=0;nn[e]++}else for(e=0;e<12;e++)nn[e]=Math.floor(64*Math.random());for(e=0;e<12;e++)i+=rn.charAt(nn[e]);return Object(o.d)(20===i.length,"nextPushId: Length should be 20."),i}),sn=function(t){if("2147483647"===t)return"-";var e=M(t);if(null!=e)return""+(e+1);for(var n=new Array(t.length),r=0;r<n.length;r++)n[r]=t.charAt(r);if(n.length<786)return n.push("-"),n.join("");for(var i=n.length-1;i>=0&&"z"===n[i];)i--;if(-1===i)return I;var o=rn.charAt(rn.indexOf(n[i])+1);return n[i]=o,n.slice(0,i+1).join("")},an=function(t){if("-2147483648"===t)return T;var e=M(t);if(null!=e)return""+(e-1);for(var n=new Array(t.length),r=0;r<n.length;r++)n[r]=t.charAt(r);return"-"===n[n.length-1]?1===n.length?"2147483647":(delete n[n.length-1],n.join("")):(n[n.length-1]=rn.charAt(rn.indexOf(n[n.length-1])-1),n.join("")+"z".repeat(786-n.length))},un=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(i.c)(e,t),e.prototype.compare=function(t,e){var n=t.node.compareTo(e.node);return 0===n?x(t.name,e.name):n},e.prototype.isDefinedOn=function(t){return!0},e.prototype.indexedValueChanged=function(t,e){return!t.equals(e)},e.prototype.minPost=function(){return qt.MIN},e.prototype.maxPost=function(){return qt.MAX},e.prototype.makePost=function(t,e){var n=ee(t);return new qt(e,n)},e.prototype.toString=function(){return".value"},e}(Bt)),cn=function(t){function e(e){var n=t.call(this)||this;return n.indexPath_=e,Object(o.d)(!Y(e)&&".priority"!==q(e),"Can't create PathIndex with empty path or .priority key"),n}return Object(i.c)(e,t),e.prototype.extractChild=function(t){return t.getChild(this.indexPath_)},e.prototype.isDefinedOn=function(t){return!t.getChild(this.indexPath_).isEmpty()},e.prototype.compare=function(t,e){var n=this.extractChild(t.node),r=this.extractChild(e.node),i=n.compareTo(r);return 0===i?x(t.name,e.name):i},e.prototype.makePost=function(t,e){var n=ee(t),r=Zt.EMPTY_NODE.updateChild(this.indexPath_,n);return new qt(e,r)},e.prototype.maxPost=function(){var t=Zt.EMPTY_NODE.updateChild(this.indexPath_,te);return new qt(I,t)},e.prototype.toString=function(){return Q(this.indexPath_,0).join("/")},e}(Bt),ln=function(){function t(e){this.indexedFilter_=new _e(e.getIndex()),this.index_=e.getIndex(),this.startPost_=t.getStartPost_(e),this.endPost_=t.getEndPost_(e)}return t.prototype.getStartPost=function(){return this.startPost_},t.prototype.getEndPost=function(){return this.endPost_},t.prototype.matches=function(t){return this.index_.compare(this.getStartPost(),t)<=0&&this.index_.compare(t,this.getEndPost())<=0},t.prototype.updateChild=function(t,e,n,r,i,o){return this.matches(new qt(e,n))||(n=Zt.EMPTY_NODE),this.indexedFilter_.updateChild(t,e,n,r,i,o)},t.prototype.updateFullNode=function(t,e,n){e.isLeafNode()&&(e=Zt.EMPTY_NODE);var r=e.withIndex(this.index_);r=r.updatePriority(Zt.EMPTY_NODE);var i=this;return e.forEachChild(Ht,function(t,e){i.matches(new qt(t,e))||(r=r.updateImmediateChild(t,Zt.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.indexedFilter_},t.prototype.getIndex=function(){return this.index_},t.getStartPost_=function(t){if(t.hasStart()){var e=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),e)}return t.getIndex().minPost()},t.getEndPost_=function(t){if(t.hasEnd()){var e=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),e)}return t.getIndex().maxPost()},t}(),hn=function(){function t(t){this.rangedFilter_=new ln(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}return t.prototype.updateChild=function(t,e,n,r,i,o){return this.rangedFilter_.matches(new qt(e,n))||(n=Zt.EMPTY_NODE),t.getImmediateChild(e).equals(n)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,e,n,r,i,o):this.fullLimitUpdateChild_(t,e,n,i,o)},t.prototype.updateFullNode=function(t,e,n){var r;if(e.isLeafNode()||e.isEmpty())r=Zt.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<e.numChildren()&&e.isIndexed(this.index_)){r=Zt.EMPTY_NODE.withIndex(this.index_);var i=void 0;i=this.reverse_?e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var o=0;i.hasNext()&&o<this.limit_;){var s=i.getNext();if(!(this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),s)<=0:this.index_.compare(s,this.rangedFilter_.getEndPost())<=0))break;r=r.updateImmediateChild(s.name,s.node),o++}}else{r=(r=e.withIndex(this.index_)).updatePriority(Zt.EMPTY_NODE);var a=void 0,u=void 0,c=void 0;if(i=void 0,this.reverse_){i=r.getReverseIterator(this.index_),a=this.rangedFilter_.getEndPost(),u=this.rangedFilter_.getStartPost();var l=this.index_.getCompare();c=function(t,e){return l(e,t)}}else i=r.getIterator(this.index_),a=this.rangedFilter_.getStartPost(),u=this.rangedFilter_.getEndPost(),c=this.index_.getCompare();o=0;for(var h=!1;i.hasNext();)s=i.getNext(),!h&&c(a,s)<=0&&(h=!0),h&&o<this.limit_&&c(s,u)<=0?o++:r=r.updateImmediateChild(s.name,Zt.EMPTY_NODE)}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.rangedFilter_.getIndexedFilter()},t.prototype.getIndex=function(){return this.index_},t.prototype.fullLimitUpdateChild_=function(t,e,n,r,i){var s;if(this.reverse_){var a=this.index_.getCompare();s=function(t,e){return a(e,t)}}else s=this.index_.getCompare();var u=t;Object(o.d)(u.numChildren()===this.limit_,"");var c=new qt(e,n),l=this.reverse_?u.getFirstChild(this.index_):u.getLastChild(this.index_),h=this.rangedFilter_.matches(c);if(u.hasChild(e)){for(var d=u.getImmediateChild(e),f=r.getChildAfterChild(this.index_,l,this.reverse_);null!=f&&(f.name===e||u.hasChild(f.name));)f=r.getChildAfterChild(this.index_,f,this.reverse_);var p=null==f?1:s(f,c);if(h&&!n.isEmpty()&&p>=0)return null!=i&&i.trackChildChange(be(e,n,d)),u.updateImmediateChild(e,n);null!=i&&i.trackChildChange(ve(e,d));var g=u.updateImmediateChild(e,Zt.EMPTY_NODE);return null!=f&&this.rangedFilter_.matches(f)?(null!=i&&i.trackChildChange(me(f.name,f.node)),g.updateImmediateChild(f.name,f.node)):g}return n.isEmpty()?t:h&&s(l,c)>=0?(null!=i&&(i.trackChildChange(ve(l.name,l.node)),i.trackChildChange(me(e,n))),u.updateImmediateChild(e,n).updateImmediateChild(l.name,Zt.EMPTY_NODE)):t},t}(),dn=function(){function t(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Ht}return t.prototype.hasStart=function(){return this.startSet_},t.prototype.hasStartAfter=function(){return this.startAfterSet_},t.prototype.hasEndBefore=function(){return this.endBeforeSet_},t.prototype.isViewFromLeft=function(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_},t.prototype.getIndexStartValue=function(){return Object(o.d)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_},t.prototype.getIndexStartName=function(){return Object(o.d)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:T},t.prototype.hasEnd=function(){return this.endSet_},t.prototype.getIndexEndValue=function(){return Object(o.d)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_},t.prototype.getIndexEndName=function(){return Object(o.d)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:I},t.prototype.hasLimit=function(){return this.limitSet_},t.prototype.hasAnchoredLimit=function(){return this.limitSet_&&""!==this.viewFrom_},t.prototype.getLimit=function(){return Object(o.d)(this.limitSet_,"Only valid if limit has been set"),this.limit_},t.prototype.getIndex=function(){return this.index_},t.prototype.loadsAllData=function(){return!(this.startSet_||this.endSet_||this.limitSet_)},t.prototype.isDefault=function(){return this.loadsAllData()&&this.index_===Ht},t.prototype.copy=function(){var e=new t;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e},t}();function fn(t,e){var n=t.copy();return n.limitSet_=!0,n.limit_=e,n.viewFrom_="l",n}function pn(t,e){var n=t.copy();return n.limitSet_=!0,n.limit_=e,n.viewFrom_="r",n}function gn(t,e,n){var r=t.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=n?(r.startNameSet_=!0,r.indexStartName_=n):(r.startNameSet_=!1,r.indexStartName_=""),r}function yn(t,e,n){var r;return t.index_===Gt?("string"==typeof e&&(e=sn(e)),r=gn(t,e,n)):r=gn(t,e,null==n?I:sn(n)),r.startAfterSet_=!0,r}function mn(t,e,n){var r=t.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==n?(r.endNameSet_=!0,r.indexEndName_=n):(r.endNameSet_=!1,r.indexEndName_=""),r}function vn(t,e,n){var r;return t.index_===Gt?("string"==typeof e&&(e=an(e)),r=mn(t,e,n)):r=mn(t,e,null==n?T:an(n)),r.endBeforeSet_=!0,r}function bn(t,e){var n=t.copy();return n.index_=e,n}function _n(t){var e,n={};return t.isDefault()||(t.index_===Ht?e="$priority":t.index_===un?e="$value":t.index_===Gt?e="$key":(Object(o.d)(t.index_ instanceof cn,"Unrecognized index type!"),e=t.index_.toString()),n.orderBy=Object(o.F)(e),t.startSet_&&(n.startAt=Object(o.F)(t.indexStartValue_),t.startNameSet_&&(n.startAt+=","+Object(o.F)(t.indexStartName_))),t.endSet_&&(n.endAt=Object(o.F)(t.indexEndValue_),t.endNameSet_&&(n.endAt+=","+Object(o.F)(t.indexEndName_))),t.limitSet_&&(t.isViewFromLeft()?n.limitToFirst=t.limit_:n.limitToLast=t.limit_)),n}var wn,Cn=function(){function t(t,e){this.query_=t,this.eventRegistrations_=[];var n,r=this.query_.getQueryParams(),i=new _e(r.getIndex()),o=(n=r).loadsAllData()?new _e(n.getIndex()):n.hasLimit()?new hn(n):new ln(n);this.processor_=function(t){return{filter:t}}(o);var s=e.serverCache,a=e.eventCache,u=i.updateFullNode(Zt.EMPTY_NODE,s.getNode(),null),c=o.updateFullNode(Zt.EMPTY_NODE,a.getNode(),null),l=new le(u,s.isFullyInitialized(),i.filtersNodes()),h=new le(c,a.isFullyInitialized(),o.filtersNodes());this.viewCache_=he(h,l),this.eventGenerator_=new Ze(this.query_)}return Object.defineProperty(t.prototype,"query",{get:function(){return this.query_},enumerable:!1,configurable:!0}),t}();function On(t,e){var n=ge(t.viewCache_);return n&&(t.query.getQueryParams().loadsAllData()||!Y(e)&&!n.getImmediateChild(q(e)).isEmpty())?n.getChild(e):null}function En(t){return 0===t.eventRegistrations_.length}function Sn(t,e,n){var r=[];if(n){Object(o.d)(null==e,"A cancel should cancel all event registrations.");var i=t.query.path;t.eventRegistrations_.forEach(function(t){var e=t.createCancelEvent(n,i);e&&r.push(e)})}if(e){for(var s=[],a=0;a<t.eventRegistrations_.length;++a){var u=t.eventRegistrations_[a];if(u.matches(e)){if(e.hasAnyCallback()){s=s.concat(t.eventRegistrations_.slice(a+1));break}}else s.push(u)}t.eventRegistrations_=s}else t.eventRegistrations_=[];return r}function Tn(t,e,n,r){e.type===ne.MERGE&&null!==e.source.queryId&&(Object(o.d)(ge(t.viewCache_),"We should always have a full cache before handling merges"),Object(o.d)(pe(t.viewCache_),"Missing event cache, even though we have a server cache"));var i,s,a=t.viewCache_,u=function(t,e,n,r,i){var s,a,u=new we;if(n.type===ne.OVERWRITE){var c=n;c.source.fromUser?s=Ye(t,e,c.path,c.snap,r,i,u):(Object(o.d)(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered()&&!Y(c.path),s=Ke(t,e,c.path,c.snap,r,i,a,u))}else if(n.type===ne.MERGE){var l=n;l.source.fromUser?s=function(t,e,n,r,i,o,s){var a=e;return r.foreach(function(r,u){var c=K(n,r);$e(e,q(c))&&(a=Ye(t,a,c,u,i,o,s))}),r.foreach(function(r,u){var c=K(n,r);$e(e,q(c))||(a=Ye(t,a,c,u,i,o,s))}),a}(t,e,l.path,l.children,r,i,u):(Object(o.d)(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered(),s=Xe(t,e,l.path,l.children,r,i,a,u))}else if(n.type===ne.ACK_USER_WRITE){var h=n;s=h.revert?function(t,e,n,r,i,s){var a;if(null!=qe(r,n))return e;var u=new Qe(r,e,i),c=e.eventCache.getNode(),l=void 0;if(Y(n)||".priority"===q(n)){var h=void 0;if(e.serverCache.isFullyInitialized())h=Fe(r,ge(e));else{var d=e.serverCache.getNode();Object(o.d)(d instanceof Zt,"serverChildren would be complete if leaf node"),h=Ve(r,d)}l=t.filter.updateFullNode(c,h=h,s)}else{var f=q(n),p=Be(r,f,e.serverCache);null==p&&e.serverCache.isCompleteForChild(f)&&(p=c.getImmediateChild(f)),(l=null!=p?t.filter.updateChild(c,f,p,H(n),u,s):e.eventCache.getNode().hasChild(f)?t.filter.updateChild(c,f,Zt.EMPTY_NODE,H(n),u,s):c).isEmpty()&&e.serverCache.isFullyInitialized()&&(a=Fe(r,ge(e))).isLeafNode()&&(l=t.filter.updateFullNode(l,a,s))}return a=e.serverCache.isFullyInitialized()||null!=qe(r,U()),de(e,l,a,t.filter.filtersNodes())}(t,e,h.path,r,i,u):function(t,e,n,r,i,o,s){if(null!=qe(i,n))return e;var a=e.serverCache.isFiltered(),u=e.serverCache;if(null!=r.value){if(Y(n)&&u.isFullyInitialized()||u.isCompleteForPath(n))return Ke(t,e,n,u.getNode().getChild(n),i,o,a,s);if(Y(n)){var c=new se(null);return u.getNode().forEachChild(Gt,function(t,e){c=c.set(new V(t),e)}),Xe(t,e,n,c,i,o,a,s)}return e}var l=new se(null);return r.foreach(function(t,e){var r=K(n,t);u.isCompleteForPath(r)&&(l=l.set(t,u.getNode().getChild(r)))}),Xe(t,e,n,l,i,o,a,s)}(t,e,h.path,h.affectedTree,r,i,u)}else{if(n.type!==ne.LISTEN_COMPLETE)throw Object(o.e)("Unknown operation type: "+n.type);s=function(t,e,n,r,i){var o=e.serverCache;return We(t,fe(e,o.getNode(),o.isFullyInitialized()||Y(n),o.isFiltered()),n,r,Ge,i)}(t,e,n.path,r,u)}var d=u.getChanges();return function(t,e,n){var r=e.eventCache;if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=pe(t);(n.length>0||!t.eventCache.isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&n.push(ye(pe(e)))}}(e,s,d),{viewCache:s,changes:d}}(t.processor_,a,e,n,r);return i=t.processor_,s=u.viewCache,Object(o.d)(s.eventCache.getNode().isIndexed(i.filter.getIndex()),"Event snap not indexed"),Object(o.d)(s.serverCache.getNode().isIndexed(i.filter.getIndex()),"Server snap not indexed"),Object(o.d)(u.viewCache.serverCache.isFullyInitialized()||!a.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=u.viewCache,In(t,u.changes,u.viewCache.eventCache.getNode(),null)}function In(t,e,n,r){return function(t,e,n,r){var i=[],o=[];return e.forEach(function(e){"child_changed"===e.type&&t.index_.indexedValueChanged(e.oldSnap,e.snapshotNode)&&o.push({type:"child_moved",snapshotNode:e.snapshotNode,childName:e.childName})}),tn(t,i,"child_removed",e,r,n),tn(t,i,"child_added",e,r,n),tn(t,i,"child_moved",o,r,n),tn(t,i,"child_changed",e,r,n),tn(t,i,"value",e,r,n),i}(t.eventGenerator_,e,n,r?[r]:t.eventRegistrations_)}var xn=function(){return function(){this.views=new Map}}();function An(t,e,n,r){var s,a,u=e.source.queryId;if(null!==u){var c=t.views.get(u);return Object(o.d)(null!=c,"SyncTree gave us an op for an invalid query."),Tn(c,e,n,r)}var l=[];try{for(var h=Object(i.g)(t.views.values()),d=h.next();!d.done;d=h.next())l=l.concat(Tn(c=d.value,e,n,r))}catch(f){s={error:f}}finally{try{d&&!d.done&&(a=h.return)&&a.call(h)}finally{if(s)throw s.error}}return l}function jn(t,e,n,r,i){var o=e.queryIdentifier(),s=t.views.get(o);if(!s){var a=Fe(n,i?r:null),u=!1;a?u=!0:r instanceof Zt?(a=Ve(n,r),u=!1):(a=Zt.EMPTY_NODE,u=!1);var c=he(new le(a,u,!1),new le(r,i,!1));return new Cn(e,c)}return s}function kn(t){var e,n,r=[];try{for(var o=Object(i.g)(t.views.values()),s=o.next();!s.done;s=o.next()){var a=s.value;a.query.getQueryParams().loadsAllData()||r.push(a)}}catch(u){e={error:u}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}return r}function Nn(t,e){var n,r,o=null;try{for(var s=Object(i.g)(t.views.values()),a=s.next();!a.done;a=s.next())o=o||On(a.value,e)}catch(u){n={error:u}}finally{try{a&&!a.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}return o}function Pn(t,e){if(e.getQueryParams().loadsAllData())return Mn(t);var n=e.queryIdentifier();return t.views.get(n)}function Rn(t,e){return null!=Pn(t,e)}function Dn(t){return null!=Mn(t)}function Mn(t){var e,n;try{for(var r=Object(i.g)(t.views.values()),o=r.next();!o.done;o=r.next()){var s=o.value;if(s.query.getQueryParams().loadsAllData())return s}}catch(a){e={error:a}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}return null}var Ln=1,Fn=function(){return function(t){this.listenProvider_=t,this.syncPointTree_=new se(null),this.pendingWriteTree_={visibleWrites:Ce.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}();function Vn(t,e,n,r,i){return function(t,e,n,r,i){Object(o.d)(r>t.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:i}),i&&(t.visibleWrites=Oe(t.visibleWrites,e,n)),t.lastWriteId=r}(t.pendingWriteTree_,e,n,r,i),i?Gn(t,new ue({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,n)):[]}function Un(t,e,n){void 0===n&&(n=!1);var r=function(t,e){for(var n=0;n<t.allWrites.length;n++){var r=t.allWrites[n];if(r.writeId===e)return r}return null}(t.pendingWriteTree_,e);if(function(t,e){var n=t.allWrites.findIndex(function(t){return t.writeId===e});Object(o.d)(n>=0,"removeWrite called with nonexistent writeId.");var r=t.allWrites[n];t.allWrites.splice(n,1);for(var i=r.visible,s=!1,a=t.allWrites.length-1;i&&a>=0;){var u=t.allWrites[a];u.visible&&(a>=n&&Re(u,r.path)?i=!1:Z(r.path,u.path)&&(s=!0)),a--}return!!i&&(s?(function(t){t.visibleWrites=Me(t.allWrites,De,U()),t.lastWriteId=t.allWrites.length>0?t.allWrites[t.allWrites.length-1].writeId:-1}(t),!0):(r.snap?t.visibleWrites=Se(t.visibleWrites,r.path):P(r.children,function(e){t.visibleWrites=Se(t.visibleWrites,K(r.path,e))}),!0))}(t.pendingWriteTree_,e)){var i=new se(null);return null!=r.snap?i=i.set(U(),!0):P(r.children,function(t){i=i.set(new V(t),!0)}),Gn(t,new oe(r.path,i,n))}return[]}function qn(t,e,n){return Gn(t,new ue({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,n))}function Bn(t,e,n,r){var s=e.path,a=t.syncPointTree_.get(s),u=[];if(a&&("default"===e.queryIdentifier()||Rn(a,e))){var c=function(t,e,n,r){var s,a,u=e.queryIdentifier(),c=[],l=[],h=Dn(t);if("default"===u)try{for(var d=Object(i.g)(t.views.entries()),f=d.next();!f.done;f=d.next()){var p,g=Object(i.e)(f.value,2),y=g[0];l=l.concat(Sn(p=g[1],n,r)),En(p)&&(t.views.delete(y),p.query.getQueryParams().loadsAllData()||c.push(p.query))}}catch(m){s={error:m}}finally{try{f&&!f.done&&(a=d.return)&&a.call(d)}finally{if(s)throw s.error}}else(p=t.views.get(u))&&(l=l.concat(Sn(p,n,r)),En(p)&&(t.views.delete(u),p.query.getQueryParams().loadsAllData()||c.push(p.query)));return h&&!Dn(t)&&c.push(new(Object(o.d)(wn,"Reference.ts has not been loaded"),wn)(e.repo,e.path)),{removed:c,events:l}}(a,e,n,r);0===a.views.size&&(t.syncPointTree_=t.syncPointTree_.remove(s));var l=c.removed;u=c.events;var h=-1!==l.findIndex(function(t){return t.getQueryParams().loadsAllData()}),d=t.syncPointTree_.findOnPath(s,function(t,e){return Dn(e)});if(h&&!d){var f=t.syncPointTree_.subtree(s);if(!f.isEmpty())for(var p=function(t){return t.fold(function(t,e,n){if(e&&Dn(e))return[Mn(e)];var r=[];return e&&(r=kn(e)),P(n,function(t,e){r=r.concat(e)}),r})}(f),g=0;g<p.length;++g){var y=p[g],m=y.query,v=Kn(t,y);t.listenProvider_.startListening(tr(m),Yn(t,m),v.hashFn,v.onComplete)}}!d&&l.length>0&&!r&&(h?t.listenProvider_.stopListening(tr(e),null):l.forEach(function(e){var n=t.queryToTagMap.get($n(e));t.listenProvider_.stopListening(tr(e),n)})),function(t,e){for(var n=0;n<e.length;++n){var r=e[n];if(!r.getQueryParams().loadsAllData()){var i=$n(r),o=t.queryToTagMap.get(i);t.queryToTagMap.delete(i),t.tagToQueryMap.delete(o)}}}(t,l)}return u}function Hn(t,e,n){var r=e.path,i=null,s=!1;t.syncPointTree_.foreachOnPath(r,function(t,e){var n=$(t,r);i=i||Nn(e,n),s=s||Dn(e)});var a,u=t.syncPointTree_.get(r);u?(s=s||Dn(u),i=i||Nn(u,U())):(u=new xn,t.syncPointTree_=t.syncPointTree_.set(r,u)),null!=i?a=!0:(a=!1,i=Zt.EMPTY_NODE,t.syncPointTree_.subtree(r).foreachChild(function(t,e){var n=Nn(e,U());n&&(i=i.updateImmediateChild(t,n))}));var c=Rn(u,e);if(!c&&!e.getQueryParams().loadsAllData()){var l=$n(e);Object(o.d)(!t.queryToTagMap.has(l),"View does not exist, but we have a tag");var h=Ln++;t.queryToTagMap.set(l,h),t.tagToQueryMap.set(h,l)}var d=function(t,e,n,r,i,o){var s=jn(t,e,r,i,o);return t.views.has(e.queryIdentifier())||t.views.set(e.queryIdentifier(),s),function(t,e){t.eventRegistrations_.push(e)}(s,n),function(t,e){var n=t.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(Ht,function(t,e){r.push(me(t,e))}),n.isFullyInitialized()&&r.push(ye(n.getNode())),In(t,r,n.getNode(),e)}(s,n)}(u,e,n,Pe(t.pendingWriteTree_,r),i,a);if(!c&&!s){var f=Pn(u,e);d=d.concat(function(t,e,n){var r=e.path,i=Yn(t,e),s=Kn(t,n),a=t.listenProvider_.startListening(tr(e),i,s.hashFn,s.onComplete),u=t.syncPointTree_.subtree(r);if(i)Object(o.d)(!Dn(u.value),"If we're adding a query, it shouldn't be shadowed");else for(var c=u.fold(function(t,e,n){if(!Y(t)&&e&&Dn(e))return[Mn(e).query];var r=[];return e&&(r=r.concat(kn(e).map(function(t){return t.query}))),P(n,function(t,e){r=r.concat(e)}),r}),l=0;l<c.length;++l){var h=c[l];t.listenProvider_.stopListening(tr(h),Yn(t,h))}return a}(t,e,f))}return d}function zn(t,e,n){var r=t.pendingWriteTree_,i=t.syncPointTree_.findOnPath(e,function(t,n){var r=Nn(n,$(t,e));if(r)return r});return Le(r,e,i,n,!0)}function Gn(t,e){return Qn(e,t.syncPointTree_,null,Pe(t.pendingWriteTree_,U()))}function Qn(t,e,n,r){if(Y(t.path))return Wn(t,e,n,r);var i=e.get(U());null==n&&null!=i&&(n=Nn(i,U()));var o=[],s=q(t.path),a=t.operationForChild(s),u=e.children.get(s);if(u&&a){var c=n?n.getImmediateChild(s):null,l=He(r,s);o=o.concat(Qn(a,u,c,l))}return i&&(o=o.concat(An(i,t,r,n))),o}function Wn(t,e,n,r){var i=e.get(U());null==n&&null!=i&&(n=Nn(i,U()));var o=[];return e.children.inorderTraversal(function(e,i){var s=n?n.getImmediateChild(e):null,a=He(r,e),u=t.operationForChild(e);u&&(o=o.concat(Wn(u,i,s,a)))}),i&&(o=o.concat(An(i,t,r,n))),o}function Kn(t,e){var n=e.query,r=Yn(t,n);return{hashFn:function(){return(function(t){return t.viewCache_.serverCache.getNode()}(e)||Zt.EMPTY_NODE).hash()},onComplete:function(e){if("ok"===e)return r?function(t,e,n){var r=Jn(t,n);if(r){var i=Xn(r),o=i.path,s=i.queryId,a=$(o,e);return Zn(t,o,new ae(re(s),a))}return[]}(t,n.path,r):function(t,e){return Gn(t,new ae({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(t,n.path);var i=function(t,e){var n="Unknown Error";"too_big"===t?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===t?n="Client doesn't have permission to access the desired data.":"unavailable"===t&&(n="The service is unavailable");var r=new Error(t+" at "+e.path.toString()+": "+n);return r.code=t.toUpperCase(),r}(e,n);return Bn(t,n,null,i)}}}function Yn(t,e){var n=$n(e);return t.queryToTagMap.get(n)}function $n(t){return t.path.toString()+"$"+t.queryIdentifier()}function Jn(t,e){return t.tagToQueryMap.get(e)}function Xn(t){var e=t.indexOf("$");return Object(o.d)(-1!==e&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new V(t.substr(0,e))}}function Zn(t,e,n){var r=t.syncPointTree_.get(e);return Object(o.d)(r,"Missing sync point for query tag that we're tracking"),An(r,n,Pe(t.pendingWriteTree_,e),null)}function tr(t){return t.getQueryParams().loadsAllData()&&!t.getQueryParams().isDefault()?t.getRef():t}var er=function(){function t(t){this.node_=t}return t.prototype.getImmediateChild=function(e){return new t(this.node_.getImmediateChild(e))},t.prototype.node=function(){return this.node_},t}(),nr=function(){function t(t,e){this.syncTree_=t,this.path_=e}return t.prototype.getImmediateChild=function(e){var n=K(this.path_,e);return new t(this.syncTree_,n)},t.prototype.node=function(){return zn(this.syncTree_,this.path_)},t}(),rr=function(t,e,n){return t&&"object"==typeof t?(Object(o.d)(".sv"in t,"Unexpected leaf node or priority contents"),"string"==typeof t[".sv"]?ir(t[".sv"],e,n):"object"==typeof t[".sv"]?or(t[".sv"],e):void Object(o.d)(!1,"Unexpected server value: "+JSON.stringify(t,null,2))):t},ir=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:Object(o.d)(!1,"Unexpected server value: "+t)}},or=function(t,e,n){t.hasOwnProperty("increment")||Object(o.d)(!1,"Unexpected server value: "+JSON.stringify(t,null,2));var r=t.increment;"number"!=typeof r&&Object(o.d)(!1,"Unexpected increment value: "+r);var i=e.node();if(Object(o.d)(null!=i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;var s=i.getValue();return"number"!=typeof s?r:s+r},sr=function(t,e,n,r){return ur(e,new nr(n,t),r)},ar=function(t,e,n){return ur(t,new er(e),n)};function ur(t,e,n){var r,i=t.getPriority().val(),o=rr(i,e.getImmediateChild(".priority"),n);if(t.isLeafNode()){var s=t,a=rr(s.getValue(),e,n);return a!==s.getValue()||o!==s.getPriority().val()?new Mt(a,ee(o)):t}var u=t;return r=u,o!==u.getPriority().val()&&(r=r.updatePriority(new Mt(o))),u.forEachChild(Ht,function(t,i){var o=ur(i,e.getImmediateChild(t),n);o!==i&&(r=r.updateImmediateChild(t,o))}),r}function cr(){return{value:null,children:new Map}}function lr(t,e,n){if(Y(e))t.value=n,t.children.clear();else if(null!==t.value)t.value=t.value.updateChild(e,n);else{var r=q(e);t.children.has(r)||t.children.set(r,cr()),lr(t.children.get(r),e=H(e),n)}}function hr(t,e){if(Y(e))return t.value=null,t.children.clear(),!0;if(null!==t.value){if(t.value.isLeafNode())return!1;var n=t.value;return t.value=null,n.forEachChild(Ht,function(e,n){lr(t,new V(e),n)}),hr(t,e)}if(t.children.size>0){var r=q(e);return e=H(e),t.children.has(r)&&hr(t.children.get(r),e)&&t.children.delete(r),0===t.children.size}return!0}function dr(t,e,n){null!==t.value?n(e,t.value):function(t,e){t.children.forEach(function(t,n){e(n,t)})}(t,function(t,r){dr(r,new V(e.toString()+"/"+t),n)})}var fr=function(){function t(){this.rootNode_=Zt.EMPTY_NODE}return t.prototype.getNode=function(t){return this.rootNode_.getChild(t)},t.prototype.updateSnapshot=function(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)},t}(),pr=function(){function t(){this.counters_={}}return t.prototype.incrementCounter=function(t,e){void 0===e&&(e=1),Object(o.h)(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e},t.prototype.get=function(){return Object(o.j)(this.counters_)},t}(),gr={},yr={};function mr(t){var e=t.toString();return gr[e]||(gr[e]=new pr),gr[e]}var vr=function(){function t(t){this.collection_=t,this.last_=null}return t.prototype.get=function(){var t=this.collection_.get(),e=Object(i.a)({},t);return this.last_&&P(this.last_,function(t,n){e[t]=e[t]-n}),this.last_=t,e},t}(),br=function(){function t(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new vr(t);var n=1e4+2e4*Math.random();F(this.reportStats_.bind(this),Math.floor(n))}return t.prototype.reportStats_=function(){var t=this,e=this.statsListener_.get(),n={},r=!1;P(e,function(e,i){i>0&&Object(o.h)(t.statsToReport_,e)&&(n[e]=i,r=!0)}),r&&this.server_.reportStats(n),F(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))},t}(),_r=function(){return function(){this.eventLists_=[],this.recursionDepth_=0}}();function wr(t,e){for(var n=null,r=0;r<e.length;r++){var i=e[r],o=i.getPath();null===n||X(o,n.path)||(t.eventLists_.push(n),n=null),null===n&&(n={events:[],path:o}),n.events.push(i)}n&&t.eventLists_.push(n)}function Cr(t,e,n){wr(t,n),Er(t,function(t){return X(t,e)})}function Or(t,e,n){wr(t,n),Er(t,function(t){return Z(t,e)||Z(e,t)})}function Er(t,e){t.recursionDepth_++;for(var n=!0,r=0;r<t.eventLists_.length;r++){var i=t.eventLists_[r];i&&(e(i.path)?(Sr(t.eventLists_[r]),t.eventLists_[r]=null):n=!1)}n&&(t.eventLists_=[]),t.recursionDepth_--}function Sr(t){for(var e=0;e<t.events.length;e++){var n=t.events[e];if(null!==n){t.events[e]=null;var r=n.getEventRunner();m&&_("event: "+n.toString()),L(r)}}}var Tr=function(){function t(t){this.allowedEvents_=t,this.listeners_={},Object(o.d)(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}return t.prototype.trigger=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Array.isArray(this.listeners_[t]))for(var r=Object(i.f)([],Object(i.e)(this.listeners_[t])),o=0;o<r.length;o++)r[o].callback.apply(r[o].context,e)},t.prototype.on=function(t,e,n){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:n});var r=this.getInitialEvent(t);r&&e.apply(n,r)},t.prototype.off=function(t,e,n){this.validateEventType_(t);for(var r=this.listeners_[t]||[],i=0;i<r.length;i++)if(r[i].callback===e&&(!n||n===r[i].context))return void r.splice(i,1)},t.prototype.validateEventType_=function(t){Object(o.d)(this.allowedEvents_.find(function(e){return e===t}),"Unknown event: "+t)},t}(),Ir=function(t){function e(){var e,n,r=t.call(this,["visible"])||this;return"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(n="visibilitychange",e="hidden"):void 0!==document.mozHidden?(n="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(n="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(n="webkitvisibilitychange",e="webkitHidden")),r.visible_=!0,n&&document.addEventListener(n,function(){var t=!document[e];t!==r.visible_&&(r.visible_=t,r.trigger("visible",t))},!1),r}return Object(i.c)(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return Object(o.d)("visible"===t,"Unknown event type: "+t),[this.visible_]},e}(Tr),xr=function(t){function e(){var e=t.call(this,["online"])||this;return e.online_=!0,"undefined"==typeof window||void 0===window.addEventListener||Object(o.t)()||(window.addEventListener("online",function(){e.online_||(e.online_=!0,e.trigger("online",!0))},!1),window.addEventListener("offline",function(){e.online_&&(e.online_=!1,e.trigger("online",!1))},!1)),e}return Object(i.c)(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return Object(o.d)("online"===t,"Unknown event type: "+t),[this.online_]},e.prototype.currentlyOnline=function(){return this.online_},e}(Tr),Ar=function(){function t(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return t.prototype.closeAfter=function(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)},t.prototype.handleResponse=function(t,e){var n=this;this.pendingResponses[t]=e;for(var r=function(){var t=i.pendingResponses[i.currentResponseNum];delete i.pendingResponses[i.currentResponseNum];for(var e=function(e){t[e]&&L(function(){n.onMessage_(t[e])})},r=0;r<t.length;++r)e(r);if(i.currentResponseNum===i.closeAfterResponse)return i.onClose&&(i.onClose(),i.onClose=null),"break";i.currentResponseNum++},i=this;this.pendingResponses[this.currentResponseNum]&&"break"!==r(););},t}(),jr="start",kr="close",Nr=function(){function t(t,e,n,r,i){this.connId=t,this.repoInfo=e,this.applicationId=n,this.transportSessionId=r,this.lastSessionId=i,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=w(t),this.stats_=mr(e),this.urlFn=function(t){return at(e,ot,t)}}return t.prototype.open=function(t,e){var n=this;this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new Ar(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(function(){n.log_("Timed out trying to connect."),n.onClosed_(),n.connectTimeoutTimer_=null},Math.floor(3e4)),function(t){if(Object(o.v)()||"complete"===document.readyState)t();else{var e=!1,n=function(){document.body?e||(e=!0,t()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&n()}),window.attachEvent("onload",n))}}(function(){if(!n.isClosed_){n.scriptTagHolder=new Pr(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=Object(i.e)(t,5),o=r[0],s=r[1],a=r[2];if(n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,o===jr)n.id=s,n.password=a;else{if(o!==kr)throw new Error("Unrecognized command received: "+o);s?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(s,function(){n.onClosed_()})):n.onClosed_()}},function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=Object(i.e)(t,2),o=r[0],s=r[1];n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(o,s)},function(){n.onClosed_()},n.urlFn);var t={start:"t"};t.ser=Math.floor(1e8*Math.random()),n.scriptTagHolder.uniqueCallbackIdentifier&&(t.cb=n.scriptTagHolder.uniqueCallbackIdentifier),t.v="5",n.transportSessionId&&(t.s=n.transportSessionId),n.lastSessionId&&(t.ls=n.lastSessionId),n.applicationId&&(t.p=n.applicationId),"undefined"!=typeof location&&location.hostname&&rt.test(location.hostname)&&(t.r="f");var e=n.urlFn(t);n.log_("Connecting via long-poll to "+e),n.scriptTagHolder.addTag(e,function(){})}})},t.prototype.start=function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)},t.forceAllow=function(){t.forceAllow_=!0},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){return!(Object(o.v)()||!t.forceAllow_&&(t.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))},t.prototype.markConnectionHealthy=function(){},t.prototype.shutdown_=function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))},t.prototype.close=function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())},t.prototype.send=function(t){var e=Object(o.F)(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);for(var n=Object(o.g)(e),r=N(n,1840),i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++},t.prototype.addDisconnectPingFrame=function(t,e){if(!Object(o.v)()){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=t,n.pw=e,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}},t.prototype.incrementIncomingBytes_=function(t){var e=Object(o.F)(t).length;this.bytesReceived+=e,this.stats_.incrementCounter("bytes_received",e)},t}(),Pr=function(){function t(e,n,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,Object(o.v)())this.commandCB=e,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=p(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=n,this.myIFrame=t.createIFrame_();var s="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(s='<script>document.domain="'+document.domain+'";<\/script>');var a="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(a),this.myIFrame.doc.close()}catch(u){_("frame writing exception"),u.stack&&_(u.stack),_(u)}}}return t.createIFrame_=function(){var t=document.createElement("iframe");if(t.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(t);try{t.contentWindow.document||_("No IE domain setting required")}catch(n){var e=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+e+"';document.close();})())"}return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t},t.prototype.close=function(){var t=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(function(){null!==t.myIFrame&&(document.body.removeChild(t.myIFrame),t.myIFrame=null)},Math.floor(0)));var e=this.onDisconnect;e&&(this.onDisconnect=null,e())},t.prototype.startLongPoll=function(t,e){for(this.myID=t,this.myPW=e,this.alive=!0;this.newRequest_(););},t.prototype.newRequest_=function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var t={};t.id=this.myID,t.pw=this.myPW,t.ser=this.currentSerial;for(var e=this.urlFn(t),n="",r=0;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+n.length<=1870;){var i=this.pendingSegs.shift();n=n+"&seg"+r+"="+i.seg+"&ts"+r+"="+i.ts+"&d"+r+"="+i.d,r++}return this.addLongPollTag_(e+=n,this.currentSerial),!0}return!1},t.prototype.enqueueSegment=function(t,e,n){this.pendingSegs.push({seg:t,ts:e,d:n}),this.alive&&this.newRequest_()},t.prototype.addLongPollTag_=function(t,e){var n=this;this.outstandingRequests.add(e);var r=function(){n.outstandingRequests.delete(e),n.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(t,function(){clearTimeout(i),r()})},t.prototype.addTag=function(t,e){var n=this;Object(o.v)()?this.doNodeLongPoll(t,e):setTimeout(function(){try{if(!n.sendNewPolls)return;var r=n.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=t,r.onload=r.onreadystatechange=function(){var t=r.readyState;t&&"loaded"!==t&&"complete"!==t||(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),e())},r.onerror=function(){_("Long-poll script failed to load: "+t),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(r)}catch(i){}},Math.floor(1))},t}(),Rr="";function Dr(t){Rr=t}var Mr=null;"undefined"!=typeof MozWebSocket?Mr=MozWebSocket:"undefined"!=typeof WebSocket&&(Mr=WebSocket);var Lr=function(){function t(e,n,r,i,o){this.connId=e,this.applicationId=r,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=w(this.connId),this.stats_=mr(n),this.connURL=t.connectionURL_(n,i,o),this.nodeAdmin=n.nodeAdmin}return t.connectionURL_=function(t,e,n){var r={v:"5"};return!Object(o.v)()&&"undefined"!=typeof location&&location.hostname&&rt.test(location.hostname)&&(r.r="f"),e&&(r.s=e),n&&(r.ls=n),at(t,it,r)},t.prototype.open=function(t,e){var n=this;this.onDisconnect=e,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,h.set("previous_websocket_failure",!0);try{if(Object(o.v)()){var r={headers:{"User-Agent":"Firebase/5/"+Rr+"/"+process.platform+"/"+(this.nodeAdmin?"AdminNode":"Node"),"X-Firebase-GMPID":this.applicationId||""}},i=process.env,s=0===this.connURL.indexOf("wss://")?i.HTTPS_PROXY||i.https_proxy:i.HTTP_PROXY||i.http_proxy;s&&(r.proxy={origin:s}),this.mySock=new Mr(this.connURL,[],r)}else this.mySock=new Mr(this.connURL,[],r={headers:{"X-Firebase-GMPID":this.applicationId||""}})}catch(u){this.log_("Error instantiating WebSocket.");var a=u.message||u.data;return a&&this.log_(a),void this.onClosed_()}this.mySock.onopen=function(){n.log_("Websocket connected."),n.everConnected_=!0},this.mySock.onclose=function(){n.log_("Websocket connection was disconnected."),n.mySock=null,n.onClosed_()},this.mySock.onmessage=function(t){n.handleIncomingFrame(t)},this.mySock.onerror=function(t){n.log_("WebSocket error.  Closing connection.");var e=t.message||t.data;e&&n.log_(e),n.onClosed_()}},t.prototype.start=function(){},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){var e=!1;if("undefined"!=typeof navigator&&navigator.userAgent){var n=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);n&&n.length>1&&parseFloat(n[1])<4.4&&(e=!0)}return!e&&null!==Mr&&!t.forceDisallow_},t.previouslyFailed=function(){return h.isInMemoryStorage||!0===h.get("previous_websocket_failure")},t.prototype.markConnectionHealthy=function(){h.remove("previous_websocket_failure")},t.prototype.appendFrame_=function(t){if(this.frames.push(t),this.frames.length===this.totalFrames){var e=this.frames.join("");this.frames=null;var n=Object(o.z)(e);this.onMessage(n)}},t.prototype.handleNewFrameCount_=function(t){this.totalFrames=t,this.frames=[]},t.prototype.extractFrameCount_=function(t){if(Object(o.d)(null===this.frames,"We already have a frame buffer"),t.length<=6){var e=Number(t);if(!isNaN(e))return this.handleNewFrameCount_(e),null}return this.handleNewFrameCount_(1),t},t.prototype.handleIncomingFrame=function(t){if(null!==this.mySock){var e=t.data;if(this.bytesReceived+=e.length,this.stats_.incrementCounter("bytes_received",e.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(e);else{var n=this.extractFrameCount_(e);null!==n&&this.appendFrame_(n)}}},t.prototype.send=function(t){this.resetKeepAlive();var e=Object(o.F)(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);var n=N(e,16384);n.length>1&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])},t.prototype.shutdown_=function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))},t.prototype.close=function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())},t.prototype.resetKeepAlive=function(){var t=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(function(){t.mySock&&t.sendString_("0"),t.resetKeepAlive()},Math.floor(45e3))},t.prototype.sendString_=function(t){try{this.mySock.send(t)}catch(e){this.log_("Exception thrown from WebSocket.send():",e.message||e.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}},t.responsesRequiredToBeHealthy=2,t.healthyTimeout=3e4,t}(),Fr=function(){function t(t){this.initTransports_(t)}return Object.defineProperty(t,"ALL_TRANSPORTS",{get:function(){return[Nr,Lr]},enumerable:!1,configurable:!0}),t.prototype.initTransports_=function(e){var n,r,o=Lr&&Lr.isAvailable(),s=o&&!Lr.previouslyFailed();if(e.webSocketOnly&&(o||E("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),s=!0),s)this.transports_=[Lr];else{var a=this.transports_=[];try{for(var u=Object(i.g)(t.ALL_TRANSPORTS),c=u.next();!c.done;c=u.next()){var l=c.value;l&&l.isAvailable()&&a.push(l)}}catch(h){n={error:h}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}},t.prototype.initialTransport=function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")},t.prototype.upgradeTransport=function(){return this.transports_.length>1?this.transports_[1]:null},t}(),Vr=function(){function t(t,e,n,r,i,o,s,a){this.id=t,this.repoInfo_=e,this.applicationId_=n,this.onMessage_=r,this.onReady_=i,this.onDisconnect_=o,this.onKill_=s,this.lastSessionId=a,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=w("c:"+this.id+":"),this.transportManager_=new Fr(e),this.log_("Connection created"),this.start_()}return t.prototype.start_=function(){var t=this,e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,void 0,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(function(){t.conn_&&t.conn_.open(n,r)},Math.floor(0));var i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=F(function(){t.healthyTimeout_=null,t.isHealthy_||(t.conn_&&t.conn_.bytesReceived>102400?(t.log_("Connection exceeded healthy timeout but has received "+t.conn_.bytesReceived+" bytes.  Marking connection healthy."),t.isHealthy_=!0,t.conn_.markConnectionHealthy()):t.conn_&&t.conn_.bytesSent>10240?t.log_("Connection exceeded healthy timeout but has sent "+t.conn_.bytesSent+" bytes.  Leaving connection alive."):(t.log_("Closing unhealthy connection after timeout."),t.close()))},Math.floor(i)))},t.prototype.nextTransportId_=function(){return"c:"+this.id+":"+this.connectionCount++},t.prototype.disconnReceiver_=function(t){var e=this;return function(n){t===e.conn_?e.onConnectionLost_(n):t===e.secondaryConn_?(e.log_("Secondary connection lost."),e.onSecondaryConnectionLost_()):e.log_("closing an old connection")}},t.prototype.connReceiver_=function(t){var e=this;return function(n){2!==e.state_&&(t===e.rx_?e.onPrimaryMessageReceived_(n):t===e.secondaryConn_?e.onSecondaryMessageReceived_(n):e.log_("message on old connection"))}},t.prototype.sendRequest=function(t){this.sendData_({t:"d",d:t})},t.prototype.tryCleanupConnection=function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)},t.prototype.onSecondaryControl_=function(t){if("t"in t){var e=t.t;"a"===e?this.upgradeIfSecondaryHealthy_():"r"===e?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===e&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}},t.prototype.onSecondaryMessageReceived_=function(t){var e=j("t",t),n=j("d",t);if("c"===e)this.onSecondaryControl_(n);else{if("d"!==e)throw new Error("Unknown protocol layer: "+e);this.pendingDataMessages.push(n)}},t.prototype.upgradeIfSecondaryHealthy_=function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))},t.prototype.proceedWithUpgrade_=function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()},t.prototype.onPrimaryMessageReceived_=function(t){var e=j("t",t),n=j("d",t);"c"===e?this.onControl_(n):"d"===e&&this.onDataMessage_(n)},t.prototype.onDataMessage_=function(t){this.onPrimaryResponse_(),this.onMessage_(t)},t.prototype.onPrimaryResponse_=function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))},t.prototype.onControl_=function(t){var e=j("t",t);if("d"in t){var n=t.d;if("h"===e)this.onHandshake_(n);else if("n"===e){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===e?this.onConnectionShutdown_(n):"r"===e?this.onReset_(n):"e"===e?C("Server Error: "+n):"o"===e?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):C("Unknown control packet command: "+e)}},t.prototype.onHandshake_=function(t){var e=t.ts,n=t.v,r=t.h;this.sessionId=t.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),"5"!==n&&E("Protocol version mismatch detected"),this.tryStartUpgrade_())},t.prototype.tryStartUpgrade_=function(){var t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)},t.prototype.startUpgrade_=function(t){var e=this;this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),F(function(){e.secondaryConn_&&(e.log_("Timed out trying to upgrade."),e.secondaryConn_.close())},Math.floor(6e4))},t.prototype.onReset_=function(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,1===this.state_?this.close():(this.closeConnections_(),this.start_())},t.prototype.onConnectionEstablished_=function(t,e){var n=this;this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):F(function(){n.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))},t.prototype.sendPingOnPrimaryIfNecessary_=function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))},t.prototype.onSecondaryConnectionLost_=function(){var t=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==t&&this.rx_!==t||this.close()},t.prototype.onConnectionLost_=function(t){this.conn_=null,t||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(h.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()},t.prototype.onConnectionShutdown_=function(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()},t.prototype.sendData_=function(t){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(t)},t.prototype.close=function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))},t.prototype.closeConnections_=function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)},t}(),Ur=function(){function t(){}return t.prototype.put=function(t,e,n,r){},t.prototype.merge=function(t,e,n,r){},t.prototype.refreshAuthToken=function(t){},t.prototype.onDisconnectPut=function(t,e,n){},t.prototype.onDisconnectMerge=function(t,e,n){},t.prototype.onDisconnectCancel=function(t,e){},t.prototype.reportStats=function(t){},t}(),qr=1e3,Br=function(t){function e(n,r,i,s,a,u,c){var l=t.call(this)||this;if(l.repoInfo_=n,l.applicationId_=r,l.onDataUpdate_=i,l.onConnectStatus_=s,l.onServerInfoUpdate_=a,l.authTokenProvider_=u,l.authOverride_=c,l.id=e.nextPersistentConnectionId_++,l.log_=w("p:"+l.id+":"),l.interruptReasons_={},l.listens=new Map,l.outstandingPuts_=[],l.outstandingGets_=[],l.outstandingPutCount_=0,l.outstandingGetCount_=0,l.onDisconnectRequestQueue_=[],l.connected_=!1,l.reconnectDelay_=qr,l.maxReconnectDelay_=3e5,l.securityDebugCallback_=null,l.lastSessionId=null,l.establishConnectionTimer_=null,l.visible_=!1,l.requestCBHash_={},l.requestNumber_=0,l.realtime_=null,l.authToken_=null,l.forceTokenRefresh_=!1,l.invalidAuthTokenCount_=0,l.firstConnection_=!0,l.lastConnectionAttemptTime_=null,l.lastConnectionEstablishedTime_=null,c&&!Object(o.v)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return l.scheduleConnect_(0),Ir.getInstance().on("visible",l.onVisible_,l),-1===n.host.indexOf("fblocal")&&xr.getInstance().on("online",l.onOnline_,l),l}return Object(i.c)(e,t),e.prototype.sendRequest=function(t,e,n){var r=++this.requestNumber_,i={r:r,a:t,b:e};this.log_(Object(o.F)(i)),Object(o.d)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)},e.prototype.get=function(t){var e=this,n=new o.a,r={p:t.path.toString(),q:t.queryObject()},i={action:"g",request:r,onComplete:function(t){var i=t.d;"ok"===t.s?(e.onDataUpdate_(r.p,i,!1,null),n.resolve(i)):n.reject(i)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;var s=this.outstandingGets_.length-1;return this.connected_||setTimeout(function(){var t=e.outstandingGets_[s];void 0!==t&&i===t&&(delete e.outstandingGets_[s],e.outstandingGetCount_--,0===e.outstandingGetCount_&&(e.outstandingGets_=[]),e.log_("get "+s+" timed out on connection"),n.reject(new Error("Client is offline.")))},3e3),this.connected_&&this.sendGet_(s),n.promise},e.prototype.listen=function(t,e,n,r){var i=t.queryIdentifier(),s=t.path.toString();this.log_("Listen called for "+s+" "+i),this.listens.has(s)||this.listens.set(s,new Map),Object(o.d)(t.getQueryParams().isDefault()||!t.getQueryParams().loadsAllData(),"listen() called for non-default but complete query"),Object(o.d)(!this.listens.get(s).has(i),"listen() called twice for same path/queryId.");var a={onComplete:r,hashFn:e,query:t,tag:n};this.listens.get(s).set(i,a),this.connected_&&this.sendListen_(a)},e.prototype.sendGet_=function(t){var e=this,n=this.outstandingGets_[t];this.sendRequest("g",n.request,function(r){delete e.outstandingGets_[t],e.outstandingGetCount_--,0===e.outstandingGetCount_&&(e.outstandingGets_=[]),n.onComplete&&n.onComplete(r)})},e.prototype.sendListen_=function(t){var n=this,r=t.query,i=r.path.toString(),o=r.queryIdentifier();this.log_("Listen on "+i+" for "+o);var s={p:i};t.tag&&(s.q=r.queryObject(),s.t=t.tag),s.h=t.hashFn(),this.sendRequest("q",s,function(s){var a=s.d,u=s.s;e.warnOnListenWarnings_(a,r),(n.listens.get(i)&&n.listens.get(i).get(o))===t&&(n.log_("listen response",s),"ok"!==u&&n.removeListen_(i,o),t.onComplete&&t.onComplete(u,a))})},e.warnOnListenWarnings_=function(t,e){if(t&&"object"==typeof t&&Object(o.h)(t,"w")){var n=Object(o.C)(t,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var r='".indexOn": "'+e.getQueryParams().getIndex().toString()+'"',i=e.path.toString();E("Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding "+r+" at "+i+" to your security rules for better performance.")}}},e.prototype.refreshAuthToken=function(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},function(){}),this.reduceReconnectDelayIfAdminCredential_(t)},e.prototype.reduceReconnectDelayIfAdminCredential_=function(t){(t&&40===t.length||Object(o.n)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)},e.prototype.tryAuth=function(){var t=this;if(this.connected_&&this.authToken_){var e=this.authToken_,n=Object(o.y)(e)?"auth":"gauth",r={cred:e};null===this.authOverride_?r.noauth=!0:"object"==typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(n,r,function(n){var r=n.s,i=n.d||"error";t.authToken_===e&&("ok"===r?t.invalidAuthTokenCount_=0:t.onAuthRevoked_(r,i))})}},e.prototype.unlisten=function(t,e){var n=t.path.toString(),r=t.queryIdentifier();this.log_("Unlisten called for "+n+" "+r),Object(o.d)(t.getQueryParams().isDefault()||!t.getQueryParams().loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,t.queryObject(),e)},e.prototype.sendUnlisten_=function(t,e,n,r){this.log_("Unlisten on "+t+" for "+e);var i={p:t};r&&(i.q=n,i.t=r),this.sendRequest("n",i)},e.prototype.onDisconnectPut=function(t,e,n){this.connected_?this.sendOnDisconnect_("o",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:e,onComplete:n})},e.prototype.onDisconnectMerge=function(t,e,n){this.connected_?this.sendOnDisconnect_("om",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:e,onComplete:n})},e.prototype.onDisconnectCancel=function(t,e){this.connected_?this.sendOnDisconnect_("oc",t,null,e):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:e})},e.prototype.sendOnDisconnect_=function(t,e,n,r){var i={p:e,d:n};this.log_("onDisconnect "+t,i),this.sendRequest(t,i,function(t){r&&setTimeout(function(){r(t.s,t.d)},Math.floor(0))})},e.prototype.put=function(t,e,n,r){this.putInternal("p",t,e,n,r)},e.prototype.merge=function(t,e,n,r){this.putInternal("m",t,e,n,r)},e.prototype.putInternal=function(t,e,n,r,i){var o={p:e,d:n};void 0!==i&&(o.h=i),this.outstandingPuts_.push({action:t,request:o,onComplete:r}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+e)},e.prototype.sendPut_=function(t){var e=this,n=this.outstandingPuts_[t].action,r=this.outstandingPuts_[t].request,i=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(n,r,function(r){e.log_(n+" response",r),delete e.outstandingPuts_[t],e.outstandingPutCount_--,0===e.outstandingPutCount_&&(e.outstandingPuts_=[]),i&&i(r.s,r.d)})},e.prototype.reportStats=function(t){var e=this;if(this.connected_){var n={c:t};this.log_("reportStats",n),this.sendRequest("s",n,function(t){"ok"!==t.s&&e.log_("reportStats","Error sending stats: "+t.d)})}},e.prototype.onDataMessage_=function(t){if("r"in t){this.log_("from server: "+Object(o.F)(t));var e=t.r,n=this.requestCBHash_[e];n&&(delete this.requestCBHash_[e],n(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}},e.prototype.onDataPush_=function(t,e){this.log_("handleServerMessage",t,e),"d"===t?this.onDataUpdate_(e.p,e.d,!1,e.t):"m"===t?this.onDataUpdate_(e.p,e.d,!0,e.t):"c"===t?this.onListenRevoked_(e.p,e.q):"ac"===t?this.onAuthRevoked_(e.s,e.d):"sd"===t?this.onSecurityDebugPacket_(e):C("Unrecognized action received from server: "+Object(o.F)(t)+"\nAre you using the latest client?")},e.prototype.onReady_=function(t,e){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=e,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)},e.prototype.scheduleConnect_=function(t){var e=this;Object(o.d)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(function(){e.establishConnectionTimer_=null,e.establishConnection_()},Math.floor(t))},e.prototype.onVisible_=function(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=qr,this.realtime_||this.scheduleConnect_(0)),this.visible_=t},e.prototype.onOnline_=function(t){t?(this.log_("Browser went online."),this.reconnectDelay_=qr,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())},e.prototype.onRealtimeDisconnect_=function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=qr),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());var t=(new Date).getTime()-this.lastConnectionAttemptTime_,e=Math.max(0,this.reconnectDelay_-t);e=Math.random()*e,this.log_("Trying to reconnect in "+e+"ms"),this.scheduleConnect_(e),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)},e.prototype.establishConnection_=function(){var t=this;if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null;var n=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+e.nextConnectionId_++,a=this,u=this.lastSessionId,c=!1,l=null,h=function(){l?l.close():(c=!0,i())};this.realtime_={close:h,sendRequest:function(t){Object(o.d)(l,"sendRequest call when we're not connected not allowed."),l.sendRequest(t)}};var d=this.forceTokenRefresh_;this.forceTokenRefresh_=!1,this.authTokenProvider_.getToken(d).then(function(t){c?_("getToken() completed but was canceled"):(_("getToken() completed. Creating connection."),a.authToken_=t&&t.accessToken,l=new Vr(s,a.repoInfo_,a.applicationId_,n,r,i,function(t){E(t+" ("+a.repoInfo_.toString()+")"),a.interrupt("server_kill")},u))}).then(null,function(e){a.log_("Failed to get token: "+e),c||(t.repoInfo_.nodeAdmin&&E(e),h())})}},e.prototype.interrupt=function(t){_("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())},e.prototype.resume=function(t){_("Resuming connection for reason: "+t),delete this.interruptReasons_[t],Object(o.r)(this.interruptReasons_)&&(this.reconnectDelay_=qr,this.realtime_||this.scheduleConnect_(0))},e.prototype.handleTimestamp_=function(t){var e=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:e})},e.prototype.cancelSentTransactions_=function(){for(var t=0;t<this.outstandingPuts_.length;t++){var e=this.outstandingPuts_[t];e&&"h"in e.request&&e.queued&&(e.onComplete&&e.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])},e.prototype.onListenRevoked_=function(t,e){var n;n=e?e.map(function(t){return k(t)}).join("$"):"default";var r=this.removeListen_(t,n);r&&r.onComplete&&r.onComplete("permission_denied")},e.prototype.removeListen_=function(t,e){var n,r=new V(t).toString();if(this.listens.has(r)){var i=this.listens.get(r);n=i.get(e),i.delete(e),0===i.size&&this.listens.delete(r)}else n=void 0;return n},e.prototype.onAuthRevoked_=function(t,e){_("Auth token revoked: "+t+"/"+e),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==t&&"permission_denied"!==t||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))},e.prototype.onSecurityDebugPacket_=function(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))},e.prototype.restoreState_=function(){var t,e,n,r;this.tryAuth();try{for(var o=Object(i.g)(this.listens.values()),s=o.next();!s.done;s=o.next()){var a=s.value;try{for(var u=(n=void 0,Object(i.g)(a.values())),c=u.next();!c.done;c=u.next())this.sendListen_(c.value)}catch(d){n={error:d}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}}catch(f){t={error:f}}finally{try{s&&!s.done&&(e=o.return)&&e.call(o)}finally{if(t)throw t.error}}for(var l=0;l<this.outstandingPuts_.length;l++)this.outstandingPuts_[l]&&this.sendPut_(l);for(;this.onDisconnectRequestQueue_.length;){var h=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(h.action,h.pathString,h.data,h.onComplete)}for(l=0;l<this.outstandingGets_.length;l++)this.outstandingGets_[l]&&this.sendGet_(l)},e.prototype.sendConnectStats_=function(){var t={},e="js";Object(o.v)()&&(e=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+e+"."+Rr.replace(/\./g,"-")]=1,Object(o.t)()?t["framework.cordova"]=1:Object(o.w)()&&(t["framework.reactnative"]=1),this.reportStats(t)},e.prototype.shouldReconnect_=function(){var t=xr.getInstance().currentlyOnline();return Object(o.r)(this.interruptReasons_)&&t},e.nextPersistentConnectionId_=0,e.nextConnectionId_=0,e}(Ur),Hr=function(t){function e(e,n,r){var i=t.call(this)||this;return i.repoInfo_=e,i.onDataUpdate_=n,i.authTokenProvider_=r,i.log_=w("p:rest:"),i.listens_={},i}return Object(i.c)(e,t),e.prototype.reportStats=function(t){throw new Error("Method not implemented.")},e.getListenId_=function(t,e){return void 0!==e?"tag$"+e:(Object(o.d)(t.getQueryParams().isDefault(),"should have a tag if it's not a default query."),t.path.toString())},e.prototype.listen=function(t,n,r,i){var s=this,a=t.path.toString();this.log_("Listen called for "+a+" "+t.queryIdentifier());var u=e.getListenId_(t,r),c={};this.listens_[u]=c;var l=_n(t.getQueryParams());this.restRequest_(a+".json",l,function(t,e){var n=e;404===t&&(n=null,t=null),null===t&&s.onDataUpdate_(a,n,!1,r),Object(o.C)(s.listens_,u)===c&&i(t?401===t?"permission_denied":"rest_error:"+t:"ok",null)})},e.prototype.unlisten=function(t,n){var r=e.getListenId_(t,n);delete this.listens_[r]},e.prototype.get=function(t){var e=this,n=_n(t.getQueryParams()),r=t.path.toString(),i=new o.a;return this.restRequest_(r+".json",n,function(t,n){var o=n;404===t&&(o=null,t=null),null===t?(e.onDataUpdate_(r,o,!1,null),i.resolve(o)):i.reject(new Error(o))}),i.promise},e.prototype.refreshAuthToken=function(t){},e.prototype.restRequest_=function(t,e,n){var r=this;void 0===e&&(e={}),e.format="export",this.authTokenProvider_.getToken(!1).then(function(i){var s=i&&i.accessToken;s&&(e.auth=s);var a=(r.repoInfo_.secure?"https://":"http://")+r.repoInfo_.host+t+"?ns="+r.repoInfo_.namespace+Object(o.B)(e);r.log_("Sending REST request for "+a);var u=new XMLHttpRequest;u.onreadystatechange=function(){if(n&&4===u.readyState){r.log_("REST Response for "+a+" received. status:",u.status,"response:",u.responseText);var t=null;if(u.status>=200&&u.status<300){try{t=Object(o.z)(u.responseText)}catch(e){E("Failed to parse JSON response for "+a+": "+u.responseText)}n(null,t)}else 401!==u.status&&404!==u.status&&E("Got unsuccessful REST response for "+a+" Status: "+u.status),n(u.status);n=null}},u.open("GET",a,!0),u.send()})},e}(Ur),zr=function(){function t(t,e,n){this.node_=t,this.ref_=e,this.index_=n}return t.prototype.val=function(){return Object(o.G)("DataSnapshot.val",0,0,arguments.length),this.node_.val()},t.prototype.exportVal=function(){return Object(o.G)("DataSnapshot.exportVal",0,0,arguments.length),this.node_.val(!0)},t.prototype.toJSON=function(){return Object(o.G)("DataSnapshot.toJSON",0,1,arguments.length),this.exportVal()},t.prototype.exists=function(){return Object(o.G)("DataSnapshot.exists",0,0,arguments.length),!this.node_.isEmpty()},t.prototype.child=function(e){Object(o.G)("DataSnapshot.child",0,1,arguments.length),e=String(e),At("DataSnapshot.child",1,e,!1);var n=new V(e),r=this.ref_.child(n);return new t(this.node_.getChild(n),r,Ht)},t.prototype.hasChild=function(t){Object(o.G)("DataSnapshot.hasChild",1,1,arguments.length),At("DataSnapshot.hasChild",1,t,!1);var e=new V(t);return!this.node_.getChild(e).isEmpty()},t.prototype.getPriority=function(){return Object(o.G)("DataSnapshot.getPriority",0,0,arguments.length),this.node_.getPriority().val()},t.prototype.forEach=function(e){var n=this;if(Object(o.G)("DataSnapshot.forEach",1,1,arguments.length),Object(o.H)("DataSnapshot.forEach",1,e,!1),this.node_.isLeafNode())return!1;var r=this.node_;return!!r.forEachChild(this.index_,function(r,i){return e(new t(i,n.ref_.child(r),Ht))})},t.prototype.hasChildren=function(){return Object(o.G)("DataSnapshot.hasChildren",0,0,arguments.length),!this.node_.isLeafNode()&&!this.node_.isEmpty()},Object.defineProperty(t.prototype,"key",{get:function(){return this.ref_.getKey()},enumerable:!1,configurable:!0}),t.prototype.numChildren=function(){return Object(o.G)("DataSnapshot.numChildren",0,0,arguments.length),this.node_.numChildren()},t.prototype.getRef=function(){return Object(o.G)("DataSnapshot.ref",0,0,arguments.length),this.ref_},Object.defineProperty(t.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),t}(),Gr=function(){return function(t,e,n){void 0===t&&(t=""),void 0===e&&(e=null),void 0===n&&(n={children:{},childCount:0}),this.name=t,this.parent=e,this.node=n}}();function Qr(t,e){for(var n=e instanceof V?e:new V(e),r=t,i=q(n);null!==i;){var s=Object(o.C)(r.node.children,i)||{children:{},childCount:0};r=new Gr(i,r,s),i=q(n=H(n))}return r}function Wr(t){return t.node.value}function Kr(t,e){t.node.value=e,Zr(t)}function Yr(t){return t.node.childCount>0}function $r(t,e){P(t.node.children,function(n,r){e(new Gr(n,t,r))})}function Jr(t,e,n,r){n&&!r&&e(t),$r(t,function(t){Jr(t,e,!0,r)}),n&&r&&e(t)}function Xr(t){return new V(null===t.parent?t.name:Xr(t.parent)+"/"+t.name)}function Zr(t){null!==t.parent&&function(t,e,n){var r=function(t){return void 0===Wr(t)&&!Yr(t)}(n),i=Object(o.h)(t.node.children,e);r&&i?(delete t.node.children[e],t.node.childCount--,Zr(t)):r||i||(t.node.children[e]=n.node,t.node.childCount++,Zr(t))}(t.parent,t.name,t)}var ti="repo_interrupt",ei=function(){function t(t,e,n,r){this.repoInfo_=t,this.forceRestClient_=e,this.app=n,this.authTokenProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new _r,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=cr(),this.transactionQueueTree_=new Gr,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}return t.prototype.toString=function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host},t}();function ni(t){var e=t.infoData_.getNode(new V(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+e}function ri(t){return(e=(e={timestamp:ni(t)})||{}).timestamp=e.timestamp||(new Date).getTime(),e;var e}function ii(t,e,n,r,i){t.dataUpdateCount++;var s=new V(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;var a=[];if(i)if(r){var u=Object(o.A)(n,function(t){return ee(t)});a=function(t,e,n,r){var i=Jn(t,r);if(i){var o=Xn(i),s=o.path,a=o.queryId,u=$(s,e),c=se.fromObject(n);return Zn(t,s,new ce(re(a),u,c))}return[]}(t.serverSyncTree_,s,u,i)}else{var c=ee(n);a=function(t,e,n,r){var i=Jn(t,r);if(null!=i){var o=Xn(i),s=o.path,a=o.queryId,u=$(s,e);return Zn(t,s,new ue(re(a),u,n))}return[]}(t.serverSyncTree_,s,c,i)}else if(r){var l=Object(o.A)(n,function(t){return ee(t)});a=function(t,e,n){var r=se.fromObject(n);return Gn(t,new ce({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(t.serverSyncTree_,s,l)}else{var h=ee(n);a=qn(t.serverSyncTree_,s,h)}var d=s;a.length>0&&(d=Ei(t,s)),Or(t.eventQueue_,d,a)}function oi(t,e){si(t,"connected",e),!1===e&&function(t){vi(t,"onDisconnectEvents");var e=ri(t),n=cr();dr(t.onDisconnect_,U(),function(r,i){var o=sr(r,i,t.serverSyncTree_,e);lr(n,r,o)});var r=[];dr(n,U(),function(e,n){r=r.concat(qn(t.serverSyncTree_,e,n));var i=Ai(t,e);Ei(t,i)}),t.onDisconnect_=cr(),Or(t.eventQueue_,U(),r)}(t)}function si(t,e,n){var r=new V("/.info/"+e),i=ee(n);t.infoData_.updateSnapshot(r,i);var o=qn(t.infoSyncTree_,r,i);Or(t.eventQueue_,r,o)}function ai(t){return t.nextWriteId_++}function ui(t,e,n,r,i){vi(t,"set",{path:e.toString(),value:n,priority:r});var o=ri(t),s=ee(n,r),a=zn(t.serverSyncTree_,e),u=ar(s,a,o),c=ai(t),l=Vn(t.serverSyncTree_,e,u,c,!0);wr(t.eventQueue_,l),t.server_.put(e.toString(),s.val(!0),function(n,r){var o="ok"===n;o||E("set at "+e+" failed: "+n);var s=Un(t.serverSyncTree_,c,!o);Or(t.eventQueue_,e,s),bi(0,i,n,r)});var h=Ai(t,e);Ei(t,h),Or(t.eventQueue_,h,[])}function ci(t,e,n,r){vi(t,"update",{path:e.toString(),value:n});var i=!0,s=ri(t),a={};if(P(n,function(n,r){i=!1,a[n]=sr(K(e,n),ee(r),t.serverSyncTree_,s)}),i)_("update() called with empty data.  Don't do anything."),bi(0,r,"ok",void 0);else{var u=ai(t),c=function(t,e,n,r){!function(t,e,n,r){Object(o.d)(r>t.lastWriteId,"Stacking an older merge on top of newer ones"),t.allWrites.push({path:e,children:n,writeId:r,visible:!0}),t.visibleWrites=Ee(t.visibleWrites,e,n),t.lastWriteId=r}(t.pendingWriteTree_,e,n,r);var i=se.fromObject(n);return Gn(t,new ce({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,i))}(t.serverSyncTree_,e,a,u);wr(t.eventQueue_,c),t.server_.merge(e.toString(),n,function(n,i){var o="ok"===n;o||E("update at "+e+" failed: "+n);var s=Un(t.serverSyncTree_,u,!o),a=s.length>0?Ei(t,e):e;Or(t.eventQueue_,a,s),bi(0,r,n,i)}),P(n,function(n){var r=Ai(t,K(e,n));Ei(t,r)}),Or(t.eventQueue_,e,[])}}function li(t,e,n){t.server_.onDisconnectCancel(e.toString(),function(r,i){"ok"===r&&hr(t.onDisconnect_,e),bi(0,n,r,i)})}function hi(t,e,n,r){var i=ee(n);t.server_.onDisconnectPut(e.toString(),i.val(!0),function(n,o){"ok"===n&&lr(t.onDisconnect_,e,i),bi(0,r,n,o)})}function di(t,e,n,r,i){var o=ee(n,r);t.server_.onDisconnectPut(e.toString(),o.val(!0),function(n,r){"ok"===n&&lr(t.onDisconnect_,e,o),bi(0,i,n,r)})}function fi(t,e,n,r){if(Object(o.r)(n))return _("onDisconnect().update() called with empty data.  Don't do anything."),void bi(0,r,"ok",void 0);t.server_.onDisconnectMerge(e.toString(),n,function(i,o){"ok"===i&&P(n,function(n,r){var i=ee(r);lr(t.onDisconnect_,K(e,n),i)}),bi(0,r,i,o)})}function pi(t,e,n){var r;r=".info"===q(e.path)?Hn(t.infoSyncTree_,e,n):Hn(t.serverSyncTree_,e,n),Cr(t.eventQueue_,e.path,r)}function gi(t,e,n){var r;r=".info"===q(e.path)?Bn(t.infoSyncTree_,e,n):Bn(t.serverSyncTree_,e,n),Cr(t.eventQueue_,e.path,r)}function yi(t){t.persistentConnection_&&t.persistentConnection_.interrupt(ti)}function mi(t){t.persistentConnection_&&t.persistentConnection_.resume(ti)}function vi(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r="";t.persistentConnection_&&(r=t.persistentConnection_.id+":"),_.apply(void 0,Object(i.f)([r],Object(i.e)(e)))}function bi(t,e,n,r){e&&L(function(){if("ok"===n)e(null);else{var t=(n||"error").toUpperCase(),i=t;r&&(i+=": "+r);var o=new Error(i);o.code=t,e(o)}})}function _i(t){return t.__database||(t.__database=new Gi(t))}function wi(t,e,n,r,i){vi(t,"transaction on "+e);var s=function(){},a=new Vi(t,e);a.on("value",s);var u={path:e,update:n,onComplete:r,status:null,order:p(),applyLocally:i,retryCount:0,unwatcher:function(){a.off("value",s)},abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},c=Ci(t,e,void 0);u.currentInputSnapshot=c;var l=u.update(c.val());if(void 0===l){if(u.unwatcher(),u.currentOutputSnapshotRaw=null,u.currentOutputSnapshotResolved=null,u.onComplete){var h=new zr(u.currentInputSnapshot,new Vi(t,u.path),Ht);u.onComplete(null,!1,h)}}else{Et("transaction failed: Data returned ",l,u.path),u.status=0;var d=Qr(t.transactionQueueTree_,e),f=Wr(d)||[];f.push(u),Kr(d,f);var g=void 0;"object"==typeof l&&null!==l&&Object(o.h)(l,".priority")?(g=Object(o.C)(l,".priority"),Object(o.d)(Ct(g),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):g=(zn(t.serverSyncTree_,e)||Zt.EMPTY_NODE).getPriority().val();var y=ri(t),m=ee(l,g),v=ar(m,c,y);u.currentOutputSnapshotRaw=m,u.currentOutputSnapshotResolved=v,u.currentWriteId=ai(t);var b=Vn(t.serverSyncTree_,e,v,u.currentWriteId,u.applyLocally);Or(t.eventQueue_,e,b),Oi(t,t.transactionQueueTree_)}}function Ci(t,e,n){return zn(t.serverSyncTree_,e,n)||Zt.EMPTY_NODE}function Oi(t,e){if(void 0===e&&(e=t.transactionQueueTree_),e||xi(t,e),Wr(e)){var n=Ti(t,e);Object(o.d)(n.length>0,"Sending zero length transaction queue"),n.every(function(t){return 0===t.status})&&function(t,e,n){for(var r=n.map(function(t){return t.currentWriteId}),i=Ci(t,e,r),s=i,a=i.hash(),u=0;u<n.length;u++){var c=n[u];Object(o.d)(0===c.status,"tryToSendTransactionQueue_: items in queue should all be run."),c.status=1,c.retryCount++;var l=$(e,c.path);s=s.updateChild(l,c.currentOutputSnapshotRaw)}var h=s.val(!0),d=e;t.server_.put(d.toString(),h,function(r){vi(t,"transaction put response",{path:d.toString(),status:r});var i=[];if("ok"===r){for(var o=[],s=0;s<n.length;s++){if(n[s].status=2,i=i.concat(Un(t.serverSyncTree_,n[s].currentWriteId)),n[s].onComplete){var a=n[s].currentOutputSnapshotResolved,u=new Vi(t,n[s].path),c=new zr(a,u,Ht);o.push(n[s].onComplete.bind(null,null,!0,c))}n[s].unwatcher()}for(xi(t,Qr(t.transactionQueueTree_,e)),Oi(t,t.transactionQueueTree_),Or(t.eventQueue_,e,i),s=0;s<o.length;s++)L(o[s])}else{if("datastale"===r)for(s=0;s<n.length;s++)n[s].status=3===n[s].status?4:0;else for(E("transaction at "+d.toString()+" failed: "+r),s=0;s<n.length;s++)n[s].status=4,n[s].abortReason=r;Ei(t,e)}},a)}(t,Xr(e),n)}else Yr(e)&&$r(e,function(e){Oi(t,e)})}function Ei(t,e){var n=Si(t,e),r=Xr(n);return function(t,e,n){if(0!==e.length){for(var r=[],i=[],s=e.filter(function(t){return 0===t.status}).map(function(t){return t.currentWriteId}),a=0;a<e.length;a++){var u=e[a],c=$(n,u.path),l=!1,h=void 0;if(Object(o.d)(null!==c,"rerunTransactionsUnderNode_: relativePath should not be null."),4===u.status)l=!0,h=u.abortReason,i=i.concat(Un(t.serverSyncTree_,u.currentWriteId,!0));else if(0===u.status)if(u.retryCount>=25)l=!0,h="maxretry",i=i.concat(Un(t.serverSyncTree_,u.currentWriteId,!0));else{var d=Ci(t,u.path,s);u.currentInputSnapshot=d;var f=e[a].update(d.val());if(void 0!==f){Et("transaction failed: Data returned ",f,u.path);var p=ee(f);"object"==typeof f&&null!=f&&Object(o.h)(f,".priority")||(p=p.updatePriority(d.getPriority()));var g=u.currentWriteId,y=ri(t),m=ar(p,d,y);u.currentOutputSnapshotRaw=p,u.currentOutputSnapshotResolved=m,u.currentWriteId=ai(t),s.splice(s.indexOf(g),1),i=(i=i.concat(Vn(t.serverSyncTree_,u.path,m,u.currentWriteId,u.applyLocally))).concat(Un(t.serverSyncTree_,g,!0))}else l=!0,h="nodata",i=i.concat(Un(t.serverSyncTree_,u.currentWriteId,!0))}if(Or(t.eventQueue_,n,i),i=[],l&&(e[a].status=2,setTimeout(e[a].unwatcher,Math.floor(0)),e[a].onComplete))if("nodata"===h){var v=new Vi(t,e[a].path),b=new zr(e[a].currentInputSnapshot,v,Ht);r.push(e[a].onComplete.bind(null,null,!1,b))}else r.push(e[a].onComplete.bind(null,new Error(h),!1,null))}for(xi(t,t.transactionQueueTree_),a=0;a<r.length;a++)L(r[a]);Oi(t,t.transactionQueueTree_)}}(t,Ti(t,n),r),r}function Si(t,e){var n,r=t.transactionQueueTree_;for(n=q(e);null!==n&&void 0===Wr(r);)r=Qr(r,n),n=q(e=H(e));return r}function Ti(t,e){var n=[];return Ii(t,e,n),n.sort(function(t,e){return t.order-e.order}),n}function Ii(t,e,n){var r=Wr(e);if(r)for(var i=0;i<r.length;i++)n.push(r[i]);$r(e,function(e){Ii(t,e,n)})}function xi(t,e){var n=Wr(e);if(n){for(var r=0,i=0;i<n.length;i++)2!==n[i].status&&(n[r]=n[i],r++);n.length=r,Kr(e,n.length>0?n:void 0)}$r(e,function(e){xi(t,e)})}function Ai(t,e){var n=Xr(Si(t,e)),r=Qr(t.transactionQueueTree_,e);return function(t,e,n){for(var r=t.parent;null!==r;){if(e(r))return!0;r=r.parent}}(r,function(e){ji(t,e)}),ji(t,r),Jr(r,function(e){ji(t,e)}),n}function ji(t,e){var n=Wr(e);if(n){for(var r=[],i=[],s=-1,a=0;a<n.length;a++)3===n[a].status||(1===n[a].status?(Object(o.d)(s===a-1,"All SENT items should be at beginning of queue."),s=a,n[a].status=3,n[a].abortReason="set"):(Object(o.d)(0===n[a].status,"Unexpected transaction status in abort"),n[a].unwatcher(),i=i.concat(Un(t.serverSyncTree_,n[a].currentWriteId,!0)),n[a].onComplete&&r.push(n[a].onComplete.bind(null,new Error("set"),!1,null))));for(-1===s?Kr(e,void 0):n.length=s+1,Or(t.eventQueue_,Xr(e),i),a=0;a<r.length;a++)L(r[a])}}var ki,Ni=function(){function t(t,e){this.repo_=t,this.path_=e}return t.prototype.cancel=function(t){Object(o.G)("OnDisconnect.cancel",0,1,arguments.length),Object(o.H)("OnDisconnect.cancel",1,t,!0);var e=new o.a;return li(this.repo_,this.path_,e.wrapCallback(t)),e.promise},t.prototype.remove=function(t){Object(o.G)("OnDisconnect.remove",0,1,arguments.length),kt("OnDisconnect.remove",this.path_),Object(o.H)("OnDisconnect.remove",1,t,!0);var e=new o.a;return hi(this.repo_,this.path_,null,e.wrapCallback(t)),e.promise},t.prototype.set=function(t,e){Object(o.G)("OnDisconnect.set",1,2,arguments.length),kt("OnDisconnect.set",this.path_),Ot("OnDisconnect.set",1,t,this.path_,!1),Object(o.H)("OnDisconnect.set",2,e,!0);var n=new o.a;return hi(this.repo_,this.path_,t,n.wrapCallback(e)),n.promise},t.prototype.setWithPriority=function(t,e,n){Object(o.G)("OnDisconnect.setWithPriority",2,3,arguments.length),kt("OnDisconnect.setWithPriority",this.path_),Ot("OnDisconnect.setWithPriority",1,t,this.path_,!1),Tt("OnDisconnect.setWithPriority",2,e,!1),Object(o.H)("OnDisconnect.setWithPriority",3,n,!0);var r=new o.a;return di(this.repo_,this.path_,t,e,r.wrapCallback(n)),r.promise},t.prototype.update=function(t,e){if(Object(o.G)("OnDisconnect.update",1,2,arguments.length),kt("OnDisconnect.update",this.path_),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,E("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}St("OnDisconnect.update",1,t,this.path_,!1),Object(o.H)("OnDisconnect.update",2,e,!0);var i=new o.a;return fi(this.repo_,this.path_,t,i.wrapCallback(e)),i.promise},t}(),Pi=function(){function t(t,e){this.committed=t,this.snapshot=e}return t.prototype.toJSON=function(){return Object(o.G)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}},t}(),Ri=function(){function t(t,e,n,r){this.eventType=t,this.eventRegistration=e,this.snapshot=n,this.prevName=r}return t.prototype.getPath=function(){var t=this.snapshot.getRef();return"value"===this.eventType?t.path:t.getParent().path},t.prototype.getEventType=function(){return this.eventType},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.getPath().toString()+":"+this.eventType+":"+Object(o.F)(this.snapshot.exportVal())},t}(),Di=function(){function t(t,e,n){this.eventRegistration=t,this.error=e,this.path=n}return t.prototype.getPath=function(){return this.path},t.prototype.getEventType=function(){return"cancel"},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.path.toString()+":cancel"},t}(),Mi=function(){function t(t,e,n){this.callback_=t,this.cancelCallback_=e,this.context_=n}return t.prototype.respondsTo=function(t){return"value"===t},t.prototype.createEvent=function(t,e){var n=e.getQueryParams().getIndex();return new Ri("value",this,new zr(t.snapshotNode,e.getRef(),n))},t.prototype.getEventRunner=function(t){var e=this.context_;if("cancel"===t.getEventType()){Object(o.d)(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(e,t.error)}}var r=this.callback_;return function(){r.call(e,t.snapshot)}},t.prototype.createCancelEvent=function(t,e){return this.cancelCallback_?new Di(this,t,e):null},t.prototype.matches=function(e){return e instanceof t&&(!e.callback_||!this.callback_||e.callback_===this.callback_&&e.context_===this.context_)},t.prototype.hasAnyCallback=function(){return null!==this.callback_},t}(),Li=function(){function t(t,e,n){this.callbacks_=t,this.cancelCallback_=e,this.context_=n}return t.prototype.respondsTo=function(t){var e="children_added"===t?"child_added":t;return e="children_removed"===e?"child_removed":e,Object(o.h)(this.callbacks_,e)},t.prototype.createCancelEvent=function(t,e){return this.cancelCallback_?new Di(this,t,e):null},t.prototype.createEvent=function(t,e){Object(o.d)(null!=t.childName,"Child events should have a childName.");var n=e.getRef().child(t.childName),r=e.getQueryParams().getIndex();return new Ri(t.type,this,new zr(t.snapshotNode,n,r),t.prevName)},t.prototype.getEventRunner=function(t){var e=this.context_;if("cancel"===t.getEventType()){Object(o.d)(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(e,t.error)}}var r=this.callbacks_[t.eventType];return function(){r.call(e,t.snapshot,t.prevName)}},t.prototype.matches=function(e){var n=this;if(e instanceof t){if(!this.callbacks_||!e.callbacks_)return!0;if(this.context_===e.context_){var r=Object.keys(e.callbacks_),i=Object.keys(this.callbacks_),o=r.length;if(o===i.length){if(1===o){var s=r[0],a=i[0];return!(a!==s||e.callbacks_[s]&&this.callbacks_[a]&&e.callbacks_[s]!==this.callbacks_[a])}return i.every(function(t){return e.callbacks_[t]===n.callbacks_[t]})}}}return!1},t.prototype.hasAnyCallback=function(){return null!==this.callbacks_},t}(),Fi=function(){function t(t,e,n,r){this.repo=t,this.path=e,this.queryParams_=n,this.orderByCalled_=r}return Object.defineProperty(t,"__referenceConstructor",{get:function(){return Object(o.d)(ki,"Reference.ts has not been loaded"),ki},set:function(t){ki=t},enumerable:!1,configurable:!0}),t.validateQueryEndpoints_=function(t){var e=null,n=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(n=t.getIndexEndValue()),t.getIndex()===Gt){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(t.hasStart()){if(t.getIndexStartName()!==T)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(t.hasEnd()){if(t.getIndexEndName()!==I)throw new Error(r);if("string"!=typeof n)throw new Error(i)}}else if(t.getIndex()===Ht){if(null!=e&&!Ct(e)||null!=n&&!Ct(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(Object(o.d)(t.getIndex()instanceof cn||t.getIndex()===un,"unknown index type."),null!=e&&"object"==typeof e||null!=n&&"object"==typeof n)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")},t.validateLimit_=function(t){if(t.hasStart()&&t.hasEnd()&&t.hasLimit()&&!t.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")},t.prototype.validateNoPreviousOrderByCall_=function(t){if(!0===this.orderByCalled_)throw new Error(t+": You can't combine multiple orderBy calls.")},t.prototype.getQueryParams=function(){return this.queryParams_},t.prototype.getRef=function(){return Object(o.G)("Query.ref",0,0,arguments.length),new t.__referenceConstructor(this.repo,this.path)},t.prototype.on=function(e,n,r,i){Object(o.G)("Query.on",2,4,arguments.length),It("Query.on",1,e,!1),Object(o.H)("Query.on",2,n,!1);var s=t.getCancelAndContextArgs_("Query.on",r,i);if("value"===e)this.onValueEvent(n,s.cancel,s.context);else{var a={};a[e]=n,this.onChildEvent(a,s.cancel,s.context)}return n},t.prototype.onValueEvent=function(t,e,n){var r=new Mi(t,e||null,n||null);pi(this.repo,this,r)},t.prototype.onChildEvent=function(t,e,n){var r=new Li(t,e,n);pi(this.repo,this,r)},t.prototype.off=function(t,e,n){Object(o.G)("Query.off",0,3,arguments.length),It("Query.off",1,t,!0),Object(o.H)("Query.off",2,e,!0),Object(o.I)("Query.off",3,n,!0);var r=null,i=null;if("value"===t){var s=e||null;r=new Mi(s,null,n||null)}else t&&(e&&((i={})[t]=e),r=new Li(i,null,n||null));gi(this.repo,this,r)},t.prototype.get=function(){return null!=(n=function(t,e){var n=e.path,r=null;t.syncPointTree_.foreachOnPath(n,function(t,e){var i=$(t,n);r=r||Nn(e,i)});var i=t.syncPointTree_.get(n);i?r=r||Nn(i,U()):(i=new xn,t.syncPointTree_=t.syncPointTree_.set(n,i));var o=null!=r,s=o?new le(r,!0,!1):null;return pe(jn(i,e,Pe(t.pendingWriteTree_,e.path),o?s.getNode():Zt.EMPTY_NODE,o).viewCache_)}((t=this.repo).serverSyncTree_,e=this))?Promise.resolve(new zr(n,e.getRef(),e.getQueryParams().getIndex())):t.server_.get(e).then(function(n){var r=ee(n),i=qn(t.serverSyncTree_,e.path,r);return Cr(t.eventQueue_,e.path,i),Promise.resolve(new zr(r,e.getRef(),e.getQueryParams().getIndex()))},function(n){return vi(t,"get for query "+Object(o.F)(e)+" failed: "+n),Promise.reject(new Error(n))});var t,e,n},t.prototype.once=function(e,n,r,i){var s=this;Object(o.G)("Query.once",1,4,arguments.length),It("Query.once",1,e,!1),Object(o.H)("Query.once",2,n,!0);var a=t.getCancelAndContextArgs_("Query.once",r,i),u=!0,c=new o.a;c.promise.catch(function(){});var l=function(t){u&&(u=!1,s.off(e,l),n&&n.bind(a.context)(t),c.resolve(t))};return this.on(e,l,function(t){s.off(e,l),a.cancel&&a.cancel.bind(a.context)(t),c.reject(t)}),c.promise},t.prototype.limitToFirst=function(e){if(Object(o.G)("Query.limitToFirst",1,1,arguments.length),"number"!=typeof e||Math.floor(e)!==e||e<=0)throw new Error("Query.limitToFirst: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToFirst: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new t(this.repo,this.path,fn(this.queryParams_,e),this.orderByCalled_)},t.prototype.limitToLast=function(e){if(Object(o.G)("Query.limitToLast",1,1,arguments.length),"number"!=typeof e||Math.floor(e)!==e||e<=0)throw new Error("Query.limitToLast: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToLast: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new t(this.repo,this.path,pn(this.queryParams_,e),this.orderByCalled_)},t.prototype.orderByChild=function(e){if(Object(o.G)("Query.orderByChild",1,1,arguments.length),"$key"===e)throw new Error('Query.orderByChild: "$key" is invalid.  Use Query.orderByKey() instead.');if("$priority"===e)throw new Error('Query.orderByChild: "$priority" is invalid.  Use Query.orderByPriority() instead.');if("$value"===e)throw new Error('Query.orderByChild: "$value" is invalid.  Use Query.orderByValue() instead.');At("Query.orderByChild",1,e,!1),this.validateNoPreviousOrderByCall_("Query.orderByChild");var n=new V(e);if(Y(n))throw new Error("Query.orderByChild: cannot pass in empty path.  Use Query.orderByValue() instead.");var r=new cn(n),i=bn(this.queryParams_,r);return t.validateQueryEndpoints_(i),new t(this.repo,this.path,i,!0)},t.prototype.orderByKey=function(){Object(o.G)("Query.orderByKey",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByKey");var e=bn(this.queryParams_,Gt);return t.validateQueryEndpoints_(e),new t(this.repo,this.path,e,!0)},t.prototype.orderByPriority=function(){Object(o.G)("Query.orderByPriority",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByPriority");var e=bn(this.queryParams_,Ht);return t.validateQueryEndpoints_(e),new t(this.repo,this.path,e,!0)},t.prototype.orderByValue=function(){Object(o.G)("Query.orderByValue",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByValue");var e=bn(this.queryParams_,un);return t.validateQueryEndpoints_(e),new t(this.repo,this.path,e,!0)},t.prototype.startAt=function(e,n){void 0===e&&(e=null),Object(o.G)("Query.startAt",0,2,arguments.length),Ot("Query.startAt",1,e,this.path,!0),xt("Query.startAt",2,n,!0);var r=gn(this.queryParams_,e,n);if(t.validateLimit_(r),t.validateQueryEndpoints_(r),this.queryParams_.hasStart())throw new Error("Query.startAt: Starting point was already set (by another call to startAt or equalTo).");return void 0===e&&(e=null,n=null),new t(this.repo,this.path,r,this.orderByCalled_)},t.prototype.startAfter=function(e,n){void 0===e&&(e=null),Object(o.G)("Query.startAfter",0,2,arguments.length),Ot("Query.startAfter",1,e,this.path,!1),xt("Query.startAfter",2,n,!0);var r=yn(this.queryParams_,e,n);if(t.validateLimit_(r),t.validateQueryEndpoints_(r),this.queryParams_.hasStart())throw new Error("Query.startAfter: Starting point was already set (by another call to startAt, startAfter or equalTo).");return new t(this.repo,this.path,r,this.orderByCalled_)},t.prototype.endAt=function(e,n){void 0===e&&(e=null),Object(o.G)("Query.endAt",0,2,arguments.length),Ot("Query.endAt",1,e,this.path,!0),xt("Query.endAt",2,n,!0);var r=mn(this.queryParams_,e,n);if(t.validateLimit_(r),t.validateQueryEndpoints_(r),this.queryParams_.hasEnd())throw new Error("Query.endAt: Ending point was already set (by another call to endAt, endBefore, or equalTo).");return new t(this.repo,this.path,r,this.orderByCalled_)},t.prototype.endBefore=function(e,n){void 0===e&&(e=null),Object(o.G)("Query.endBefore",0,2,arguments.length),Ot("Query.endBefore",1,e,this.path,!1),xt("Query.endBefore",2,n,!0);var r=vn(this.queryParams_,e,n);if(t.validateLimit_(r),t.validateQueryEndpoints_(r),this.queryParams_.hasEnd())throw new Error("Query.endBefore: Ending point was already set (by another call to endAt, endBefore, or equalTo).");return new t(this.repo,this.path,r,this.orderByCalled_)},t.prototype.equalTo=function(t,e){if(Object(o.G)("Query.equalTo",1,2,arguments.length),Ot("Query.equalTo",1,t,this.path,!1),xt("Query.equalTo",2,e,!0),this.queryParams_.hasStart())throw new Error("Query.equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(this.queryParams_.hasEnd())throw new Error("Query.equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return this.startAt(t,e).endAt(t,e)},t.prototype.toString=function(){return Object(o.G)("Query.toString",0,0,arguments.length),this.repo.toString()+G(this.path)},t.prototype.toJSON=function(){return Object(o.G)("Query.toJSON",0,1,arguments.length),this.toString()},t.prototype.queryObject=function(){return function(t){var e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_)),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_)),t.limitSet_){e.l=t.limit_;var n=t.viewFrom_;""===n&&(n=t.isViewFromLeft()?"l":"r"),e.vf=n}return t.index_!==Ht&&(e.i=t.index_.toString()),e}(this.queryParams_)},t.prototype.queryIdentifier=function(){var t=this.queryObject(),e=k(t);return"{}"===e?"default":e},t.prototype.isEqual=function(e){if(Object(o.G)("Query.isEqual",1,1,arguments.length),!(e instanceof t)){var n="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(n)}var r=this.repo===e.repo,i=X(this.path,e.path),s=this.queryIdentifier()===e.queryIdentifier();return r&&i&&s},t.getCancelAndContextArgs_=function(t,e,n){var r={cancel:null,context:null};if(e&&n)r.cancel=e,Object(o.H)(t,3,r.cancel,!0),r.context=n,Object(o.I)(t,4,r.context,!0);else if(e)if("object"==typeof e&&null!==e)r.context=e;else{if("function"!=typeof e)throw new Error(Object(o.l)(t,3,!0)+" must either be a cancel callback or a context object.");r.cancel=e}return r},Object.defineProperty(t.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),t}(),Vi=function(t){function e(e,n){if(!(e instanceof ei))throw new Error("new Reference() no longer supported - use app.database().");return t.call(this,e,n,new dn,!1)||this}return Object(i.c)(e,t),e.prototype.getKey=function(){return Object(o.G)("Reference.key",0,0,arguments.length),Y(this.path)?null:z(this.path)},e.prototype.child=function(t){return Object(o.G)("Reference.child",1,1,arguments.length),"number"==typeof t?t=String(t):t instanceof V||(null===q(this.path)?jt("Reference.child",1,t,!1):At("Reference.child",1,t,!1)),new e(this.repo,K(this.path,t))},e.prototype.getParent=function(){Object(o.G)("Reference.parent",0,0,arguments.length);var t=W(this.path);return null===t?null:new e(this.repo,t)},e.prototype.getRoot=function(){Object(o.G)("Reference.root",0,0,arguments.length);for(var t=this;null!==t.getParent();)t=t.getParent();return t},e.prototype.databaseProp=function(){return _i(this.repo)},e.prototype.set=function(t,e){Object(o.G)("Reference.set",1,2,arguments.length),kt("Reference.set",this.path),Ot("Reference.set",1,t,this.path,!1),Object(o.H)("Reference.set",2,e,!0);var n=new o.a;return ui(this.repo,this.path,t,null,n.wrapCallback(e)),n.promise},e.prototype.update=function(t,e){if(Object(o.G)("Reference.update",1,2,arguments.length),kt("Reference.update",this.path),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,E("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}St("Reference.update",1,t,this.path,!1),Object(o.H)("Reference.update",2,e,!0);var i=new o.a;return ci(this.repo,this.path,t,i.wrapCallback(e)),i.promise},e.prototype.setWithPriority=function(t,e,n){if(Object(o.G)("Reference.setWithPriority",2,3,arguments.length),kt("Reference.setWithPriority",this.path),Ot("Reference.setWithPriority",1,t,this.path,!1),Tt("Reference.setWithPriority",2,e,!1),Object(o.H)("Reference.setWithPriority",3,n,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.setWithPriority failed: "+this.getKey()+" is a read-only object.";var r=new o.a;return ui(this.repo,this.path,t,e,r.wrapCallback(n)),r.promise},e.prototype.remove=function(t){return Object(o.G)("Reference.remove",0,1,arguments.length),kt("Reference.remove",this.path),Object(o.H)("Reference.remove",1,t,!0),this.set(null,t)},e.prototype.transaction=function(t,e,n){if(Object(o.G)("Reference.transaction",1,3,arguments.length),kt("Reference.transaction",this.path),Object(o.H)("Reference.transaction",1,t,!1),Object(o.H)("Reference.transaction",2,e,!0),Pt("Reference.transaction",3,n,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.transaction failed: "+this.getKey()+" is a read-only object.";void 0===n&&(n=!0);var r=new o.a;"function"==typeof e&&r.promise.catch(function(){});var i=function(t,n,i){t?r.reject(t):r.resolve(new Pi(n,i)),"function"==typeof e&&e(t,n,i)};return wi(this.repo,this.path,t,i,n),r.promise},e.prototype.setPriority=function(t,e){Object(o.G)("Reference.setPriority",1,2,arguments.length),kt("Reference.setPriority",this.path),Tt("Reference.setPriority",1,t,!1),Object(o.H)("Reference.setPriority",2,e,!0);var n=new o.a;return ui(this.repo,K(this.path,".priority"),t,null,n.wrapCallback(e)),n.promise},e.prototype.push=function(t,e){Object(o.G)("Reference.push",0,2,arguments.length),kt("Reference.push",this.path),Ot("Reference.push",1,t,this.path,!0),Object(o.H)("Reference.push",2,e,!0);var n,r=ni(this.repo),i=on(r),s=this.child(i),a=this.child(i);return n=null!=t?s.set(t,e).then(function(){return a}):Promise.resolve(a),s.then=n.then.bind(n),s.catch=n.then.bind(n,void 0),"function"==typeof e&&n.catch(function(){}),s},e.prototype.onDisconnect=function(){return kt("Reference.onDisconnect",this.path),new Ni(this.repo,this.path)},Object.defineProperty(e.prototype,"database",{get:function(){return this.databaseProp()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"key",{get:function(){return this.getKey()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return this.getParent()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){return this.getRoot()},enumerable:!1,configurable:!0}),e}(Fi);Fi.__referenceConstructor=Vi,function(t){Object(o.d)(!wn,"__referenceConstructor has already been defined"),wn=t}(Vi);var Ui=function(){function t(t,e){var n=this;this.app_=t,this.authProvider_=e,this.auth_=null,this.auth_=e.getImmediate({optional:!0}),this.auth_||e.get().then(function(t){return n.auth_=t})}return t.prototype.getToken=function(t){return this.auth_?this.auth_.getToken(t).catch(function(t){return t&&"auth/token-not-initialized"===t.code?(_("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)}):Promise.resolve(null)},t.prototype.addTokenChangeListener=function(t){this.auth_?this.auth_.addAuthTokenListener(t):(setTimeout(function(){return t(null)},0),this.authProvider_.get().then(function(e){return e.addAuthTokenListener(t)}))},t.prototype.removeTokenChangeListener=function(t){this.authProvider_.get().then(function(e){return e.removeAuthTokenListener(t)})},t.prototype.notifyForInvalidToken=function(){var t='Provided authentication credentials for the app named "'+this.app_.name+'" are invalid. This usually indicates your app was not initialized correctly. ';E(t+="credential"in this.app_.options?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.app_.options?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.')},t}(),qi=function(){function t(){}return t.prototype.getToken=function(e){return Promise.resolve({accessToken:t.EMULATOR_AUTH_TOKEN})},t.prototype.addTokenChangeListener=function(e){e(t.EMULATOR_AUTH_TOKEN)},t.prototype.removeTokenChangeListener=function(t){},t.prototype.notifyForInvalidToken=function(){},t.EMULATOR_AUTH_TOKEN="owner",t}(),Bi={},Hi=!1;function zi(t,e,n,r){var i=n||t.options.databaseURL;void 0===i&&(t.options.projectId||O("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),_("Using default host for project ",t.options.projectId),i=t.options.projectId+"-default-rtdb.firebaseio.com");var s,a=gt(i,r),u=a.repoInfo,c=void 0;"undefined"!=typeof process&&(c=process.env.FIREBASE_DATABASE_EMULATOR_HOST),c?(s=!0,u=(a=gt(i="http://"+c+"?ns="+u.namespace,r)).repoInfo):s=!a.repoInfo.secure;var l=r&&s?new qi:new Ui(t,e);return Nt("Invalid Firebase Database URL",1,a),Y(a.path)||O("Database URL must point to the root of a Firebase Database (not including a child path)."),_i(function(t,e,n){var r=Object(o.C)(Bi,e.name);r||(Bi[e.name]=r={});var i=Object(o.C)(r,t.toURLString());return i&&O("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),i=new ei(t,Hi,e,n),r[t.toURLString()]=i,i}(u,t,l))}var Gi=function(){function t(t){var e=this;this.repoInternal_=t,this.instanceStarted_=!1,this.INTERNAL={delete:function(){return Object(i.b)(e,void 0,void 0,function(){return Object(i.d)(this,function(t){var e,n;return this.checkDeleted_("delete"),e=this.repo_,(n=Object(o.C)(Bi,e.app.name))&&Object(o.C)(n,e.key)===e||O("Database "+e.app.name+"("+e.repoInfo_+") has already been deleted."),yi(e),delete n[e.key],this.repoInternal_=null,this.rootInternal_=null,[2]})})}},t instanceof ei||O("Don't call new Database() directly - please use firebase.database().")}return Object.defineProperty(t.prototype,"repo_",{get:function(){return this.instanceStarted_||(function(t){if(t.stats_=mr(t.repoInfo_),t.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)t.server_=new Hr(t.repoInfo_,function(e,n,r,i){ii(t,e,n,r,i)},t.authTokenProvider_),setTimeout(function(){return oi(t,!0)},0);else{var e=t.app.options.databaseAuthVariableOverride;if(null!=e){if("object"!=typeof e)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Object(o.F)(e)}catch(i){throw new Error("Invalid authOverride provided: "+i)}}t.persistentConnection_=new Br(t.repoInfo_,t.app.options.appId,function(e,n,r,i){ii(t,e,n,r,i)},function(e){oi(t,e)},function(e){!function(t,e){P(e,function(e,n){si(t,e,n)})}(t,e)},t.authTokenProvider_,e),t.server_=t.persistentConnection_}var n,r;t.authTokenProvider_.addTokenChangeListener(function(e){t.server_.refreshAuthToken(e)}),t.statsReporter_=(n=function(){return new br(t.stats_,t.server_)},r=t.repoInfo_.toString(),yr[r]||(yr[r]=n()),yr[r]),t.infoData_=new fr,t.infoSyncTree_=new Fn({startListening:function(e,n,r,i){var o=[],s=t.infoData_.getNode(e.path);return s.isEmpty()||(o=qn(t.infoSyncTree_,e.path,s),setTimeout(function(){i("ok")},0)),o},stopListening:function(){}}),si(t,"connected",!1),t.serverSyncTree_=new Fn({startListening:function(e,n,r,i){return t.server_.listen(e,r,n,function(n,r){var o=i(n,r);Or(t.eventQueue_,e.path,o)}),[]},stopListening:function(e,n){t.server_.unlisten(e,n)}})}(this.repoInternal_),this.instanceStarted_=!0),this.repoInternal_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"root_",{get:function(){return this.rootInternal_||(this.rootInternal_=new Vi(this.repo_,U())),this.rootInternal_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"app",{get:function(){return this.repo_.app},enumerable:!1,configurable:!0}),t.prototype.useEmulator=function(t,e){this.checkDeleted_("useEmulator"),this.instanceStarted_?O("Cannot call useEmulator() after instance has already been initialized."):function(t,e,n){t.repoInfo_=new st(e+":"+n,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams),t.repoInfo_.nodeAdmin&&(t.authTokenProvider_=new qi)}(this.repoInternal_,t,e)},t.prototype.ref=function(t){return this.checkDeleted_("ref"),Object(o.G)("database.ref",0,1,arguments.length),t instanceof Vi?this.refFromURL(t.toString()):void 0!==t?this.root_.child(t):this.root_},t.prototype.refFromURL=function(t){var e="database.refFromURL";this.checkDeleted_(e),Object(o.G)(e,1,1,arguments.length);var n=gt(t,this.repo_.repoInfo_.nodeAdmin);Nt(e,1,n);var r=n.repoInfo;return this.repo_.repoInfo_.isCustomHost()||r.host===this.repo_.repoInfo_.host||O(e+": Host name does not match the current database: (found "+r.host+" but expected "+this.repo_.repoInfo_.host+")"),this.ref(n.path.toString())},t.prototype.checkDeleted_=function(t){null===this.repoInternal_&&O("Cannot call "+t+" on a deleted database.")},t.prototype.goOffline=function(){Object(o.G)("database.goOffline",0,0,arguments.length),this.checkDeleted_("goOffline"),yi(this.repo_)},t.prototype.goOnline=function(){Object(o.G)("database.goOnline",0,0,arguments.length),this.checkDeleted_("goOnline"),mi(this.repo_)},t.ServerValue={TIMESTAMP:{".sv":"timestamp"},increment:function(t){return{".sv":{increment:t}}}},t}(),Qi=Object.freeze({__proto__:null,forceLongPolling:function(){Lr.forceDisallow(),Nr.forceAllow()},forceWebSockets:function(){Nr.forceDisallow()},isWebSocketsAvailable:function(){return Lr.isAvailable()},setSecurityDebugCallback:function(t,e){t.repo.persistentConnection_.securityDebugCallback_=e},stats:function(t,e){!function(t,e){if(void 0===e&&(e=!1),"undefined"!=typeof console){var n;e?(t.statsListener_||(t.statsListener_=new vr(t.stats_)),n=t.statsListener_.get()):n=t.stats_.get();var r=Object.keys(n).reduce(function(t,e){return Math.max(e.length,t)},0);P(n,function(t,e){for(var n=t,i=t.length;i<r+2;i++)n+=" ";console.log(n+e)})}}(t.repo,e)},statsIncrementCounter:function(t,e){!function(t,e){t.stats_.incrementCounter(e),t.statsReporter_.statsToReport_[e]=!0}(t.repo,e)},dataUpdateCount:function(t){return t.repo.dataUpdateCount},interceptServerData:function(t,e){return function(t,e){t.interceptServerDataCallback_=e}(t.repo,e)},initStandalone:function(t){var e=t.app,n=t.url,r=t.customAuthImpl,i=t.namespace,o=t.nodeAdmin,s=void 0!==o&&o;Dr(t.version);var u=new a.c("auth-internal",new a.b("database-standalone"));return u.setComponent(new a.a("auth-internal",function(){return r},"PRIVATE")),{instance:zi(e,u,n,s),namespace:i}}}),Wi=Br;Br.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)},Br.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};var Ki=Object.freeze({__proto__:null,DataConnection:Wi,RealTimeConnection:Vr,hijackHash:function(t){var e=Br.prototype.put;return Br.prototype.put=function(n,r,i,o){void 0!==o&&(o=t()),e.call(this,n,r,i,o)},function(){Br.prototype.put=e}},ConnectionTarget:st,queryIdentifier:function(t){return t.queryIdentifier()},forceRestClient:function(t){!function(t){Hi=t}(t)}}),Yi=Gi.ServerValue;!function(e){Dr(e.SDK_VERSION);var n=e.INTERNAL.registerComponent(new a.a("database",function(t,e){var n=e.instanceIdentifier;return zi(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"),n,void 0)},"PUBLIC").setServiceProps({Reference:Vi,Query:Fi,Database:Gi,DataSnapshot:zr,enableLogging:b,INTERNAL:Qi,ServerValue:Yi,TEST_ACCESS:Ki}).setMultipleInstances(!0));e.registerVersion("@firebase/database","0.9.6"),Object(o.v)()&&(t.exports=n)}(r.a)}).call(this,n("3UD+")(t))},"7o/Q":function(t,e,n){"use strict";n.d(e,"a",function(){return c});var r=n("n6bG"),i=n("gRHU"),o=n("quSY"),s=n("2QA8"),a=n("2fFW"),u=n("NJ4a");class c extends o.a{constructor(t,e,n){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=i.a;break;case 1:if(!t){this.destination=i.a;break}if("object"==typeof t){t instanceof c?(this.syncErrorThrowable=t.syncErrorThrowable,this.destination=t,t.add(this)):(this.syncErrorThrowable=!0,this.destination=new l(this,t));break}default:this.syncErrorThrowable=!0,this.destination=new l(this,t,e,n)}}[s.a](){return this}static create(t,e,n){const r=new c(t,e,n);return r.syncErrorThrowable=!1,r}next(t){this.isStopped||this._next(t)}error(t){this.isStopped||(this.isStopped=!0,this._error(t))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(t){this.destination.next(t)}_error(t){this.destination.error(t),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:t}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=t,this}}class l extends c{constructor(t,e,n,o){let s;super(),this._parentSubscriber=t;let a=this;Object(r.a)(e)?s=e:e&&(s=e.next,n=e.error,o=e.complete,e!==i.a&&(a=Object.create(e),Object(r.a)(a.unsubscribe)&&this.add(a.unsubscribe.bind(a)),a.unsubscribe=this.unsubscribe.bind(this))),this._context=a,this._next=s,this._error=n,this._complete=o}next(t){if(!this.isStopped&&this._next){const{_parentSubscriber:e}=this;a.a.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}}error(t){if(!this.isStopped){const{_parentSubscriber:e}=this,{useDeprecatedSynchronousErrorHandling:n}=a.a;if(this._error)n&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)n?(e.syncErrorValue=t,e.syncErrorThrown=!0):Object(u.a)(t),this.unsubscribe();else{if(this.unsubscribe(),n)throw t;Object(u.a)(t)}}}complete(){if(!this.isStopped){const{_parentSubscriber:t}=this;if(this._complete){const e=()=>this._complete.call(this._context);a.a.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,e),this.unsubscribe()):(this.__tryOrUnsub(e),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(t,e){try{t.call(this._context,e)}catch(n){if(this.unsubscribe(),a.a.useDeprecatedSynchronousErrorHandling)throw n;Object(u.a)(n)}}__tryOrSetError(t,e,n){if(!a.a.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,n)}catch(r){return a.a.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=r,t.syncErrorThrown=!0,!0):(Object(u.a)(r),!0)}return!1}_unsubscribe(){const{_parentSubscriber:t}=this;this._context=null,this._parentSubscriber=null,t.unsubscribe()}}},"9ppp":function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=(()=>{function t(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return t.prototype=Object.create(Error.prototype),t})()},Cfvw:function(t,e,n){"use strict";n.d(e,"a",function(){return h});var r=n("HDdC"),i=n("SeVD"),o=n("quSY"),s=n("kJWO"),a=n("jZKg"),u=n("Lhse"),c=n("c2HN"),l=n("I55L");function h(t,e){return e?function(t,e){if(null!=t){if(function(t){return t&&"function"==typeof t[s.a]}(t))return function(t,e){return new r.a(n=>{const r=new o.a;return r.add(e.schedule(()=>{const i=t[s.a]();r.add(i.subscribe({next(t){r.add(e.schedule(()=>n.next(t)))},error(t){r.add(e.schedule(()=>n.error(t)))},complete(){r.add(e.schedule(()=>n.complete()))}}))})),r})}(t,e);if(Object(c.a)(t))return function(t,e){return new r.a(n=>{const r=new o.a;return r.add(e.schedule(()=>t.then(t=>{r.add(e.schedule(()=>{n.next(t),r.add(e.schedule(()=>n.complete()))}))},t=>{r.add(e.schedule(()=>n.error(t)))}))),r})}(t,e);if(Object(l.a)(t))return Object(a.a)(t,e);if(function(t){return t&&"function"==typeof t[u.a]}(t)||"string"==typeof t)return function(t,e){if(!t)throw new Error("Iterable cannot be null");return new r.a(n=>{const r=new o.a;let i;return r.add(()=>{i&&"function"==typeof i.return&&i.return()}),r.add(e.schedule(()=>{i=t[u.a](),r.add(e.schedule(function(){if(n.closed)return;let t,e;try{const n=i.next();t=n.value,e=n.done}catch(r){return void n.error(r)}e?n.complete():(n.next(t),this.schedule())}))})),r})}(t,e)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")}(t,e):t instanceof r.a?t:new r.a(Object(i.a)(t))}},D0XW:function(t,e,n){"use strict";n.d(e,"b",function(){return i}),n.d(e,"a",function(){return o});var r=n("3N8a");const i=new(n("IjjT").a)(r.a),o=i},DH7j:function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=(()=>Array.isArray||(t=>t&&"number"==typeof t.length))()},EQ5u:function(t,e,n){"use strict";n.d(e,"a",function(){return a}),n.d(e,"b",function(){return u});var r=n("XNiG"),i=n("HDdC"),o=(n("7o/Q"),n("quSY")),s=n("x+ZX");class a extends i.a{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._refCount=0,this._isComplete=!1}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return t&&!t.isStopped||(this._subject=this.subjectFactory()),this._subject}connect(){let t=this._connection;return t||(this._isComplete=!1,t=this._connection=new o.a,t.add(this.source.subscribe(new c(this.getSubject(),this))),t.closed&&(this._connection=null,t=o.a.EMPTY)),t}refCount(){return Object(s.a)()(this)}}const u=(()=>{const t=a.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:t._subscribe},_isComplete:{value:t._isComplete,writable:!0},getSubject:{value:t.getSubject},connect:{value:t.connect},refCount:{value:t.refCount}}})();class c extends r.b{constructor(t,e){super(t),this.connectable=e}_error(t){this._unsubscribe(),super._error(t)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const t=this.connectable;if(t){this.connectable=null;const e=t._connection;t._refCount=0,t._subject=null,t._connection=null,e&&e.unsubscribe()}}}},EY2u:function(t,e,n){"use strict";n.d(e,"a",function(){return i}),n.d(e,"b",function(){return o});var r=n("HDdC");const i=new r.a(t=>t.complete());function o(t){return t?function(t){return new r.a(e=>t.schedule(()=>e.complete()))}(t):i}},HDdC:function(t,e,n){"use strict";n.d(e,"a",function(){return c});var r=n("7o/Q"),i=n("2QA8"),o=n("gRHU"),s=n("kJWO"),a=n("SpAZ"),u=n("2fFW");let c=(()=>{class t{constructor(t){this._isScalar=!1,t&&(this._subscribe=t)}lift(e){const n=new t;return n.source=this,n.operator=e,n}subscribe(t,e,n){const{operator:s}=this,a=function(t,e,n){if(t){if(t instanceof r.a)return t;if(t[i.a])return t[i.a]()}return t||e||n?new r.a(t,e,n):new r.a(o.a)}(t,e,n);if(a.add(s?s.call(a,this.source):this.source||u.a.useDeprecatedSynchronousErrorHandling&&!a.syncErrorThrowable?this._subscribe(a):this._trySubscribe(a)),u.a.useDeprecatedSynchronousErrorHandling&&a.syncErrorThrowable&&(a.syncErrorThrowable=!1,a.syncErrorThrown))throw a.syncErrorValue;return a}_trySubscribe(t){try{return this._subscribe(t)}catch(e){u.a.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),function(t){for(;t;){const{closed:e,destination:n,isStopped:i}=t;if(e||i)return!1;t=n&&n instanceof r.a?n:null}return!0}(t)?t.error(e):console.warn(e)}}forEach(t,e){return new(e=l(e))((e,n)=>{let r;r=this.subscribe(e=>{try{t(e)}catch(i){n(i),r&&r.unsubscribe()}},n,e)})}_subscribe(t){const{source:e}=this;return e&&e.subscribe(t)}[s.a](){return this}pipe(...t){return 0===t.length?this:(0===(e=t).length?a.a:1===e.length?e[0]:function(t){return e.reduce((t,e)=>e(t),t)})(this);var e}toPromise(t){return new(t=l(t))((t,e)=>{let n;this.subscribe(t=>n=t,t=>e(t),()=>t(n))})}}return t.create=e=>new t(e),t})();function l(t){if(t||(t=u.a.Promise||Promise),!t)throw new Error("no Promise impl found");return t}},I55L:function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=t=>t&&"number"==typeof t.length&&"function"!=typeof t},IjjT:function(t,e,n){"use strict";n.d(e,"a",function(){return i});let r=(()=>{class t{constructor(e,n=t.now){this.SchedulerAction=e,this.now=n}schedule(t,e=0,n){return new this.SchedulerAction(this,t).schedule(n,e)}}return t.now=()=>Date.now(),t})();class i extends r{constructor(t,e=r.now){super(t,()=>i.delegate&&i.delegate!==this?i.delegate.now():e()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(t,e=0,n){return i.delegate&&i.delegate!==this?i.delegate.schedule(t,e,n):super.schedule(t,e,n)}flush(t){const{actions:e}=this;if(this.active)return void e.push(t);let n;this.active=!0;do{if(n=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}}}},Jgta:function(t,e,n){"use strict";var r=n("zIRd");n.d(e,"a",function(){return r.a}),r.a.registerVersion("firebase","8.3.1","app")},KqfI:function(t,e,n){"use strict";function r(){}n.d(e,"a",function(){return r})},LRne:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("z+Ro"),i=n("yCtX"),o=n("jZKg");function s(...t){let e=t[t.length-1];return Object(r.a)(e)?(t.pop(),Object(o.a)(t,e)):Object(i.a)(t)}},Lhse:function(t,e,n){"use strict";function r(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}n.d(e,"a",function(){return i});const i=r()},NJ4a:function(t,e,n){"use strict";function r(t){setTimeout(()=>{throw t},0)}n.d(e,"a",function(){return r})},SeVD:function(t,e,n){"use strict";n.d(e,"a",function(){return l});var r=n("ngJS"),i=n("NJ4a"),o=n("Lhse"),s=n("kJWO"),a=n("I55L"),u=n("c2HN"),c=n("XoHu");const l=t=>{if(t&&"function"==typeof t[s.a])return l=t,t=>{const e=l[s.a]();if("function"!=typeof e.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return e.subscribe(t)};if(Object(a.a)(t))return Object(r.a)(t);if(Object(u.a)(t))return n=t,t=>(n.then(e=>{t.closed||(t.next(e),t.complete())},e=>t.error(e)).then(null,i.a),t);if(t&&"function"==typeof t[o.a])return e=t,t=>{const n=e[o.a]();for(;;){let e;try{e=n.next()}catch(r){return t.error(r),t}if(e.done){t.complete();break}if(t.next(e.value),t.closed)break}return"function"==typeof n.return&&t.add(()=>{n.return&&n.return()}),t};{const e=Object(c.a)(t)?"an invalid object":`'${t}'`;throw new TypeError(`You provided ${e} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`)}var e,n,l}},SpAZ:function(t,e,n){"use strict";function r(t){return t}n.d(e,"a",function(){return r})},VRyK:function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n("HDdC"),i=n("z+Ro"),o=n("bHdf"),s=n("yCtX");function a(...t){let e=Number.POSITIVE_INFINITY,n=null,a=t[t.length-1];return Object(i.a)(a)?(n=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(e=t.pop())):"number"==typeof a&&(e=t.pop()),null===n&&1===t.length&&t[0]instanceof r.a?t[0]:Object(o.a)(e)(Object(s.a)(t,n))}},WMd4:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("EY2u"),i=n("LRne"),o=n("HDdC");let s=(()=>{class t{constructor(t,e,n){this.kind=t,this.value=e,this.error=n,this.hasValue="N"===t}observe(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}}do(t,e,n){switch(this.kind){case"N":return t&&t(this.value);case"E":return e&&e(this.error);case"C":return n&&n()}}accept(t,e,n){return t&&"function"==typeof t.next?this.observe(t):this.do(t,e,n)}toObservable(){switch(this.kind){case"N":return Object(i.a)(this.value);case"E":return t=this.error,new o.a(e=>e.error(t));case"C":return Object(r.b)()}var t;throw new Error("unexpected notification kind value")}static createNext(e){return void 0!==e?new t("N",e):t.undefinedValueNotification}static createError(e){return new t("E",void 0,e)}static createComplete(){return t.completeNotification}}return t.completeNotification=new t("C"),t.undefinedValueNotification=new t("N",void 0),t})()},XNiG:function(t,e,n){"use strict";n.d(e,"b",function(){return c}),n.d(e,"a",function(){return l});var r=n("HDdC"),i=n("7o/Q"),o=n("quSY"),s=n("9ppp"),a=n("Ylt2"),u=n("2QA8");class c extends i.a{constructor(t){super(t),this.destination=t}}let l=(()=>{class t extends r.a{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[u.a](){return new c(this)}lift(t){const e=new h(this,this);return e.operator=t,e}next(t){if(this.closed)throw new s.a;if(!this.isStopped){const{observers:e}=this,n=e.length,r=e.slice();for(let i=0;i<n;i++)r[i].next(t)}}error(t){if(this.closed)throw new s.a;this.hasError=!0,this.thrownError=t,this.isStopped=!0;const{observers:e}=this,n=e.length,r=e.slice();for(let i=0;i<n;i++)r[i].error(t);this.observers.length=0}complete(){if(this.closed)throw new s.a;this.isStopped=!0;const{observers:t}=this,e=t.length,n=t.slice();for(let r=0;r<e;r++)n[r].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(t){if(this.closed)throw new s.a;return super._trySubscribe(t)}_subscribe(t){if(this.closed)throw new s.a;return this.hasError?(t.error(this.thrownError),o.a.EMPTY):this.isStopped?(t.complete(),o.a.EMPTY):(this.observers.push(t),new a.a(this,t))}asObservable(){const t=new r.a;return t.source=this,t}}return t.create=(t,e)=>new h(t,e),t})();class h extends l{constructor(t,e){super(),this.destination=t,this.source=e}next(t){const{destination:e}=this;e&&e.next&&e.next(t)}error(t){const{destination:e}=this;e&&e.error&&this.destination.error(t)}complete(){const{destination:t}=this;t&&t.complete&&this.destination.complete()}_subscribe(t){const{source:e}=this;return e?this.source.subscribe(t):o.a.EMPTY}}},XoHu:function(t,e,n){"use strict";function r(t){return null!==t&&"object"==typeof t}n.d(e,"a",function(){return r})},Y7HM:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("DH7j");function i(t){return!Object(r.a)(t)&&t-parseFloat(t)+1>=0}},Ylt2:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("quSY");class i extends r.a{constructor(t,e){super(),this.subject=t,this.subscriber=e,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const t=this.subject,e=t.observers;if(this.subject=null,!e||0===e.length||t.isStopped||t.closed)return;const n=e.indexOf(this.subscriber);-1!==n&&e.splice(n,1)}}},bHdf:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("5+tZ"),i=n("SpAZ");function o(t=Number.POSITIVE_INFINITY){return Object(r.a)(i.a,t)}},c2HN:function(t,e,n){"use strict";function r(t){return!!t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}n.d(e,"a",function(){return r})},fXoL:function(t,e,n){"use strict";n.d(e,"a",function(){return cn}),n.d(e,"b",function(){return $c}),n.d(e,"c",function(){return Gc}),n.d(e,"d",function(){return Hc}),n.d(e,"e",function(){return zc}),n.d(e,"f",function(){return Hl}),n.d(e,"g",function(){return Pl}),n.d(e,"h",function(){return qu}),n.d(e,"i",function(){return al}),n.d(e,"j",function(){return hu}),n.d(e,"k",function(){return Zc}),n.d(e,"l",function(){return gu}),n.d(e,"m",function(){return Er}),n.d(e,"n",function(){return Cc}),n.d(e,"o",function(){return So}),n.d(e,"p",function(){return An}),n.d(e,"q",function(){return j}),n.d(e,"r",function(){return un}),n.d(e,"s",function(){return qo}),n.d(e,"t",function(){return Ru}),n.d(e,"u",function(){return Mu}),n.d(e,"v",function(){return Xc}),n.d(e,"w",function(){return Xu}),n.d(e,"x",function(){return Dl}),n.d(e,"y",function(){return Ju}),n.d(e,"z",function(){return xl}),n.d(e,"A",function(){return ll}),n.d(e,"B",function(){return jn}),n.d(e,"C",function(){return Yc}),n.d(e,"D",function(){return Kc}),n.d(e,"E",function(){return vu}),n.d(e,"F",function(){return mu}),n.d(e,"G",function(){return jr}),n.d(e,"H",function(){return _u}),n.d(e,"I",function(){return br}),n.d(e,"J",function(){return kn}),n.d(e,"K",function(){return Fl}),n.d(e,"L",function(){return Wu}),n.d(e,"M",function(){return ml}),n.d(e,"N",function(){return ln}),n.d(e,"O",function(){return Cu}),n.d(e,"P",function(){return wu}),n.d(e,"Q",function(){return tc}),n.d(e,"R",function(){return M}),n.d(e,"S",function(){return Al}),n.d(e,"T",function(){return Tl}),n.d(e,"U",function(){return f}),n.d(e,"V",function(){return Sl}),n.d(e,"W",function(){return ql}),n.d(e,"X",function(){return _l}),n.d(e,"Y",function(){return Jc}),n.d(e,"Z",function(){return Io}),n.d(e,"ab",function(){return aa}),n.d(e,"bb",function(){return mr}),n.d(e,"cb",function(){return Zn}),n.d(e,"db",function(){return qn}),n.d(e,"eb",function(){return Hn}),n.d(e,"fb",function(){return Wn}),n.d(e,"gb",function(){return Gn}),n.d(e,"hb",function(){return zn}),n.d(e,"ib",function(){return Qn}),n.d(e,"jb",function(){return ra}),n.d(e,"kb",function(){return Ul}),n.d(e,"lb",function(){return ia}),n.d(e,"mb",function(){return oa}),n.d(e,"nb",function(){return Bn}),n.d(e,"ob",function(){return q}),n.d(e,"pb",function(){return Jo}),n.d(e,"qb",function(){return ms}),n.d(e,"rb",function(){return gs}),n.d(e,"sb",function(){return ys}),n.d(e,"tb",function(){return na}),n.d(e,"ub",function(){return Tt}),n.d(e,"vb",function(){return l}),n.d(e,"wb",function(){return Un}),n.d(e,"xb",function(){return Ho}),n.d(e,"yb",function(){return _t}),n.d(e,"zb",function(){return uu}),n.d(e,"Ab",function(){return Ti}),n.d(e,"Bb",function(){return ns}),n.d(e,"Cb",function(){return Ds}),n.d(e,"Db",function(){return Js}),n.d(e,"Eb",function(){return Rs}),n.d(e,"Fb",function(){return Mc}),n.d(e,"Gb",function(){return Z}),n.d(e,"Hb",function(){return st}),n.d(e,"Ib",function(){return w}),n.d(e,"Jb",function(){return C}),n.d(e,"Kb",function(){return rt}),n.d(e,"Lb",function(){return at}),n.d(e,"Mb",function(){return ss}),n.d(e,"Nb",function(){return hs}),n.d(e,"Ob",function(){return fs}),n.d(e,"Pb",function(){return ds}),n.d(e,"Qb",function(){return ls}),n.d(e,"Rb",function(){return cs}),n.d(e,"Sb",function(){return ps}),n.d(e,"Tb",function(){return nn}),n.d(e,"Ub",function(){return Xs}),n.d(e,"Vb",function(){return Xa}),n.d(e,"Wb",function(){return tu}),n.d(e,"Xb",function(){return Za}),n.d(e,"Yb",function(){return Tn}),n.d(e,"Zb",function(){return on}),n.d(e,"ac",function(){return Bc}),n.d(e,"bc",function(){return vs}),n.d(e,"cc",function(){return Lc}),n.d(e,"dc",function(){return ws}),n.d(e,"ec",function(){return _c}),n.d(e,"fc",function(){return wc}),n.d(e,"gc",function(){return Es}),n.d(e,"hc",function(){return Os}),n.d(e,"ic",function(){return as}),n.d(e,"jc",function(){return Ss}),n.d(e,"kc",function(){return Ts}),n.d(e,"lc",function(){return gc}),n.d(e,"mc",function(){return yc}),n.d(e,"nc",function(){return mc}),n.d(e,"oc",function(){return Rc}),n.d(e,"pc",function(){return os}),n.d(e,"qc",function(){return Qt}),n.d(e,"rc",function(){return _r}),n.d(e,"sc",function(){return it}),n.d(e,"tc",function(){return Ps}),n.d(e,"uc",function(){return is}),n.d(e,"vc",function(){return qc}),n.d(e,"wc",function(){return Ws}),n.d(e,"xc",function(){return Ks}),n.d(e,"yc",function(){return Ys}),n.d(e,"zc",function(){return $s}),n.d(e,"Ac",function(){return Dc});var r=n("XNiG"),i=n("quSY"),o=n("HDdC"),s=n("VRyK"),a=n("w1tV");function u(t){for(let e in t)if(t[e]===u)return e;throw Error("Could not find renamed property on target object.")}function c(t,e){for(const n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function l(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(l).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const e=t.toString();if(null==e)return""+e;const n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function h(t,e){return null==t||""===t?null===e?"":e:null==e||""===e?t:t+" "+e}const d=u({__forward_ref__:u});function f(t){return t.__forward_ref__=f,t.toString=function(){return l(this())},t}function p(t){return g(t)?t():t}function g(t){return"function"==typeof t&&t.hasOwnProperty(d)&&t.__forward_ref__===f}class y extends Error{constructor(t,e){super(function(t,e){return`${t?`NG0${t}: `:""}${e}`}(t,e)),this.code=t}}function m(t){return"string"==typeof t?t:null==t?"":String(t)}function v(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():m(t)}function b(t,e){const n=e?` in ${e}`:"";throw new y("201",`No provider for ${v(t)} found${n}`)}function _(t,e,n,r){throw new Error(`ASSERTION ERROR: ${t}`+(null==r?"":` [Expected=> ${n} ${r} ${e} <=Actual]`))}function w(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function C(t){return{providers:t.providers||[],imports:t.imports||[]}}function O(t){return E(t,T)||E(t,x)}function E(t,e){return t.hasOwnProperty(e)?t[e]:null}function S(t){return t&&(t.hasOwnProperty(I)||t.hasOwnProperty(A))?t[I]:null}const T=u({"\u0275prov":u}),I=u({"\u0275inj":u}),x=u({ngInjectableDef:u}),A=u({ngInjectorDef:u});var j=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}({});let k;function N(t){const e=k;return k=t,e}function P(t,e,n){const r=O(t);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:n&j.Optional?null:void 0!==e?e:void b(l(t),"Injector")}function R(t){return{toString:t}.toString()}var D=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}({}),M=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}({});const L="undefined"!=typeof globalThis&&globalThis,F="undefined"!=typeof window&&window,V="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,U="undefined"!=typeof global&&global,q=L||U||F||V,B={},H=[],z=[],G=u({"\u0275cmp":u}),Q=u({"\u0275dir":u}),W=u({"\u0275pipe":u}),K=u({"\u0275mod":u}),Y=u({"\u0275loc":u}),$=u({"\u0275fac":u}),J=u({__NG_ELEMENT_ID__:u});let X=0;function Z(t){return R(()=>{const e={},n={type:t.type,providersResolver:null,decls:t.decls,vars:t.vars,factory:null,template:t.template||null,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputs:null,outputs:null,exportAs:t.exportAs||null,onPush:t.changeDetection===D.OnPush,directiveDefs:null,pipeDefs:null,selectors:t.selectors||z,viewQuery:t.viewQuery||null,features:t.features||null,data:t.data||{},encapsulation:t.encapsulation||M.Emulated,id:"c",styles:t.styles||z,_:null,setInput:null,schemas:t.schemas||null,tView:null},r=t.directives,i=t.features,o=t.pipes;return n.id+=X++,n.inputs=ot(t.inputs,e),n.outputs=ot(t.outputs),i&&i.forEach(t=>t(n)),n.directiveDefs=r?()=>("function"==typeof r?r():r).map(tt):null,n.pipeDefs=o?()=>("function"==typeof o?o():o).map(et):null,n})}function tt(t){return ut(t)||function(t){return t[Q]||null}(t)}function et(t){return function(t){return t[W]||null}(t)}const nt={};function rt(t){const e={type:t.type,bootstrap:t.bootstrap||z,declarations:t.declarations||z,imports:t.imports||z,exports:t.exports||z,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null};return null!=t.id&&R(()=>{nt[t.id]=t.type}),e}function it(t,e){return R(()=>{const n=ct(t,!0);n.declarations=e.declarations||z,n.imports=e.imports||z,n.exports=e.exports||z})}function ot(t,e){if(null==t)return B;const n={};for(const r in t)if(t.hasOwnProperty(r)){let i=t[r],o=i;Array.isArray(i)&&(o=i[1],i=i[0]),n[i]=r,e&&(e[i]=o)}return n}const st=Z;function at(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,onDestroy:t.type.prototype.ngOnDestroy||null}}function ut(t){return t[G]||null}function ct(t,e){const n=t[K]||null;if(!n&&!0===e)throw new Error(`Type ${l(t)} does not have '\u0275mod' property.`);return n}const lt=20,ht=10;function dt(t){return Array.isArray(t)&&"object"==typeof t[1]}function ft(t){return Array.isArray(t)&&!0===t[1]}function pt(t){return 0!=(8&t.flags)}function gt(t){return 2==(2&t.flags)}function yt(t){return 1==(1&t.flags)}function mt(t){return null!==t.template}function vt(t,e){return t.hasOwnProperty($)?t[$]:null}class bt{constructor(t,e,n){this.previousValue=t,this.currentValue=e,this.firstChange=n}isFirstChange(){return this.firstChange}}function _t(){return wt}function wt(t){return t.type.prototype.ngOnChanges&&(t.setInput=Ot),Ct}function Ct(){const t=Et(this),e=null==t?void 0:t.current;if(e){const n=t.previous;if(n===B)t.previous=e;else for(let t in e)n[t]=e[t];t.current=null,this.ngOnChanges(e)}}function Ot(t,e,n,r){const i=Et(t)||function(t,e){return t.__ngSimpleChanges__=e}(t,{previous:B,current:null}),o=i.current||(i.current={}),s=i.previous,a=this.declaredInputs[n],u=s[a];o[a]=new bt(u&&u.currentValue,e,s===B),t[r]=e}function Et(t){return t.__ngSimpleChanges__||null}let St;function Tt(t){St=t}function It(){return void 0!==St?St:"undefined"!=typeof document?document:void 0}function xt(t){return!!t.listen}_t.ngInherit=!0;const At={createRenderer:(t,e)=>It()};function jt(t){for(;Array.isArray(t);)t=t[0];return t}function kt(t,e){return jt(e[t])}function Nt(t,e){return jt(e[t.index])}function Pt(t,e){return t.data[e]}function Rt(t,e){return t[e]}function Dt(t,e){const n=e[t];return dt(n)?n:n[0]}function Mt(t){const e=function(t){return t.__ngContext__||null}(t);return e?Array.isArray(e)?e:e.lView:null}function Lt(t){return 4==(4&t[2])}function Ft(t){return 128==(128&t[2])}function Vt(t,e){return null==e?null:t[e]}function Ut(t){t[18]=0}function qt(t,e){t[5]+=e;let n=t,r=t[3];for(;null!==r&&(1===e&&1===n[5]||-1===e&&0===n[5]);)r[5]+=e,n=r,r=r[3]}const Bt={lFrame:pe(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Ht(){return Bt.bindingsEnabled}function zt(){return Bt.lFrame.lView}function Gt(){return Bt.lFrame.tView}function Qt(t){Bt.lFrame.contextLView=t}function Wt(){let t=Kt();for(;null!==t&&64===t.type;)t=t.parent;return t}function Kt(){return Bt.lFrame.currentTNode}function Yt(){const t=Bt.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function $t(t,e){const n=Bt.lFrame;n.currentTNode=t,n.isParent=e}function Jt(){return Bt.lFrame.isParent}function Xt(){Bt.lFrame.isParent=!1}function Zt(){return Bt.isInCheckNoChangesMode}function te(t){Bt.isInCheckNoChangesMode=t}function ee(){const t=Bt.lFrame;let e=t.bindingRootIndex;return-1===e&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function ne(){return Bt.lFrame.bindingIndex}function re(){return Bt.lFrame.bindingIndex++}function ie(t){const e=Bt.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function oe(t){Bt.lFrame.inI18n=t}function se(t,e){const n=Bt.lFrame;n.bindingIndex=n.bindingRootIndex=t,ae(e)}function ae(t){Bt.lFrame.currentDirectiveIndex=t}function ue(){return Bt.lFrame.currentQueryIndex}function ce(t){Bt.lFrame.currentQueryIndex=t}function le(t){const e=t[1];return 2===e.type?e.declTNode:1===e.type?t[6]:null}function he(t,e,n){if(n&j.SkipSelf){let r=e,i=t;for(;r=r.parent,!(null!==r||n&j.Host||(r=le(i),null===r)||(i=i[15],10&r.type)););if(null===r)return!1;e=r,t=i}const r=Bt.lFrame=fe();return r.currentTNode=e,r.lView=t,!0}function de(t){const e=fe(),n=t[1];Bt.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function fe(){const t=Bt.lFrame,e=null===t?null:t.child;return null===e?pe(t):e}function pe(t){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=e),e}function ge(){const t=Bt.lFrame;return Bt.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const ye=ge;function me(){const t=ge();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function ve(){return Bt.lFrame.selectedIndex}function be(t){Bt.lFrame.selectedIndex=t}function _e(){const t=Bt.lFrame;return Pt(t.tView,t.selectedIndex)}function we(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){const e=t.data[n].type.prototype,{ngAfterContentInit:r,ngAfterContentChecked:i,ngAfterViewInit:o,ngAfterViewChecked:s,ngOnDestroy:a}=e;r&&(t.contentHooks||(t.contentHooks=[])).push(-n,r),i&&((t.contentHooks||(t.contentHooks=[])).push(n,i),(t.contentCheckHooks||(t.contentCheckHooks=[])).push(n,i)),o&&(t.viewHooks||(t.viewHooks=[])).push(-n,o),s&&((t.viewHooks||(t.viewHooks=[])).push(n,s),(t.viewCheckHooks||(t.viewCheckHooks=[])).push(n,s)),null!=a&&(t.destroyHooks||(t.destroyHooks=[])).push(n,a)}}function Ce(t,e,n){Se(t,e,3,n)}function Oe(t,e,n,r){(3&t[2])===n&&Se(t,e,n,r)}function Ee(t,e){let n=t[2];(3&n)===e&&(n&=2047,n+=1,t[2]=n)}function Se(t,e,n,r){const i=null!=r?r:-1,o=e.length-1;let s=0;for(let a=void 0!==r?65535&t[18]:0;a<o;a++)if("number"==typeof e[a+1]){if(s=e[a],null!=r&&s>=r)break}else e[a]<0&&(t[18]+=65536),(s<i||-1==i)&&(Te(t,n,e,a),t[18]=(4294901760&t[18])+a+2),a++}function Te(t,e,n,r){const i=n[r]<0,o=n[r+1],s=t[i?-n[r]:n[r]];i?t[2]>>11<t[18]>>16&&(3&t[2])===e&&(t[2]+=2048,o.call(s)):o.call(s)}const Ie=-1;class xe{constructor(t,e,n){this.factory=t,this.resolving=!1,this.canSeeViewProviders=e,this.injectImpl=n}}function Ae(t,e,n){const r=xt(t);let i=0;for(;i<n.length;){const o=n[i];if("number"==typeof o){if(0!==o)break;i++;const s=n[i++],a=n[i++],u=n[i++];r?t.setAttribute(e,a,u,s):e.setAttributeNS(s,a,u)}else{const s=o,a=n[++i];ke(s)?r&&t.setProperty(e,s,a):r?t.setAttribute(e,s,a):e.setAttribute(s,a),i++}}return i}function je(t){return 3===t||4===t||6===t}function ke(t){return 64===t.charCodeAt(0)}function Ne(t,e){if(null===e||0===e.length);else if(null===t||0===t.length)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?n=i:0===n||Pe(t,n,i,null,-1===n||2===n?e[++r]:null)}}return t}function Pe(t,e,n,r,i){let o=0,s=t.length;if(-1===e)s=-1;else for(;o<t.length;){const n=t[o++];if("number"==typeof n){if(n===e){s=-1;break}if(n>e){s=o-1;break}}}for(;o<t.length;){const e=t[o];if("number"==typeof e)break;if(e===n){if(null===r)return void(null!==i&&(t[o+1]=i));if(r===t[o+1])return void(t[o+2]=i)}o++,null!==r&&o++,null!==i&&o++}-1!==s&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),null!==r&&t.splice(o++,0,r),null!==i&&t.splice(o++,0,i)}function Re(t){return t!==Ie}function De(t){return 32767&t}function Me(t,e){let n=t>>16,r=e;for(;n>0;)r=r[15],n--;return r}let Le=!0;function Fe(t){const e=Le;return Le=t,e}let Ve=0;function Ue(t,e){const n=Be(t,e);if(-1!==n)return n;const r=e[1];r.firstCreatePass&&(t.injectorIndex=e.length,qe(r.data,t),qe(e,null),qe(r.blueprint,null));const i=He(t,e),o=t.injectorIndex;if(Re(i)){const t=De(i),n=Me(i,e),r=n[1].data;for(let i=0;i<8;i++)e[o+i]=n[t+i]|r[t+i]}return e[o+8]=i,o}function qe(t,e){t.push(0,0,0,0,0,0,0,0,e)}function Be(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===e[t.injectorIndex+8]?-1:t.injectorIndex}function He(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;null!==i;){const t=i[1],e=t.type;if(r=2===e?t.declTNode:1===e?i[6]:null,null===r)return Ie;if(n++,i=i[15],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return Ie}function ze(t,e,n){!function(t,e,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(J)&&(r=n[J]),null==r&&(r=n[J]=Ve++);const i=255&r;e.data[t+(i>>5)]|=1<<i}(t,e,n)}function Ge(t,e,n){if(n&j.Optional)return t;b(e,"NodeInjector")}function Qe(t,e,n,r){if(n&j.Optional&&void 0===r&&(r=null),0==(n&(j.Self|j.Host))){const i=t[9],o=N(void 0);try{return i?i.get(e,r,n&j.Optional):P(e,r,n&j.Optional)}finally{N(o)}}return Ge(r,e,n)}function We(t,e,n,r=j.Default,i){if(null!==t){const o=function(t){if("string"==typeof t)return t.charCodeAt(0)||0;const e=t.hasOwnProperty(J)?t[J]:void 0;return"number"==typeof e?e>=0?255&e:Ye:e}(n);if("function"==typeof o){if(!he(e,t,r))return r&j.Host?Ge(i,n,r):Qe(e,n,r,i);try{const t=o();if(null!=t||r&j.Optional)return t;b(n)}finally{ye()}}else if("number"==typeof o){let i=null,s=Be(t,e),a=Ie,u=r&j.Host?e[16][6]:null;for((-1===s||r&j.SkipSelf)&&(a=-1===s?He(t,e):e[s+8],a!==Ie&&tn(r,!1)?(i=e[1],s=De(a),e=Me(a,e)):s=-1);-1!==s;){const t=e[1];if(Ze(o,s,t.data)){const t=$e(s,e,n,i,r,u);if(t!==Ke)return t}a=e[s+8],a!==Ie&&tn(r,e[1].data[s+8]===u)&&Ze(o,s,e)?(i=t,s=De(a),e=Me(a,e)):s=-1}}}return Qe(e,n,r,i)}const Ke={};function Ye(){return new en(Wt(),zt())}function $e(t,e,n,r,i,o){const s=e[1],a=s.data[t+8],u=Je(a,s,n,null==r?gt(a)&&Le:r!=s&&0!=(3&a.type),i&j.Host&&o===a);return null!==u?Xe(e,s,u,a):Ke}function Je(t,e,n,r,i){const o=t.providerIndexes,s=e.data,a=1048575&o,u=t.directiveStart,c=o>>20,l=i?a+c:t.directiveEnd;for(let h=r?a:a+c;h<l;h++){const t=s[h];if(h<u&&n===t||h>=u&&t.type===n)return h}if(i){const t=s[u];if(t&&mt(t)&&t.type===n)return u}return null}function Xe(t,e,n,r){let i=t[n];const o=e.data;if(i instanceof xe){const s=i;s.resolving&&function(t,e){throw new y("200",`Circular dependency in DI detected for ${t}`)}(v(o[n]));const a=Fe(s.canSeeViewProviders);s.resolving=!0;const u=s.injectImpl?N(s.injectImpl):null;he(t,r,j.Default);try{i=t[n]=s.factory(void 0,o,t,r),e.firstCreatePass&&n>=r.directiveStart&&function(t,e,n){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){const r=wt(e);(n.preOrderHooks||(n.preOrderHooks=[])).push(t,r),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,r)}i&&(n.preOrderHooks||(n.preOrderHooks=[])).push(0-t,i),o&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t,o),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,o))}(n,o[n],e)}finally{null!==u&&N(u),Fe(a),s.resolving=!1,ye()}}return i}function Ze(t,e,n){return!!(n[e+(t>>5)]&1<<t)}function tn(t,e){return!(t&j.Self||t&j.Host&&e)}class en{constructor(t,e){this._tNode=t,this._lView=e}get(t,e){return We(this._tNode,this._lView,t,void 0,e)}}function nn(t){return R(()=>{const e=t.prototype.constructor,n=e[$]||rn(e),r=Object.prototype;let i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){const t=i[$]||rn(i);if(t&&t!==n)return t;i=Object.getPrototypeOf(i)}return t=>new t})}function rn(t){return g(t)?()=>{const e=rn(p(t));return e&&e()}:vt(t)}function on(t){return function(t,e){if("class"===e)return t.classes;if("style"===e)return t.styles;const n=t.attrs;if(n){const t=n.length;let r=0;for(;r<t;){const i=n[r];if(je(i))break;if(0===i)r+=2;else if("number"==typeof i)for(r++;r<t&&"string"==typeof n[r];)r++;else{if(i===e)return n[r+1];r+=2}}}return null}(Wt(),t)}const sn="__parameters__";function an(t,e,n){return R(()=>{const r=function(t){return function(...e){if(t){const n=t(...e);for(const t in n)this[t]=n[t]}}}(e);function i(...t){if(this instanceof i)return r.apply(this,t),this;const e=new i(...t);return n.annotation=e,n;function n(t,n,r){const i=t.hasOwnProperty(sn)?t[sn]:Object.defineProperty(t,sn,{value:[]})[sn];for(;i.length<=r;)i.push(null);return(i[r]=i[r]||[]).push(e),t}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}class un{constructor(t,e){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof e?this.__NG_ELEMENT_ID__=e:void 0!==e&&(this.\u0275prov=w({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}toString(){return`InjectionToken ${this._desc}`}}const cn=new un("AnalyzeForEntryComponents"),ln=Function;function hn(t,e){void 0===e&&(e=t);for(let n=0;n<t.length;n++){let r=t[n];Array.isArray(r)?(e===t&&(e=t.slice(0,n)),hn(r,e)):e!==t&&e.push(r)}return e}function dn(t,e){t.forEach(t=>Array.isArray(t)?dn(t,e):e(t))}function fn(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function pn(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function gn(t,e){const n=[];for(let r=0;r<t;r++)n.push(e);return n}function yn(t,e,n){let r=vn(t,e);return r>=0?t[1|r]=n:(r=~r,function(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(1===i)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;)t[i]=t[i-2],i--;t[e]=n,t[e+1]=r}}(t,r,e,n)),r}function mn(t,e){const n=vn(t,e);if(n>=0)return t[1|n]}function vn(t,e){return function(t,e,n){let r=0,i=t.length>>1;for(;i!==r;){const n=r+(i-r>>1),o=t[n<<1];if(e===o)return n<<1;o>e?i=n:r=n+1}return~(i<<1)}(t,e)}const bn={},_n=/\n/gm,wn="__source",Cn=u({provide:String,useValue:u});let On;function En(t){const e=On;return On=t,e}function Sn(t,e=j.Default){if(void 0===On)throw new Error("inject() must be called from an injection context");return null===On?P(t,void 0,e):On.get(t,e&j.Optional?null:void 0,e)}function Tn(t,e=j.Default){return(k||Sn)(p(t),e)}function In(t){const e=[];for(let n=0;n<t.length;n++){const r=p(t[n]);if(Array.isArray(r)){if(0===r.length)throw new Error("Arguments array must have arguments.");let t,n=j.Default;for(let e=0;e<r.length;e++){const i=r[e],o=i.__NG_DI_FLAG__;"number"==typeof o?-1===o?t=i.token:n|=o:t=i}e.push(Tn(t,n))}else e.push(Tn(r))}return e}function xn(t,e){return t.__NG_DI_FLAG__=e,t.prototype.__NG_DI_FLAG__=e,t}const An=xn(an("Inject",t=>({token:t})),-1),jn=xn(an("Optional"),8),kn=xn(an("SkipSelf"),4);let Nn;function Pn(t){var e;return(null===(e=function(){if(void 0===Nn&&(Nn=null,q.trustedTypes))try{Nn=q.trustedTypes.createPolicy("angular",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch(e){}return Nn}())||void 0===e?void 0:e.createHTML(t))||t}class Rn{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class Dn extends Rn{getTypeName(){return"HTML"}}class Mn extends Rn{getTypeName(){return"Style"}}class Ln extends Rn{getTypeName(){return"Script"}}class Fn extends Rn{getTypeName(){return"URL"}}class Vn extends Rn{getTypeName(){return"ResourceURL"}}function Un(t){return t instanceof Rn?t.changingThisBreaksApplicationSecurity:t}function qn(t,e){const n=Bn(t);if(null!=n&&n!==e){if("ResourceURL"===n&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${n} (see https://g.co/ng/security#xss)`)}return n===e}function Bn(t){return t instanceof Rn&&t.getTypeName()||null}function Hn(t){return new Dn(t)}function zn(t){return new Mn(t)}function Gn(t){return new Ln(t)}function Qn(t){return new Fn(t)}function Wn(t){return new Vn(t)}function Kn(t){const e=new $n(t);return function(){try{return!!(new window.DOMParser).parseFromString(Pn(""),"text/html")}catch(t){return!1}}()?new Yn(e):e}class Yn{constructor(t){this.inertDocumentHelper=t}getInertBodyElement(t){t="<body><remove></remove>"+t;try{const e=(new window.DOMParser).parseFromString(Pn(t),"text/html").body;return null===e?this.inertDocumentHelper.getInertBodyElement(t):(e.removeChild(e.firstChild),e)}catch(e){return null}}}class $n{constructor(t){if(this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const t=this.inertDocument.createElement("html");this.inertDocument.appendChild(t);const e=this.inertDocument.createElement("body");t.appendChild(e)}}getInertBodyElement(t){const e=this.inertDocument.createElement("template");if("content"in e)return e.innerHTML=Pn(t),e;const n=this.inertDocument.createElement("body");return n.innerHTML=Pn(t),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(n),n}stripCustomNsAttrs(t){const e=t.attributes;for(let r=e.length-1;0<r;r--){const n=e.item(r).name;"xmlns:ns1"!==n&&0!==n.indexOf("ns1:")||t.removeAttribute(n)}let n=t.firstChild;for(;n;)n.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(n),n=n.nextSibling}}const Jn=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Xn=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Zn(t){return(t=String(t)).match(Jn)||t.match(Xn)?t:"unsafe:"+t}function tr(t){return(t=String(t)).split(",").map(t=>Zn(t.trim())).join(", ")}function er(t){const e={};for(const n of t.split(","))e[n]=!0;return e}function nr(...t){const e={};for(const n of t)for(const t in n)n.hasOwnProperty(t)&&(e[t]=!0);return e}const rr=er("area,br,col,hr,img,wbr"),ir=er("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),or=er("rp,rt"),sr=nr(or,ir),ar=nr(rr,nr(ir,er("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),nr(or,er("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),sr),ur=er("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),cr=er("srcset"),lr=nr(ur,cr,er("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),er("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),hr=er("script,style,template");class dr{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(t){let e=t.firstChild,n=!0;for(;e;)if(e.nodeType===Node.ELEMENT_NODE?n=this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,n&&e.firstChild)e=e.firstChild;else for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);let t=this.checkClobberedElement(e,e.nextSibling);if(t){e=t;break}e=this.checkClobberedElement(e,e.parentNode)}return this.buf.join("")}startElement(t){const e=t.nodeName.toLowerCase();if(!ar.hasOwnProperty(e))return this.sanitizedSomething=!0,!hr.hasOwnProperty(e);this.buf.push("<"),this.buf.push(e);const n=t.attributes;for(let r=0;r<n.length;r++){const t=n.item(r),e=t.name,i=e.toLowerCase();if(!lr.hasOwnProperty(i)){this.sanitizedSomething=!0;continue}let o=t.value;ur[i]&&(o=Zn(o)),cr[i]&&(o=tr(o)),this.buf.push(" ",e,'="',gr(o),'"')}return this.buf.push(">"),!0}endElement(t){const e=t.nodeName.toLowerCase();ar.hasOwnProperty(e)&&!rr.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))}chars(t){this.buf.push(gr(t))}checkClobberedElement(t,e){if(e&&(t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${t.outerHTML}`);return e}}const fr=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,pr=/([^\#-~ |!])/g;function gr(t){return t.replace(/&/g,"&amp;").replace(fr,function(t){return"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";"}).replace(pr,function(t){return"&#"+t.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let yr;function mr(t,e){let n=null;try{yr=yr||Kn(t);let r=e?String(e):"";n=yr.getInertBodyElement(r);let i=5,o=r;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,r=o,o=n.innerHTML,n=yr.getInertBodyElement(r)}while(r!==o);return Pn((new dr).sanitizeChildren(vr(n)||n))}finally{if(n){const t=vr(n)||n;for(;t.firstChild;)t.removeChild(t.firstChild)}}}function vr(t){return"content"in t&&function(t){return t.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===t.nodeName}(t)?t.content:null}var br=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}({});function _r(t){const e=function(){const t=zt();return t&&t[12]}();return e?e.sanitize(br.URL,t)||"":qn(t,"URL")?Un(t):Zn(m(t))}function wr(t){return t.ngDebugContext}function Cr(t){return t.ngOriginalError}function Or(t,...e){t.error(...e)}class Er{constructor(){this._console=console}handleError(t){const e=this._findOriginalError(t),n=this._findContext(t),r=function(t){return t.ngErrorLogger||Or}(t);r(this._console,"ERROR",t),e&&r(this._console,"ORIGINAL ERROR",e),n&&r(this._console,"ERROR CONTEXT",n)}_findContext(t){return t?wr(t)?wr(t):this._findContext(Cr(t)):null}_findOriginalError(t){let e=Cr(t);for(;e&&Cr(e);)e=Cr(e);return e}}const Sr=/^>|^->|<!--|-->|--!>|<!-$/g,Tr=/(<|>)/;function Ir(t,e){t.__ngContext__=e}const xr=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(q))();function Ar(t){return t instanceof Function?t():t}var jr=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}({});let kr;function Nr(t,e){return kr(t,e)}function Pr(t){const e=t[3];return ft(e)?e[3]:e}function Rr(t){return Mr(t[13])}function Dr(t){return Mr(t[4])}function Mr(t){for(;null!==t&&!ft(t);)t=t[4];return t}function Lr(t,e,n,r,i){if(null!=r){let o,s=!1;ft(r)?o=r:dt(r)&&(s=!0,r=r[0]);const a=jt(r);0===t&&null!==n?null==i?Yr(e,n,a):Kr(e,n,a,i||null,!0):1===t&&null!==n?Kr(e,n,a,i||null,!0):2===t?ai(e,a,s):3===t&&e.destroyNode(a),null!=o&&function(t,e,n,r,i){const o=n[7];o!==jt(n)&&Lr(e,t,r,o,i);for(let s=ht;s<n.length;s++){const i=n[s];ci(i[1],i,t,e,r,o)}}(e,t,o,n,i)}}function Fr(t,e){return xt(t)?t.createText(e):t.createTextNode(e)}function Vr(t,e,n){xt(t)?t.setValue(e,n):e.textContent=n}function Ur(t,e){return t.createComment(function(t){return t.replace(Sr,t=>t.replace(Tr,"\u200b$1\u200b"))}(e))}function qr(t,e,n){return xt(t)?t.createElement(e,n):null===n?t.createElement(e):t.createElementNS(n,e)}function Br(t,e){const n=t[9],r=n.indexOf(e),i=e[3];1024&e[2]&&(e[2]&=-1025,qt(i,-1)),n.splice(r,1)}function Hr(t,e){if(t.length<=ht)return;const n=ht+e,r=t[n];if(r){const o=r[17];null!==o&&o!==t&&Br(o,r),e>0&&(t[n-1][4]=r[4]);const s=pn(t,ht+e);ci(r[1],i=r,i[11],2,null,null),i[0]=null,i[6]=null;const a=s[19];null!==a&&a.detachView(s[1]),r[3]=null,r[4]=null,r[2]&=-129}var i;return r}function zr(t,e){if(!(256&e[2])){const n=e[11];xt(n)&&n.destroyNode&&ci(t,e,n,3,null,null),function(t){let e=t[13];if(!e)return Gr(t[1],t);for(;e;){let n=null;if(dt(e))n=e[13];else{const t=e[10];t&&(n=t)}if(!n){for(;e&&!e[4]&&e!==t;)dt(e)&&Gr(e[1],e),e=e[3];null===e&&(e=t),dt(e)&&Gr(e[1],e),n=e&&e[4]}e=n}}(e)}}function Gr(t,e){if(!(256&e[2])){e[2]&=-129,e[2]|=256,function(t,e){let n;if(null!=t&&null!=(n=t.destroyHooks))for(let r=0;r<n.length;r+=2){const t=e[n[r]];if(!(t instanceof xe)){const e=n[r+1];if(Array.isArray(e))for(let n=0;n<e.length;n+=2)e[n+1].call(t[e[n]]);else e.call(t)}}}(t,e),function(t,e){const n=t.cleanup,r=e[7];let i=-1;if(null!==n)for(let o=0;o<n.length-1;o+=2)if("string"==typeof n[o]){const t=n[o+1],s="function"==typeof t?t(e):jt(e[t]),a=r[i=n[o+2]],u=n[o+3];"boolean"==typeof u?s.removeEventListener(n[o],a,u):u>=0?r[i=u]():r[i=-u].unsubscribe(),o+=2}else{const t=r[i=n[o+1]];n[o].call(t)}if(null!==r){for(let t=i+1;t<r.length;t++)(0,r[t])();e[7]=null}}(t,e),1===e[1].type&&xt(e[11])&&e[11].destroy();const n=e[17];if(null!==n&&ft(e[3])){n!==e[3]&&Br(n,e);const r=e[19];null!==r&&r.detachView(t)}}}function Qr(t,e,n){return Wr(t,e.parent,n)}function Wr(t,e,n){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return n[0];if(2&r.flags){const e=t.data[r.directiveStart].encapsulation;if(e===M.None||e===M.Emulated)return null}return Nt(r,n)}function Kr(t,e,n,r,i){xt(t)?t.insertBefore(e,n,r,i):e.insertBefore(n,r,i)}function Yr(t,e,n){xt(t)?t.appendChild(e,n):e.appendChild(n)}function $r(t,e,n,r,i){null!==r?Kr(t,e,n,r,i):Yr(t,e,n)}function Jr(t,e){return xt(t)?t.parentNode(e):e.parentNode}function Xr(t,e,n){return ei(t,e,n)}function Zr(t,e,n){return 40&t.type?Nt(t,n):null}let ti,ei=Zr;function ni(t,e){ei=t,ti=e}function ri(t,e,n,r){const i=Qr(t,r,e),o=e[11],s=Xr(r.parent||e[6],r,e);if(null!=i)if(Array.isArray(n))for(let a=0;a<n.length;a++)$r(o,i,n[a],s,!1);else $r(o,i,n,s,!1);void 0!==ti&&ti(o,r,e,n,i)}function ii(t,e){if(null!==e){const n=e.type;if(3&n)return Nt(e,t);if(4&n)return si(-1,t[e.index]);if(8&n){const n=e.child;if(null!==n)return ii(t,n);{const n=t[e.index];return ft(n)?si(-1,n):jt(n)}}if(32&n)return Nr(e,t)()||jt(t[e.index]);{const n=oi(t,e);return null!==n?Array.isArray(n)?n[0]:ii(Pr(t[16]),n):ii(t,e.next)}}return null}function oi(t,e){return null!==e?t[16][6].projection[e.projection]:null}function si(t,e){const n=ht+t+1;if(n<e.length){const t=e[n],r=t[1].firstChild;if(null!==r)return ii(t,r)}return e[7]}function ai(t,e,n){const r=Jr(t,e);r&&function(t,e,n,r){xt(t)?t.removeChild(e,n,r):e.removeChild(n)}(t,r,e,n)}function ui(t,e,n,r,i,o,s){for(;null!=n;){const a=r[n.index],u=n.type;if(s&&0===e&&(a&&Ir(jt(a),r),n.flags|=4),64!=(64&n.flags))if(8&u)ui(t,e,n.child,r,i,o,!1),Lr(e,t,i,a,o);else if(32&u){const s=Nr(n,r);let u;for(;u=s();)Lr(e,t,i,u,o);Lr(e,t,i,a,o)}else 16&u?li(t,e,r,n,i,o):Lr(e,t,i,a,o);n=s?n.projectionNext:n.next}}function ci(t,e,n,r,i,o){ui(n,r,t.firstChild,e,i,o,!1)}function li(t,e,n,r,i,o){const s=n[16],a=s[6].projection[r.projection];if(Array.isArray(a))for(let u=0;u<a.length;u++)Lr(e,t,i,a[u],o);else ui(t,e,a,s[3],i,o,!0)}function hi(t,e,n){xt(t)?t.setAttribute(e,"style",n):e.style.cssText=n}function di(t,e,n){xt(t)?""===n?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n):e.className=n}function fi(t,e,n){let r=t.length;for(;;){const i=t.indexOf(e,n);if(-1===i)return i;if(0===i||t.charCodeAt(i-1)<=32){const n=e.length;if(i+n===r||t.charCodeAt(i+n)<=32)return i}n=i+1}}const pi="ng-template";function gi(t,e,n){let r=0;for(;r<t.length;){let i=t[r++];if(n&&"class"===i){if(i=t[r],-1!==fi(i.toLowerCase(),e,0))return!0}else if(1===i){for(;r<t.length&&"string"==typeof(i=t[r++]);)if(i.toLowerCase()===e)return!0;return!1}}return!1}function yi(t){return 4===t.type&&t.value!==pi}function mi(t,e,n){return e===(4!==t.type||n?t.value:pi)}function vi(t,e,n){let r=4;const i=t.attrs||[],o=function(t){for(let e=0;e<t.length;e++)if(je(t[e]))return e;return t.length}(i);let s=!1;for(let a=0;a<e.length;a++){const u=e[a];if("number"!=typeof u){if(!s)if(4&r){if(r=2|1&r,""!==u&&!mi(t,u,n)||""===u&&1===e.length){if(bi(r))return!1;s=!0}}else{const c=8&r?u:e[++a];if(8&r&&null!==t.attrs){if(!gi(t.attrs,c,n)){if(bi(r))return!1;s=!0}continue}const l=_i(8&r?"class":u,i,yi(t),n);if(-1===l){if(bi(r))return!1;s=!0;continue}if(""!==c){let t;t=l>o?"":i[l+1].toLowerCase();const e=8&r?t:null;if(e&&-1!==fi(e,c,0)||2&r&&c!==t){if(bi(r))return!1;s=!0}}}}else{if(!s&&!bi(r)&&!bi(u))return!1;if(s&&bi(u))continue;s=!1,r=u|1&r}}return bi(r)||s}function bi(t){return 0==(1&t)}function _i(t,e,n,r){if(null===e)return-1;let i=0;if(r||!n){let n=!1;for(;i<e.length;){const r=e[i];if(r===t)return i;if(3===r||6===r)n=!0;else{if(1===r||2===r){let t=e[++i];for(;"string"==typeof t;)t=e[++i];continue}if(4===r)break;if(0===r){i+=4;continue}}i+=n?1:2}return-1}return function(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){const r=t[n];if("number"==typeof r)return-1;if(r===e)return n;n++}return-1}(e,t)}function wi(t,e,n=!1){for(let r=0;r<e.length;r++)if(vi(t,e[r],n))return!0;return!1}function Ci(t,e){t:for(let n=0;n<e.length;n++){const r=e[n];if(t.length===r.length){for(let e=0;e<t.length;e++)if(t[e]!==r[e])continue t;return!0}}return!1}function Oi(t,e){return t?":not("+e.trim()+")":e}function Ei(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if("string"==typeof s)if(2&r){const e=t[++n];i+="["+s+(e.length>0?'="'+e+'"':"")+"]"}else 8&r?i+="."+s:4&r&&(i+=" "+s);else""===i||bi(s)||(e+=Oi(o,i),i=""),r=s,o=o||!bi(r);n++}return""!==i&&(e+=Oi(o,i)),e}const Si={};function Ti(t){Ii(Gt(),zt(),ve()+t,Zt())}function Ii(t,e,n,r){if(!r)if(3==(3&e[2])){const r=t.preOrderCheckHooks;null!==r&&Ce(e,r,n)}else{const r=t.preOrderHooks;null!==r&&Oe(e,r,0,n)}be(n)}function xi(t,e){return t<<17|e<<2}function Ai(t){return t>>17&32767}function ji(t){return 2|t}function ki(t){return(131068&t)>>2}function Ni(t,e){return-131069&t|e<<2}function Pi(t){return 1|t}function Ri(t,e){const n=t.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const i=n[r],o=n[r+1];if(-1!==o){const n=t.data[o];ce(i),n.contentQueries(2,e[o],o)}}}function Di(t,e,n,r,i,o,s,a,u,c){const l=e.blueprint.slice();return l[0]=i,l[2]=140|r,Ut(l),l[3]=l[15]=t,l[8]=n,l[10]=s||t&&t[10],l[11]=a||t&&t[11],l[12]=u||t&&t[12]||null,l[9]=c||t&&t[9]||null,l[6]=o,l[16]=2==e.type?t[16]:l,l}function Mi(t,e,n,r,i){let o=t.data[e];if(null===o)o=Li(t,e,n,r,i),Bt.lFrame.inI18n&&(o.flags|=64);else if(64&o.type){o.type=n,o.value=r,o.attrs=i;const t=Yt();o.injectorIndex=null===t?-1:t.injectorIndex}return $t(o,!0),o}function Li(t,e,n,r,i){const o=Kt(),s=Jt(),a=t.data[e]=function(t,e,n,r,i,o){return{type:n,index:r,insertBeforeIndex:null,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,s?o:o&&o.parent,n,e,r,i);return null===t.firstChild&&(t.firstChild=a),null!==o&&(s?null==o.child&&null!==a.parent&&(o.child=a):null===o.next&&(o.next=a)),a}function Fi(t,e,n,r){if(0===n)return-1;const i=e.length;for(let o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function Vi(t,e,n){de(e);try{const r=t.viewQuery;null!==r&&mo(1,r,n);const i=t.template;null!==i&&Bi(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&Ri(t,e),t.staticViewQueries&&mo(2,t.viewQuery,n);const o=t.components;null!==o&&function(t,e){for(let n=0;n<e.length;n++)ho(t,e[n])}(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0),r}finally{e[2]&=-5,me()}}function Ui(t,e,n,r){const i=e[2];if(256==(256&i))return;de(e);const o=Zt();try{Ut(e),Bt.lFrame.bindingIndex=t.bindingStartIndex,null!==n&&Bi(t,e,n,2,r);const s=3==(3&i);if(!o)if(s){const n=t.preOrderCheckHooks;null!==n&&Ce(e,n,null)}else{const n=t.preOrderHooks;null!==n&&Oe(e,n,0,null),Ee(e,0)}if(function(t){for(let e=Rr(t);null!==e;e=Dr(e)){if(!e[2])continue;const t=e[9];for(let e=0;e<t.length;e++){const n=t[e],r=n[3];0==(1024&n[2])&&qt(r,1),n[2]|=1024}}}(e),function(t){for(let e=Rr(t);null!==e;e=Dr(e))for(let t=ht;t<e.length;t++){const n=e[t],r=n[1];Ft(n)&&Ui(r,n,r.template,n[8])}}(e),null!==t.contentQueries&&Ri(t,e),!o)if(s){const n=t.contentCheckHooks;null!==n&&Ce(e,n)}else{const n=t.contentHooks;null!==n&&Oe(e,n,1),Ee(e,1)}!function(t,e){const n=t.hostBindingOpCodes;if(null!==n)try{for(let t=0;t<n.length;t++){const r=n[t];if(r<0)be(~r);else{const i=r,o=n[++t],s=n[++t];se(o,i),s(2,e[i])}}}finally{be(-1)}}(t,e);const a=t.components;null!==a&&function(t,e){for(let n=0;n<e.length;n++)co(t,e[n])}(e,a);const u=t.viewQuery;if(null!==u&&mo(2,u,r),!o)if(s){const n=t.viewCheckHooks;null!==n&&Ce(e,n)}else{const n=t.viewHooks;null!==n&&Oe(e,n,2),Ee(e,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),o||(e[2]&=-73),1024&e[2]&&(e[2]&=-1025,qt(e[3],-1))}finally{me()}}function qi(t,e,n,r){const i=e[10],o=!Zt(),s=Lt(e);try{o&&!s&&i.begin&&i.begin(),s&&Vi(t,e,r),Ui(t,e,n,r)}finally{o&&!s&&i.end&&i.end()}}function Bi(t,e,n,r,i){const o=ve();try{be(-1),2&r&&e.length>lt&&Ii(t,e,lt,Zt()),n(r,i)}finally{be(o)}}function Hi(t,e,n){if(pt(e)){const r=e.directiveEnd;for(let i=e.directiveStart;i<r;i++){const e=t.data[i];e.contentQueries&&e.contentQueries(1,n[i],i)}}}function zi(t,e,n){Ht()&&(function(t,e,n,r){const i=n.directiveStart,o=n.directiveEnd;t.firstCreatePass||Ue(n,e),Ir(r,e);const s=n.initialInputs;for(let a=i;a<o;a++){const r=t.data[a],o=mt(r);o&&io(e,n,r);const u=Xe(e,t,a,n);Ir(u,e),null!==s&&so(0,a-i,u,r,0,s),o&&(Dt(n.index,e)[8]=u)}}(t,e,n,Nt(n,e)),128==(128&n.flags)&&function(t,e,n){const r=n.directiveStart,i=n.directiveEnd,o=n.index,s=Bt.lFrame.currentDirectiveIndex;try{be(o);for(let n=r;n<i;n++){const r=t.data[n],i=e[n];ae(n),null===r.hostBindings&&0===r.hostVars&&null===r.hostAttrs||Zi(r,i)}}finally{be(-1),ae(s)}}(t,e,n))}function Gi(t,e,n=Nt){const r=e.localNames;if(null!==r){let i=e.index+1;for(let o=0;o<r.length;o+=2){const s=r[o+1],a=-1===s?n(e,t):t[s];t[i++]=a}}}function Qi(t){const e=t.tView;return null===e||e.incompleteFirstPass?t.tView=Wi(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts):e}function Wi(t,e,n,r,i,o,s,a,u,c){const l=lt+r,h=l+i,d=function(t,e){const n=[];for(let r=0;r<e;r++)n.push(r<t?null:Si);return n}(l,h),f="function"==typeof c?c():c;return d[1]={type:t,blueprint:d,template:n,queries:null,viewQuery:a,declTNode:e,data:d.slice().fill(null,l),bindingStartIndex:l,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:u,consts:f,incompleteFirstPass:!1}}function Ki(t,e,n,r){const i=bo(e);null===n?i.push(r):(i.push(n),t.firstCreatePass&&_o(t).push(r,i.length-1))}function Yi(t,e,n){for(let r in t)if(t.hasOwnProperty(r)){const i=t[r];(n=null===n?{}:n).hasOwnProperty(r)?n[r].push(e,i):n[r]=[e,i]}return n}function $i(t,e,n,r,i,o,s,a){const u=Nt(e,n);let c,l=e.inputs;var h;!a&&null!=l&&(c=l[r])?(Co(t,n,c,r,i),gt(e)&&function(t,e){const n=Dt(e,t);16&n[2]||(n[2]|=64)}(n,e.index)):3&e.type&&(r="class"===(h=r)?"className":"for"===h?"htmlFor":"formaction"===h?"formAction":"innerHtml"===h?"innerHTML":"readonly"===h?"readOnly":"tabindex"===h?"tabIndex":h,i=null!=s?s(i,e.value||"",r):i,xt(o)?o.setProperty(u,r,i):ke(r)||(u.setProperty?u.setProperty(r,i):u[r]=i))}function Ji(t,e,n,r){let i=!1;if(Ht()){const o=function(t,e,n){const r=t.directiveRegistry;let i=null;if(r)for(let o=0;o<r.length;o++){const s=r[o];wi(n,s.selectors,!1)&&(i||(i=[]),ze(Ue(n,e),t,s.type),mt(s)?(to(t,n),i.unshift(s)):i.push(s))}return i}(t,e,n),s=null===r?null:{"":-1};if(null!==o){i=!0,no(n,t.data.length,o.length);for(let t=0;t<o.length;t++){const e=o[t];e.providersResolver&&e.providersResolver(e)}let r=!1,a=!1,u=Fi(t,e,o.length,null);for(let i=0;i<o.length;i++){const c=o[i];n.mergedAttrs=Ne(n.mergedAttrs,c.hostAttrs),ro(t,n,e,u,c),eo(u,c,s),null!==c.contentQueries&&(n.flags|=8),null===c.hostBindings&&null===c.hostAttrs&&0===c.hostVars||(n.flags|=128);const l=c.type.prototype;!r&&(l.ngOnChanges||l.ngOnInit||l.ngDoCheck)&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n.index),r=!0),a||!l.ngOnChanges&&!l.ngDoCheck||((t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n.index),a=!0),u++}!function(t,e){const n=e.directiveEnd,r=t.data,i=e.attrs,o=[];let s=null,a=null;for(let u=e.directiveStart;u<n;u++){const t=r[u],n=t.inputs,c=null===i||yi(e)?null:ao(n,i);o.push(c),s=Yi(n,u,s),a=Yi(t.outputs,u,a)}null!==s&&(s.hasOwnProperty("class")&&(e.flags|=16),s.hasOwnProperty("style")&&(e.flags|=32)),e.initialInputs=o,e.inputs=s,e.outputs=a}(t,n)}s&&function(t,e,n){if(e){const r=t.localNames=[];for(let t=0;t<e.length;t+=2){const i=n[e[t+1]];if(null==i)throw new y("301",`Export of name '${e[t+1]}' not found!`);r.push(e[t],i)}}}(n,r,s)}return n.mergedAttrs=Ne(n.mergedAttrs,n.attrs),i}function Xi(t,e,n,r,i,o){const s=o.hostBindings;if(s){let n=t.hostBindingOpCodes;null===n&&(n=t.hostBindingOpCodes=[]);const o=~e.index;(function(t){let e=t.length;for(;e>0;){const n=t[--e];if("number"==typeof n&&n<0)return n}return 0})(n)!=o&&n.push(o),n.push(r,i,s)}}function Zi(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function to(t,e){e.flags|=2,(t.components||(t.components=[])).push(e.index)}function eo(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;mt(e)&&(n[""]=t)}}function no(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function ro(t,e,n,r,i){t.data[r]=i;const o=i.factory||(i.factory=vt(i.type)),s=new xe(o,mt(i),null);t.blueprint[r]=s,n[r]=s,Xi(t,e,0,r,Fi(t,n,i.hostVars,Si),i)}function io(t,e,n){const r=Nt(e,t),i=Qi(n),o=t[10],s=fo(t,Di(t,i,null,n.onPush?64:16,r,e,o,o.createRenderer(r,n),null,null));t[e.index]=s}function oo(t,e,n,r,i,o,s){if(null==o)xt(t)?t.removeAttribute(e,i,n):e.removeAttribute(i);else{const a=null==s?m(o):s(o,r||"",i);xt(t)?t.setAttribute(e,i,a,n):n?e.setAttributeNS(n,i,a):e.setAttribute(i,a)}}function so(t,e,n,r,i,o){const s=o[e];if(null!==s){const t=r.setInput;for(let e=0;e<s.length;){const i=s[e++],o=s[e++],a=s[e++];null!==t?r.setInput(n,a,i,o):n[o]=a}}}function ao(t,e){let n=null,r=0;for(;r<e.length;){const i=e[r];if(0!==i)if(5!==i){if("number"==typeof i)break;t.hasOwnProperty(i)&&(null===n&&(n=[]),n.push(i,t[i],e[r+1])),r+=2}else r+=2;else r+=4}return n}function uo(t,e,n,r){return new Array(t,!0,!1,e,null,0,r,n,null,null)}function co(t,e){const n=Dt(e,t);if(Ft(n)){const t=n[1];80&n[2]?Ui(t,n,t.template,n[8]):n[5]>0&&lo(n)}}function lo(t){for(let n=Rr(t);null!==n;n=Dr(n))for(let t=ht;t<n.length;t++){const e=n[t];if(1024&e[2]){const t=e[1];Ui(t,e,t.template,e[8])}else e[5]>0&&lo(e)}const e=t[1].components;if(null!==e)for(let n=0;n<e.length;n++){const r=Dt(e[n],t);Ft(r)&&r[5]>0&&lo(r)}}function ho(t,e){const n=Dt(e,t),r=n[1];!function(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}(r,n),Vi(r,n,n[8])}function fo(t,e){return t[13]?t[14][4]=e:t[13]=e,t[14]=e,e}function po(t){for(;t;){t[2]|=64;const e=Pr(t);if(0!=(512&t[2])&&!e)return t;t=e}return null}function go(t,e,n){const r=e[10];r.begin&&r.begin();try{Ui(t,e,t.template,n)}catch(i){throw wo(e,i),i}finally{r.end&&r.end()}}function yo(t){!function(t){for(let e=0;e<t.components.length;e++){const n=t.components[e],r=Mt(n),i=r[1];qi(i,r,i.template,n)}}(t[8])}function mo(t,e,n){ce(0),e(t,n)}const vo=(()=>Promise.resolve(null))();function bo(t){return t[7]||(t[7]=[])}function _o(t){return t.cleanup||(t.cleanup=[])}function wo(t,e){const n=t[9],r=n?n.get(Er,null):null;r&&r.handleError(e)}function Co(t,e,n,r,i){for(let o=0;o<n.length;){const s=n[o++],a=n[o++],u=e[s],c=t.data[s];null!==c.setInput?c.setInput(u,i,r,a):u[a]=i}}function Oo(t,e,n){const r=kt(e,t);Vr(t[11],r,n)}function Eo(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(null!==e)for(let s=0;s<e.length;s++){const t=e[s];"number"==typeof t?o=t:1==o?i=h(i,t):2==o&&(r=h(r,t+": "+e[++s]+";"))}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}const So=new un("INJECTOR",-1);class To{get(t,e=bn){if(e===bn){const e=new Error(`NullInjectorError: No provider for ${l(t)}!`);throw e.name="NullInjectorError",e}return e}}const Io=new un("Set Injector scope."),xo={},Ao={},jo=[];let ko;function No(){return void 0===ko&&(ko=new To),ko}function Po(t,e=null,n=null,r){return new Ro(t,n,e||No(),r)}class Ro{constructor(t,e,n,r=null){this.parent=n,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const i=[];e&&dn(e,n=>this.processProvider(n,t,e)),dn([t],t=>this.processInjectorType(t,[],i)),this.records.set(So,Lo(void 0,this));const o=this.records.get(Io);this.scope=null!=o?o.value:null,this.source=r||("object"==typeof t?null:l(t))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(t=>t.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(t,e=bn,n=j.Default){this.assertNotDestroyed();const r=En(this);try{if(!(n&j.SkipSelf)){let e=this.records.get(t);if(void 0===e){const n=("function"==typeof(i=t)||"object"==typeof i&&i instanceof un)&&O(t);e=n&&this.injectableDefInScope(n)?Lo(Do(t),xo):null,this.records.set(t,e)}if(null!=e)return this.hydrate(t,e)}return(n&j.Self?No():this.parent).get(t,e=n&j.Optional&&e===bn?null:e)}catch(o){if("NullInjectorError"===o.name){if((o.ngTempTokenPath=o.ngTempTokenPath||[]).unshift(l(t)),r)throw o;return function(t,e,n,r){const i=t.ngTempTokenPath;throw e[wn]&&i.unshift(e[wn]),t.message=function(t,e,n,r=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.substr(2):t;let i=l(e);if(Array.isArray(e))i=e.map(l).join(" -> ");else if("object"==typeof e){let t=[];for(let n in e)if(e.hasOwnProperty(n)){let r=e[n];t.push(n+":"+("string"==typeof r?JSON.stringify(r):l(r)))}i=`{${t.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(_n,"\n  ")}`}("\n"+t.message,i,n,r),t.ngTokenPath=i,t.ngTempTokenPath=null,t}(o,t,"R3InjectorError",this.source)}throw o}finally{En(r)}var i}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(t=>this.get(t))}toString(){const t=[];return this.records.forEach((e,n)=>t.push(l(n))),`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(t,e,n){if(!(t=p(t)))return!1;let r=S(t);const i=null==r&&t.ngModule||void 0,o=void 0===i?t:i,s=-1!==n.indexOf(o);if(void 0!==i&&(r=S(i)),null==r)return!1;if(null!=r.imports&&!s){let t;n.push(o);try{dn(r.imports,r=>{this.processInjectorType(r,e,n)&&(void 0===t&&(t=[]),t.push(r))})}finally{}if(void 0!==t)for(let e=0;e<t.length;e++){const{ngModule:n,providers:r}=t[e];dn(r,t=>this.processProvider(t,n,r||jo))}}this.injectorDefTypes.add(o);const a=vt(o)||(()=>new o);this.records.set(o,Lo(a,xo));const u=r.providers;if(null!=u&&!s){const e=t;dn(u,t=>this.processProvider(t,e,u))}return void 0!==i&&void 0!==t.providers}processProvider(t,e,n){let r=Vo(t=p(t))?t:p(t&&t.provide);const i=function(t,e,n){return Fo(t)?Lo(void 0,t.useValue):Lo(Mo(t),xo)}(t);if(Vo(t)||!0!==t.multi)this.records.get(r);else{let e=this.records.get(r);e||(e=Lo(void 0,xo,!0),e.factory=()=>In(e.multi),this.records.set(r,e)),r=t,e.multi.push(t)}this.records.set(r,i)}hydrate(t,e){var n;return e.value===xo&&(e.value=Ao,e.value=e.factory()),"object"==typeof e.value&&e.value&&null!==(n=e.value)&&"object"==typeof n&&"function"==typeof n.ngOnDestroy&&this.onDestroy.add(e.value),e.value}injectableDefInScope(t){return!!t.providedIn&&("string"==typeof t.providedIn?"any"===t.providedIn||t.providedIn===this.scope:this.injectorDefTypes.has(t.providedIn))}}function Do(t){const e=O(t),n=null!==e?e.factory:vt(t);if(null!==n)return n;if(t instanceof un)throw new Error(`Token ${l(t)} is missing a \u0275prov definition.`);if(t instanceof Function)return function(t){const e=t.length;if(e>0){const n=gn(e,"?");throw new Error(`Can't resolve all parameters for ${l(t)}: (${n.join(", ")}).`)}const n=function(t){const e=t&&(t[T]||t[x]);if(e){const n=function(t){if(t.hasOwnProperty("name"))return t.name;const e=(""+t).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(t);return console.warn(`DEPRECATED: DI is instantiating a token "${n}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${n}" class.`),e}return null}(t);return null!==n?()=>n.factory(t):()=>new t}(t);throw new Error("unreachable")}function Mo(t,e,n){let r;if(Vo(t)){const e=p(t);return vt(e)||Do(e)}if(Fo(t))r=()=>p(t.useValue);else if((i=t)&&i.useFactory)r=()=>t.useFactory(...In(t.deps||[]));else if(function(t){return!(!t||!t.useExisting)}(t))r=()=>Tn(p(t.useExisting));else{const e=p(t&&(t.useClass||t.provide));if(!function(t){return!!t.deps}(t))return vt(e)||Do(e);r=()=>new e(...In(t.deps))}var i;return r}function Lo(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function Fo(t){return null!==t&&"object"==typeof t&&Cn in t}function Vo(t){return"function"==typeof t}const Uo=function(t,e,n){return function(t,e=null,n=null,r){const i=Po(t,e,n,r);return i._resolveInjectorDefTypes(),i}({name:n},e,t,n)};let qo=(()=>{class t{static create(t,e){return Array.isArray(t)?Uo(t,e,""):Uo(t.providers,t.parent,t.name||"")}}return t.THROW_IF_NOT_FOUND=bn,t.NULL=new To,t.\u0275prov=w({token:t,providedIn:"any",factory:()=>Tn(So)}),t.__NG_ELEMENT_ID__=-1,t})();function Bo(t,e){we(Mt(t)[1],Wt())}function Ho(t){let e=Object.getPrototypeOf(t.type.prototype).constructor,n=!0;const r=[t];for(;e;){let i;if(mt(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Error("Directives cannot inherit Components");i=e.\u0275dir}if(i){if(n){r.push(i);const e=t;e.inputs=zo(t.inputs),e.declaredInputs=zo(t.declaredInputs),e.outputs=zo(t.outputs);const n=i.hostBindings;n&&Wo(t,n);const o=i.viewQuery,s=i.contentQueries;if(o&&Go(t,o),s&&Qo(t,s),c(t.inputs,i.inputs),c(t.declaredInputs,i.declaredInputs),c(t.outputs,i.outputs),mt(i)&&i.data.animation){const e=t.data;e.animation=(e.animation||[]).concat(i.data.animation)}}const e=i.features;if(e)for(let r=0;r<e.length;r++){const i=e[r];i&&i.ngInherit&&i(t),i===Ho&&(n=!1)}}e=Object.getPrototypeOf(e)}!function(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){const i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Ne(i.hostAttrs,n=Ne(n,i.hostAttrs))}}(r)}function zo(t){return t===B?{}:t===z?[]:t}function Go(t,e){const n=t.viewQuery;t.viewQuery=n?(t,r)=>{e(t,r),n(t,r)}:e}function Qo(t,e){const n=t.contentQueries;t.contentQueries=n?(t,r,i)=>{e(t,r,i),n(t,r,i)}:e}function Wo(t,e){const n=t.hostBindings;t.hostBindings=n?(t,r)=>{e(t,r),n(t,r)}:e}let Ko=null;function Yo(){if(!Ko){const t=q.Symbol;if(t&&t.iterator)Ko=t.iterator;else{const t=Object.getOwnPropertyNames(Map.prototype);for(let e=0;e<t.length;++e){const n=t[e];"entries"!==n&&"size"!==n&&Map.prototype[n]===Map.prototype.entries&&(Ko=n)}}}return Ko}class $o{constructor(t){this.wrapped=t}static wrap(t){return new $o(t)}static unwrap(t){return $o.isWrapped(t)?t.wrapped:t}static isWrapped(t){return t instanceof $o}}function Jo(t){return!!Xo(t)&&(Array.isArray(t)||!(t instanceof Map)&&Yo()in t)}function Xo(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function Zo(t,e,n){return t[e]=n}function ts(t,e,n){return!Object.is(t[e],n)&&(t[e]=n,!0)}function es(t,e,n,r){const i=ts(t,e,n);return ts(t,e+1,r)||i}function ns(t,e,n,r){const i=zt();return ts(i,re(),e)&&(Gt(),function(t,e,n,r,i,o){const s=Nt(t,e);oo(e[11],s,o,t.value,n,r,i)}(_e(),i,t,e,n,r)),ns}function rs(t,e,n,r){return ts(t,re(),n)?e+m(n)+r:Si}function is(t,e,n,r,i,o,s,a){const u=zt(),c=Gt(),l=t+lt,h=c.firstCreatePass?function(t,e,n,r,i,o,s,a,u){const c=e.consts,l=Mi(e,t,4,s||null,Vt(c,a));Ji(e,n,l,Vt(c,u)),we(e,l);const h=l.tViews=Wi(2,l,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c);return null!==e.queries&&(e.queries.template(e,l),h.queries=e.queries.embeddedTView(l)),l}(l,c,u,e,n,r,i,o,s):c.data[l];$t(h,!1);const d=u[11].createComment("");ri(c,u,d,h),Ir(d,u),fo(u,u[l]=uo(d,u,d,h)),yt(h)&&zi(c,u,h),null!=s&&Gi(u,h,a)}function os(t){return Rt(Bt.lFrame.contextLView,lt+t)}function ss(t,e=j.Default){const n=zt();return null===n?Tn(t,e):We(Wt(),n,p(t),e)}function as(t,e,n){const r=zt();return ts(r,re(),e)&&$i(Gt(),_e(),r,t,e,r[11],n,!1),as}function us(t,e,n,r,i){const o=i?"class":"style";Co(t,n,e.inputs[o],o,r)}function cs(t,e,n,r){const i=zt(),o=Gt(),s=lt+t,a=i[11],u=i[s]=qr(a,e,Bt.lFrame.currentNamespace),c=o.firstCreatePass?function(t,e,n,r,i,o,s){const a=e.consts,u=Mi(e,t,2,i,Vt(a,o));return Ji(e,n,u,Vt(a,s)),null!==u.attrs&&Eo(u,u.attrs,!1),null!==u.mergedAttrs&&Eo(u,u.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,u),u}(s,o,i,0,e,n,r):o.data[s];$t(c,!0);const l=c.mergedAttrs;null!==l&&Ae(a,u,l);const h=c.classes;null!==h&&di(a,u,h);const d=c.styles;null!==d&&hi(a,u,d),64!=(64&c.flags)&&ri(o,i,u,c),0===Bt.lFrame.elementDepthCount&&Ir(u,i),Bt.lFrame.elementDepthCount++,yt(c)&&(zi(o,i,c),Hi(o,c,i)),null!==r&&Gi(i,c)}function ls(){let t=Wt();Jt()?Xt():(t=t.parent,$t(t,!1));const e=t;Bt.lFrame.elementDepthCount--;const n=Gt();n.firstCreatePass&&(we(n,t),pt(t)&&n.queries.elementEnd(t)),null!=e.classesWithoutHost&&function(t){return 0!=(16&t.flags)}(e)&&us(n,e,zt(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function(t){return 0!=(32&t.flags)}(e)&&us(n,e,zt(),e.stylesWithoutHost,!1)}function hs(t,e,n,r){cs(t,e,n,r),ls()}function ds(t,e,n){const r=zt(),i=Gt(),o=t+lt,s=i.firstCreatePass?function(t,e,n,r,i){const o=e.consts,s=Vt(o,r),a=Mi(e,t,8,"ng-container",s);return null!==s&&Eo(a,s,!0),Ji(e,n,a,Vt(o,i)),null!==e.queries&&e.queries.elementStart(e,a),a}(o,i,r,e,n):i.data[o];$t(s,!0);const a=r[o]=r[11].createComment("");ri(i,r,a,s),Ir(a,r),yt(s)&&(zi(i,r,s),Hi(i,s,r)),null!=n&&Gi(r,s)}function fs(){let t=Wt();const e=Gt();Jt()?Xt():(t=t.parent,$t(t,!1)),e.firstCreatePass&&(we(e,t),pt(t)&&e.queries.elementEnd(t))}function ps(){return zt()}function gs(t){return!!t&&"function"==typeof t.then}function ys(t){return!!t&&"function"==typeof t.subscribe}const ms=ys;function vs(t,e,n=!1,r){const i=zt(),o=Gt(),s=Wt();return function(t,e,n,r,i,o,s=!1,a){const u=yt(r),c=t.firstCreatePass&&_o(t),l=bo(e);let h=!0;if(3&r.type){const d=Nt(r,e),f=a?a(d):B,p=f.target||d,g=l.length,y=a?t=>a(jt(t[r.index])).target:r.index;if(xt(n)){let s=null;if(!a&&u&&(s=function(t,e,n,r){const i=t.cleanup;if(null!=i)for(let o=0;o<i.length-1;o+=2){const t=i[o];if(t===n&&i[o+1]===r){const t=e[7],n=i[o+2];return t.length>n?t[n]:null}"string"==typeof t&&(o+=2)}return null}(t,e,i,r.index)),null!==s)(s.__ngLastListenerFn__||s).__ngNextListenerFn__=o,s.__ngLastListenerFn__=o,h=!1;else{o=_s(r,e,o,!1);const t=n.listen(f.name||p,i,o);l.push(o,t),c&&c.push(i,y,g,g+1)}}else o=_s(r,e,o,!0),p.addEventListener(i,o,s),l.push(o),c&&c.push(i,y,g,s)}else o=_s(r,e,o,!1);const d=r.outputs;let f;if(h&&null!==d&&(f=d[i])){const t=f.length;if(t)for(let n=0;n<t;n+=2){const t=e[f[n]][f[n+1]].subscribe(o),s=l.length;l.push(o,t),c&&c.push(i,r.index,s,-(s+1))}}}(o,i,i[11],s,t,e,n,r),vs}function bs(t,e,n){try{return!1!==e(n)}catch(r){return wo(t,r),!1}}function _s(t,e,n,r){return function i(o){if(o===Function)return n;const s=2&t.flags?Dt(t.index,e):e;0==(32&e[2])&&po(s);let a=bs(e,n,o),u=i.__ngNextListenerFn__;for(;u;)a=bs(e,u,o)&&a,u=u.__ngNextListenerFn__;return r&&!1===a&&(o.preventDefault(),o.returnValue=!1),a}}function ws(t=1){return function(t){return(Bt.lFrame.contextLView=function(t,e){for(;t>0;)e=e[15],t--;return e}(t,Bt.lFrame.contextLView))[8]}(t)}function Cs(t,e){let n=null;const r=function(t){const e=t.attrs;if(null!=e){const t=e.indexOf(5);if(0==(1&t))return e[t+1]}return null}(t);for(let i=0;i<e.length;i++){const o=e[i];if("*"!==o){if(null===r?wi(t,o,!0):Ci(r,o))return i}else n=i}return n}function Os(t){const e=zt()[16][6];if(!e.projection){const n=e.projection=gn(t?t.length:1,null),r=n.slice();let i=e.child;for(;null!==i;){const e=t?Cs(i,t):0;null!==e&&(r[e]?r[e].projectionNext=i:n[e]=i,r[e]=i),i=i.next}}}function Es(t,e=0,n){const r=zt(),i=Gt(),o=Mi(i,lt+t,16,null,n||null);null===o.projection&&(o.projection=e),Xt(),64!=(64&o.flags)&&function(t,e,n){li(e[11],0,e,n,Qr(t,n,e),Xr(n.parent||e[6],n,e))}(i,r,o)}function Ss(t,e,n){return Ts(t,"",e,"",n),Ss}function Ts(t,e,n,r,i){const o=zt(),s=rs(o,e,n,r);return s!==Si&&$i(Gt(),_e(),o,t,s,o[11],i,!1),Ts}function Is(t,e,n,r,i){const o=t[n+1],s=null===e;let a=r?Ai(o):ki(o),u=!1;for(;0!==a&&(!1===u||s);){const n=t[a+1];xs(t[a],e)&&(u=!0,t[a+1]=r?Pi(n):ji(n)),a=r?Ai(n):ki(n)}u&&(t[n+1]=r?ji(o):Pi(o))}function xs(t,e){return null===t||null==e||(Array.isArray(t)?t[1]:t)===e||!(!Array.isArray(t)||"string"!=typeof e)&&vn(t,e)>=0}const As={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function js(t){return t.substring(As.key,As.keyEnd)}function ks(t,e){const n=As.textEnd;return n===e?-1:(e=As.keyEnd=function(t,e,n){for(;e<n&&t.charCodeAt(e)>32;)e++;return e}(t,As.key=e,n),Ns(t,e,n))}function Ns(t,e,n){for(;e<n&&t.charCodeAt(e)<=32;)e++;return e}function Ps(t,e,n){return Ls(t,e,n,!1),Ps}function Rs(t,e){return Ls(t,e,null,!0),Rs}function Ds(t){Fs(yn,Ms,t,!0)}function Ms(t,e){for(let n=function(t){return function(t){As.key=0,As.keyEnd=0,As.value=0,As.valueEnd=0,As.textEnd=t.length}(t),ks(t,Ns(t,0,As.textEnd))}(e);n>=0;n=ks(e,n))yn(t,js(e),!0)}function Ls(t,e,n,r){const i=zt(),o=Gt(),s=ie(2);o.firstUpdatePass&&Us(o,t,s,r),e!==Si&&ts(i,s,e)&&Hs(o,o.data[ve()],i,i[11],t,i[s+1]=function(t,e){return null==t||("string"==typeof e?t+=e:"object"==typeof t&&(t=l(Un(t)))),t}(e,n),r,s)}function Fs(t,e,n,r){const i=Gt(),o=ie(2);i.firstUpdatePass&&Us(i,null,o,r);const s=zt();if(n!==Si&&ts(s,o,n)){const a=i.data[ve()];if(Qs(a,r)&&!Vs(i,o)){let t=r?a.classesWithoutHost:a.stylesWithoutHost;null!==t&&(n=h(t,n||"")),us(i,a,s,n,r)}else!function(t,e,n,r,i,o,s,a){i===Si&&(i=H);let u=0,c=0,l=0<i.length?i[0]:null,h=0<o.length?o[0]:null;for(;null!==l||null!==h;){const d=u<i.length?i[u+1]:void 0,f=c<o.length?o[c+1]:void 0;let p,g=null;l===h?(u+=2,c+=2,d!==f&&(g=h,p=f)):null===h||null!==l&&l<h?(u+=2,g=l):(c+=2,g=h,p=f),null!==g&&Hs(t,e,n,r,g,p,s,a),l=u<i.length?i[u]:null,h=c<o.length?o[c]:null}}(i,a,s,s[11],s[o+1],s[o+1]=function(t,e,n){if(null==n||""===n)return H;const r=[],i=Un(n);if(Array.isArray(i))for(let o=0;o<i.length;o++)t(r,i[o],!0);else if("object"==typeof i)for(const o in i)i.hasOwnProperty(o)&&t(r,o,i[o]);else"string"==typeof i&&e(r,i);return r}(t,e,n),r,o)}}function Vs(t,e){return e>=t.expandoStartIndex}function Us(t,e,n,r){const i=t.data;if(null===i[n+1]){const o=i[ve()],s=Vs(t,n);Qs(o,r)&&null===e&&!s&&(e=!1),e=function(t,e,n,r){const i=function(t){const e=Bt.lFrame.currentDirectiveIndex;return-1===e?null:t[e]}(t);let o=r?e.residualClasses:e.residualStyles;if(null===i)0===(r?e.classBindings:e.styleBindings)&&(n=Bs(n=qs(null,t,e,n,r),e.attrs,r),o=null);else{const s=e.directiveStylingLast;if(-1===s||t[s]!==i)if(n=qs(i,t,e,n,r),null===o){let n=function(t,e,n){const r=n?e.classBindings:e.styleBindings;if(0!==ki(r))return t[Ai(r)]}(t,e,r);void 0!==n&&Array.isArray(n)&&(n=qs(null,t,e,n[1],r),n=Bs(n,e.attrs,r),function(t,e,n,r){t[Ai(n?e.classBindings:e.styleBindings)]=r}(t,e,r,n))}else o=function(t,e,n){let r;const i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++)r=Bs(r,t[o].hostAttrs,n);return Bs(r,e.attrs,n)}(t,e,r)}return void 0!==o&&(r?e.residualClasses=o:e.residualStyles=o),n}(i,o,e,r),function(t,e,n,r,i,o){let s=o?e.classBindings:e.styleBindings,a=Ai(s),u=ki(s);t[r]=n;let c,l=!1;if(Array.isArray(n)){const t=n;c=t[1],(null===c||vn(t,c)>0)&&(l=!0)}else c=n;if(i)if(0!==u){const e=Ai(t[a+1]);t[r+1]=xi(e,a),0!==e&&(t[e+1]=Ni(t[e+1],r)),t[a+1]=131071&t[a+1]|r<<17}else t[r+1]=xi(a,0),0!==a&&(t[a+1]=Ni(t[a+1],r)),a=r;else t[r+1]=xi(u,0),0===a?a=r:t[u+1]=Ni(t[u+1],r),u=r;l&&(t[r+1]=ji(t[r+1])),Is(t,c,r,!0),Is(t,c,r,!1),function(t,e,n,r,i){const o=i?t.residualClasses:t.residualStyles;null!=o&&"string"==typeof e&&vn(o,e)>=0&&(n[r+1]=Pi(n[r+1]))}(e,c,t,r,o),s=xi(a,u),o?e.classBindings=s:e.styleBindings=s}(i,o,e,n,s,r)}}function qs(t,e,n,r,i){let o=null;const s=n.directiveEnd;let a=n.directiveStylingLast;for(-1===a?a=n.directiveStart:a++;a<s&&(o=e[a],r=Bs(r,o.hostAttrs,i),o!==t);)a++;return null!==t&&(n.directiveStylingLast=a),r}function Bs(t,e,n){const r=n?1:2;let i=-1;if(null!==e)for(let o=0;o<e.length;o++){const s=e[o];"number"==typeof s?i=s:i===r&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),yn(t,s,!!n||e[++o]))}return void 0===t?null:t}function Hs(t,e,n,r,i,o,s,a){if(!(3&e.type))return;const u=t.data,c=u[a+1];Gs(1==(1&c)?zs(u,e,n,i,ki(c),s):void 0)||(Gs(o)||2==(2&c)&&(o=zs(u,null,n,i,a,s)),function(t,e,n,r,i){const o=xt(t);if(e)i?o?t.addClass(n,r):n.classList.add(r):o?t.removeClass(n,r):n.classList.remove(r);else{let e=-1===r.indexOf("-")?void 0:jr.DashCase;if(null==i)o?t.removeStyle(n,r,e):n.style.removeProperty(r);else{const s="string"==typeof i&&i.endsWith("!important");s&&(i=i.slice(0,-10),e|=jr.Important),o?t.setStyle(n,r,i,e):n.style.setProperty(r,i,s?"important":"")}}}(r,s,kt(ve(),n),i,o))}function zs(t,e,n,r,i,o){const s=null===e;let a;for(;i>0;){const e=t[i],o=Array.isArray(e),u=o?e[1]:e,c=null===u;let l=n[i+1];l===Si&&(l=c?H:void 0);let h=c?mn(l,r):u===r?l:void 0;if(o&&!Gs(h)&&(h=mn(e,r)),Gs(h)&&(a=h,s))return a;const d=t[i+1];i=s?Ai(d):ki(d)}if(null!==e){let t=o?e.residualClasses:e.residualStyles;null!=t&&(a=mn(t,r))}return a}function Gs(t){return void 0!==t}function Qs(t,e){return 0!=(t.flags&(e?16:32))}function Ws(t,e=""){const n=zt(),r=Gt(),i=t+lt,o=r.firstCreatePass?Mi(r,i,1,e,null):r.data[i],s=n[i]=Fr(n[11],e);ri(r,n,s,o),$t(o,!1)}function Ks(t){return Ys("",t,""),Ks}function Ys(t,e,n){const r=zt(),i=rs(r,t,e,n);return i!==Si&&Oo(r,ve(),i),Ys}function $s(t,e,n,r,i){const o=zt(),s=function(t,e,n,r,i,o){const s=es(t,ne(),n,i);return ie(2),s?e+m(n)+r+m(i)+o:Si}(o,t,e,n,r,i);return s!==Si&&Oo(o,ve(),s),$s}function Js(t,e,n,r,i,o,s,a,u){Fs(yn,Ms,function(t,e,n,r,i,o,s,a,u,c){const l=function(t,e,n,r,i,o){const s=es(t,e,n,r);return es(t,e+2,i,o)||s}(t,ne(),n,i,s,u);return ie(4),l?e+m(n)+r+m(i)+o+m(s)+a+m(u)+c:Si}(zt(),t,e,n,r,i,o,s,a,u),!0)}function Xs(t,e,n){const r=zt();return ts(r,re(),e)&&$i(Gt(),_e(),r,t,e,r[11],n,!0),Xs}const Zs=void 0;var ta=["en",[["a","p"],["AM","PM"],Zs],[["AM","PM"],Zs,Zs],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Zs,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Zs,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Zs,"{1} 'at' {0}",Zs],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(t){let e=Math.floor(Math.abs(t)),n=t.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===n?1:5}];let ea={};function na(t,e,n){"string"!=typeof e&&(n=e,e=t[aa.LocaleId]),e=e.toLowerCase().replace(/_/g,"-"),ea[e]=t,n&&(ea[e][aa.ExtraData]=n)}function ra(t){const e=function(t){return t.toLowerCase().replace(/_/g,"-")}(t);let n=sa(e);if(n)return n;const r=e.split("-")[0];if(n=sa(r),n)return n;if("en"===r)return ta;throw new Error(`Missing locale data for the locale "${t}".`)}function ia(t){return ra(t)[aa.CurrencyCode]||null}function oa(t){return ra(t)[aa.PluralCase]}function sa(t){return t in ea||(ea[t]=q.ng&&q.ng.common&&q.ng.common.locales&&q.ng.common.locales[t]),ea[t]}var aa=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}({});const ua=["zero","one","two","few","many"],ca="en-US",la={marker:"element"},ha={marker:"ICU"};var da=function(t){return t[t.SHIFT=2]="SHIFT",t[t.APPEND_EAGERLY=1]="APPEND_EAGERLY",t[t.COMMENT=2]="COMMENT",t}({});let fa=ca;function pa(t){var e;null==(e=t)&&_("Expected localeId to be defined",e,null,"!="),"string"==typeof t&&(fa=t.toLowerCase().replace(/_/g,"-"))}function ga(t,e,n){const r=e.insertBeforeIndex,i=Array.isArray(r)?r[0]:r;return null===i?Zr(t,0,n):jt(n[i])}function ya(t,e,n,r,i){const o=e.insertBeforeIndex;if(Array.isArray(o)){let s=r,a=null;if(3&e.type||(a=s,s=i),null!==s&&0==(2&e.flags))for(let e=1;e<o.length;e++)Kr(t,s,n[o[e]],a,!1)}}function ma(t,e){if(t.push(e),t.length>1)for(let n=t.length-2;n>=0;n--){const r=t[n];va(r)||ba(r,e)&&null===_a(r)&&wa(r,e.index)}}function va(t){return!(64&t.type)}function ba(t,e){return va(e)||t.index>e.index}function _a(t){const e=t.insertBeforeIndex;return Array.isArray(e)?e[0]:e}function wa(t,e){const n=t.insertBeforeIndex;Array.isArray(n)?n[0]=e:(ni(ga,ya),t.insertBeforeIndex=e)}function Ca(t,e){const n=t.data[e];return null===n||"string"==typeof n?null:n.hasOwnProperty("currentCaseLViewIndex")?n:n.value}function Oa(t,e,n){const r=Li(t,n,64,null,null);return ma(e,r),r}function Ea(t,e){const n=e[t.currentCaseLViewIndex];return null===n?n:n<0?~n:n}let Sa=0,Ta=0;function Ia(t,e,n,r){const i=n[11];let o,s=null;for(let a=0;a<e.length;a++){const u=e[a];if("string"==typeof u){const t=e[++a];null===n[t]&&(n[t]=Fr(i,u))}else if("number"==typeof u)switch(1&u){case 0:const c=u>>>17;let l,h;if(null===s&&(s=c,o=Jr(i,r)),c===s?(l=r,h=o):(l=null,h=jt(n[c])),null!==h){const e=(131070&u)>>>1;Kr(i,h,n[e],l,!1);const r=Ca(t,e);if(null!==r&&"object"==typeof r){const e=Ea(r,n);null!==e&&Ia(t,r.create[e],n,n[r.anchorIdx])}}break;case 1:const d=e[++a],f=e[++a];oo(i,kt(u>>>1,n),null,null,d,f,null);break;default:throw new Error(`Unable to determine the type of mutate operation for "${u}"`)}else switch(u){case ha:const t=e[++a],r=e[++a];null===n[r]&&Ir(n[r]=Ur(i,t),n);break;case la:const o=e[++a],s=e[++a];null===n[s]&&Ir(n[s]=qr(i,o,null),n)}}}function xa(t,e,n,r,i){for(let o=0;o<n.length;o++){const s=n[o],a=n[++o];if(s&i){let i="";for(let s=o+1;s<=o+a;s++){const o=n[s];if("string"==typeof o)i+=o;else if("number"==typeof o)if(o<0)i+=m(e[r-o]);else{const a=o>>>2;switch(3&o){case 1:const o=n[++s],u=n[++s],c=t.data[a];"string"==typeof c?oo(e[11],e[a],null,c,o,i,u):$i(t,c,e,o,i,e[11],u,!1);break;case 0:const l=e[a];null!==l&&Vr(e[11],l,i);break;case 2:ja(t,Ca(t,a),e,i);break;case 3:Aa(t,Ca(t,a),r,e)}}}}else{const i=n[o+1];if(i>0&&3==(3&i)){const n=Ca(t,i>>>2);e[n.currentCaseLViewIndex]<0&&Aa(t,n,r,e)}}o+=a}}function Aa(t,e,n,r){let i=r[e.currentCaseLViewIndex];if(null!==i){let o=Sa;i<0&&(i=r[e.currentCaseLViewIndex]=~i,o=-1),xa(t,r,e.update[i],n,o)}}function ja(t,e,n,r){const i=function(t,e){let n=t.cases.indexOf(e);if(-1===n)switch(t.type){case 1:{const r=function(t,e){const n=oa(e)(parseInt(t,10)),r=ua[n];return void 0!==r?r:"other"}(e,fa);n=t.cases.indexOf(r),-1===n&&"other"!==r&&(n=t.cases.indexOf("other"));break}case 0:n=t.cases.indexOf("other")}return-1===n?null:n}(e,r);if(Ea(e,n)!==i&&(ka(t,e,n),n[e.currentCaseLViewIndex]=null===i?null:~i,null!==i)){const r=n[e.anchorIdx];r&&Ia(t,e.create[i],n,r)}}function ka(t,e,n){let r=Ea(e,n);if(null!==r){const i=e.remove[r];for(let e=0;e<i.length;e++){const r=i[e];if(r>0){const t=kt(r,n);null!==t&&ai(n[11],t)}else ka(t,Ca(t,~r),n)}}}const Na=/\ufffd(\d+):?\d*\ufffd/gi,Pa=/\ufffd(\d+)\ufffd/,Ra=/^\s*(\ufffd\d+:?\d*\ufffd)\s*,\s*(select|plural)\s*,/,Da=/\ufffd\/?\*(\d+:\d+)\ufffd/gi,Ma=/\ufffd(\/?[#*]\d+):?\d*\ufffd/gi,La=/\uE500/g;function Fa(t,e,n,r,i,o,s){const a=Fi(t,r,1,null);let u=a<<da.SHIFT,c=Yt();e===c&&(c=null),null===c&&(u|=da.APPEND_EAGERLY),s&&(u|=da.COMMENT,void 0===kr&&(kr=function(){const t=[];let e,n,r=-1;function i(t,e){r=0;const i=Ea(t,e);n=null!==i?t.remove[i]:z}function o(){if(r<n.length){const s=n[r++];return s>0?e[s]:(t.push(r,n),i(e[1].data[~s],e),o())}return 0===t.length?null:(n=t.pop(),r=t.pop(),o())}return function(n,r){for(e=r;t.length;)t.pop();return i(n.value,r),o}}())),i.push(u,null===o?"":o);const l=Li(t,a,s?32:1,null===o?"":o,null);ma(n,l);const h=l.index;return $t(l,!1),null!==c&&e!==c&&function(t,e){let n=t.insertBeforeIndex;var r;null===n?(ni(ga,ya),n=t.insertBeforeIndex=[null,e]):("Expecting array here",(r=Array.isArray(n))!=!0&&_("Expecting array here",r,true,"=="),n.push(e))}(c,h),l}function Va(t,e,n,r,i,o,s){const a=s.match(Na),u=Fa(t,e,n,o,r,a?null:s,!1);a&&Ua(i,s,u.index)}function Ua(t,e,n,r,i=null){const o=t.length,s=o+1;t.push(null,null);const a=o+2,u=e.split(Na);let c=0;for(let l=0;l<u.length;l++){const e=u[l];if(1&l){const n=parseInt(e,10);t.push(-1-n),c|=qa(n)}else""!==e&&t.push(e)}return t.push(n<<2|(r?1:0)),r&&t.push(r,i),t[o]=c,t[s]=t.length-a,c}function qa(t){return 1<<Math.min(t,31)}function Ba(t){let e,n,r="",i=0,o=!1;for(;null!==(e=Da.exec(t));)o?e[0]===`\ufffd/*${n}\ufffd`&&(i=e.index,o=!1):(r+=t.substring(i,e.index+e[0].length),n=e[1],o=!0);return r+=t.substr(i),r}function Ha(t,e,n,r,i,o){let s=0;const a={type:i.type,currentCaseLViewIndex:Fi(t,e,1,null),anchorIdx:o,cases:[],create:[],remove:[],update:[]};!function(t,e,n){t.push(qa(e.mainBinding),2,-1-e.mainBinding,n<<2|2)}(n,i,o),function(t,e,n){const r=t.data[e];null===r?t.data[e]=n:r.value=n}(t,o,a);const u=i.values;for(let c=0;c<u.length;c++){const o=u[c],l=[];for(let t=0;t<o.length;t++){const e=o[t];if("string"!=typeof e){const n=l.push(e)-1;o[t]=`\x3c!--\ufffd${n}\ufffd--\x3e`}}s=Qa(t,a,e,n,r,i.cases[c],o.join(""),l)|s}s&&function(t,e,n){t.push(e,1,n<<2|3)}(n,s,o)}function za(t){const e=[],n=[];let r=1,i=0;const o=Ga(t=t.replace(Ra,function(t,e,n){return r="select"===n?0:1,i=parseInt(e.substr(1),10),""}));for(let s=0;s<o.length;){let t=o[s++].trim();1===r&&(t=t.replace(/\s*(?:=)?(\w+)\s*/,"$1")),t.length&&e.push(t);const i=Ga(o[s++]);e.length>n.length&&n.push(i)}return{type:r,mainBinding:i,cases:e,values:n}}function Ga(t){if(!t)return[];let e=0;const n=[],r=[],i=/[{}]/g;let o;for(i.lastIndex=0;o=i.exec(t);){const i=o.index;if("}"==o[0]){if(n.pop(),0==n.length){const n=t.substring(e,i);Ra.test(n)?r.push(za(n)):r.push(n),e=i+1}}else{if(0==n.length){const n=t.substring(e,i);r.push(n),e=i+1}n.push("{")}}const s=t.substring(e);return r.push(s),r}function Qa(t,e,n,r,i,o,s,a){const u=[],c=[],l=[];e.cases.push(o),e.create.push(u),e.remove.push(c),e.update.push(l);const h=Kn(It()).getInertBodyElement(s),d=vr(h)||h;return d?Wa(t,e,n,r,u,c,l,d,i,a,0):0}function Wa(t,e,n,r,i,o,s,a,u,c,l){let h=0,d=a.firstChild;for(;d;){const a=Fi(t,n,1,null);switch(d.nodeType){case Node.ELEMENT_NODE:const f=d,p=f.tagName.toLowerCase();if(ar.hasOwnProperty(p)){$a(i,la,p,u,a),t.data[a]=p;const g=f.attributes;for(let t=0;t<g.length;t++){const e=g.item(t),n=e.name.toLowerCase();e.value.match(Na)?lr.hasOwnProperty(n)&&(ur[n]?Ua(s,e.value,a,e.name,Zn):cr[n]?Ua(s,e.value,a,e.name,tr):Ua(s,e.value,a,e.name)):Ja(i,a,e)}h=Wa(t,e,n,r,i,o,s,d,a,c,l+1)|h,Ka(o,a,l)}break;case Node.TEXT_NODE:const g=d.textContent||"",y=g.match(Na);$a(i,null,y?"":g,u,a),Ka(o,a,l),y&&(h=Ua(s,g,a)|h);break;case Node.COMMENT_NODE:const m=Pa.exec(d.textContent||"");if(m){const e=c[parseInt(m[1],10)];$a(i,ha,"",u,a),Ha(t,n,r,u,e,a),Ya(o,a,l)}}d=d.nextSibling}return h}function Ka(t,e,n){0===n&&t.push(e)}function Ya(t,e,n){0===n&&(t.push(~e),t.push(e))}function $a(t,e,n,r,i){null!==e&&t.push(e),t.push(n,i,0|r<<17|i<<1)}function Ja(t,e,n){t.push(e<<1|1,n.name,n.value)}function Xa(t,e,n){(function(t,e,n=-1){const r=Gt(),i=zt(),o=lt+t,s=Vt(r.consts,e),a=Yt();r.firstCreatePass&&function(t,e,n,r,i,o){const s=Yt(),a=[],u=[],c=[[]],l=(h=i=function(t,e){if(function(t){return-1===t}(e))return Ba(t);{const n=t.indexOf(`:${e}\ufffd`)+2+e.toString().length,r=t.search(new RegExp(`\ufffd\\/\\*\\d+:${e}\ufffd`));return Ba(t.substring(n,r))}}(i,o),h.replace(La," ")).split(Ma);var h;for(let d=0;d<l.length;d++){let r=l[d];if(0==(1&d)){const o=Ga(r);for(let r=0;r<o.length;r++){let l=o[r];if(0==(1&r)){const e=l;""!==e&&Va(t,s,c[0],a,u,n,e)}else{const r=l;if("object"!=typeof r)throw new Error(`Unable to parse ICU expression in "${i}" message.`);Ha(t,n,u,e,r,Fa(t,s,c[0],n,a,"",!0).index)}}}else{const e=47===r.charCodeAt(0),n=(r.charCodeAt(e?1:0),lt+Number.parseInt(r.substring(e?2:1)));if(e)c.shift(),$t(Yt(),!1);else{const e=Oa(t,c[0],n);c.unshift([]),$t(e,!0)}}}t.data[r]={create:a,update:u}}(r,null===a?0:a.index,i,o,s,n);const u=r.data[o],c=Wr(r,a===i[6]?null:a,i);!function(t,e,n,r){const i=t[11];for(let o=0;o<e.length;o++){const s=e[o++],a=e[o],u=(s&da.COMMENT)===da.COMMENT,c=(s&da.APPEND_EAGERLY)===da.APPEND_EAGERLY,l=s>>>da.SHIFT;let h=t[l];null===h&&(h=t[l]=u?i.createComment(a):Fr(i,a)),c&&null!==n&&Kr(i,n,h,r,!1)}}(i,u.create,c,a&&8&a.type?i[a.index]:null),oe(!0)})(t,e,n),oe(!1)}function Za(t){return ts(zt(),re(),t)&&(Sa|=1<<Math.min(Ta,31)),Ta++,Za}function tu(t){!function(t,e,n){if(Ta>0){const r=t.data[n];xa(t,e,Array.isArray(r)?r:r.update,ne()-Ta-1,Sa)}Sa=0,Ta=0}(Gt(),zt(),t+lt)}function eu(t,e,n,r,i){if(t=p(t),Array.isArray(t))for(let o=0;o<t.length;o++)eu(t[o],e,n,r,i);else{const o=Gt(),s=zt();let a=Vo(t)?t:p(t.provide),u=Mo(t);const c=Wt(),l=1048575&c.providerIndexes,h=c.directiveStart,d=c.providerIndexes>>20;if(Vo(t)||!t.multi){const r=new xe(u,i,ss),f=iu(a,e,i?l:l+d,h);-1===f?(ze(Ue(c,s),o,a),nu(o,t,e.length),e.push(a),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),n.push(r),s.push(r)):(n[f]=r,s[f]=r)}else{const f=iu(a,e,l+d,h),p=iu(a,e,l,l+d),g=f>=0&&n[f],y=p>=0&&n[p];if(i&&!y||!i&&!g){ze(Ue(c,s),o,a);const l=function(t,e,n,r,i){const o=new xe(t,n,ss);return o.multi=[],o.index=e,o.componentProviders=0,ru(o,i,r&&!n),o}(i?su:ou,n.length,i,r,u);!i&&y&&(n[p].providerFactory=l),nu(o,t,e.length,0),e.push(a),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),n.push(l),s.push(l)}else nu(o,t,f>-1?f:p,ru(n[i?p:f],u,!i&&r));!i&&r&&y&&n[p].componentProviders++}}}function nu(t,e,n,r){const i=Vo(e);if(i||e.useClass){const o=(e.useClass||e).prototype.ngOnDestroy;if(o){const s=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){const t=s.indexOf(n);-1===t?s.push(n,[r,o]):s[t+1].push(r,o)}else s.push(n,o)}}}function ru(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function iu(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function ou(t,e,n,r){return au(this.multi,[])}function su(t,e,n,r){const i=this.multi;let o;if(this.providerFactory){const t=this.providerFactory.componentProviders,e=Xe(n,n[1],this.providerFactory.index,r);o=e.slice(0,t),au(i,o);for(let n=t;n<e.length;n++)o.push(e[n])}else o=[],au(i,o);return o}function au(t,e){for(let n=0;n<t.length;n++)e.push((0,t[n])());return e}function uu(t,e=[]){return n=>{n.providersResolver=(n,r)=>function(t,e,n){const r=Gt();if(r.firstCreatePass){const i=mt(t);eu(n,r.data,r.blueprint,i,!0),eu(e,r.data,r.blueprint,i,!1)}}(n,r?r(t):t,e)}}class cu{}class lu{resolveComponentFactory(t){throw function(t){const e=Error(`No component factory found for ${l(t)}. Did you add it to @NgModule.entryComponents?`);return e.ngComponent=t,e}(t)}}let hu=(()=>{class t{}return t.NULL=new lu,t})();function du(...t){}function fu(t,e){return new gu(Nt(t,e))}const pu=function(){return fu(Wt(),zt())};let gu=(()=>{class t{constructor(t){this.nativeElement=t}}return t.__NG_ELEMENT_ID__=pu,t})();function yu(t){return t instanceof gu?t.nativeElement:t}class mu{}let vu=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>bu(),t})();const bu=function(){const t=zt(),e=Dt(Wt().index,t);return function(t){return t[11]}(dt(e)?e:t)};let _u=(()=>{class t{}return t.\u0275prov=w({token:t,providedIn:"root",factory:()=>null}),t})();class wu{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const Cu=new wu("11.2.7");class Ou{constructor(){}supports(t){return Jo(t)}create(t){return new Su(t)}}const Eu=(t,e)=>e;class Su{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||Eu}forEachItem(t){let e;for(e=this._itHead;null!==e;e=e._next)t(e)}forEachOperation(t){let e=this._itHead,n=this._removalsHead,r=0,i=null;for(;e||n;){const o=!n||e&&e.currentIndex<Au(n,r,i)?e:n,s=Au(o,r,i),a=o.currentIndex;if(o===n)r--,n=n._nextRemoved;else if(e=e._next,null==o.previousIndex)r++;else{i||(i=[]);const t=s-r,e=a-r;if(t!=e){for(let n=0;n<t;n++){const r=n<i.length?i[n]:i[n]=0,o=r+n;e<=o&&o<t&&(i[n]=r+1)}i[o.previousIndex]=e-t}}s!==a&&t(o,s,a)}}forEachPreviousItem(t){let e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachMovedItem(t){let e;for(e=this._movesHead;null!==e;e=e._nextMoved)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}forEachIdentityChange(t){let e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)t(e)}diff(t){if(null==t&&(t=[]),!Jo(t))throw new Error(`Error trying to diff '${l(t)}'. Only arrays and iterables are allowed`);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e,n,r,i=this._itHead,o=!1;if(Array.isArray(t)){this.length=t.length;for(let e=0;e<this.length;e++)n=t[e],r=this._trackByFn(e,n),null!==i&&Object.is(i.trackById,r)?(o&&(i=this._verifyReinsertion(i,n,r,e)),Object.is(i.item,n)||this._addIdentityChange(i,n)):(i=this._mismatch(i,n,r,e),o=!0),i=i._next}else e=0,function(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{const n=t[Yo()]();let r;for(;!(r=n.next()).done;)e(r.value)}}(t,t=>{r=this._trackByFn(e,t),null!==i&&Object.is(i.trackById,r)?(o&&(i=this._verifyReinsertion(i,t,r,e)),Object.is(i.item,t)||this._addIdentityChange(i,t)):(i=this._mismatch(i,t,r,e),o=!0),i=i._next,e++}),this.length=e;return this._truncate(i),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,e,n,r){let i;return null===t?i=this._itTail:(i=t._prev,this._remove(t)),null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,i,r)):null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,i,r)):t=this._addAfter(new Tu(e,n),i,r),t}_verifyReinsertion(t,e,n,r){let i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==i?t=this._reinsertAfter(i,t._prev,r):t.currentIndex!=r&&(t.currentIndex=r,this._addToMoves(t,r)),t}_truncate(t){for(;null!==t;){const e=t._next;this._addToRemovals(this._unlink(t)),t=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,e,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const r=t._prevRemoved,i=t._nextRemoved;return null===r?this._removalsHead=i:r._nextRemoved=i,null===i?this._removalsTail=r:i._prevRemoved=r,this._insertAfter(t,e,n),this._addToMoves(t,n),t}_moveAfter(t,e,n){return this._unlink(t),this._insertAfter(t,e,n),this._addToMoves(t,n),t}_addAfter(t,e,n){return this._insertAfter(t,e,n),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,e,n){const r=null===e?this._itHead:e._next;return t._next=r,t._prev=e,null===r?this._itTail=t:r._prev=t,null===e?this._itHead=t:e._next=t,null===this._linkedRecords&&(this._linkedRecords=new xu),this._linkedRecords.put(t),t.currentIndex=n,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const e=t._prev,n=t._next;return null===e?this._itHead=n:e._next=n,null===n?this._itTail=e:n._prev=e,t}_addToMoves(t,e){return t.previousIndex===e||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new xu),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,e){return t.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}class Tu{constructor(t,e){this.item=t,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Iu{constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,e){let n;for(n=this._head;null!==n;n=n._nextDup)if((null===e||e<=n.currentIndex)&&Object.is(n.trackById,t))return n;return null}remove(t){const e=t._prevDup,n=t._nextDup;return null===e?this._head=n:e._nextDup=n,null===n?this._tail=e:n._prevDup=e,null===this._head}}class xu{constructor(){this.map=new Map}put(t){const e=t.trackById;let n=this.map.get(e);n||(n=new Iu,this.map.set(e,n)),n.add(t)}get(t,e){const n=this.map.get(t);return n?n.get(t,e):null}remove(t){const e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Au(t,e,n){const r=t.previousIndex;if(null===r)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}class ju{constructor(){}supports(t){return t instanceof Map||Xo(t)}create(){return new ku}}class ku{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(t){let e;for(e=this._mapHead;null!==e;e=e._next)t(e)}forEachPreviousItem(t){let e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)t(e)}forEachChangedItem(t){let e;for(e=this._changesHead;null!==e;e=e._nextChanged)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}diff(t){if(t){if(!(t instanceof Map||Xo(t)))throw new Error(`Error trying to diff '${l(t)}'. Only maps and objects are allowed`)}else t=new Map;return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e=this._mapHead;if(this._appendAfter=null,this._forEach(t,(t,n)=>{if(e&&e.key===n)this._maybeAddToChanges(e,t),this._appendAfter=e,e=e._next;else{const r=this._getOrCreateRecordForKey(n,t);e=this._insertBeforeOrAppend(e,r)}}),e){e._prev&&(e._prev._next=null),this._removalsHead=e;for(let t=e;null!==t;t=t._nextRemoved)t===this._mapHead&&(this._mapHead=null),this._records.delete(t.key),t._nextRemoved=t._next,t.previousValue=t.currentValue,t.currentValue=null,t._prev=null,t._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(t,e){if(t){const n=t._prev;return e._next=t,e._prev=n,t._prev=e,n&&(n._next=e),t===this._mapHead&&(this._mapHead=e),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}_getOrCreateRecordForKey(t,e){if(this._records.has(t)){const n=this._records.get(t);this._maybeAddToChanges(n,e);const r=n._prev,i=n._next;return r&&(r._next=i),i&&(i._prev=r),n._next=null,n._prev=null,n}const n=new Nu(t);return this._records.set(t,n),n.currentValue=e,this._addToAdditions(n),n}_reset(){if(this.isDirty){let t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(t,e){Object.is(e,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=e,this._addToChanges(t))}_addToAdditions(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}_addToChanges(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}_forEach(t,e){t instanceof Map?t.forEach(e):Object.keys(t).forEach(n=>e(t[n],n))}}class Nu{constructor(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Pu(){return new Ru([new Ou])}let Ru=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(null!=n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>t.create(e,n||Pu()),deps:[[t,new kn,new jn]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(null!=e)return e;throw new Error(`Cannot find a differ supporting object '${t}' of type '${n=t,n.name||typeof n}'`);var n}}return t.\u0275prov=w({token:t,providedIn:"root",factory:Pu}),t})();function Du(){return new Mu([new ju])}let Mu=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>t.create(e,n||Du()),deps:[[t,new kn,new jn]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(e)return e;throw new Error(`Cannot find a differ supporting object '${t}'`)}}return t.\u0275prov=w({token:t,providedIn:"root",factory:Du}),t})();function Lu(t,e,n,r,i=!1){for(;null!==n;){const o=e[n.index];if(null!==o&&r.push(jt(o)),ft(o))for(let t=ht;t<o.length;t++){const e=o[t],n=e[1].firstChild;null!==n&&Lu(e[1],e,n,r)}const s=n.type;if(8&s)Lu(t,e,n.child,r);else if(32&s){const t=Nr(n,e);let i;for(;i=t();)r.push(i)}else if(16&s){const t=oi(e,n);if(Array.isArray(t))r.push(...t);else{const n=Pr(e[16]);Lu(n[1],n,t,r,!0)}}n=i?n.projectionNext:n.next}return r}class Fu{constructor(t,e){this._lView=t,this._cdRefInjectingView=e,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const t=this._lView,e=t[1];return Lu(e,t,e.firstChild,[])}get context(){return this._lView[8]}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const t=this._lView[3];if(ft(t)){const e=t[8],n=e?e.indexOf(this):-1;n>-1&&(Hr(t,n),pn(e,n))}this._attachedToViewContainer=!1}zr(this._lView[1],this._lView)}onDestroy(t){Ki(this._lView[1],this._lView,null,t)}markForCheck(){po(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){go(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(t,e,n){te(!0);try{go(t,e,n)}finally{te(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var t;this._appRef=null,ci(this._lView[1],t=this._lView,t[11],2,null,null)}attachToAppRef(t){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=t}}class Vu extends Fu{constructor(t){super(t),this._view=t}detectChanges(){yo(this._view)}checkNoChanges(){!function(t){te(!0);try{yo(t)}finally{te(!1)}}(this._view)}get context(){return null}}const Uu=Bu;let qu=(()=>{class t{}return t.__NG_ELEMENT_ID__=Uu,t.__ChangeDetectorRef__=!0,t})();function Bu(t=!1){return function(t,e,n){if(!n&&gt(t)){const n=Dt(t.index,e);return new Fu(n,n)}return 47&t.type?new Fu(e[16],e):null}(Wt(),zt(),t)}const Hu=[new ju],zu=new Ru([new Ou]),Gu=new Mu(Hu),Qu=function(){return $u(Wt(),zt())};let Wu=(()=>{class t{}return t.__NG_ELEMENT_ID__=Qu,t})();const Ku=Wu,Yu=class extends Ku{constructor(t,e,n){super(),this._declarationLView=t,this._declarationTContainer=e,this.elementRef=n}createEmbeddedView(t){const e=this._declarationTContainer.tViews,n=Di(this._declarationLView,e,t,16,null,e.declTNode,null,null,null,null);n[17]=this._declarationLView[this._declarationTContainer.index];const r=this._declarationLView[19];return null!==r&&(n[19]=r.createEmbeddedView(e)),Vi(e,n,t),new Fu(n)}};function $u(t,e){return 4&t.type?new Yu(e,t,fu(t,e)):null}class Ju{}class Xu{}const Zu=function(){return oc(Wt(),zt())};let tc=(()=>{class t{}return t.__NG_ELEMENT_ID__=Zu,t})();const ec=tc,nc=class extends ec{constructor(t,e,n){super(),this._lContainer=t,this._hostTNode=e,this._hostLView=n}get element(){return fu(this._hostTNode,this._hostLView)}get injector(){return new en(this._hostTNode,this._hostLView)}get parentInjector(){const t=He(this._hostTNode,this._hostLView);if(Re(t)){const e=Me(t,this._hostLView),n=De(t);return new en(e[1].data[n+8],e)}return new en(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){const e=rc(this._lContainer);return null!==e&&e[t]||null}get length(){return this._lContainer.length-ht}createEmbeddedView(t,e,n){const r=t.createEmbeddedView(e||{});return this.insert(r,n),r}createComponent(t,e,n,r,i){const o=n||this.parentInjector;if(!i&&null==t.ngModule&&o){const t=o.get(Ju,null);t&&(i=t)}const s=t.create(o,r,void 0,i);return this.insert(s.hostView,e),s}insert(t,e){const n=t._lView,r=n[1];if(ft(n[3])){const e=this.indexOf(t);if(-1!==e)this.detach(e);else{const e=n[3],r=new nc(e,e[6],e[3]);r.detach(r.indexOf(t))}}const i=this._adjustIndex(e),o=this._lContainer;!function(t,e,n,r){const i=ht+r,o=n.length;r>0&&(n[i-1][4]=e),r<o-ht?(e[4]=n[i],fn(n,ht+r,e)):(n.push(e),e[4]=null),e[3]=n;const s=e[17];null!==s&&n!==s&&function(t,e){const n=t[9];e[16]!==e[3][3][16]&&(t[2]=!0),null===n?t[9]=[e]:n.push(e)}(s,e);const a=e[19];null!==a&&a.insertView(t),e[2]|=128}(r,n,o,i);const s=si(i,o),a=n[11],u=Jr(a,o[7]);return null!==u&&function(t,e,n,r,i,o){r[0]=i,r[6]=e,ci(t,r,n,1,i,o)}(r,o[6],a,n,u,s),t.attachToViewContainerRef(),fn(ic(o),i,t),t}move(t,e){return this.insert(t,e)}indexOf(t){const e=rc(this._lContainer);return null!==e?e.indexOf(t):-1}remove(t){const e=this._adjustIndex(t,-1),n=Hr(this._lContainer,e);n&&(pn(ic(this._lContainer),e),zr(n[1],n))}detach(t){const e=this._adjustIndex(t,-1),n=Hr(this._lContainer,e);return n&&null!=pn(ic(this._lContainer),e)?new Fu(n):null}_adjustIndex(t,e=0){return null==t?this.length+e:t}};function rc(t){return t[8]}function ic(t){return t[8]||(t[8]=[])}function oc(t,e){let n;const r=e[t.index];if(ft(r))n=r;else{let i;if(8&t.type)i=jt(r);else{const n=e[11];i=n.createComment("");const r=Nt(t,e);Kr(n,Jr(n,r),i,function(t,e){return xt(t)?t.nextSibling(e):e.nextSibling}(n,r),!1)}e[t.index]=n=uo(r,e,i,t),fo(e,n)}return new nc(n,t,e)}const sc={};class ac extends hu{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const e=ut(t);return new lc(e,this.ngModule)}}function uc(t){const e=[];for(let n in t)t.hasOwnProperty(n)&&e.push({propName:t[n],templateName:n});return e}const cc=new un("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>xr});class lc extends cu{constructor(t,e){super(),this.componentDef=t,this.ngModule=e,this.componentType=t.type,this.selector=t.selectors.map(Ei).join(","),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!e}get inputs(){return uc(this.componentDef.inputs)}get outputs(){return uc(this.componentDef.outputs)}create(t,e,n,r){const i=(r=r||this.ngModule)?function(t,e){return{get:(n,r,i)=>{const o=t.get(n,sc,i);return o!==sc||r===sc?o:e.get(n,r,i)}}}(t,r.injector):t,o=i.get(mu,At),s=i.get(_u,null),a=o.createRenderer(null,this.componentDef),u=this.componentDef.selectors[0][0]||"div",c=n?function(t,e,n){if(xt(t))return t.selectRootElement(e,n===M.ShadowDom);let r="string"==typeof e?t.querySelector(e):e;return r.textContent="",r}(a,n,this.componentDef.encapsulation):qr(o.createRenderer(null,this.componentDef),u,function(t){const e=t.toLowerCase();return"svg"===e?"http://www.w3.org/2000/svg":"math"===e?"http://www.w3.org/1998/MathML/":null}(u)),l=this.componentDef.onPush?576:528,h={components:[],scheduler:xr,clean:vo,playerHandler:null,flags:0},d=Wi(0,null,null,1,0,null,null,null,null,null),f=Di(null,d,h,l,null,null,o,a,s,i);let p,g;de(f);try{const t=function(t,e,n,r,i,o){const s=n[1];n[20]=t;const a=Mi(s,20,2,"#host",null),u=a.mergedAttrs=e.hostAttrs;null!==u&&(Eo(a,u,!0),null!==t&&(Ae(i,t,u),null!==a.classes&&di(i,t,a.classes),null!==a.styles&&hi(i,t,a.styles)));const c=r.createRenderer(t,e),l=Di(n,Qi(e),null,e.onPush?64:16,n[20],a,r,c,null,null);return s.firstCreatePass&&(ze(Ue(a,n),s,e.type),to(s,a),no(a,n.length,1)),fo(n,l),n[20]=l}(c,this.componentDef,f,o,a);if(c)if(n)Ae(a,c,["ng-version",Cu.full]);else{const{attrs:t,classes:e}=function(t){const e=[],n=[];let r=1,i=2;for(;r<t.length;){let o=t[r];if("string"==typeof o)2===i?""!==o&&e.push(o,t[++r]):8===i&&n.push(o);else{if(!bi(i))break;i=o}r++}return{attrs:e,classes:n}}(this.componentDef.selectors[0]);t&&Ae(a,c,t),e&&e.length>0&&di(a,c,e.join(" "))}if(g=Pt(d,lt),void 0!==e){const t=g.projection=[];for(let n=0;n<this.ngContentSelectors.length;n++){const r=e[n];t.push(null!=r?Array.from(r):null)}}p=function(t,e,n,r,i){const o=n[1],s=function(t,e,n){const r=Wt();t.firstCreatePass&&(n.providersResolver&&n.providersResolver(n),ro(t,r,e,Fi(t,e,1,null),n));const i=Xe(e,t,r.directiveStart,r);Ir(i,e);const o=Nt(r,e);return o&&Ir(o,e),i}(o,n,e);if(r.components.push(s),t[8]=s,i&&i.forEach(t=>t(s,e)),e.contentQueries){const t=Wt();e.contentQueries(1,s,t.directiveStart)}const a=Wt();return!o.firstCreatePass||null===e.hostBindings&&null===e.hostAttrs||(be(a.index),Xi(n[1],a,0,a.directiveStart,a.directiveEnd,e),Zi(e,s)),s}(t,this.componentDef,f,h,[Bo]),Vi(d,f,null)}finally{me()}return new hc(this.componentType,p,fu(g,f),f,g)}}class hc extends class{}{constructor(t,e,n,r,i){super(),this.location=n,this._rootLView=r,this._tNode=i,this.instance=e,this.hostView=this.changeDetectorRef=new Vu(r),this.componentType=t}get injector(){return new en(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}}const dc=new Map;class fc extends Ju{constructor(t,e){super(),this._parent=e,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new ac(this);const n=ct(t),r=t[Y]||null;r&&pa(r),this._bootstrapComponents=Ar(n.bootstrap),this._r3Injector=Po(t,e,[{provide:Ju,useValue:this},{provide:hu,useValue:this.componentFactoryResolver}],l(t)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(t)}get(t,e=qo.THROW_IF_NOT_FOUND,n=j.Default){return t===qo||t===Ju||t===So?this:this._r3Injector.get(t,e,n)}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class pc extends Xu{constructor(t){super(),this.moduleType=t,null!==ct(t)&&function(t){const e=new Set;!function t(n){const r=ct(n,!0),i=r.id;null!==i&&(function(t,e,n){if(e&&e!==n)throw new Error(`Duplicate module registered for ${t} - ${l(e)} vs ${l(e.name)}`)}(i,dc.get(i),n),dc.set(i,n));const o=Ar(r.imports);for(const s of o)e.has(s)||(e.add(s),t(s))}(t)}(t)}create(t){return new fc(this.moduleType,t)}}function gc(t,e,n,r){return bc(zt(),ee(),t,e,n,r)}function yc(t,e,n,r,i){return function(t,e,n,r,i,o,s){const a=e+n;return es(t,a,i,o)?Zo(t,a+2,s?r.call(s,i,o):r(i,o)):vc(t,a+2)}(zt(),ee(),t,e,n,r,i)}function mc(t,e,n,r,i,o){return function(t,e,n,r,i,o,s,a){const u=e+n;return function(t,e,n,r,i){const o=es(t,e,n,r);return ts(t,e+2,i)||o}(t,u,i,o,s)?Zo(t,u+3,a?r.call(a,i,o,s):r(i,o,s)):vc(t,u+3)}(zt(),ee(),t,e,n,r,i,o)}function vc(t,e){const n=t[e];return n===Si?void 0:n}function bc(t,e,n,r,i,o){const s=e+n;return ts(t,s,i)?Zo(t,s+1,o?r.call(o,i):r(i)):vc(t,s+1)}function _c(t,e){const n=Gt();let r;const i=t+lt;n.firstCreatePass?(r=function(t,e){if(e)for(let n=e.length-1;n>=0;n--){const r=e[n];if(t===r.name)return r}throw new y("302",`The pipe '${t}' could not be found!`)}(e,n.pipeRegistry),n.data[i]=r,r.onDestroy&&(n.destroyHooks||(n.destroyHooks=[])).push(i,r.onDestroy)):r=n.data[i];const o=r.factory||(r.factory=vt(r.type)),s=N(ss);try{const t=Fe(!1),e=o();return Fe(t),function(t,e,n,r){n>=t.data.length&&(t.data[n]=null,t.blueprint[n]=null),e[n]=r}(n,zt(),i,e),e}finally{N(s)}}function wc(t,e,n){const r=t+lt,i=zt(),o=Rt(i,r);return function(t,e){return $o.isWrapped(e)&&(e=$o.unwrap(e),t[ne()]=Si),e}(i,function(t,e){return t[1].data[e].pure}(i,r)?bc(i,ee(),e,o.transform,n,o):o.transform(n))}const Cc=class extends r.a{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,e,n){let r,o=t=>null,s=()=>null;t&&"object"==typeof t?(r=this.__isAsync?e=>{setTimeout(()=>t.next(e))}:e=>{t.next(e)},t.error&&(o=this.__isAsync?e=>{setTimeout(()=>t.error(e))}:e=>{t.error(e)}),t.complete&&(s=this.__isAsync?()=>{setTimeout(()=>t.complete())}:()=>{t.complete()})):(r=this.__isAsync?e=>{setTimeout(()=>t(e))}:e=>{t(e)},e&&(o=this.__isAsync?t=>{setTimeout(()=>e(t))}:t=>{e(t)}),n&&(s=this.__isAsync?()=>{setTimeout(()=>n())}:()=>{n()}));const a=super.subscribe(r,o,s);return t instanceof i.a&&t.add(a),a}};function Oc(){return this._results[Yo()]()}class Ec{constructor(t=!1){this._emitDistinctChangesOnly=t,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const e=Yo(),n=Ec.prototype;n[e]||(n[e]=Oc)}get changes(){return this._changes||(this._changes=new Cc)}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,e){return this._results.reduce(t,e)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,e){const n=this;n.dirty=!1;const r=hn(t);(this._changesDetected=!function(t,e,n){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++){let i=t[r],o=e[r];if(n&&(i=n(i),o=n(o)),o!==i)return!1}return!0}(n._results,r,e))&&(n._results=r,n.length=r.length,n.last=r[this.length-1],n.first=r[0])}notifyOnChanges(){!this._changes||!this._changesDetected&&this._emitDistinctChangesOnly||this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}class Sc{constructor(t){this.queryList=t,this.matches=null}clone(){return new Sc(this.queryList)}setDirty(){this.queryList.setDirty()}}class Tc{constructor(t=[]){this.queries=t}createEmbeddedView(t){const e=t.queries;if(null!==e){const n=null!==t.contentQueries?t.contentQueries[0]:e.length,r=[];for(let t=0;t<n;t++){const n=e.getByIndex(t);r.push(this.queries[n.indexInDeclarationView].clone())}return new Tc(r)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let e=0;e<this.queries.length;e++)null!==Uc(t,e).matches&&this.queries[e].setDirty()}}class Ic{constructor(t,e,n=null){this.predicate=t,this.flags=e,this.read=n}}class xc{constructor(t=[]){this.queries=t}elementStart(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementStart(t,e)}elementEnd(t){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(t)}embeddedTView(t){let e=null;for(let n=0;n<this.length;n++){const r=null!==e?e.length:0,i=this.getByIndex(n).embeddedTView(t,r);i&&(i.indexInDeclarationView=n,null!==e?e.push(i):e=[i])}return null!==e?new xc(e):null}template(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].template(t,e)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}}class Ac{constructor(t,e=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=e}elementStart(t,e){this.isApplyingToNode(e)&&this.matchTNode(t,e)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,e){this.elementStart(t,e)}embeddedTView(t,e){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,e),new Ac(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const e=this._declarationNodeIndex;let n=t.parent;for(;null!==n&&8&n.type&&n.index!==e;)n=n.parent;return e===(null!==n?n.index:-1)}return this._appliesToNextNode}matchTNode(t,e){const n=this.metadata.predicate;if(Array.isArray(n))for(let r=0;r<n.length;r++){const i=n[r];this.matchTNodeWithReadOption(t,e,jc(e,i)),this.matchTNodeWithReadOption(t,e,Je(e,t,i,!1,!1))}else n===Wu?4&e.type&&this.matchTNodeWithReadOption(t,e,-1):this.matchTNodeWithReadOption(t,e,Je(e,t,n,!1,!1))}matchTNodeWithReadOption(t,e,n){if(null!==n){const r=this.metadata.read;if(null!==r)if(r===gu||r===tc||r===Wu&&4&e.type)this.addMatch(e.index,-2);else{const n=Je(e,t,r,!1,!1);null!==n&&this.addMatch(e.index,n)}else this.addMatch(e.index,n)}}addMatch(t,e){null===this.matches?this.matches=[t,e]:this.matches.push(t,e)}}function jc(t,e){const n=t.localNames;if(null!==n)for(let r=0;r<n.length;r+=2)if(n[r]===e)return n[r+1];return null}function kc(t,e,n,r){return-1===n?function(t,e){return 11&t.type?fu(t,e):4&t.type?$u(t,e):null}(e,t):-2===n?function(t,e,n){return n===gu?fu(e,t):n===Wu?$u(e,t):n===tc?oc(e,t):void 0}(t,e,r):Xe(t,t[1],n,e)}function Nc(t,e,n,r){const i=e[19].queries[r];if(null===i.matches){const r=t.data,o=n.matches,s=[];for(let t=0;t<o.length;t+=2){const i=o[t];s.push(i<0?null:kc(e,r[i],o[t+1],n.metadata.read))}i.matches=s}return i.matches}function Pc(t,e,n,r){const i=t.queries.getByIndex(n),o=i.matches;if(null!==o){const s=Nc(t,e,i,n);for(let t=0;t<o.length;t+=2){const n=o[t];if(n>0)r.push(s[t/2]);else{const i=o[t+1],s=e[-n];for(let t=ht;t<s.length;t++){const e=s[t];e[17]===e[3]&&Pc(e[1],e,i,r)}if(null!==s[9]){const t=s[9];for(let e=0;e<t.length;e++){const n=t[e];Pc(n[1],n,i,r)}}}}}return r}function Rc(t){const e=zt(),n=Gt(),r=ue();ce(r+1);const i=Uc(n,r);if(t.dirty&&Lt(e)===(2==(2&i.metadata.flags))){if(null===i.matches)t.reset([]);else{const o=i.crossesNgTemplate?Pc(n,e,r,[]):Nc(n,e,i,r);t.reset(o,yu),t.notifyOnChanges()}return!0}return!1}function Dc(t,e,n){const r=Gt();r.firstCreatePass&&(Vc(r,new Ic(t,e,n),-1),2==(2&e)&&(r.staticViewQueries=!0)),Fc(r,zt(),e)}function Mc(t,e,n,r){const i=Gt();if(i.firstCreatePass){const o=Wt();Vc(i,new Ic(e,n,r),o.index),function(t,e){const n=t.contentQueries||(t.contentQueries=[]);e!==(n.length?n[n.length-1]:-1)&&n.push(t.queries.length-1,e)}(i,t),2==(2&n)&&(i.staticContentQueries=!0)}Fc(i,zt(),n)}function Lc(){return t=zt(),e=ue(),t[19].queries[e].queryList;var t,e}function Fc(t,e,n){const r=new Ec(4==(4&n));Ki(t,e,r,r.destroy),null===e[19]&&(e[19]=new Tc),e[19].queries.push(new Sc(r))}function Vc(t,e,n){null===t.queries&&(t.queries=new xc),t.queries.track(new Ac(e,n))}function Uc(t,e){return t.queries.getByIndex(e)}function qc(t,e){return $u(t,e)}function Bc(t=j.Default){const e=Bu(!0);if(null!=e||t&j.Optional)return e;b("ChangeDetectorRef")}const Hc=new un("Application Initializer");let zc=(()=>{class t{constructor(t){this.appInits=t,this.resolve=du,this.reject=du,this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}runInitializers(){if(this.initialized)return;const t=[],e=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let n=0;n<this.appInits.length;n++){const e=this.appInits[n]();gs(e)&&t.push(e)}Promise.all(t).then(()=>{e()}).catch(t=>{this.reject(t)}),0===t.length&&e(),this.initialized=!0}}return t.\u0275fac=function(e){return new(e||t)(Tn(Hc,8))},t.\u0275prov=w({token:t,factory:t.\u0275fac}),t})();const Gc=new un("AppId"),Qc={provide:Gc,useFactory:function(){return`${Wc()}${Wc()}${Wc()}`},deps:[]};function Wc(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Kc=new un("Platform Initializer"),Yc=new un("Platform ID"),$c=new un("appBootstrapListener");let Jc=(()=>{class t{log(t){console.log(t)}warn(t){console.warn(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=w({token:t,factory:t.\u0275fac}),t})();const Xc=new un("LocaleId"),Zc=new un("DefaultCurrencyCode");class tl{constructor(t,e){this.ngModuleFactory=t,this.componentFactories=e}}const el=function(t){return new pc(t)},nl=el,rl=function(t){return Promise.resolve(el(t))},il=function(t){const e=el(t),n=Ar(ct(t).declarations).reduce((t,e)=>{const n=ut(e);return n&&t.push(new lc(n)),t},[]);return new tl(e,n)},ol=il,sl=function(t){return Promise.resolve(il(t))};let al=(()=>{class t{constructor(){this.compileModuleSync=nl,this.compileModuleAsync=rl,this.compileModuleAndAllComponentsSync=ol,this.compileModuleAndAllComponentsAsync=sl}clearCache(){}clearCacheFor(t){}getModuleId(t){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=w({token:t,factory:t.\u0275fac}),t})();const ul=(()=>Promise.resolve(0))();function cl(t){"undefined"==typeof Zone?ul.then(()=>{t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}class ll{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:e=!1,shouldCoalesceRunChangeDetection:n=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Cc(!1),this.onMicrotaskEmpty=new Cc(!1),this.onStable=new Cc(!1),this.onError=new Cc(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!n&&e,r.shouldCoalesceRunChangeDetection=n,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=function(){let t=q.requestAnimationFrame,e=q.cancelAnimationFrame;if("undefined"!=typeof Zone&&t&&e){const n=t[Zone.__symbol__("OriginalDelegate")];n&&(t=n);const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function(t){const e=()=>{!function(t){-1===t.lastRequestAnimationFrameId&&(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(q,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,fl(t),dl(t)},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),fl(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,o,s,a)=>{try{return pl(t),n.invokeTask(i,o,s,a)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===o.type||t.shouldCoalesceRunChangeDetection)&&e(),gl(t)}},onInvoke:(n,r,i,o,s,a,u)=>{try{return pl(t),n.invoke(i,o,s,a,u)}finally{t.shouldCoalesceRunChangeDetection&&e(),gl(t)}},onHasTask:(e,n,r,i)=>{e.hasTask(r,i),n===r&&("microTask"==i.change?(t._hasPendingMicrotasks=i.microTask,fl(t),dl(t)):"macroTask"==i.change&&(t.hasPendingMacrotasks=i.macroTask))},onHandleError:(e,n,r,i)=>(e.handleError(r,i),t.runOutsideAngular(()=>t.onError.emit(i)),!1)})}(r)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!ll.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(ll.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(t,e,n){return this._inner.run(t,e,n)}runTask(t,e,n,r){const i=this._inner,o=i.scheduleEventTask("NgZoneEvent: "+r,t,hl,du,du);try{return i.runTask(o,e,n)}finally{i.cancelTask(o)}}runGuarded(t,e,n){return this._inner.runGuarded(t,e,n)}runOutsideAngular(t){return this._outer.run(t)}}const hl={};function dl(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function fl(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function pl(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function gl(t){t._nesting--,dl(t)}class yl{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Cc,this.onMicrotaskEmpty=new Cc,this.onStable=new Cc,this.onError=new Cc}run(t,e,n){return t.apply(e,n)}runGuarded(t,e,n){return t.apply(e,n)}runOutsideAngular(t){return t()}runTask(t,e,n,r){return t.apply(e,n)}}let ml=(()=>{class t{constructor(t){this._ngZone=t,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{ll.assertNotInAngularZone(),cl(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())cl(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(e=>!e.updateCb||!e.updateCb(t)||(clearTimeout(e.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,e,n){let r=-1;e&&e>0&&(r=setTimeout(()=>{this._callbacks=this._callbacks.filter(t=>t.timeoutId!==r),t(this._didWork,this.getPendingTasks())},e)),this._callbacks.push({doneCb:t,timeoutId:r,updateCb:n})}whenStable(t,e,n){if(n&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/dist/task-tracking.js" loaded?');this.addCallback(t,e,n),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(t,e,n){return[]}}return t.\u0275fac=function(e){return new(e||t)(Tn(ll))},t.\u0275prov=w({token:t,factory:t.\u0275fac}),t})(),vl=(()=>{class t{constructor(){this._applications=new Map,Cl.addToWindow(this)}registerApplication(t,e){this._applications.set(t,e)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,e=!0){return Cl.findTestabilityInTree(this,t,e)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=w({token:t,factory:t.\u0275fac}),t})();class bl{addToWindow(t){}findTestabilityInTree(t,e,n){return null}}function _l(t){Cl=t}let wl,Cl=new bl,Ol=!0,El=!1;function Sl(){return El=!0,Ol}function Tl(){if(El)throw new Error("Cannot enable prod mode after platform setup.");Ol=!1}const Il=new un("AllowMultipleToken");class xl{constructor(t,e){this.name=t,this.token=e}}function Al(t,e,n=[]){const r=`Platform: ${e}`,i=new un(r);return(e=[])=>{let o=jl();if(!o||o.injector.get(Il,!1))if(t)t(n.concat(e).concat({provide:i,useValue:!0}));else{const t=n.concat(e).concat({provide:i,useValue:!0},{provide:Io,useValue:"platform"});!function(t){if(wl&&!wl.destroyed&&!wl.injector.get(Il,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");wl=t.get(kl);const e=t.get(Kc,null);e&&e.forEach(t=>t())}(qo.create({providers:t,name:r}))}return function(t){const e=jl();if(!e)throw new Error("No platform exists!");if(!e.injector.get(t,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return e}(i)}}function jl(){return wl&&!wl.destroyed?wl:null}let kl=(()=>{class t{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,e){const n=function(t,e){let n;return n="noop"===t?new yl:("zone.js"===t?void 0:t)||new ll({enableLongStackTrace:Sl(),shouldCoalesceEventChangeDetection:!!(null==e?void 0:e.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==e?void 0:e.ngZoneRunCoalescing)}),n}(e?e.ngZone:void 0,{ngZoneEventCoalescing:e&&e.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:e&&e.ngZoneRunCoalescing||!1}),r=[{provide:ll,useValue:n}];return n.run(()=>{const e=qo.create({providers:r,parent:this.injector,name:t.moduleType.name}),i=t.create(e),o=i.injector.get(Er,null);if(!o)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return n.runOutsideAngular(()=>{const t=n.onError.subscribe({next:t=>{o.handleError(t)}});i.onDestroy(()=>{Rl(this._modules,i),t.unsubscribe()})}),function(t,e,n){try{const r=n();return gs(r)?r.catch(n=>{throw e.runOutsideAngular(()=>t.handleError(n)),n}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}(o,n,()=>{const t=i.injector.get(zc);return t.runInitializers(),t.donePromise.then(()=>(pa(i.injector.get(Xc,ca)||ca),this._moduleDoBootstrap(i),i))})})}bootstrapModule(t,e=[]){const n=Nl({},e);return function(t,e,n){const r=new pc(n);return Promise.resolve(r)}(0,0,t).then(t=>this.bootstrapModuleFactory(t,n))}_moduleDoBootstrap(t){const e=t.injector.get(Pl);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(t=>e.bootstrap(t));else{if(!t.instance.ngDoBootstrap)throw new Error(`The module ${l(t.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);t.instance.ngDoBootstrap(e)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(t=>t.destroy()),this._destroyListeners.forEach(t=>t()),this._destroyed=!0}get destroyed(){return this._destroyed}}return t.\u0275fac=function(e){return new(e||t)(Tn(qo))},t.\u0275prov=w({token:t,factory:t.\u0275fac}),t})();function Nl(t,e){return Array.isArray(e)?e.reduce(Nl,t):Object.assign(Object.assign({},t),e)}let Pl=(()=>{class t{constructor(t,e,n,r,i){this._zone=t,this._injector=e,this._exceptionHandler=n,this._componentFactoryResolver=r,this._initStatus=i,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const u=new o.a(t=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{t.next(this._stable),t.complete()})}),c=new o.a(t=>{let e;this._zone.runOutsideAngular(()=>{e=this._zone.onStable.subscribe(()=>{ll.assertNotInAngularZone(),cl(()=>{this._stable||this._zone.hasPendingMacrotasks||this._zone.hasPendingMicrotasks||(this._stable=!0,t.next(!0))})})});const n=this._zone.onUnstable.subscribe(()=>{ll.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{t.next(!1)}))});return()=>{e.unsubscribe(),n.unsubscribe()}});this.isStable=Object(s.a)(u,c.pipe(Object(a.a)()))}bootstrap(t,e){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let n;n=t instanceof cu?t:this._componentFactoryResolver.resolveComponentFactory(t),this.componentTypes.push(n.componentType);const r=n.isBoundToModule?void 0:this._injector.get(Ju),i=n.create(qo.NULL,[],e||n.selector,r),o=i.location.nativeElement,s=i.injector.get(ml,null),a=s&&i.injector.get(vl);return s&&a&&a.registerApplication(o,s),i.onDestroy(()=>{this.detachView(i.hostView),Rl(this.components,i),a&&a.unregisterApplication(o)}),this._loadComponent(i),i}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(t))}finally{this._runningTick=!1}}attachView(t){const e=t;this._views.push(e),e.attachToAppRef(this)}detachView(t){const e=t;Rl(this._views,e),e.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get($c,[]).concat(this._bootstrapListeners).forEach(e=>e(t))}ngOnDestroy(){this._views.slice().forEach(t=>t.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return t.\u0275fac=function(e){return new(e||t)(Tn(ll),Tn(qo),Tn(Er),Tn(hu),Tn(zc))},t.\u0275prov=w({token:t,factory:t.\u0275fac}),t})();function Rl(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class Dl{}class Ml{}const Ll={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let Fl=(()=>{class t{constructor(t,e){this._compiler=t,this._config=e||Ll}load(t){return this.loadAndCompile(t)}loadAndCompile(t){let[e,r]=t.split("#");return void 0===r&&(r="default"),n("zn8P")(e).then(t=>t[r]).then(t=>Vl(t,e,r)).then(t=>this._compiler.compileModuleAsync(t))}loadFactory(t){let[e,r]=t.split("#"),i="NgFactory";return void 0===r&&(r="default",i=""),n("zn8P")(this._config.factoryPathPrefix+e+this._config.factoryPathSuffix).then(t=>t[r+i]).then(t=>Vl(t,e,r))}}return t.\u0275fac=function(e){return new(e||t)(Tn(al),Tn(Ml,8))},t.\u0275prov=w({token:t,factory:t.\u0275fac}),t})();function Vl(t,e,n){if(!t)throw new Error(`Cannot find '${n}' in '${e}'`);return t}const Ul=function(t){return null},ql=Al(null,"core",[{provide:Yc,useValue:"unknown"},{provide:kl,deps:[qo]},{provide:vl,deps:[]},{provide:Jc,deps:[]}]),Bl=[{provide:Pl,useClass:Pl,deps:[ll,qo,Er,hu,zc]},{provide:cc,deps:[ll],useFactory:function(t){let e=[];return t.onStable.subscribe(()=>{for(;e.length;)e.pop()()}),function(t){e.push(t)}}},{provide:zc,useClass:zc,deps:[[new jn,Hc]]},{provide:al,useClass:al,deps:[]},Qc,{provide:Ru,useFactory:function(){return zu},deps:[]},{provide:Mu,useFactory:function(){return Gu},deps:[]},{provide:Xc,useFactory:function(t){return pa(t=t||"undefined"!=typeof $localize&&$localize.locale||ca),t},deps:[[new An(Xc),new jn,new kn]]},{provide:Zc,useValue:"USD"}];let Hl=(()=>{class t{constructor(t){}}return t.\u0275fac=function(e){return new(e||t)(Tn(Pl))},t.\u0275mod=rt({type:t}),t.\u0275inj=C({providers:Bl}),t})()},gRHU:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("2fFW"),i=n("NJ4a");const o={closed:!0,next(t){},error(t){if(r.a.useDeprecatedSynchronousErrorHandling)throw t;Object(i.a)(t)},complete(){}}},jZKg:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("HDdC"),i=n("quSY");function o(t,e){return new r.a(n=>{const r=new i.a;let o=0;return r.add(e.schedule(function(){o!==t.length?(n.next(t[o++]),n.closed||r.add(this.schedule())):n.complete()})),r})}},kJWO:function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=(()=>"function"==typeof Symbol&&Symbol.observable||"@@observable")()},lJxs:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("7o/Q");function i(t,e){return function(n){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new o(t,e))}}class o{constructor(t,e){this.project=t,this.thisArg=e}call(t,e){return e.subscribe(new s(t,this.project,this.thisArg))}}class s extends r.a{constructor(t,e,n){super(t),this.project=e,this.count=0,this.thisArg=n||this}_next(t){let e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}},mrSG:function(t,e,n){"use strict";n.d(e,"c",function(){return i}),n.d(e,"a",function(){return o}),n.d(e,"b",function(){return s}),n.d(e,"d",function(){return a}),n.d(e,"g",function(){return u}),n.d(e,"e",function(){return c}),n.d(e,"f",function(){return l});var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var o=function(){return(o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function s(t,e,n,r){return new(n||(n=Promise))(function(i,o){function s(t){try{u(r.next(t))}catch(e){o(e)}}function a(t){try{u(r.throw(t))}catch(e){o(e)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(s,a)}u((r=r.apply(t,e||[])).next())})}function a(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}function u(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function c(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function l(t,e){for(var n=0,r=e.length,i=t.length;n<r;n++,i++)t[i]=e[n];return t}},n6bG:function(t,e,n){"use strict";function r(t){return"function"==typeof t}n.d(e,"a",function(){return r})},ngJS:function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=t=>e=>{for(let n=0,r=t.length;n<r&&!e.closed;n++)e.next(t[n]);e.complete()}},pxpQ:function(t,e,n){"use strict";n.d(e,"b",function(){return o}),n.d(e,"a",function(){return a});var r=n("7o/Q"),i=n("WMd4");function o(t,e=0){return function(n){return n.lift(new s(t,e))}}class s{constructor(t,e=0){this.scheduler=t,this.delay=e}call(t,e){return e.subscribe(new a(t,this.scheduler,this.delay))}}class a extends r.a{constructor(t,e,n=0){super(t),this.scheduler=e,this.delay=n}static dispatch(t){const{notification:e,destination:n}=t;e.observe(n),this.unsubscribe()}scheduleMessage(t){this.destination.add(this.scheduler.schedule(a.dispatch,this.delay,new u(t,this.destination)))}_next(t){this.scheduleMessage(i.a.createNext(t))}_error(t){this.scheduleMessage(i.a.createError(t)),this.unsubscribe()}_complete(){this.scheduleMessage(i.a.createComplete()),this.unsubscribe()}}class u{constructor(t,e){this.notification=t,this.destination=e}}},"q/0M":function(t,e,n){"use strict";function r(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}var i;n.d(e,"a",function(){return s}),n.d(e,"b",function(){return h}),n.d(e,"c",function(){return d}),n.d(e,"d",function(){return f});var o=[],s=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}({}),a={debug:s.DEBUG,verbose:s.VERBOSE,info:s.INFO,warn:s.WARN,error:s.ERROR,silent:s.SILENT},u=s.INFO,c=((i={})[s.DEBUG]="log",i[s.VERBOSE]="log",i[s.INFO]="info",i[s.WARN]="warn",i[s.ERROR]="error",i),l=function(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];if(!(e<t.logLevel)){var o=(new Date).toISOString(),s=c[e];if(!s)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[s].apply(console,r(["["+o+"]  "+t.name+":"],n))}},h=function(){function t(t){this.name=t,this._logLevel=u,this._logHandler=l,this._userLogHandler=null,o.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in s))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),t.prototype.setLogLevel=function(t){this._logLevel="string"==typeof t?a[t]:t},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.DEBUG],t)),this._logHandler.apply(this,r([this,s.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.VERBOSE],t)),this._logHandler.apply(this,r([this,s.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.INFO],t)),this._logHandler.apply(this,r([this,s.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.WARN],t)),this._logHandler.apply(this,r([this,s.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.ERROR],t)),this._logHandler.apply(this,r([this,s.ERROR],t))},t}();function d(t){o.forEach(function(e){e.setLogLevel(t)})}function f(t,e){for(var n=function(n){var r=null;e&&e.level&&(r=a[e.level]),n.userLogHandler=null===t?null:function(e,n){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];var a=i.map(function(t){if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(e){return null}}).filter(function(t){return t}).join(" ");n>=(null!=r?r:e.logLevel)&&t({level:s[n].toLowerCase(),message:a,args:i,type:e.name})}},r=0,i=o;r<i.length;r++)n(i[r])}},qOnz:function(t,e,n){"use strict";n.d(e,"a",function(){return d}),n.d(e,"b",function(){return E}),n.d(e,"c",function(){return L}),n.d(e,"d",function(){return i}),n.d(e,"e",function(){return o}),n.d(e,"f",function(){return a}),n.d(e,"g",function(){return u}),n.d(e,"h",function(){return N}),n.d(e,"i",function(){return F}),n.d(e,"j",function(){return l}),n.d(e,"k",function(){return h}),n.d(e,"l",function(){return B}),n.d(e,"m",function(){return f}),n.d(e,"n",function(){return k}),n.d(e,"o",function(){return y}),n.d(e,"p",function(){return m}),n.d(e,"q",function(){return b}),n.d(e,"r",function(){return R}),n.d(e,"s",function(){return _}),n.d(e,"t",function(){return p}),n.d(e,"u",function(){return g}),n.d(e,"v",function(){return C}),n.d(e,"w",function(){return v}),n.d(e,"x",function(){return w}),n.d(e,"y",function(){return j}),n.d(e,"z",function(){return I}),n.d(e,"A",function(){return D}),n.d(e,"B",function(){return M}),n.d(e,"C",function(){return P}),n.d(e,"D",function(){return Q}),n.d(e,"E",function(){return G}),n.d(e,"F",function(){return x}),n.d(e,"G",function(){return q}),n.d(e,"H",function(){return H}),n.d(e,"I",function(){return z});var r=n("mrSG"),i=function(t,e){if(!t)throw o(e)},o=function(t){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+t)},s=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},a={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var o=t[i],s=i+1<t.length,a=s?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,l=(15&a)<<2|c>>6,h=63&c;u||(h=64,s||(l=64)),r.push(n[o>>2],n[(3&o)<<4|a>>4],n[l],n[h])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(s(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,r=0;n<t.length;){var i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){var s=((7&i)<<18|(63&(o=t[n++]))<<12|(63&(a=t[n++]))<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(s>>10)),e[r++]=String.fromCharCode(56320+(1023&s))}else{o=t[n++];var a=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&a)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var o=n[t.charAt(i++)],s=i<t.length?n[t.charAt(i)]:0,a=++i<t.length?n[t.charAt(i)]:64,u=++i<t.length?n[t.charAt(i)]:64;if(++i,null==o||null==s||null==a||null==u)throw Error();r.push(o<<2|s>>4),64!==a&&(r.push(s<<4&240|a>>2),64!==u&&r.push(a<<6&192|u))}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},u=function(t){var e=s(t);return a.encodeByteArray(e,!0)},c=function(t){try{return a.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function l(t){return h(void 0,t)}function h(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&"__proto__"!==n&&(t[n]=h(t[n],e[n]));return t}var d=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch(function(){}),1===t.length?t(n):t(n,r))}},t}();function f(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function p(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(f())}function g(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(t){return!1}}function y(){return"object"==typeof self&&self.self===self}function m(){var t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id}function v(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function b(){return f().indexOf("Electron/")>=0}function _(){var t=f();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function w(){return f().indexOf("MSAppHost/")>=0}function C(){return!1}var O=function(t){function e(n,r,i){var o=t.call(this,r)||this;return o.code=n,o.customData=i,o.name="FirebaseError",Object.setPrototypeOf(o,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(o,E.prototype.create),o}return Object(r.c)(e,t),e}(Error),E=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=e[0]||{},i=this.service+"/"+t,o=this.errors[t],s=o?S(o,r):"Error",a=this.serviceName+": "+s+" ("+i+").",u=new O(i,a,r);return u},t}();function S(t,e){return t.replace(T,function(t,n){var r=e[n];return null!=r?String(r):"<"+n+"?>"})}var T=/\{\$([^}]+)}/g;function I(t){return JSON.parse(t)}function x(t){return JSON.stringify(t)}var A=function(t){var e={},n={},r={},i="";try{var o=t.split(".");e=I(c(o[0])||""),n=I(c(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch(s){}return{header:e,claims:n,data:r,signature:i}},j=function(t){var e=A(t).claims;return!!e&&"object"==typeof e&&e.hasOwnProperty("iat")},k=function(t){var e=A(t).claims;return"object"==typeof e&&!0===e.admin};function N(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function P(t,e){return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0}function R(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function D(t,e,n){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}function M(t){for(var e=[],n=function(t,n){Array.isArray(n)?n.forEach(function(n){e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))},r=0,i=Object.entries(t);r<i.length;r++){var o=i[r];n(o[0],o[1])}return e.length?"&"+e.join("&"):""}var L=function(){function t(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}return t.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},t.prototype.compress_=function(t,e){e||(e=0);var n=this.W_;if("string"==typeof t)for(var r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(r=16;r<80;r++)n[r]=4294967295&((h=n[r-3]^n[r-8]^n[r-14]^n[r-16])<<1|h>>>31);var i,o,s=this.chain_[0],a=this.chain_[1],u=this.chain_[2],c=this.chain_[3],l=this.chain_[4];for(r=0;r<80;r++){r<40?r<20?(i=c^a&(u^c),o=1518500249):(i=a^u^c,o=1859775393):r<60?(i=a&u|c&(a|u),o=2400959708):(i=a^u^c,o=3395469782);var h=(s<<5|s>>>27)+i+l+o+n[r]&4294967295;l=c,c=u,u=4294967295&(a<<30|a>>>2),a=s,s=h}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+a&4294967295,this.chain_[2]=this.chain_[2]+u&4294967295,this.chain_[3]=this.chain_[3]+c&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295},t.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<e;){if(0===o)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if("string"==typeof t){for(;r<e;)if(i[o]=t.charCodeAt(r),++r,++o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<e;)if(i[o]=t[r],++r,++o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=e}},t.prototype.digest=function(){var t=[],e=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;i>=0;i-=8)t[r]=this.chain_[n]>>i&255,++r;return t},t}();function F(t,e){var n=new V(t,e);return n.subscribe.bind(n)}var V=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(function(){t(n)}).catch(function(t){n.error(t)})}return t.prototype.next=function(t){this.forEachObserver(function(e){e.next(t)})},t.prototype.error=function(t){this.forEachObserver(function(e){e.error(t)}),this.close(t)},t.prototype.complete=function(){this.forEachObserver(function(t){t.complete()}),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=["next","error","complete"];n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}(t)?t:{next:t,error:e,complete:n}).next&&(r.next=U),void 0===r.error&&(r.error=U),void 0===r.complete&&(r.complete=U);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}}),this.observers.push(r),o},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then(function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(r){"undefined"!=typeof console&&console.error&&console.error(r)}})},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then(function(){e.observers=void 0,e.onNoObservers=void 0}))},t}();function U(){}var q=function(t,e,n,r){var i;if(r<e?i="at least "+e:r>n&&(i=0===n?"none":"no more than "+n),i)throw new Error(t+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")};function B(t,e,n){var r="";switch(e){case 1:r=n?"first":"First";break;case 2:r=n?"second":"Second";break;case 3:r=n?"third":"Third";break;case 4:r=n?"fourth":"Fourth";break;default:throw new Error("errorPrefix called with argumentNumber > 4.  Need to update it?")}return t+" failed: "+r+" argument "}function H(t,e,n,r){if((!r||n)&&"function"!=typeof n)throw new Error(B(t,e,r)+"must be a valid function.")}function z(t,e,n,r){if((!r||n)&&("object"!=typeof n||null===n))throw new Error(B(t,e,r)+"must be a valid context object.")}var G=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var o=t.charCodeAt(r);if(o>=55296&&o<=56319){var s=o-55296;r++,i(r<t.length,"Surrogate pair missing trail surrogate."),o=65536+(s<<10)+(t.charCodeAt(r)-56320)}o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=63&o|128):o<65536?(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=63&o|128):(e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=63&o|128)}return e},Q=function(t){for(var e=0,n=0;n<t.length;n++){var r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e}},qgXg:function(t,e,n){"use strict";n.d(e,"b",function(){return a}),n.d(e,"a",function(){return u});var r=n("3N8a");class i extends r.a{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}schedule(t,e=0){return e>0?super.schedule(t,e):(this.delay=e,this.state=t,this.scheduler.flush(this),this)}execute(t,e){return e>0||this.closed?super.execute(t,e):this._execute(t,e)}requestAsyncId(t,e,n=0){return null!==n&&n>0||null===n&&this.delay>0?super.requestAsyncId(t,e,n):t.flush(this)}}var o=n("IjjT");class s extends o.a{}const a=new s(i),u=a},quSY:function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n("DH7j"),i=n("XoHu"),o=n("n6bG");const s=(()=>{function t(t){return Error.call(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((t,e)=>`${e+1}) ${t.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t,this}return t.prototype=Object.create(Error.prototype),t})();let a=(()=>{class t{constructor(t){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._ctorUnsubscribe=!0,this._unsubscribe=t)}unsubscribe(){let e;if(this.closed)return;let{_parentOrParents:n,_ctorUnsubscribe:a,_unsubscribe:c,_subscriptions:l}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof t)n.remove(this);else if(null!==n)for(let t=0;t<n.length;++t)n[t].remove(this);if(Object(o.a)(c)){a&&(this._unsubscribe=void 0);try{c.call(this)}catch(h){e=h instanceof s?u(h.errors):[h]}}if(Object(r.a)(l)){let t=-1,n=l.length;for(;++t<n;){const n=l[t];if(Object(i.a)(n))try{n.unsubscribe()}catch(h){e=e||[],h instanceof s?e=e.concat(u(h.errors)):e.push(h)}}}if(e)throw new s(e)}add(e){let n=e;if(!e)return t.EMPTY;switch(typeof e){case"function":n=new t(e);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof t)){const e=n;n=new t,n._subscriptions=[e]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}let{_parentOrParents:r}=n;if(null===r)n._parentOrParents=this;else if(r instanceof t){if(r===this)return n;n._parentOrParents=[r,this]}else{if(-1!==r.indexOf(this))return n;r.push(this)}const i=this._subscriptions;return null===i?this._subscriptions=[n]:i.push(n),n}remove(t){const e=this._subscriptions;if(e){const n=e.indexOf(t);-1!==n&&e.splice(n,1)}}}var e;return t.EMPTY=((e=new t).closed=!0,e),t})();function u(t){return t.reduce((t,e)=>t.concat(e instanceof s?e.errors:e),[])}},spgP:function(t,e,n){"use strict";(function(t){n.d(e,"a",function(){return T}),n.d(e,"b",function(){return b}),n.d(e,"c",function(){return v}),n.d(e,"d",function(){return f}),n.d(e,"e",function(){return m}),n.d(e,"f",function(){return E}),n.d(e,"g",function(){return w}),n.d(e,"h",function(){return p}),n.d(e,"i",function(){return y}),n.d(e,"j",function(){return C});var r=n("qgXg"),i=n("D0XW"),o=n("vkgz"),s=n("tf+s"),a=n("pxpQ"),u=n("fXoL"),c=n("Jgta");function l(){}class h{constructor(t,e=r.b){this.zone=t,this.delegate=e}now(){return this.delegate.now()}schedule(t,e,n){const r=this.zone;return this.delegate.schedule(function(e){r.runGuarded(()=>{t.apply(this,[e])})},e,n)}}class d{constructor(t){this.zone=t,this.task=null}call(t,e){const n=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",l,{},l,l)),e.pipe(Object(o.a)({next:n,complete:n,error:n})).subscribe(t).add(n)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}class f{constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new h(Zone.current)),this.insideAngular=t.run(()=>new h(Zone.current,i.b))}}function p(t){return function(e){return(e=e.lift(new d(t.ngZone))).pipe(Object(s.a)(t.outsideAngular),Object(a.b)(t.insideAngular))}}const g=["ngOnDestroy"],y=(t,e,n,r={})=>new Proxy(t,{get:(i,o)=>n.runOutsideAngular(()=>{var i;if(t[o])return(null===(i=null==r?void 0:r.spy)||void 0===i?void 0:i.get)&&r.spy.get(o,t[o]),t[o];if(g.indexOf(o)>-1)return()=>{};const s=e.toPromise().then(t=>{const e=t&&t[o];return"function"==typeof e?e.bind(t):e&&e.then?e.then(t=>n.run(()=>t)):n.run(()=>e)});return new Proxy(()=>{},{get:(t,e)=>s[e],apply:(t,e,n)=>s.then(t=>{var e;const i=t&&t(...n);return(null===(e=null==r?void 0:r.spy)||void 0===e?void 0:e.apply)&&r.spy.apply(o,n,i),i})})})}),m=(t,e)=>{e.forEach(e=>{Object.getOwnPropertyNames(e.prototype||e).forEach(n=>{Object.defineProperty(t.prototype,n,Object.getOwnPropertyDescriptor(e.prototype||e,n))})})},v=new u.r("angularfire2.app.options"),b=new u.r("angularfire2.app.nameOrConfig"),_=new u.P("6.1.4");function w(e,n,r){const i="object"==typeof r&&r||{};i.name=i.name||"string"==typeof r&&r||"[DEFAULT]";const o=c.a.apps.filter(t=>t&&t.name===i.name)[0]||n.runOutsideAngular(()=>c.a.initializeApp(e,i));try{JSON.stringify(e)!==JSON.stringify(o.options)&&O("error",`${o.name} Firebase App already initialized with different options${t.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(s){}return o}const C=()=>{O("warn","You may need to import 'firebase/auth' manually in your component rather than rely on AngularFireAuth's dynamic import, when using the emulator suite https://github.com/angular/angularfire/issues/2656")},O=(t,...e)=>{Object(u.V)()&&"undefined"!=typeof console&&console[t](...e)};function E(e,n,r,i,o){const[s,...a]=globalThis.\u0275AngularfireInstanceCache.get(e)||[];if(s){try{o.some((t,e)=>{const n=a[e];return t&&"object"==typeof t?JSON.stringify(t)!==JSON.stringify(n):t!==n})&&O("error",`${n} was already initialized on the ${r.name} Firebase App instance with different settings.${t.hot?" You may need to reload as Firebase is not HMR aware.":""}`)}catch(u){}return s}{const t=i();return globalThis.\u0275AngularfireInstanceCache.set(e,[t,...o]),t}}globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=new Map);const S={provide:class{},useFactory:w,deps:[v,u.A,[new u.B,b]]};let T=(()=>{class t{constructor(t){c.a.registerVersion("angularfire",_.full,t.toString()),c.a.registerVersion("angular",u.O.full)}static initializeApp(e,n){return{ngModule:t,providers:[{provide:v,useValue:e},{provide:b,useValue:n}]}}}return t.\u0275fac=function(e){return new(e||t)(u.Yb(u.C))},t.\u0275mod=u.Kb({type:t}),t.\u0275inj=u.Jb({providers:[S]}),t})()}).call(this,n("3UD+")(t))},"tf+s":function(t,e,n){"use strict";n.d(e,"a",function(){return y});var r=n("HDdC");let i=1;const o=(()=>Promise.resolve())(),s={};function a(t){return t in s&&(delete s[t],!0)}const u={setImmediate(t){const e=i++;return s[e]=!0,o.then(()=>a(e)&&t()),e},clearImmediate(t){a(t)}};var c=n("3N8a");class l extends c.a{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,n=0){return null!==n&&n>0?super.requestAsyncId(t,e,n):(t.actions.push(this),t.scheduled||(t.scheduled=u.setImmediate(t.flush.bind(t,null))))}recycleAsyncId(t,e,n=0){if(null!==n&&n>0||null===n&&this.delay>0)return super.recycleAsyncId(t,e,n);0===t.actions.length&&(u.clearImmediate(e),t.scheduled=void 0)}}var h=n("IjjT");class d extends h.a{flush(t){this.active=!0,this.scheduled=void 0;const{actions:e}=this;let n,r=-1,i=e.length;t=t||e.shift();do{if(n=t.execute(t.state,t.delay))break}while(++r<i&&(t=e.shift()));if(this.active=!1,n){for(;++r<i&&(t=e.shift());)t.unsubscribe();throw n}}}const f=new d(l);var p=n("Y7HM");class g extends r.a{constructor(t,e=0,n=f){super(),this.source=t,this.delayTime=e,this.scheduler=n,(!Object(p.a)(e)||e<0)&&(this.delayTime=0),n&&"function"==typeof n.schedule||(this.scheduler=f)}static create(t,e=0,n=f){return new g(t,e,n)}static dispatch(t){const{source:e,subscriber:n}=t;return this.add(e.subscribe(n))}_subscribe(t){return this.scheduler.schedule(g.dispatch,this.delayTime,{source:this.source,subscriber:t})}}function y(t,e=0){return function(n){return n.lift(new m(t,e))}}class m{constructor(t,e){this.scheduler=t,this.delay=e}call(t,e){return new g(e,this.delay,this.scheduler).subscribe(t)}}},vkgz:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("7o/Q"),i=n("KqfI"),o=n("n6bG");function s(t,e,n){return function(r){return r.lift(new a(t,e,n))}}class a{constructor(t,e,n){this.nextOrObserver=t,this.error=e,this.complete=n}call(t,e){return e.subscribe(new u(t,this.nextOrObserver,this.error,this.complete))}}class u extends r.a{constructor(t,e,n,r){super(t),this._tapNext=i.a,this._tapError=i.a,this._tapComplete=i.a,this._tapError=n||i.a,this._tapComplete=r||i.a,Object(o.a)(e)?(this._context=this,this._tapNext=e):e&&(this._context=e,this._tapNext=e.next||i.a,this._tapError=e.error||i.a,this._tapComplete=e.complete||i.a)}_next(t){try{this._tapNext.call(this._context,t)}catch(e){return void this.destination.error(e)}this.destination.next(t)}_error(t){try{this._tapError.call(this._context,t)}catch(t){return void this.destination.error(t)}this.destination.error(t)}_complete(){try{this._tapComplete.call(this._context)}catch(t){return void this.destination.error(t)}return this.destination.complete()}}},w1tV:function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n("EQ5u"),i=n("x+ZX"),o=n("XNiG");function s(){return new o.a}function a(){return t=>{return Object(i.a)()((e=s,function(t){let n;n="function"==typeof e?e:function(){return e};const i=Object.create(t,r.b);return i.source=t,i.subjectFactory=n,i})(t));var e}}},"x+ZX":function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("7o/Q");function i(){return function(t){return t.lift(new o(t))}}class o{constructor(t){this.connectable=t}call(t,e){const{connectable:n}=this;n._refCount++;const r=new s(t,n),i=e.subscribe(r);return r.closed||(r.connection=n.connect()),i}}class s extends r.a{constructor(t,e){super(t),this.connectable=e}_unsubscribe(){const{connectable:t}=this;if(!t)return void(this.connection=null);this.connectable=null;const e=t._refCount;if(e<=0)return void(this.connection=null);if(t._refCount=e-1,e>1)return void(this.connection=null);const{connection:n}=this,r=t._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}},yCtX:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("HDdC"),i=n("ngJS"),o=n("jZKg");function s(t,e){return e?Object(o.a)(t,e):new r.a(Object(i.a)(t))}},"z+Ro":function(t,e,n){"use strict";function r(t){return t&&"function"==typeof t.schedule}n.d(e,"a",function(){return r})},zIRd:function(t,e,n){"use strict";var r,i,o=n("mrSG"),s=n("qOnz"),a=n("/6Yf"),u=n("q/0M"),c=((r={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",r["bad-app-name"]="Illegal App name: '{$appName}",r["duplicate-app"]="Firebase App named '{$appName}' already exists",r["app-deleted"]="Firebase App named '{$appName}' already deleted",r["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",r["invalid-log-argument"]="First argument to `onLog` must be null or a function.",r),l=new s.b("app","Firebase",c),h="@firebase/app",d="[DEFAULT]",f=((i={})[h]="fire-core",i["@firebase/analytics"]="fire-analytics",i["@firebase/auth"]="fire-auth",i["@firebase/database"]="fire-rtdb",i["@firebase/functions"]="fire-fn",i["@firebase/installations"]="fire-iid",i["@firebase/messaging"]="fire-fcm",i["@firebase/performance"]="fire-perf",i["@firebase/remote-config"]="fire-rc",i["@firebase/storage"]="fire-gcs",i["@firebase/firestore"]="fire-fst",i["fire-js"]="fire-js",i["firebase-wrapper"]="fire-js-all",i),p=new u.b("@firebase/app"),g=function(){function t(t,e,n){var r=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=Object(s.j)(t),this.container=new a.b(e.name),this._addComponent(new a.a("app",function(){return r},"PUBLIC")),this.firebase_.INTERNAL.components.forEach(function(t){return r._addComponent(t)})}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise(function(e){t.checkDestroyed_(),e()}).then(function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map(function(t){return t.delete()}))}).then(function(){t.isDeleted_=!0})},t.prototype._getService=function(t,e){return void 0===e&&(e=d),this.checkDestroyed_(),this.container.getProvider(t).getImmediate({identifier:e})},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e=d),this.container.getProvider(t).clearInstance(e)},t.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(e){p.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,e)}},t.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},t.prototype.toJSON=function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw l.create("app-deleted",{appName:this.name_})},t}();g.prototype.name&&g.prototype.options||g.prototype.delete||console.log("dc");var y=function t(){var e=function(t){var e={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={}),"object"==typeof i&&null!==i||(i={name:i});var o=i;void 0===o.name&&(o.name=d);var a=o.name;if("string"!=typeof a||!a)throw l.create("bad-app-name",{appName:String(a)});if(Object(s.h)(e,a))throw l.create("duplicate-app",{appName:a});var u=new t(n,o,r);return e[a]=u,u},app:i,registerVersion:function(t,e,n){var r,i=null!==(r=f[t])&&void 0!==r?r:t;n&&(i+="-"+n);var s=i.match(/\s|\//),u=e.match(/\s|\//);if(s||u){var c=['Unable to register library "'+i+'" with version "'+e+'":'];return s&&c.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),s&&u&&c.push("and"),u&&c.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void p.warn(c.join(" "))}o(new a.a(i+"-version",function(){return{library:i,version:e}},"VERSION"))},setLogLevel:u.c,onLog:function(t,e){if(null!==t&&"function"!=typeof t)throw l.create("invalid-log-argument");Object(u.d)(t,e)},apps:null,SDK_VERSION:"8.3.1",INTERNAL:{registerComponent:o,removeApp:function(t){delete e[t]},components:n,useAsService:function(t,e){return"serverAuth"===e?null:e}}};function i(t){if(t=t||d,!Object(s.h)(e,t))throw l.create("no-app",{appName:t});return e[t]}function o(o){var a=o.name;if(n.has(a))return p.debug("There were multiple attempts to register component "+a+"."),"PUBLIC"===o.type?r[a]:null;if(n.set(a,o),"PUBLIC"===o.type){var u=function(t){if(void 0===t&&(t=i()),"function"!=typeof t[a])throw l.create("invalid-app-argument",{appName:a});return t[a]()};void 0!==o.serviceProps&&Object(s.k)(u,o.serviceProps),r[a]=u,t.prototype[a]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this._getService.bind(this,a).apply(this,o.multipleInstances?t:[])}}for(var c=0,h=Object.keys(e);c<h.length;c++)e[h[c]]._addComponent(o);return"PUBLIC"===o.type?r[a]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(e).map(function(t){return e[t]})}}),i.App=t,r}(g);return e.INTERNAL=Object(o.a)(Object(o.a)({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){Object(s.k)(e,t)},createSubscribe:s.i,ErrorFactory:s.b,deepExtend:s.k}),e}(),m=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){return this.container.getProviders().map(function(t){if(function(t){var e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null}).filter(function(t){return t}).join(" ")},t}();if(Object(s.o)()&&void 0!==self.firebase){p.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var v=self.firebase.SDK_VERSION;v&&v.indexOf("LITE")>=0&&p.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var b=y.initializeApp;y.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Object(s.u)()&&p.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),b.apply(void 0,t)};var _=y;!function(t,e){t.INTERNAL.registerComponent(new a.a("platform-logger",function(t){return new m(t)},"PRIVATE")),t.registerVersion(h,"0.6.17",void 0),t.registerVersion("fire-js","")}(_),e.a=_},zUnb:function(t,e,n){"use strict";n.r(e);var r=n("fXoL");let i=null;function o(){return i}const s=new r.r("DocumentToken");let a=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Object(r.Ib)({factory:u,token:t,providedIn:"platform"}),t})();function u(){return Object(r.Yb)(l)}const c=new r.r("Location Initialized");let l=(()=>{class t extends a{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=o().getLocation(),this._history=o().getHistory()}getBaseHrefFromDOM(){return o().getBaseHref(this._doc)}onPopState(t){o().getGlobalEventTarget(this._doc,"window").addEventListener("popstate",t,!1)}onHashChange(t){o().getGlobalEventTarget(this._doc,"window").addEventListener("hashchange",t,!1)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,e,n){h()?this._history.pushState(t,e,n):this.location.hash=n}replaceState(t,e,n){h()?this._history.replaceState(t,e,n):this.location.hash=n}forward(){this._history.forward()}back(){this._history.back()}getState(){return this._history.state}}return t.\u0275fac=function(e){return new(e||t)(r.Yb(s))},t.\u0275prov=Object(r.Ib)({factory:d,token:t,providedIn:"platform"}),t})();function h(){return!!window.history.pushState}function d(){return new l(Object(r.Yb)(s))}function f(t,e){if(0==t.length)return e;if(0==e.length)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,2==n?t+e.substring(1):1==n?t+e:t+"/"+e}function p(t){const e=t.match(/#|\?|$/),n=e&&e.index||t.length;return t.slice(0,n-("/"===t[n-1]?1:0))+t.slice(n)}function g(t){return t&&"?"!==t[0]?"?"+t:t}let y=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Object(r.Ib)({factory:m,token:t,providedIn:"root"}),t})();function m(t){const e=Object(r.Yb)(s).location;return new b(Object(r.Yb)(a),e&&e.origin||"")}const v=new r.r("appBaseHref");let b=(()=>{class t extends y{constructor(t,e){if(super(),this._platformLocation=t,null==e&&(e=this._platformLocation.getBaseHrefFromDOM()),null==e)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=e}onPopState(t){this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t)}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return f(this._baseHref,t)}path(t=!1){const e=this._platformLocation.pathname+g(this._platformLocation.search),n=this._platformLocation.hash;return n&&t?`${e}${n}`:e}pushState(t,e,n,r){const i=this.prepareExternalUrl(n+g(r));this._platformLocation.pushState(t,e,i)}replaceState(t,e,n,r){const i=this.prepareExternalUrl(n+g(r));this._platformLocation.replaceState(t,e,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}}return t.\u0275fac=function(e){return new(e||t)(r.Yb(a),r.Yb(v,8))},t.\u0275prov=r.Ib({token:t,factory:t.\u0275fac}),t})(),_=(()=>{class t extends y{constructor(t,e){super(),this._platformLocation=t,this._baseHref="",null!=e&&(this._baseHref=e)}onPopState(t){this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t)}getBaseHref(){return this._baseHref}path(t=!1){let e=this._platformLocation.hash;return null==e&&(e="#"),e.length>0?e.substring(1):e}prepareExternalUrl(t){const e=f(this._baseHref,t);return e.length>0?"#"+e:e}pushState(t,e,n,r){let i=this.prepareExternalUrl(n+g(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.pushState(t,e,i)}replaceState(t,e,n,r){let i=this.prepareExternalUrl(n+g(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.replaceState(t,e,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}}return t.\u0275fac=function(e){return new(e||t)(r.Yb(a),r.Yb(v,8))},t.\u0275prov=r.Ib({token:t,factory:t.\u0275fac}),t})(),w=(()=>{class t{constructor(t,e){this._subject=new r.n,this._urlChangeListeners=[],this._platformStrategy=t;const n=this._platformStrategy.getBaseHref();this._platformLocation=e,this._baseHref=p(O(n)),this._platformStrategy.onPopState(t=>{this._subject.emit({url:this.path(!0),pop:!0,state:t.state,type:t.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,e=""){return this.path()==this.normalize(t+g(e))}normalize(e){return t.stripTrailingSlash(function(t,e){return t&&e.startsWith(t)?e.substring(t.length):e}(this._baseHref,O(e)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,e="",n=null){this._platformStrategy.pushState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+g(e)),n)}replaceState(t,e="",n=null){this._platformStrategy.replaceState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+g(e)),n)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(t=>{this._notifyUrlChangeListeners(t.url,t.state)}))}_notifyUrlChangeListeners(t="",e){this._urlChangeListeners.forEach(n=>n(t,e))}subscribe(t,e,n){return this._subject.subscribe({next:t,error:e,complete:n})}}return t.\u0275fac=function(e){return new(e||t)(r.Yb(y),r.Yb(a))},t.normalizeQueryParams=g,t.joinWithSlash=f,t.stripTrailingSlash=p,t.\u0275prov=Object(r.Ib)({factory:C,token:t,providedIn:"root"}),t})();function C(){return new w(Object(r.Yb)(y),Object(r.Yb)(a))}function O(t){return t.replace(/\/index.html$/,"")}var E=function(t){return t[t.Zero=0]="Zero",t[t.One=1]="One",t[t.Two=2]="Two",t[t.Few=3]="Few",t[t.Many=4]="Many",t[t.Other=5]="Other",t}({});const S=r.mb;class T{}let I=(()=>{class t extends T{constructor(t){super(),this.locale=t}getPluralCategory(t,e){switch(S(e||this.locale)(t)){case E.Zero:return"zero";case E.One:return"one";case E.Two:return"two";case E.Few:return"few";case E.Many:return"many";default:return"other"}}}return t.\u0275fac=function(e){return new(e||t)(r.Yb(r.v))},t.\u0275prov=r.Ib({token:t,factory:t.\u0275fac}),t})();function x(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const t=n.indexOf("="),[r,i]=-1==t?[n,""]:[n.slice(0,t),n.slice(t+1)];if(r.trim()===e)return decodeURIComponent(i)}return null}let A=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Kb({type:t}),t.\u0275inj=r.Jb({providers:[{provide:T,useClass:I}]}),t})();function j(t){return"server"===t}let k=(()=>{class t{}return t.\u0275prov=Object(r.Ib)({token:t,providedIn:"root",factory:()=>new N(Object(r.Yb)(s),window)}),t})();class N{constructor(t,e){this.document=t,this.window=e,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){var e;if(!this.supportsScrolling())return;const n=null!==(e=this.document.getElementById(t))&&void 0!==e?e:this.document.getElementsByName(t)[0];void 0!==n&&(this.scrollToElement(n),this.attemptFocus(n))}setHistoryScrollRestoration(t){if(this.supportScrollRestoration()){const e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=t)}}scrollToElement(t){const e=t.getBoundingClientRect(),n=e.left+this.window.pageXOffset,r=e.top+this.window.pageYOffset,i=this.offset();this.window.scrollTo(n-i[0],r-i[1])}attemptFocus(t){return t.focus(),this.document.activeElement===t}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const t=P(this.window.history)||P(Object.getPrototypeOf(this.window.history));return!(!t||!t.writable&&!t.set)}catch(t){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(t){return!1}}}function P(t){return Object.getOwnPropertyDescriptor(t,"scrollRestoration")}class R extends class extends class{}{constructor(){super()}supportsDOMEvents(){return!0}}{static makeCurrent(){var t;t=new R,i||(i=t)}getProperty(t,e){return t[e]}log(t){window.console&&window.console.log&&window.console.log(t)}logGroup(t){window.console&&window.console.group&&window.console.group(t)}logGroupEnd(){window.console&&window.console.groupEnd&&window.console.groupEnd()}onAndCancel(t,e,n){return t.addEventListener(e,n,!1),()=>{t.removeEventListener(e,n,!1)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){return t.parentNode&&t.parentNode.removeChild(t),t}getValue(t){return t.value}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getHistory(){return window.history}getLocation(){return window.location}getBaseHref(t){const e=M||(M=document.querySelector("base"),M)?M.getAttribute("href"):null;return null==e?null:(n=e,D||(D=document.createElement("a")),D.setAttribute("href",n),"/"===D.pathname.charAt(0)?D.pathname:"/"+D.pathname);var n}resetBaseElement(){M=null}getUserAgent(){return window.navigator.userAgent}performanceNow(){return window.performance&&window.performance.now?window.performance.now():(new Date).getTime()}supportsCookies(){return!0}getCookie(t){return x(document.cookie,t)}}let D,M=null;const L=new r.r("TRANSITION_ID"),F=[{provide:r.d,useFactory:function(t,e,n){return()=>{n.get(r.e).donePromise.then(()=>{const n=o();Array.prototype.slice.apply(e.querySelectorAll("style[ng-transition]")).filter(e=>e.getAttribute("ng-transition")===t).forEach(t=>n.remove(t))})}},deps:[L,s,r.s],multi:!0}];class V{static init(){Object(r.X)(new V)}addToWindow(t){r.ob.getAngularTestability=(e,n=!0)=>{const r=t.findTestabilityInTree(e,n);if(null==r)throw new Error("Could not find testability for element.");return r},r.ob.getAllAngularTestabilities=()=>t.getAllTestabilities(),r.ob.getAllAngularRootElements=()=>t.getAllRootElements(),r.ob.frameworkStabilizers||(r.ob.frameworkStabilizers=[]),r.ob.frameworkStabilizers.push(t=>{const e=r.ob.getAllAngularTestabilities();let n=e.length,i=!1;const o=function(e){i=i||e,n--,0==n&&t(i)};e.forEach(function(t){t.whenStable(o)})})}findTestabilityInTree(t,e,n){if(null==e)return null;const r=t.getTestability(e);return null!=r?r:n?o().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null}}const U=new r.r("EventManagerPlugins");let q=(()=>{class t{constructor(t,e){this._zone=e,this._eventNameToPlugin=new Map,t.forEach(t=>t.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,e,n){return this._findPluginFor(e).addEventListener(t,e,n)}addGlobalEventListener(t,e,n){return this._findPluginFor(e).addGlobalEventListener(t,e,n)}getZone(){return this._zone}_findPluginFor(t){const e=this._eventNameToPlugin.get(t);if(e)return e;const n=this._plugins;for(let r=0;r<n.length;r++){const e=n[r];if(e.supports(t))return this._eventNameToPlugin.set(t,e),e}throw new Error(`No event manager plugin found for event ${t}`)}}return t.\u0275fac=function(e){return new(e||t)(r.Yb(U),r.Yb(r.A))},t.\u0275prov=r.Ib({token:t,factory:t.\u0275fac}),t})();class B{constructor(t){this._doc=t}addGlobalEventListener(t,e,n){const r=o().getGlobalEventTarget(this._doc,t);if(!r)throw new Error(`Unsupported event target ${r} for event ${e}`);return this.addEventListener(r,e,n)}}let H=(()=>{class t{constructor(){this._stylesSet=new Set}addStyles(t){const e=new Set;t.forEach(t=>{this._stylesSet.has(t)||(this._stylesSet.add(t),e.add(t))}),this.onStylesAdded(e)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Ib({token:t,factory:t.\u0275fac}),t})(),z=(()=>{class t extends H{constructor(t){super(),this._doc=t,this._hostNodes=new Set,this._styleNodes=new Set,this._hostNodes.add(t.head)}_addStylesToHost(t,e){t.forEach(t=>{const n=this._doc.createElement("style");n.textContent=t,this._styleNodes.add(e.appendChild(n))})}addHost(t){this._addStylesToHost(this._stylesSet,t),this._hostNodes.add(t)}removeHost(t){this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach(e=>this._addStylesToHost(t,e))}ngOnDestroy(){this._styleNodes.forEach(t=>o().remove(t))}}return t.\u0275fac=function(e){return new(e||t)(r.Yb(s))},t.\u0275prov=r.Ib({token:t,factory:t.\u0275fac}),t})();const G={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},Q=/%COMP%/g;function W(t,e,n){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?W(t,i,n):(i=i.replace(Q,t),n.push(i))}return n}function K(t){return e=>{if("__ngUnwrap__"===e)return t;!1===t(e)&&(e.preventDefault(),e.returnValue=!1)}}let Y=(()=>{class t{constructor(t,e,n){this.eventManager=t,this.sharedStylesHost=e,this.appId=n,this.rendererByCompId=new Map,this.defaultRenderer=new $(t)}createRenderer(t,e){if(!t||!e)return this.defaultRenderer;switch(e.encapsulation){case r.R.Emulated:{let n=this.rendererByCompId.get(e.id);return n||(n=new J(this.eventManager,this.sharedStylesHost,e,this.appId),this.rendererByCompId.set(e.id,n)),n.applyToHost(t),n}case 1:case r.R.ShadowDom:return new X(this.eventManager,this.sharedStylesHost,t,e);default:if(!this.rendererByCompId.has(e.id)){const t=W(e.id,e.styles,[]);this.sharedStylesHost.addStyles(t),this.rendererByCompId.set(e.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return t.\u0275fac=function(e){return new(e||t)(r.Yb(q),r.Yb(z),r.Yb(r.c))},t.\u0275prov=r.Ib({token:t,factory:t.\u0275fac}),t})();class ${constructor(t){this.eventManager=t,this.data=Object.create(null)}destroy(){}createElement(t,e){return e?document.createElementNS(G[e]||e,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,e){t.appendChild(e)}insertBefore(t,e,n){t&&t.insertBefore(e,n)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let n="string"==typeof t?document.querySelector(t):t;if(!n)throw new Error(`The selector "${t}" did not match any elements`);return e||(n.textContent=""),n}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,n,r){if(r){e=r+":"+e;const i=G[r];i?t.setAttributeNS(i,e,n):t.setAttribute(e,n)}else t.setAttribute(e,n)}removeAttribute(t,e,n){if(n){const r=G[n];r?t.removeAttributeNS(r,e):t.removeAttribute(`${n}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,n,i){i&(r.G.DashCase|r.G.Important)?t.style.setProperty(e,n,i&r.G.Important?"important":""):t.style[e]=n}removeStyle(t,e,n){n&r.G.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,n){t[e]=n}setValue(t,e){t.nodeValue=e}listen(t,e,n){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,K(n)):this.eventManager.addEventListener(t,e,K(n))}}class J extends ${constructor(t,e,n,r){super(t),this.component=n;const i=W(r+"-"+n.id,n.styles,[]);e.addStyles(i),this.contentAttr="_ngcontent-%COMP%".replace(Q,r+"-"+n.id),this.hostAttr="_nghost-%COMP%".replace(Q,r+"-"+n.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,e){const n=super.createElement(t,e);return super.setAttribute(n,this.contentAttr,""),n}}class X extends ${constructor(t,e,n,r){super(t),this.sharedStylesHost=e,this.hostEl=n,this.shadowRoot=n.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const i=W(r.id,r.styles,[]);for(let o=0;o<i.length;o++){const t=document.createElement("style");t.textContent=i[o],this.shadowRoot.appendChild(t)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,n){return super.insertBefore(this.nodeOrShadowRoot(t),e,n)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}let Z=(()=>{class t extends B{constructor(t){super(t)}supports(t){return!0}addEventListener(t,e,n){return t.addEventListener(e,n,!1),()=>this.removeEventListener(t,e,n)}removeEventListener(t,e,n){return t.removeEventListener(e,n)}}return t.\u0275fac=function(e){return new(e||t)(r.Yb(s))},t.\u0275prov=r.Ib({token:t,factory:t.\u0275fac}),t})();const tt=["alt","control","meta","shift"],et={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},nt={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},rt={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let it=(()=>{class t extends B{constructor(t){super(t)}supports(e){return null!=t.parseEventName(e)}addEventListener(e,n,r){const i=t.parseEventName(n),s=t.eventCallback(i.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>o().onAndCancel(e,i.domEventName,s))}static parseEventName(e){const n=e.toLowerCase().split("."),r=n.shift();if(0===n.length||"keydown"!==r&&"keyup"!==r)return null;const i=t._normalizeKey(n.pop());let o="";if(tt.forEach(t=>{const e=n.indexOf(t);e>-1&&(n.splice(e,1),o+=t+".")}),o+=i,0!=n.length||0===i.length)return null;const s={};return s.domEventName=r,s.fullKey=o,s}static getEventFullKey(t){let e="",n=function(t){let e=t.key;if(null==e){if(e=t.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===t.location&&nt.hasOwnProperty(e)&&(e=nt[e]))}return et[e]||e}(t);return n=n.toLowerCase()," "===n?n="space":"."===n&&(n="dot"),tt.forEach(r=>{r!=n&&(0,rt[r])(t)&&(e+=r+".")}),e+=n,e}static eventCallback(e,n,r){return i=>{t.getEventFullKey(i)===e&&r.runGuarded(()=>n(i))}}static _normalizeKey(t){switch(t){case"esc":return"escape";default:return t}}}return t.\u0275fac=function(e){return new(e||t)(r.Yb(s))},t.\u0275prov=r.Ib({token:t,factory:t.\u0275fac}),t})();const ot=[{provide:r.C,useValue:"browser"},{provide:r.D,useValue:function(){R.makeCurrent(),V.init()},multi:!0},{provide:s,useFactory:function(){return Object(r.ub)(document),document},deps:[]}],st=Object(r.S)(r.W,"browser",ot),at=[[],{provide:r.Z,useValue:"root"},{provide:r.m,useFactory:function(){return new r.m},deps:[]},{provide:U,useClass:Z,multi:!0,deps:[s,r.A,r.C]},{provide:U,useClass:it,multi:!0,deps:[s]},[],{provide:Y,useClass:Y,deps:[q,z,r.c]},{provide:r.F,useExisting:Y},{provide:H,useExisting:z},{provide:z,useClass:z,deps:[s]},{provide:r.M,useClass:r.M,deps:[r.A]},{provide:q,useClass:q,deps:[U,r.A]},[]];let ut=(()=>{class t{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(e){return{ngModule:t,providers:[{provide:r.c,useValue:e.appId},{provide:L,useExisting:r.c},F]}}}return t.\u0275fac=function(e){return new(e||t)(r.Yb(t,12))},t.\u0275mod=r.Kb({type:t}),t.\u0275inj=r.Jb({providers:at,imports:[A,r.f]}),t})();"undefined"!=typeof window&&window;var ct=n("D0XW"),lt=n("HDdC"),ht=n("Cfvw"),dt=n("LRne"),ft=n("bHdf");function pt(...t){return Object(ft.a)(1)(Object(dt.a)(...t))}var gt=n("z+Ro");function yt(...t){const e=t[t.length-1];return Object(gt.a)(e)?(t.pop(),n=>pt(t,n,e)):e=>pt(t,e)}var mt=n("7o/Q");function vt(){return t=>t.lift(new bt)}class bt{call(t,e){return e.subscribe(new _t(t))}}class _t extends mt.a{constructor(t){super(t),this.hasPrev=!1}_next(t){let e;this.hasPrev?e=[this.prev,t]:this.hasPrev=!0,this.prev=t,e&&this.destination.next(e)}}var wt=n("lJxs");function Ct(t,e){let n=!1;return arguments.length>=2&&(n=!0),function(r){return r.lift(new Ot(t,e,n))}}class Ot{constructor(t,e,n=!1){this.accumulator=t,this.seed=e,this.hasSeed=n}call(t,e){return e.subscribe(new Et(t,this.accumulator,this.seed,this.hasSeed))}}class Et extends mt.a{constructor(t,e,n,r){super(t),this.accumulator=e,this._seed=n,this.hasSeed=r,this.index=0}get seed(){return this._seed}set seed(t){this.hasSeed=!0,this._seed=t}_next(t){if(this.hasSeed)return this._tryNext(t);this.seed=t,this.destination.next(t)}_tryNext(t){const e=this.index++;let n;try{n=this.accumulator(this.seed,t,e)}catch(r){this.destination.error(r)}this.seed=n,this.destination.next(n)}}function St(t,e){return n=>n.lift(new Tt(t,e))}class Tt{constructor(t,e){this.compare=t,this.keySelector=e}call(t,e){return e.subscribe(new It(t,this.compare,this.keySelector))}}class It extends mt.a{constructor(t,e,n){super(t),this.keySelector=n,this.hasKey=!1,"function"==typeof e&&(this.compare=e)}compare(t,e){return t===e}_next(t){let e;try{const{keySelector:n}=this;e=n?n(t):t}catch(r){return this.destination.error(r)}let n=!1;if(this.hasKey)try{const{compare:t}=this;n=t(this.key,e)}catch(r){return this.destination.error(r)}else this.hasKey=!0;n||(this.key=e,this.destination.next(t))}}function xt(t,e){return function(n){return n.lift(new At(t,e))}}class At{constructor(t,e){this.predicate=t,this.thisArg=e}call(t,e){return e.subscribe(new jt(t,this.predicate,this.thisArg))}}class jt extends mt.a{constructor(t,e,n){super(t),this.predicate=e,this.thisArg=n,this.count=0}_next(t){let e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}e&&this.destination.next(t)}}var kt=n("pxpQ"),Nt=n("spgP"),Pt=n("Jgta"),Rt=n("zIRd"),Dt=n("q/0M"),Mt=n("qOnz"),Lt=function(t,e){return(Lt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function Ft(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var Vt,Ut="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},qt=qt||{},Bt=Ut||self;function Ht(){}function zt(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function Gt(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var Qt="closure_uid_"+(1e9*Math.random()>>>0),Wt=0;function Kt(t,e,n){return t.call.apply(t.bind,arguments)}function Yt(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function $t(t,e,n){return($t=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Kt:Yt).apply(null,arguments)}function Jt(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function Xt(){return Date.now()}function Zt(t,e){function n(){}n.prototype=e.prototype,t.X=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Kb=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function te(){this.j=this.j,this.i=this.i}te.prototype.j=!1,te.prototype.ja=function(){!this.j&&(this.j=!0,this.G(),0)&&function(t){Object.prototype.hasOwnProperty.call(t,Qt)&&t[Qt]||(t[Qt]=++Wt)}(this)},te.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var ee=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},ne=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function re(t){return Array.prototype.concat.apply([],arguments)}function ie(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function oe(t){return/^[\s\xa0]*$/.test(t)}var se,ae=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function ue(t,e){return-1!=t.indexOf(e)}function ce(t,e){return t<e?-1:t>e?1:0}t:{var le=Bt.navigator;if(le){var he=le.userAgent;if(he){se=he;break t}}se=""}function de(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function fe(t){var e={};for(var n in t)e[n]=t[n];return e}var pe="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ge(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<pe.length;o++)n=pe[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function ye(t){return ye[" "](t),t}ye[" "]=Ht;var me,ve,be=ue(se,"Opera"),_e=ue(se,"Trident")||ue(se,"MSIE"),we=ue(se,"Edge"),Ce=we||_e,Oe=ue(se,"Gecko")&&!(ue(se.toLowerCase(),"webkit")&&!ue(se,"Edge"))&&!(ue(se,"Trident")||ue(se,"MSIE"))&&!ue(se,"Edge"),Ee=ue(se.toLowerCase(),"webkit")&&!ue(se,"Edge");function Se(){var t=Bt.document;return t?t.documentMode:void 0}t:{var Te="",Ie=(ve=se,Oe?/rv:([^\);]+)(\)|;)/.exec(ve):we?/Edge\/([\d\.]+)/.exec(ve):_e?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(ve):Ee?/WebKit\/(\S+)/.exec(ve):be?/(?:Version)[ \/]?(\S+)/.exec(ve):void 0);if(Ie&&(Te=Ie?Ie[1]:""),_e){var xe=Se();if(null!=xe&&xe>parseFloat(Te)){me=String(xe);break t}}me=Te}var Ae={};function je(t){return function(t,e){var n=Ae;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e()}(t,function(){for(var e=0,n=ae(String(me)).split("."),r=ae(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var s=n[o]||"",a=r[o]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==s[0].length&&0==a[0].length)break;e=ce(0==s[1].length?0:parseInt(s[1],10),0==a[1].length?0:parseInt(a[1],10))||ce(0==s[2].length,0==a[2].length)||ce(s[2],a[2]),s=s[3],a=a[3]}while(0==e)}return 0<=e})}var ke=Bt.document&&_e&&(Se()||parseInt(me,10))||void 0,Ne=!_e||9<=Number(ke),Pe=_e&&!je("9"),Re=function(){if(!Bt.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{Bt.addEventListener("test",Ht,e),Bt.removeEventListener("test",Ht,e)}catch(n){}return t}();function De(t,e){this.type=t,this.a=this.target=e,this.defaultPrevented=!1}function Me(t,e){if(De.call(this,t?t.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.a=e,e=t.relatedTarget){if(Oe){t:{try{ye(e.nodeName);var i=!0;break t}catch(o){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:Le[t.pointerType]||"",this.c=t,t.defaultPrevented&&this.b()}}De.prototype.b=function(){this.defaultPrevented=!0},Zt(Me,De);var Le={2:"touch",3:"pen",4:"mouse"};Me.prototype.b=function(){Me.X.b.call(this);var t=this.c;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,Pe)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(e){}};var Fe="closure_listenable_"+(1e6*Math.random()|0),Ve=0;function Ue(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ca=i,this.key=++Ve,this.Y=this.Z=!1}function qe(t){t.Y=!0,t.listener=null,t.proxy=null,t.src=null,t.ca=null}function Be(t){this.src=t,this.a={},this.b=0}function He(t,e){var n=e.type;if(n in t.a){var r,i=t.a[n],o=ee(i,e);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(qe(e),0==t.a[n].length&&(delete t.a[n],t.b--))}}function ze(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.Y&&o.listener==e&&o.capture==!!n&&o.ca==r)return i}return-1}Be.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=ze(t,e,r,i);return-1<s?(e=t[s],n||(e.Z=!1)):((e=new Ue(e,this.src,o,!!r,i)).Z=n,t.push(e)),e};var Ge="closure_lm_"+(1e6*Math.random()|0),Qe={};function We(t,e,n,r,i){if(r&&r.once)return Ye(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)We(t,e[o],n,r,i);return null}return n=rn(n),t&&t[Fe]?t.va(e,n,Gt(r)?!!r.capture:!!r,i):Ke(t,e,n,!1,r,i)}function Ke(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=Gt(i)?!!i.capture:!!i;if(s&&!Ne)return null;var a=en(t);if(a||(t[Ge]=a=new Be(t)),(n=a.add(e,n,r,s,o)).proxy)return n;if(r=function(){var t=tn,e=Ne?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)Re||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(Xe(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function Ye(t,e,n,r,i){if(Array.isArray(e)){for(var o=0;o<e.length;o++)Ye(t,e[o],n,r,i);return null}return n=rn(n),t&&t[Fe]?t.wa(e,n,Gt(r)?!!r.capture:!!r,i):Ke(t,e,n,!0,r,i)}function $e(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)$e(t,e[o],n,r,i);else r=Gt(r)?!!r.capture:!!r,n=rn(n),t&&t[Fe]?(t=t.c,(e=String(e).toString())in t.a&&-1<(n=ze(o=t.a[e],n,r,i))&&(qe(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--))):t&&(t=en(t))&&(e=t.a[e.toString()],t=-1,e&&(t=ze(e,n,r,i)),(n=-1<t?e[t]:null)&&Je(n))}function Je(t){if("number"!=typeof t&&t&&!t.Y){var e=t.src;if(e&&e[Fe])He(e.c,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(Xe(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=en(e))?(He(n,t),0==n.b&&(n.src=null,e[Ge]=null)):qe(t)}}}function Xe(t){return t in Qe?Qe[t]:Qe[t]="on"+t}function Ze(t,e){var n=t.listener,r=t.ca||t.src;return t.Z&&Je(t),n.call(r,e)}function tn(t,e){if(t.Y)return!0;if(!Ne){if(!e)t:{e=["window","event"];for(var n=Bt,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}return Ze(t,e=new Me(e,this))}return Ze(t,new Me(e,this))}function en(t){return(t=t[Ge])instanceof Be?t:null}var nn="__closure_events_fn_"+(1e9*Math.random()>>>0);function rn(t){return"function"==typeof t?t:(t[nn]||(t[nn]=function(e){return t.handleEvent(e)}),t[nn])}function on(){te.call(this),this.c=new Be(this),this.J=this,this.C=null}function sn(t,e){var n,r=t.C;if(r)for(n=[];r;r=r.C)n.push(r);if(t=t.J,r=e.type||e,"string"==typeof e)e=new De(e,t);else if(e instanceof De)e.target=e.target||t;else{var i=e;ge(e=new De(r,t),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var s=e.a=n[o];i=an(s,r,!0,e)&&i}if(i=an(s=e.a=t,r,!0,e)&&i,i=an(s,r,!1,e)&&i,n)for(o=0;o<n.length;o++)i=an(s=e.a=n[o],r,!1,e)&&i}function an(t,e,n,r){if(!(e=t.c.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.Y&&s.capture==n){var a=s.listener,u=s.ca||s.src;s.Z&&He(t.c,s),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}Zt(on,te),on.prototype[Fe]=!0,(Vt=on.prototype).addEventListener=function(t,e,n,r){We(this,t,e,n,r)},Vt.removeEventListener=function(t,e,n,r){$e(this,t,e,n,r)},Vt.G=function(){if(on.X.G.call(this),this.c){var t,e=this.c;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)qe(n[r]);delete e.a[t],e.b--}}this.C=null},Vt.va=function(t,e,n,r){return this.c.add(String(t),e,!1,n,r)},Vt.wa=function(t,e,n,r){return this.c.add(String(t),e,!0,n,r)};var un=Bt.JSON.stringify;function cn(){this.b=this.a=null}var ln,hn=new(function(){function t(t,e){this.c=t,this.f=e,this.b=0,this.a=null}return t.prototype.get=function(){var t;return 0<this.b?(this.b--,this.a=(t=this.a).next,t.next=null):t=this.c(),t},t}())(function(){return new fn},function(t){t.reset()});function dn(){var t=mn,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function fn(){this.next=this.b=this.a=null}function pn(t){Bt.setTimeout(function(){throw t},0)}function gn(t,e){ln||function(){var t=Bt.Promise.resolve(void 0);ln=function(){t.then(vn)}}(),yn||(ln(),yn=!0),mn.add(t,e)}cn.prototype.add=function(t,e){var n=hn.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},fn.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},fn.prototype.reset=function(){this.next=this.b=this.a=null};var yn=!1,mn=new cn;function vn(){for(var t;t=dn();){try{t.a.call(t.b)}catch(n){pn(n)}var e=hn;e.f(t),100>e.b&&(e.b++,t.next=e.a,e.a=t)}yn=!1}function bn(t,e){on.call(this),this.b=t||1,this.a=e||Bt,this.f=$t(this.Za,this),this.g=Xt()}function _n(t){t.aa=!1,t.M&&(t.a.clearTimeout(t.M),t.M=null)}function wn(t,e,n){if("function"==typeof t)n&&(t=$t(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=$t(t.handleEvent,t)}return 2147483647<Number(e)?-1:Bt.setTimeout(t,e||0)}function Cn(t){t.a=wn(function(){t.a=null,t.c&&(t.c=!1,Cn(t))},t.h);var e=t.b;t.b=null,t.g.apply(null,e)}Zt(bn,on),(Vt=bn.prototype).aa=!1,Vt.M=null,Vt.Za=function(){if(this.aa){var t=Xt()-this.g;0<t&&t<.8*this.b?this.M=this.a.setTimeout(this.f,this.b-t):(this.M&&(this.a.clearTimeout(this.M),this.M=null),sn(this,"tick"),this.aa&&(_n(this),this.start()))}},Vt.start=function(){this.aa=!0,this.M||(this.M=this.a.setTimeout(this.f,this.b),this.g=Xt())},Vt.G=function(){bn.X.G.call(this),_n(this),delete this.a};var On=function(t){function e(e,n){var r=t.call(this)||this;return r.g=e,r.h=n,r.b=null,r.c=!1,r.a=null,r}return function(t,e){function n(){this.constructor=t}Lt(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.f=function(t){this.b=arguments,this.a?this.c=!0:Cn(this)},e.prototype.G=function(){t.prototype.G.call(this),this.a&&(Bt.clearTimeout(this.a),this.a=null,this.c=!1,this.b=null)},e}(te);function En(t){te.call(this),this.b=t,this.a={}}Zt(En,te);var Sn=[];function Tn(t,e,n,r){Array.isArray(n)||(n&&(Sn[0]=n.toString()),n=Sn);for(var i=0;i<n.length;i++){var o=We(e,n[i],r||t.handleEvent,!1,t.b||t);if(!o)break;t.a[o.key]=o}}function In(t){de(t.a,function(t,e){this.a.hasOwnProperty(e)&&Je(t)},t),t.a={}}function xn(){this.a=!0}function An(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.a)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var s=1;s<i.length;s++)i[s]=""}}}return un(n)}catch(a){return e}}(t,n)+(r?" "+r:"")})}En.prototype.G=function(){En.X.G.call(this),In(this)},En.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},xn.prototype.info=function(){};var jn={},kn=null;function Nn(){return kn=kn||new on}function Pn(t){De.call(this,jn.Fa,t)}function Rn(t){var e=Nn();sn(e,new Pn(e,t))}function Dn(t,e){De.call(this,jn.STAT_EVENT,t),this.stat=e}function Mn(t){var e=Nn();sn(e,new Dn(e,t))}function Ln(t){De.call(this,jn.Ga,t)}function Fn(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return Bt.setTimeout(function(){t()},e)}jn.Fa="serverreachability",Zt(Pn,De),jn.STAT_EVENT="statevent",Zt(Dn,De),jn.Ga="timingevent",Zt(Ln,De);var Vn={NO_ERROR:0,$a:1,nb:2,mb:3,hb:4,lb:5,ob:6,Da:7,TIMEOUT:8,rb:9},Un={fb:"complete",Bb:"success",Ea:"error",Da:"abort",tb:"ready",ub:"readystatechange",TIMEOUT:"timeout",pb:"incrementaldata",sb:"progress",ib:"downloadprogress",Jb:"uploadprogress"};function qn(){}function Bn(){}qn.prototype.a=null;var Hn,zn={OPEN:"a",eb:"b",Ea:"c",qb:"d"};function Gn(){De.call(this,"d")}function Qn(){De.call(this,"c")}function Wn(){}function Kn(t,e,n,r){this.g=t,this.c=e,this.f=n,this.S=r||1,this.J=new En(this),this.P=Yn,this.R=new bn(t=Ce?125:void 0),this.B=null,this.b=!1,this.j=this.l=this.i=this.H=this.u=this.T=this.o=null,this.s=[],this.a=null,this.D=0,this.h=this.m=null,this.N=-1,this.A=!1,this.O=0,this.F=null,this.V=this.C=this.U=this.I=!1}Zt(Gn,De),Zt(Qn,De),Zt(Wn,qn),Hn=new Wn;var Yn=45e3,$n={},Jn={};function Xn(t,e,n){t.H=1,t.i=_r(pr(e)),t.j=n,t.I=!0,Zn(t,null)}function Zn(t,e){t.u=Xt(),nr(t),t.l=pr(t.i);var n=t.l,r=t.S;Array.isArray(r)||(r=[String(r)]),Pr(n.b,"t",r),t.D=0,t.a=Ii(t.g,t.g.C?e:null),0<t.O&&(t.F=new On($t(t.Ca,t,t.a),t.O)),Tn(t.J,t.a,"readystatechange",t.Xa),e=t.B?fe(t.B):{},t.j?(t.m||(t.m="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.a.ba(t.l,t.m,t.j,e)):(t.m="GET",t.a.ba(t.l,t.m,null,e)),Rn(1),function(t,e,n,r,i,o){t.info(function(){if(t.a)if(o)for(var s="",a=o.split("&"),u=0;u<a.length;u++){var c=a[u].split("=");if(1<c.length){var l=c[0];c=c[1];var h=l.split("_");s=2<=h.length&&"type"==h[1]?s+(l+"=")+c+"&":s+(l+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+s})}(t.c,t.m,t.l,t.f,t.S,t.j)}function tr(t,e,n){for(var r=!0;!t.A&&t.D<n.length;){var i=er(t,n);if(i==Jn){4==e&&(t.h=4,Mn(14),r=!1),An(t.c,t.f,null,"[Incomplete Response]");break}if(i==$n){t.h=4,Mn(15),An(t.c,t.f,n,"[Invalid Chunk]"),r=!1;break}An(t.c,t.f,i,null),ar(t,i)}4==e&&0==n.length&&(t.h=1,Mn(16),r=!1),t.b=t.b&&r,r?0<n.length&&!t.V&&(t.V=!0,(e=t.g).a==t&&e.U&&!e.F&&(e.c.info("Great, no buffering proxy detected. Bytes received: "+n.length),bi(e),e.F=!0,Mn(11))):(An(t.c,t.f,n,"[Invalid Chunked Response]"),sr(t),or(t))}function er(t,e){var n=t.D,r=e.indexOf("\n",n);return-1==r?Jn:(n=Number(e.substring(n,r)),isNaN(n)?$n:(r+=1)+n>e.length?Jn:(e=e.substr(r,n),t.D=r+n,e))}function nr(t){t.T=Xt()+t.P,rr(t,t.P)}function rr(t,e){if(null!=t.o)throw Error("WatchDog timer not null");t.o=Fn($t(t.Va,t),e)}function ir(t){t.o&&(Bt.clearTimeout(t.o),t.o=null)}function or(t){0==t.g.v||t.A||Ci(t.g,t)}function sr(t){ir(t);var e=t.F;e&&"function"==typeof e.ja&&e.ja(),t.F=null,_n(t.R),In(t.J),t.a&&(e=t.a,t.a=null,e.abort(),e.ja())}function ar(t,e){try{var n=t.g;if(0!=n.v&&(n.a==t||Ur(n.b,t)))if(n.I=t.N,!t.C&&Ur(n.b,t)&&3==n.v){try{var r=n.ka.a.parse(e)}catch(dp){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.j){if(n.a){if(!(n.a.u+3e3<t.u))break t;wi(n),li(n)}vi(n),Mn(18)}}else n.oa=i[1],0<n.oa-n.P&&37500>i[2]&&n.H&&0==n.o&&!n.m&&(n.m=Fn($t(n.Sa,n),6e3));if(1>=Vr(n.b)&&n.ea){try{n.ea()}catch(dp){}n.ea=void 0}}else Ei(n,11)}else if((t.C||n.a==t)&&wi(n),!oe(e))for(e=r=n.ka.a.parse(e),r=0;r<e.length;r++)if(n.P=(i=e[r])[0],i=i[1],2==n.v)if("c"==i[0]){n.J=i[1],n.ga=i[2];var o=i[3];null!=o&&(n.ha=o,n.c.info("VER="+n.ha));var s=i[4];null!=s&&(n.pa=s,n.c.info("SVER="+n.pa));var a=i[5];if(null!=a&&"number"==typeof a&&0<a){var u=1.5*a;n.D=u,n.c.info("backChannelRequestTimeoutMs_="+u)}u=n;var c=t.a;if(c){var l=c.a?c.a.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var h=u.b;!h.a&&(ue(l,"spdy")||ue(l,"quic")||ue(l,"h2"))&&(h.f=h.g,h.a=new Set,h.b&&(qr(h,h.b),h.b=null))}if(u.A){var d=c.a?c.a.getResponseHeader("X-HTTP-Session-Id"):null;d&&(u.na=d,br(u.B,u.A,d))}}n.v=3,n.f&&n.f.ta(),n.U&&(n.N=Xt()-t.u,n.c.info("Handshake RTT: "+n.N+"ms"));var f=t;if((u=n).la=Ti(u,u.C?u.ga:null,u.fa),f.C){Br(u.b,f);var p=f,g=u.D;g&&p.setTimeout(g),p.o&&(ir(p),nr(p)),u.a=f}else mi(u);0<n.g.length&&fi(n)}else"stop"!=i[0]&&"close"!=i[0]||Ei(n,7);else 3==n.v&&("stop"==i[0]||"close"==i[0]?"stop"==i[0]?Ei(n,7):ci(n):"noop"!=i[0]&&n.f&&n.f.sa(i),n.o=0);Rn(4)}catch(dp){}}function ur(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(zt(t)||"string"==typeof t)ne(t,e,void 0);else{if(t.L&&"function"==typeof t.L)var n=t.L();else if(t.K&&"function"==typeof t.K)n=void 0;else if(zt(t)||"string"==typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.K&&"function"==typeof t.K)return t.K();if("string"==typeof t)return t.split("");if(zt(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function cr(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof cr)for(n=t.L(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function lr(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];hr(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)hr(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function hr(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(Vt=Kn.prototype).setTimeout=function(t){this.P=t},Vt.Xa=function(t){t=t.target;var e=this.F;e&&3==oi(t)?e.f():this.Ca(t)},Vt.Ca=function(t){try{if(t==this.a)t:{var e=oi(this.a),n=this.a.ua(),r=this.a.W();if(!(3>e||3==e&&!Ce&&!this.a.$())){this.A||4!=e||7==n||Rn(8==n||0>=r?3:2),ir(this);var i=this.a.W();this.N=i;var o=this.a.$();if(this.b=200==i,function(t,e,n,r,i,o,s){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+o+" "+s})}(this.c,this.m,this.l,this.f,this.S,e,i),this.b){if(this.U&&!this.C){e:{if(this.a){var s,a=this.a;if((s=a.a?a.a.getResponseHeader("X-HTTP-Initial-Response"):null)&&!oe(s)){var u=s;break e}}u=null}if(!u){this.b=!1,this.h=3,Mn(12),sr(this),or(this);break t}An(this.c,this.f,u,"Initial handshake response via X-HTTP-Initial-Response"),this.C=!0,ar(this,u)}this.I?(tr(this,e,o),Ce&&this.b&&3==e&&(Tn(this.J,this.R,"tick",this.Wa),this.R.start())):(An(this.c,this.f,o,null),ar(this,o)),4==e&&sr(this),this.b&&!this.A&&(4==e?Ci(this.g,this):(this.b=!1,nr(this)))}else 400==i&&0<o.indexOf("Unknown SID")?(this.h=3,Mn(12)):(this.h=0,Mn(13)),sr(this),or(this)}}}catch(c){}},Vt.Wa=function(){if(this.a){var t=oi(this.a),e=this.a.$();this.D<e.length&&(ir(this),tr(this,t,e),this.b&&4!=t&&nr(this))}},Vt.cancel=function(){this.A=!0,sr(this)},Vt.Va=function(){this.o=null;var t=Xt();0<=t-this.T?(function(t,e){t.info(function(){return"TIMEOUT: "+e})}(this.c,this.l),2!=this.H&&(Rn(3),Mn(17)),sr(this),this.h=2,or(this)):rr(this,this.T-t)},(Vt=cr.prototype).K=function(){lr(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},Vt.L=function(){return lr(this),this.a.concat()},Vt.get=function(t,e){return hr(this.b,t)?this.b[t]:e},Vt.set=function(t,e){hr(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},Vt.forEach=function(t,e){for(var n=this.L(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var dr=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function fr(t,e){if(this.c=this.j=this.f="",this.h=null,this.i=this.g="",this.a=!1,t instanceof fr){this.a=void 0!==e?e:t.a,gr(this,t.f),this.j=t.j,yr(this,t.c),mr(this,t.h),this.g=t.g,e=t.b;var n=new Ar;n.c=e.c,e.a&&(n.a=new cr(e.a),n.b=e.b),vr(this,n),this.i=t.i}else t&&(n=String(t).match(dr))?(this.a=!!e,gr(this,n[1]||"",!0),this.j=wr(n[2]||""),yr(this,n[3]||"",!0),mr(this,n[4]),this.g=wr(n[5]||"",!0),vr(this,n[6]||"",!0),this.i=wr(n[7]||"")):(this.a=!!e,this.b=new Ar(null,this.a))}function pr(t){return new fr(t)}function gr(t,e,n){t.f=n?wr(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function yr(t,e,n){t.c=n?wr(e,!0):e}function mr(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.h=e}else t.h=null}function vr(t,e,n){e instanceof Ar?(t.b=e,function(t,e){e&&!t.f&&(jr(t),t.c=null,t.a.forEach(function(t,e){var n=e.toLowerCase();e!=n&&(kr(this,e),Pr(this,n,t))},t)),t.f=e}(t.b,t.a)):(n||(e=Cr(e,Ir)),t.b=new Ar(e,t.a))}function br(t,e,n){t.b.set(e,n)}function _r(t){return br(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Xt()).toString(36)),t}function wr(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Cr(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,Or),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Or(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}fr.prototype.toString=function(){var t=[],e=this.f;e&&t.push(Cr(e,Er,!0),":");var n=this.c;return(n||"file"==e)&&(t.push("//"),(e=this.j)&&t.push(Cr(e,Er,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.h)&&t.push(":",String(n))),(n=this.g)&&(this.c&&"/"!=n.charAt(0)&&t.push("/"),t.push(Cr(n,"/"==n.charAt(0)?Tr:Sr,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.i)&&t.push("#",Cr(n,xr)),t.join("")};var Er=/[#\/\?@]/g,Sr=/[#\?:]/g,Tr=/[#\?]/g,Ir=/[#\?@]/g,xr=/#/g;function Ar(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function jr(t){t.a||(t.a=new cr,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}function kr(t,e){jr(t),e=Rr(t,e),hr(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,hr((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&lr(t)))}function Nr(t,e){return jr(t),e=Rr(t,e),hr(t.a.b,e)}function Pr(t,e,n){kr(t,e),0<n.length&&(t.c=null,t.a.set(Rr(t,e),ie(n)),t.b+=n.length)}function Rr(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}(Vt=Ar.prototype).add=function(t,e){jr(this),this.c=null,t=Rr(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},Vt.forEach=function(t,e){jr(this),this.a.forEach(function(n,r){ne(n,function(n){t.call(e,n,r,this)},this)},this)},Vt.L=function(){jr(this);for(var t=this.a.K(),e=this.a.L(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},Vt.K=function(t){jr(this);var e=[];if("string"==typeof t)Nr(this,t)&&(e=re(e,this.a.get(Rr(this,t))));else{t=this.a.K();for(var n=0;n<t.length;n++)e=re(e,t[n])}return e},Vt.set=function(t,e){return jr(this),this.c=null,Nr(this,t=Rr(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},Vt.get=function(t,e){return t&&0<(t=this.K(t)).length?String(t[0]):e},Vt.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.L(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.K(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.c=t.join("&")};var Dr=function(){return function(t,e){this.b=t,this.a=e}}();function Mr(t){this.g=t||Lr,t=Bt.PerformanceNavigationTiming?0<(t=Bt.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(Bt.ia&&Bt.ia.ya&&Bt.ia.ya()&&Bt.ia.ya().Lb),this.f=t?this.g:1,this.a=null,1<this.f&&(this.a=new Set),this.b=null,this.c=[]}var Lr=10;function Fr(t){return!!t.b||!!t.a&&t.a.size>=t.f}function Vr(t){return t.b?1:t.a?t.a.size:0}function Ur(t,e){return t.b?t.b==e:!!t.a&&t.a.has(e)}function qr(t,e){t.a?t.a.add(e):t.b=e}function Br(t,e){t.b&&t.b==e?t.b=null:t.a&&t.a.has(e)&&t.a.delete(e)}function Hr(t){var e,n;if(null!=t.b)return t.c.concat(t.b.s);if(null!=t.a&&0!==t.a.size){var r=t.c;try{for(var i=Ft(t.a.values()),o=i.next();!o.done;o=i.next())r=r.concat(o.value.s)}catch(s){e={error:s}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}return ie(t.c)}function zr(){}function Gr(){this.a=new zr}function Qr(t,e,n){var r=n||"";try{ur(t,function(t,n){var i=t;Gt(t)&&(i=un(t)),e.push(r+n+"="+encodeURIComponent(i))})}catch(Zp){throw e.push(r+"type="+encodeURIComponent("_badmap")),Zp}}function Wr(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(o){}}Mr.prototype.cancel=function(){var t,e;if(this.c=Hr(this),this.b)this.b.cancel(),this.b=null;else if(this.a&&0!==this.a.size){try{for(var n=Ft(this.a.values()),r=n.next();!r.done;r=n.next())r.value.cancel()}catch(i){t={error:i}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.a.clear()}},zr.prototype.stringify=function(t){return Bt.JSON.stringify(t,void 0)},zr.prototype.parse=function(t){return Bt.JSON.parse(t,void 0)};var Kr=Bt.JSON.parse;function Yr(t){on.call(this),this.headers=new cr,this.H=t||null,this.b=!1,this.s=this.a=null,this.B="",this.h=0,this.f="",this.g=this.A=this.l=this.u=!1,this.o=0,this.m=null,this.I=$r,this.D=this.F=!1}Zt(Yr,on);var $r="",Jr=/^https?$/i,Xr=["POST","PUT"];function Zr(t){return"content-type"==t.toLowerCase()}function ti(t,e){t.b=!1,t.a&&(t.g=!0,t.a.abort(),t.g=!1),t.f=e,t.h=5,ei(t),ri(t)}function ei(t){t.u||(t.u=!0,sn(t,"complete"),sn(t,"error"))}function ni(t){if(t.b&&void 0!==qt&&(!t.s[1]||4!=oi(t)||2!=t.W()))if(t.l&&4==oi(t))wn(t.za,0,t);else if(sn(t,"readystatechange"),4==oi(t)){t.b=!1;try{var e,n=t.W();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.B).match(dr)[1]||null;if(!o&&Bt.self&&Bt.self.location){var s=Bt.self.location.protocol;o=s.substr(0,s.length-1)}i=!Jr.test(o?o.toLowerCase():"")}e=i}if(e)sn(t,"complete"),sn(t,"success");else{t.h=6;try{var a=2<oi(t)?t.a.statusText:""}catch(n){a=""}t.f=a+" ["+t.W()+"]",ei(t)}}finally{ri(t)}}}function ri(t,e){if(t.a){ii(t);var n=t.a,r=t.s[0]?Ht:null;t.a=null,t.s=null,e||sn(t,"ready");try{n.onreadystatechange=r}catch(Zp){}}}function ii(t){t.a&&t.D&&(t.a.ontimeout=null),t.m&&(Bt.clearTimeout(t.m),t.m=null)}function oi(t){return t.a?t.a.readyState:0}function si(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=function(t){var e="";return de(t,function(t,n){e+=n,e+=":",e+=t,e+="\r\n"}),e}(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):br(t,e,n))}function ai(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function ui(t){this.pa=0,this.g=[],this.c=new xn,this.ga=this.la=this.B=this.fa=this.a=this.na=this.A=this.V=this.i=this.O=this.l=null,this.Oa=this.R=0,this.La=ai("failFast",!1,t),this.H=this.m=this.j=this.h=this.f=null,this.S=!0,this.I=this.oa=this.P=-1,this.T=this.o=this.u=0,this.Ha=ai("baseRetryDelayMs",5e3,t),this.Ra=ai("retryDelaySeedMs",1e4,t),this.Ma=ai("forwardChannelMaxRetries",2,t),this.ma=ai("forwardChannelRequestTimeoutMs",2e4,t),this.Na=t&&t.g||void 0,this.D=void 0,this.C=t&&t.supportsCrossDomainXhr||!1,this.J="",this.b=new Mr(t&&t.concurrentRequestLimit),this.ka=new Gr,this.da=t&&t.fastHandshake||!1,this.Ia=t&&t.b||!1,t&&t.f&&(this.c.a=!1),t&&t.forceLongPolling&&(this.S=!1),this.U=!this.da&&this.S&&t&&t.detectBufferingProxy||!1,this.ea=void 0,this.N=0,this.F=!1,this.s=null,(this.Ka=t&&t.c||!1)&&this.c.info("Opt-in to enable Chrome Origin Trials.")}function ci(t){if(hi(t),3==t.v){var e=t.R++,n=pr(t.B);br(n,"SID",t.J),br(n,"RID",e),br(n,"TYPE","terminate"),gi(t,n),(e=new Kn(t,t.c,e,void 0)).H=2,e.i=_r(pr(n)),n=!1,Bt.navigator&&Bt.navigator.sendBeacon&&(n=Bt.navigator.sendBeacon(e.i.toString(),"")),!n&&Bt.Image&&((new Image).src=e.i,n=!0),n||(e.a=Ii(e.g,null),e.a.ba(e.i)),e.u=Xt(),nr(e)}Si(t)}function li(t){t.a&&(bi(t),t.a.cancel(),t.a=null)}function hi(t){li(t),t.j&&(Bt.clearTimeout(t.j),t.j=null),wi(t),t.b.cancel(),t.h&&("number"==typeof t.h&&Bt.clearTimeout(t.h),t.h=null)}function di(t,e){t.g.push(new Dr(t.Oa++,e)),3==t.v&&fi(t)}function fi(t){Fr(t.b)||t.h||(t.h=!0,gn(t.Ba,t),t.u=0)}function pi(t,e){var n;n=e?e.f:t.R++;var r=pr(t.B);br(r,"SID",t.J),br(r,"RID",n),br(r,"AID",t.P),gi(t,r),t.i&&t.l&&si(r,t.i,t.l),n=new Kn(t,t.c,n,t.u+1),null===t.i&&(n.B=t.l),e&&(t.g=e.s.concat(t.g)),e=yi(t,n,1e3),n.setTimeout(Math.round(.5*t.ma)+Math.round(.5*t.ma*Math.random())),qr(t.b,n),Xn(n,r,e)}function gi(t,e){t.f&&ur({},function(t,n){br(e,n,t)})}function yi(t,e,n){n=Math.min(t.g.length,n);var r=t.f?$t(t.f.Ja,t.f,t):null;t:for(var i=t.g,o=-1;;){var s=["count="+n];-1==o?0<n?s.push("ofs="+(o=i[0].b)):o=0:s.push("ofs="+o);for(var a=!0,u=0;u<n;u++){var c=i[u].b,l=i[u].a;if(0>(c-=o))o=Math.max(0,i[u].b-100),a=!1;else try{Qr(l,s,"req"+c+"_")}catch(so){r&&r(l)}}if(a){r=s.join("&");break t}}return t=t.g.splice(0,n),e.s=t,r}function mi(t){t.a||t.j||(t.T=1,gn(t.Aa,t),t.o=0)}function vi(t){return!(t.a||t.j||3<=t.o||(t.T++,t.j=Fn($t(t.Aa,t),Oi(t,t.o)),t.o++,0))}function bi(t){null!=t.s&&(Bt.clearTimeout(t.s),t.s=null)}function _i(t){t.a=new Kn(t,t.c,"rpc",t.T),null===t.i&&(t.a.B=t.l),t.a.O=0;var e=pr(t.la);br(e,"RID","rpc"),br(e,"SID",t.J),br(e,"CI",t.H?"0":"1"),br(e,"AID",t.P),gi(t,e),br(e,"TYPE","xmlhttp"),t.i&&t.l&&si(e,t.i,t.l),t.D&&t.a.setTimeout(t.D);var n=t.a;t=t.ga,n.H=1,n.i=_r(pr(e)),n.j=null,n.I=!0,Zn(n,t)}function wi(t){null!=t.m&&(Bt.clearTimeout(t.m),t.m=null)}function Ci(t,e){var n=null;if(t.a==e){wi(t),bi(t),t.a=null;var r=2}else{if(!Ur(t.b,e))return;n=e.s,Br(t.b,e),r=1}if(t.I=e.N,0!=t.v)if(e.b)if(1==r){n=e.j?e.j.length:0,e=Xt()-e.u;var i=t.u;sn(r=Nn(),new Ln(r,n,e,i)),fi(t)}else mi(t);else if(3==(i=e.h)||0==i&&0<t.I||!(1==r&&function(t,e){return!(Vr(t.b)>=t.b.f-(t.h?1:0)||(t.h?(t.g=e.s.concat(t.g),0):1==t.v||2==t.v||t.u>=(t.La?0:t.Ma)||(t.h=Fn($t(t.Ba,t,e),Oi(t,t.u)),t.u++,0)))}(t,e)||2==r&&vi(t)))switch(n&&0<n.length&&(e=t.b,e.c=e.c.concat(n)),i){case 1:Ei(t,5);break;case 4:Ei(t,10);break;case 3:Ei(t,6);break;default:Ei(t,2)}}function Oi(t,e){var n=t.Ha+Math.floor(Math.random()*t.Ra);return t.f||(n*=2),n*e}function Ei(t,e){if(t.c.info("Error code "+e),2==e){var n=null;t.f&&(n=null);var r=$t(t.Ya,t);n||(n=new fr("//www.google.com/images/cleardot.gif"),Bt.location&&"http"==Bt.location.protocol||gr(n,"https"),_r(n)),function(t,e){var n=new xn;if(Bt.Image){var r=new Image;r.onload=Jt(Wr,n,r,"TestLoadImage: loaded",!0,e),r.onerror=Jt(Wr,n,r,"TestLoadImage: error",!1,e),r.onabort=Jt(Wr,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=Jt(Wr,n,r,"TestLoadImage: timeout",!1,e),Bt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}(n.toString(),r)}else Mn(2);t.v=0,t.f&&t.f.ra(e),Si(t),hi(t)}function Si(t){t.v=0,t.I=-1,t.f&&(0==Hr(t.b).length&&0==t.g.length||(t.b.c.length=0,ie(t.g),t.g.length=0),t.f.qa())}function Ti(t,e,n){var r=function(t){return t instanceof fr?pr(t):new fr(t,void 0)}(n);if(""!=r.c)e&&yr(r,e+"."+r.c),mr(r,r.h);else{var i=Bt.location;r=function(t,e,n,r){var i=new fr(null,void 0);return t&&gr(i,t),e&&yr(i,e),n&&mr(i,n),r&&(i.g=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.V&&de(t.V,function(t,e){br(r,e,t)}),n=t.na,(e=t.A)&&n&&br(r,e,n),br(r,"VER",t.ha),gi(t,r),r}function Ii(t,e){if(e&&!t.C)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Yr(t.Na)).F=t.C,e}function xi(){}function Ai(){if(_e&&!(10<=Number(ke)))throw Error("Environmental error: no available transport.")}function ji(t,e){on.call(this),this.a=new ui(e),this.o=t,this.b=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.a.l=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.a&&(t?t["X-WebChannel-Client-Profile"]=e.a:t={"X-WebChannel-Client-Profile":e.a}),this.a.O=t,(t=e&&e.httpHeadersOverwriteParam)&&!oe(t)&&(this.a.i=t),this.m=e&&e.supportsCrossDomainXhr||!1,this.l=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!oe(e)&&(this.a.A=e,null!==(t=this.b)&&e in t&&e in(t=this.b)&&delete t[e]),this.f=new Pi(this)}function ki(t){Gn.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.c=t)?(t=this.c,this.data=null!==e&&t in e?e[t]:void 0):this.data=e}else this.data=t}function Ni(){Qn.call(this),this.status=1}function Pi(t){this.a=t}(Vt=Yr.prototype).ba=function(t,e,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.B+"; newUri="+t);e=e?e.toUpperCase():"GET",this.B=t,this.f="",this.h=0,this.u=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=function(t){var e;return(e=t.a)||(e=t.a={}),e}(this.H?this.H:Hn),this.a.onreadystatechange=$t(this.za,this);try{this.A=!0,this.a.open(e,String(t),!0),this.A=!1}catch(o){return void ti(this,o)}t=n||"";var i=new cr(this.headers);r&&ur(r,function(t,e){i.set(e,t)}),r=function(t){t:{for(var e=Zr,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(i.L()),n=Bt.FormData&&t instanceof Bt.FormData,!(0<=ee(Xr,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(t,e){this.a.setRequestHeader(e,t)},this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{ii(this),0<this.o&&((this.D=function(t){return _e&&je(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.a))?(this.a.timeout=this.o,this.a.ontimeout=$t(this.xa,this)):this.m=wn(this.xa,this.o,this)),this.l=!0,this.a.send(t),this.l=!1}catch(o){ti(this,o)}},Vt.xa=function(){void 0!==qt&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,sn(this,"timeout"),this.abort(8))},Vt.abort=function(t){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=t||7,sn(this,"complete"),sn(this,"abort"),ri(this))},Vt.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),ri(this,!0)),Yr.X.G.call(this)},Vt.za=function(){this.j||(this.A||this.l||this.g?ni(this):this.Ua())},Vt.Ua=function(){ni(this)},Vt.W=function(){try{return 2<oi(this)?this.a.status:-1}catch(ve){return-1}},Vt.$=function(){try{return this.a?this.a.responseText:""}catch(ve){return""}},Vt.Pa=function(t){if(this.a){var e=this.a.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),Kr(e)}},Vt.ua=function(){return this.h},Vt.Qa=function(){return"string"==typeof this.f?this.f:String(this.f)},(Vt=ui.prototype).ha=8,Vt.v=1,Vt.Ba=function(t){if(this.h)if(this.h=null,1==this.v){if(!t){this.R=Math.floor(1e5*Math.random()),t=this.R++;var e,n=new Kn(this,this.c,t,void 0),r=this.l;if(this.O&&(r?ge(r=fe(r),this.O):r=this.O),null===this.i&&(n.B=r),this.da)t:{for(var i=e=0;i<this.g.length;i++){var o=this.g[i];if(void 0===(o="__data__"in o.a&&"string"==typeof(o=o.a.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=i;break t}if(4096===e||i===this.g.length-1){e=i+1;break t}}e=1e3}else e=1e3;e=yi(this,n,e),br(i=pr(this.B),"RID",t),br(i,"CVER",22),this.A&&br(i,"X-HTTP-Session-Id",this.A),gi(this,i),this.i&&r&&si(i,this.i,r),qr(this.b,n),this.Ia&&br(i,"TYPE","init"),this.da?(br(i,"$req",e),br(i,"SID","null"),n.U=!0,Xn(n,i,null)):Xn(n,i,e),this.v=2}}else 3==this.v&&(t?pi(this,t):0==this.g.length||Fr(this.b)||pi(this))},Vt.Aa=function(){if(this.j=null,_i(this),this.U&&!(this.F||null==this.a||0>=this.N)){var t=2*this.N;this.c.info("BP detection timer enabled: "+t),this.s=Fn($t(this.Ta,this),t)}},Vt.Ta=function(){this.s&&(this.s=null,this.c.info("BP detection timeout reached."),this.c.info("Buffering proxy detected and switch to long-polling!"),this.H=!1,this.F=!0,Mn(10),li(this),_i(this))},Vt.Sa=function(){null!=this.m&&(this.m=null,li(this),vi(this),Mn(19))},Vt.Ya=function(t){t?(this.c.info("Successfully pinged google.com"),Mn(2)):(this.c.info("Failed to ping google.com"),Mn(1))},(Vt=xi.prototype).ta=function(){},Vt.sa=function(){},Vt.ra=function(){},Vt.qa=function(){},Vt.Ja=function(){},Ai.prototype.a=function(t,e){return new ji(t,e)},Zt(ji,on),ji.prototype.g=function(){this.a.f=this.f,this.m&&(this.a.C=!0);var t=this.a,e=this.o,n=this.b||void 0;Mn(0),t.fa=e,t.V=n||{},t.H=t.S,t.B=Ti(t,null,t.fa),fi(t)},ji.prototype.close=function(){ci(this.a)},ji.prototype.h=function(t){if("string"==typeof t){var e={};e.__data__=t,di(this.a,e)}else this.l?((e={}).__data__=un(t),di(this.a,e)):di(this.a,t)},ji.prototype.G=function(){this.a.f=null,delete this.f,ci(this.a),delete this.a,ji.X.G.call(this)},Zt(ki,Gn),Zt(Ni,Qn),Zt(Pi,xi),Pi.prototype.ta=function(){sn(this.a,"a")},Pi.prototype.sa=function(t){sn(this.a,new ki(t))},Pi.prototype.ra=function(t){sn(this.a,new Ni(t))},Pi.prototype.qa=function(){sn(this.a,"b")},Ai.prototype.createWebChannel=Ai.prototype.a,ji.prototype.send=ji.prototype.h,ji.prototype.open=ji.prototype.g,ji.prototype.close=ji.prototype.close,Vn.NO_ERROR=0,Vn.TIMEOUT=8,Vn.HTTP_ERROR=6,Un.COMPLETE="complete",Bn.EventType=zn,zn.OPEN="a",zn.CLOSE="b",zn.ERROR="c",zn.MESSAGE="d",on.prototype.listen=on.prototype.va,Yr.prototype.listenOnce=Yr.prototype.wa,Yr.prototype.getLastError=Yr.prototype.Qa,Yr.prototype.getLastErrorCode=Yr.prototype.ua,Yr.prototype.getStatus=Yr.prototype.W,Yr.prototype.getResponseJson=Yr.prototype.Pa,Yr.prototype.getResponseText=Yr.prototype.$,Yr.prototype.send=Yr.prototype.ba;var Ri=Vn,Di=Un,Mi=jn,Li=Bn,Fi=Yr,Vi=n("mrSG"),Ui=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.sequenceNumberHandler=function(t){return n.t(t)},this.i=function(t){return e.writeSequenceNumber(t)})}return t.prototype.t=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.i&&this.i(t),t},t}();Ui.o=-1;var qi=new Dt.b("@firebase/firestore");function Bi(){return qi.logLevel}function Hi(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(qi.logLevel<=Dt.a.DEBUG){var r=e.map(Qi);qi.debug.apply(qi,Object(Vi.f)(["Firestore (8.3.1): "+t],r))}}function zi(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(qi.logLevel<=Dt.a.ERROR){var r=e.map(Qi);qi.error.apply(qi,Object(Vi.f)(["Firestore (8.3.1): "+t],r))}}function Gi(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(qi.logLevel<=Dt.a.WARN){var r=e.map(Qi);qi.warn.apply(qi,Object(Vi.f)(["Firestore (8.3.1): "+t],r))}}function Qi(t){if("string"==typeof t)return t;try{return JSON.stringify(t)}catch(Zp){return t}}function Wi(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE (8.3.1) INTERNAL ASSERTION FAILED: "+t;throw zi(e),new Error(e)}function Ki(t,e){t||Wi()}function Yi(t,e){return t}function $i(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var Ji=function(){function t(){}return t.u=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=$i(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},t}();function Xi(t,e){return t<e?-1:t>e?1:0}function Zi(t,e,n){return t.length===e.length&&t.every(function(t,r){return n(t,e[r])})}function to(t){return t+"\0"}function eo(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function no(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function ro(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function io(t){return null==t}function oo(t){return 0===t&&1/t==-1/0}function so(t){return"number"==typeof t&&Number.isInteger(t)&&!oo(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var ao={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},uo=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return Object(Vi.c)(e,t),e}(Error),co=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&Wi(),void 0===n?n=t.length-e:n>t.length-e&&Wi(),this.segments=t,this.offset=e,this.len=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.len},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.comparator(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(function(t){n.push(t)}):n.push(e),this.construct(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.popFirst=function(t){return this.construct(this.segments,this.offset+(t=void 0===t?1:t),this.length-t)},t.prototype.popLast=function(){return this.construct(this.segments,this.offset,this.length-1)},t.prototype.firstSegment=function(){return this.segments[this.offset]},t.prototype.lastSegment=function(){return this.get(this.length-1)},t.prototype.get=function(t){return this.segments[this.offset+t]},t.prototype.isEmpty=function(){return 0===this.length},t.prototype.isPrefixOf=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.isImmediateParentOf=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},t.comparator=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),lo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Vi.c)(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.prototype.canonicalString=function(){return this.toArray().join("/")},e.prototype.toString=function(){return this.canonicalString()},e.fromString=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=[],i=0,o=t;i<o.length;i++){var s=o[i];if(s.indexOf("//")>=0)throw new uo(ao.INVALID_ARGUMENT,"Invalid segment ("+s+"). Paths must not contain // in them.");r.push.apply(r,s.split("/").filter(function(t){return t.length>0}))}return new e(r)},e.emptyPath=function(){return new e([])},e}(co),ho=/^[_a-zA-Z][_a-zA-Z0-9]*$/,fo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Vi.c)(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.isValidIdentifier=function(t){return ho.test(t)},e.prototype.canonicalString=function(){return this.toArray().map(function(t){return t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),e.isValidIdentifier(t)||(t="`"+t+"`"),t}).join(".")},e.prototype.toString=function(){return this.canonicalString()},e.prototype.isKeyField=function(){return 1===this.length&&"__name__"===this.get(0)},e.keyField=function(){return new e(["__name__"])},e.fromServerFormat=function(t){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new uo(ao.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},s=!1;i<t.length;){var a=t[i];if("\\"===a){if(i+1===t.length)throw new uo(ao.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var u=t[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new uo(ao.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else"`"===a?(s=!s,i++):"."!==a||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new uo(ao.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e.emptyPath=function(){return new e([])},e}(co),po=function(){function t(t){this.path=t}return t.fromPath=function(e){return new t(lo.fromString(e))},t.fromName=function(e){return new t(lo.fromString(e).popFirst(5))},t.prototype.hasCollectionId=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===lo.comparator(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.comparator=function(t,e){return lo.comparator(t.path,e.path)},t.isDocumentKey=function(t){return t.length%2==0},t.fromSegments=function(e){return new t(new lo(e.slice()))},t}(),go=function(){function t(t){this.binaryString=t}return t.fromBase64String=function(e){return new t(atob(e))},t.fromUint8Array=function(e){return new t(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(e))},t.prototype.toBase64=function(){return btoa(this.binaryString)},t.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.binaryString)},t.prototype.approximateByteSize=function(){return 2*this.binaryString.length},t.prototype.compareTo=function(t){return Xi(this.binaryString,t.binaryString)},t.prototype.isEqual=function(t){return this.binaryString===t.binaryString},t}();go.EMPTY_BYTE_STRING=new go("");var yo=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function mo(t){if(Ki(!!t),"string"==typeof t){var e=0,n=yo.exec(t);if(Ki(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:vo(t.seconds),nanos:vo(t.nanos)}}function vo(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function bo(t){return"string"==typeof t?go.fromBase64String(t):go.fromUint8Array(t)}var _o=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new uo(ao.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new uo(ao.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new uo(ao.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new uo(ao.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,1e6*(e-1e3*n))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype._compareTo=function(t){return this.seconds===t.seconds?Xi(this.nanoseconds,t.nanoseconds):Xi(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},t.prototype.valueOf=function(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}();function wo(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Co(t){var e=t.mapValue.fields.__previous_value__;return wo(e)?Co(e):e}function Oo(t){var e=mo(t.mapValue.fields.__local_write_time__.timestampValue);return new _o(e.seconds,e.nanos)}function Eo(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?wo(t)?4:10:Wi()}function So(t,e){var n=Eo(t);if(n!==Eo(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Oo(t).isEqual(Oo(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=mo(t.timestampValue),r=mo(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return bo(t.bytesValue).isEqual(bo(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return vo(t.geoPointValue.latitude)===vo(e.geoPointValue.latitude)&&vo(t.geoPointValue.longitude)===vo(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return vo(t.integerValue)===vo(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=vo(t.doubleValue),r=vo(e.doubleValue);return n===r?oo(n)===oo(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return Zi(t.arrayValue.values||[],e.arrayValue.values||[],So);case 10:return function(t,e){var n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(eo(n)!==eo(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!So(n[i],r[i])))return!1;return!0}(t,e);default:return Wi()}}function To(t,e){return void 0!==(t.values||[]).find(function(t){return So(t,e)})}function Io(t,e){var n=Eo(t),r=Eo(e);if(n!==r)return Xi(n,r);switch(n){case 0:return 0;case 1:return Xi(t.booleanValue,e.booleanValue);case 2:return function(t,e){var n=vo(t.integerValue||t.doubleValue),r=vo(e.integerValue||e.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(t,e);case 3:return xo(t.timestampValue,e.timestampValue);case 4:return xo(Oo(t),Oo(e));case 5:return Xi(t.stringValue,e.stringValue);case 6:return function(t,e){var n=bo(t),r=bo(e);return n.compareTo(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=Xi(n[i],r[i]);if(0!==o)return o}return Xi(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){var n=Xi(vo(t.latitude),vo(e.latitude));return 0!==n?n:Xi(vo(t.longitude),vo(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=Io(n[i],r[i]);if(o)return o}return Xi(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var s=0;s<r.length&&s<o.length;++s){var a=Xi(r[s],o[s]);if(0!==a)return a;var u=Io(n[r[s]],i[o[s]]);if(0!==u)return u}return Xi(r.length,o.length)}(t.mapValue,e.mapValue);default:throw Wi()}}function xo(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return Xi(t,e);var n=mo(t),r=mo(e),i=Xi(n.seconds,r.seconds);return 0!==i?i:Xi(n.nanos,r.nanos)}function Ao(t){return jo(t)}function jo(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){var e=mo(t);return"time("+e.seconds+","+e.nanos+")"}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?bo(t.bytesValue).toBase64():"referenceValue"in t?po.fromName(t.referenceValue).toString():"geoPointValue"in t?"geo("+(e=t.geoPointValue).latitude+","+e.longitude+")":"arrayValue"in t?function(t){for(var e="[",n=!0,r=0,i=t.values||[];r<i.length;r++)n?n=!1:e+=",",e+=jo(i[r]);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){for(var e="{",n=!0,r=0,i=Object.keys(t.fields||{}).sort();r<i.length;r++){var o=i[r];n?n=!1:e+=",",e+=o+":"+jo(t.fields[o])}return e+"}"}(t.mapValue):Wi();var e}function ko(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.canonicalString()}}function No(t){return!!t&&"integerValue"in t}function Po(t){return!!t&&"arrayValue"in t}function Ro(t){return!!t&&"nullValue"in t}function Do(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Mo(t){return!!t&&"mapValue"in t}var Lo=function(t,e){this.key=t,this.version=e},Fo=function(t){function e(e,n,r,i){var o=this;return(o=t.call(this,e,n)||this).objectValue=r,o.hasLocalMutations=!!i.hasLocalMutations,o.hasCommittedMutations=!!i.hasCommittedMutations,o}return Object(Vi.c)(e,t),e.prototype.field=function(t){return this.objectValue.field(t)},e.prototype.data=function(){return this.objectValue},e.prototype.toProto=function(){return this.objectValue.proto},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.hasLocalMutations===t.hasLocalMutations&&this.hasCommittedMutations===t.hasCommittedMutations&&this.objectValue.isEqual(t.objectValue)},e.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+this.objectValue.toString()+", {hasLocalMutations: "+this.hasLocalMutations+"}), {hasCommittedMutations: "+this.hasCommittedMutations+"})"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!1,configurable:!0}),e}(Lo),Vo=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n)||this).hasCommittedMutations=!(!r||!r.hasCommittedMutations),i}return Object(Vi.c)(e,t),e.prototype.toString=function(){return"NoDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.hasCommittedMutations},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.hasCommittedMutations===this.hasCommittedMutations&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(Lo),Uo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Vi.c)(e,t),e.prototype.toString=function(){return"UnknownDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return!0},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(Lo),qo=function(t,e,n,r,i,o,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.h=null};function Bo(t,e,n,r,i,o,s){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),new qo(t,e,n,r,i,o,s)}function Ho(t){var e=Yi(t);if(null===e.h){var n=e.path.canonicalString();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(function(t){return function(t){return t.field.canonicalString()+t.op.toString()+Ao(t.value)}(t)}).join(","),n+="|ob:",n+=e.orderBy.map(function(t){return function(t){return t.field.canonicalString()+t.dir}(t)}).join(","),io(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=ns(e.startAt)),e.endAt&&(n+="|ub:",n+=ns(e.endAt)),e.h=n}return e.h}function zo(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n=0;n<t.orderBy.length;n++)if(!is(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(var r=0;r<t.filters.length;r++)if((i=t.filters[r]).op!==(o=e.filters[r]).op||!i.field.isEqual(o.field)||!So(i.value,o.value))return!1;var i,o;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!ss(t.startAt,e.startAt)&&ss(t.endAt,e.endAt)}function Go(t){return po.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}var Qo=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).field=e,i.op=n,i.value=r,i}return Object(Vi.c)(e,t),e.create=function(t,n,r){return t.isKeyField()?"in"===n||"not-in"===n?this.l(t,n,r):new Wo(t,n,r):"array-contains"===n?new Jo(t,r):"in"===n?new Xo(t,r):"not-in"===n?new Zo(t,r):"array-contains-any"===n?new ts(t,r):new e(t,n,r)},e.l=function(t,e,n){return"in"===e?new Ko(t,n):new Yo(t,n)},e.prototype.matches=function(t){var e=t.field(this.field);return"!="===this.op?null!==e&&this.m(Io(e,this.value)):null!==e&&Eo(this.value)===Eo(e)&&this.m(Io(e,this.value))},e.prototype.m=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return Wi()}},e.prototype.g=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},e}(function(){}),Wo=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,r)||this).key=po.fromName(r.referenceValue),i}return Object(Vi.c)(e,t),e.prototype.matches=function(t){var e=po.comparator(t.key,this.key);return this.m(e)},e}(Qo),Ko=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"in",n)||this).keys=$o(0,n),r}return Object(Vi.c)(e,t),e.prototype.matches=function(t){return this.keys.some(function(e){return e.isEqual(t.key)})},e}(Qo),Yo=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"not-in",n)||this).keys=$o(0,n),r}return Object(Vi.c)(e,t),e.prototype.matches=function(t){return!this.keys.some(function(e){return e.isEqual(t.key)})},e}(Qo);function $o(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map(function(t){return po.fromName(t.referenceValue)})}var Jo=function(t){function e(e,n){return t.call(this,e,"array-contains",n)||this}return Object(Vi.c)(e,t),e.prototype.matches=function(t){var e=t.field(this.field);return Po(e)&&To(e.arrayValue,this.value)},e}(Qo),Xo=function(t){function e(e,n){return t.call(this,e,"in",n)||this}return Object(Vi.c)(e,t),e.prototype.matches=function(t){var e=t.field(this.field);return null!==e&&To(this.value.arrayValue,e)},e}(Qo),Zo=function(t){function e(e,n){return t.call(this,e,"not-in",n)||this}return Object(Vi.c)(e,t),e.prototype.matches=function(t){if(To(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var e=t.field(this.field);return null!==e&&!To(this.value.arrayValue,e)},e}(Qo),ts=function(t){function e(e,n){return t.call(this,e,"array-contains-any",n)||this}return Object(Vi.c)(e,t),e.prototype.matches=function(t){var e=this,n=t.field(this.field);return!(!Po(n)||!n.arrayValue.values)&&n.arrayValue.values.some(function(t){return To(e.value.arrayValue,t)})},e}(Qo),es=function(t,e){this.position=t,this.before=e};function ns(t){return(t.before?"b":"a")+":"+t.position.map(function(t){return Ao(t)}).join(",")}var rs=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function is(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function os(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],s=t.position[i];if(r=o.field.isKeyField()?po.comparator(po.fromName(s.referenceValue),n.key):Io(s,n.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function ss(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!So(t.position[n],e.position[n]))return!1;return!0}var as=function(t,e,n,r,i,o,s,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===s&&(s=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=s,this.endAt=a,this.p=null,this.T=null};function us(t,e,n,r,i,o,s,a){return new as(t,e,n,r,i,o,s,a)}function cs(t){return new as(t)}function ls(t){return!io(t.limit)&&"F"===t.limitType}function hs(t){return!io(t.limit)&&"L"===t.limitType}function ds(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function fs(t){for(var e=0,n=t.filters;e<n.length;e++){var r=n[e];if(r.g())return r.field}return null}function ps(t){return null!==t.collectionGroup}function gs(t){var e=Yi(t);if(null===e.p){e.p=[];var n=fs(e),r=ds(e);if(null!==n&&null===r)n.isKeyField()||e.p.push(new rs(n)),e.p.push(new rs(fo.keyField(),"asc"));else{for(var i=!1,o=0,s=e.explicitOrderBy;o<s.length;o++){var a=s[o];e.p.push(a),a.field.isKeyField()&&(i=!0)}if(!i){var u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.p.push(new rs(fo.keyField(),u))}}}return e.p}function ys(t){var e=Yi(t);if(!e.T)if("F"===e.limitType)e.T=Bo(e.path,e.collectionGroup,gs(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=gs(e);r<i.length;r++){var o=i[r];n.push(new rs(o.field,"desc"===o.dir?"asc":"desc"))}var s=e.endAt?new es(e.endAt.position,!e.endAt.before):null,a=e.startAt?new es(e.startAt.position,!e.startAt.before):null;e.T=Bo(e.path,e.collectionGroup,n,e.filters,e.limit,s,a)}return e.T}function ms(t,e,n){return new as(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function vs(t,e){return zo(ys(t),ys(e))&&t.limitType===e.limitType}function bs(t){return Ho(ys(t))+"|lt:"+t.limitType}function _s(t){return"Query(target="+function(t){var e=t.path.canonicalString();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=", filters: ["+t.filters.map(function(t){return(e=t).field.canonicalString()+" "+e.op+" "+Ao(e.value);var e}).join(", ")+"]"),io(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=", orderBy: ["+t.orderBy.map(function(t){return function(t){return t.field.canonicalString()+" ("+t.dir+")"}(t)}).join(", ")+"]"),t.startAt&&(e+=", startAt: "+ns(t.startAt)),t.endAt&&(e+=", endAt: "+ns(t.endAt)),"Target("+e+")"}(ys(t))+"; limitType="+t.limitType+")"}function ws(t,e){return function(t,e){var n=e.key.path;return null!==t.collectionGroup?e.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(n):po.isDocumentKey(t.path)?t.path.isEqual(n):t.path.isImmediateParentOf(n)}(t,e)&&function(t,e){for(var n=0,r=t.explicitOrderBy;n<r.length;n++){var i=r[n];if(!i.field.isKeyField()&&null===e.field(i.field))return!1}return!0}(t,e)&&function(t,e){for(var n=0,r=t.filters;n<r.length;n++)if(!r[n].matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!os(t.startAt,gs(t),e)||t.endAt&&os(t.endAt,gs(t),e))}(t,e)}function Cs(t){return function(e,n){for(var r=!1,i=0,o=gs(t);i<o.length;i++){var s=o[i],a=Os(s,e,n);if(0!==a)return a;r=r||s.field.isKeyField()}return 0}}function Os(t,e,n){var r=t.field.isKeyField()?po.comparator(e.key,n.key):function(t,e,n){var r=e.field(t),i=n.field(t);return null!==r&&null!==i?Io(r,i):Wi()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Wi()}}var Es=function(){function t(t){this.timestamp=t}return t.fromTimestamp=function(e){return new t(e)},t.min=function(){return new t(new _o(0,0))},t.prototype.compareTo=function(t){return this.timestamp._compareTo(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.toTimestamp=function(){return this.timestamp},t}(),Ss=function(){function t(t){this.fields=t,t.sort(fo.comparator)}return t.prototype.covers=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].isPrefixOf(t))return!0;return!1},t.prototype.isEqual=function(t){return Zi(this.fields,t.fields,function(t,e){return t.isEqual(e)})},t}(),Ts=function(){function t(t){this.proto=t}return t.empty=function(){return new t({mapValue:{}})},t.prototype.field=function(t){if(t.isEmpty())return this.proto;for(var e=this.proto,n=0;n<t.length-1;++n){if(!e.mapValue.fields)return null;if(!Mo(e=e.mapValue.fields[t.get(n)]))return null}return(e=(e.mapValue.fields||{})[t.lastSegment()])||null},t.prototype.isEqual=function(t){return So(this.proto,t.proto)},t}(),Is=function(){function t(t){void 0===t&&(t=Ts.empty()),this.I=t,this.A=new Map}return t.prototype.set=function(t,e){return this.R(t,e),this},t.prototype.delete=function(t){return this.R(t,null),this},t.prototype.R=function(t,e){for(var n=this.A,r=0;r<t.length-1;++r){var i=t.get(r),o=n.get(i);o instanceof Map?n=o:o&&10===Eo(o)?(o=new Map(Object.entries(o.mapValue.fields||{})),n.set(i,o),n=o):(o=new Map,n.set(i,o),n=o)}n.set(t.lastSegment(),e)},t.prototype.v=function(){var t=this.P(fo.emptyPath(),this.A);return null!=t?new Ts(t):this.I},t.prototype.P=function(t,e){var n=this,r=!1,i=this.I.field(t),o=Mo(i)?Object.assign({},i.mapValue.fields):{};return e.forEach(function(e,i){if(e instanceof Map){var s=n.P(t.child(i),e);null!=s&&(o[i]=s,r=!0)}else null!==e?(o[i]=e,r=!0):o.hasOwnProperty(i)&&(delete o[i],r=!0)}),r?{mapValue:{fields:o}}:null},t}();function xs(t){var e=[];return no(t.fields||{},function(t,n){var r=new fo([t]);if(Mo(n)){var i=xs(n.mapValue).fields;if(0===i.length)e.push(r);else for(var o=0,s=i;o<s.length;o++)e.push(r.child(s[o]))}else e.push(r)}),new Ss(e)}function As(t,e){if(t.V){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:oo(e)?"-0":e}}function js(t){return{integerValue:""+t}}function ks(t,e){return so(e)?js(e):As(t,e)}var Ns=function(){this._=void 0};function Ps(t,e,n){return t instanceof Ms?function(t,e){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof Ls?Fs(t,e):t instanceof Vs?Us(t,e):function(t,e){var n=Ds(t,e),r=Bs(n)+Bs(t.S);return No(n)&&No(t.S)?js(r):As(t.D,r)}(t,e)}function Rs(t,e,n){return t instanceof Ls?Fs(t,e):t instanceof Vs?Us(t,e):n}function Ds(t,e){return t instanceof qs?No(n=e)||function(t){return!!t&&"doubleValue"in t}(n)?e:{integerValue:0}:null;var n}var Ms=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Vi.c)(e,t),e}(Ns),Ls=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return Object(Vi.c)(e,t),e}(Ns);function Fs(t,e){for(var n=Hs(e),r=function(t){n.some(function(e){return So(e,t)})||n.push(t)},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var Vs=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return Object(Vi.c)(e,t),e}(Ns);function Us(t,e){for(var n=Hs(e),r=function(t){n=n.filter(function(e){return!So(e,t)})},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var qs=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).D=e,r.S=n,r}return Object(Vi.c)(e,t),e}(Ns);function Bs(t){return vo(t.integerValue||t.doubleValue)}function Hs(t){return Po(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var zs=function(t,e){this.field=t,this.transform=e},Gs=function(t,e){this.version=t,this.transformResults=e},Qs=function(){function t(t,e){this.updateTime=t,this.exists=e}return t.none=function(){return new t},t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},t}();function Ws(t,e){return void 0!==t.updateTime?e instanceof Fo&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e instanceof Fo}var Ks=function(){};function Ys(t,e,n){return t instanceof ta?function(t,e,n){var r=t.value,i=ra(t.fieldTransforms,e,n.transformResults);return r=oa(t.fieldTransforms,r,i),new Fo(t.key,n.version,r,{hasCommittedMutations:!0})}(t,e,n):t instanceof ea?function(t,e,n){if(!Ws(t.precondition,e))return new Uo(t.key,n.version);var r=na(t,e,ra(t.fieldTransforms,e,n.transformResults));return new Fo(t.key,n.version,r,{hasCommittedMutations:!0})}(t,e,n):function(t,e,n){return new Vo(t.key,n.version,{hasCommittedMutations:!0})}(t,0,n)}function $s(t,e,n){return t instanceof ta?function(t,e,n){if(!Ws(t.precondition,e))return e;var r=t.value,i=ia(t.fieldTransforms,n,e);r=oa(t.fieldTransforms,r,i);var o=Zs(e);return new Fo(t.key,o,r,{hasLocalMutations:!0})}(t,e,n):t instanceof ea?function(t,e,n){if(!Ws(t.precondition,e))return e;var r=Zs(e),i=na(t,e,ia(t.fieldTransforms,n,e));return new Fo(t.key,r,i,{hasLocalMutations:!0})}(t,e,n):function(t,e){return Ws(t.precondition,e)?new Vo(t.key,Es.min()):e}(t,e)}function Js(t,e){return function(t,e){for(var n=null,r=0,i=t;r<i.length;r++){var o=i[r],s=e instanceof Fo?e.field(o.field):void 0,a=Ds(o.transform,s||null);null!=a&&(n=null==n?(new Is).set(o.field,a):n.set(o.field,a))}return n?n.v():null}(t.fieldTransforms,e)}function Xs(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(t,e){return void 0===t&&void 0===e||!(!t||!e)&&Zi(t,e,function(t,e){return function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof Ls&&e instanceof Ls||t instanceof Vs&&e instanceof Vs?Zi(t.elements,e.elements,So):t instanceof qs&&e instanceof qs?So(t.S,e.S):t instanceof Ms&&e instanceof Ms}(t.transform,e.transform)}(t,e)})}(t.fieldTransforms,e.fieldTransforms)&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}function Zs(t){return t instanceof Fo?t.version:Es.min()}var ta=function(t){function e(e,n,r,i){void 0===i&&(i=[]);var o=this;return(o=t.call(this)||this).key=e,o.value=n,o.precondition=r,o.fieldTransforms=i,o.type=0,o}return Object(Vi.c)(e,t),e}(Ks),ea=function(t){function e(e,n,r,i,o){void 0===o&&(o=[]);var s=this;return(s=t.call(this)||this).key=e,s.data=n,s.fieldMask=r,s.precondition=i,s.fieldTransforms=o,s.type=1,s}return Object(Vi.c)(e,t),e}(Ks);function na(t,e,n){var r;return r=function(t,e){var n=new Is(e);return t.fieldMask.fields.forEach(function(e){if(!e.isEmpty()){var r=t.data.field(e);null!==r?n.set(e,r):n.delete(e)}}),n.v()}(t,r=e instanceof Fo?e.data():Ts.empty()),oa(t.fieldTransforms,r,n)}function ra(t,e,n){var r=[];Ki(t.length===n.length);for(var i=0;i<n.length;i++){var o=t[i],s=o.transform,a=null;e instanceof Fo&&(a=e.field(o.field)),r.push(Rs(s,a,n[i]))}return r}function ia(t,e,n){for(var r=[],i=0,o=t;i<o.length;i++){var s=o[i],a=s.transform,u=null;n instanceof Fo&&(u=n.field(s.field)),r.push(Ps(a,u,e))}return r}function oa(t,e,n){for(var r=new Is(e),i=0;i<t.length;i++)r.set(t[i].field,n[i]);return r.v()}var sa,aa,ua=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=2,r.fieldTransforms=[],r}return Object(Vi.c)(e,t),e}(Ks),ca=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=3,r.fieldTransforms=[],r}return Object(Vi.c)(e,t),e}(Ks),la=function(t){this.count=t};function ha(t){switch(t){case ao.OK:return Wi();case ao.CANCELLED:case ao.UNKNOWN:case ao.DEADLINE_EXCEEDED:case ao.RESOURCE_EXHAUSTED:case ao.INTERNAL:case ao.UNAVAILABLE:case ao.UNAUTHENTICATED:return!1;case ao.INVALID_ARGUMENT:case ao.NOT_FOUND:case ao.ALREADY_EXISTS:case ao.PERMISSION_DENIED:case ao.FAILED_PRECONDITION:case ao.ABORTED:case ao.OUT_OF_RANGE:case ao.UNIMPLEMENTED:case ao.DATA_LOSS:return!0;default:return Wi()}}function da(t){if(void 0===t)return zi("GRPC error has no .code"),ao.UNKNOWN;switch(t){case sa.OK:return ao.OK;case sa.CANCELLED:return ao.CANCELLED;case sa.UNKNOWN:return ao.UNKNOWN;case sa.DEADLINE_EXCEEDED:return ao.DEADLINE_EXCEEDED;case sa.RESOURCE_EXHAUSTED:return ao.RESOURCE_EXHAUSTED;case sa.INTERNAL:return ao.INTERNAL;case sa.UNAVAILABLE:return ao.UNAVAILABLE;case sa.UNAUTHENTICATED:return ao.UNAUTHENTICATED;case sa.INVALID_ARGUMENT:return ao.INVALID_ARGUMENT;case sa.NOT_FOUND:return ao.NOT_FOUND;case sa.ALREADY_EXISTS:return ao.ALREADY_EXISTS;case sa.PERMISSION_DENIED:return ao.PERMISSION_DENIED;case sa.FAILED_PRECONDITION:return ao.FAILED_PRECONDITION;case sa.ABORTED:return ao.ABORTED;case sa.OUT_OF_RANGE:return ao.OUT_OF_RANGE;case sa.UNIMPLEMENTED:return ao.UNIMPLEMENTED;case sa.DATA_LOSS:return ao.DATA_LOSS;default:return Wi()}}(aa=sa||(sa={}))[aa.OK=0]="OK",aa[aa.CANCELLED=1]="CANCELLED",aa[aa.UNKNOWN=2]="UNKNOWN",aa[aa.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",aa[aa.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",aa[aa.NOT_FOUND=5]="NOT_FOUND",aa[aa.ALREADY_EXISTS=6]="ALREADY_EXISTS",aa[aa.PERMISSION_DENIED=7]="PERMISSION_DENIED",aa[aa.UNAUTHENTICATED=16]="UNAUTHENTICATED",aa[aa.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",aa[aa.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",aa[aa.ABORTED=10]="ABORTED",aa[aa.OUT_OF_RANGE=11]="OUT_OF_RANGE",aa[aa.UNIMPLEMENTED=12]="UNIMPLEMENTED",aa[aa.INTERNAL=13]="INTERNAL",aa[aa.UNAVAILABLE=14]="UNAVAILABLE",aa[aa.DATA_LOSS=15]="DATA_LOSS";var fa=function(){function t(t,e){this.comparator=t,this.root=e||ga.EMPTY}return t.prototype.insert=function(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,ga.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ga.BLACK,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.isEmpty();){var n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.isEmpty();){var r=this.comparator(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),t.prototype.minKey=function(){return this.root.minKey()},t.prototype.maxKey=function(){return this.root.maxKey()},t.prototype.inorderTraversal=function(t){return this.root.inorderTraversal(t)},t.prototype.forEach=function(t){this.inorderTraversal(function(e,n){return t(e,n),!1})},t.prototype.toString=function(){var t=[];return this.inorderTraversal(function(e,n){return t.push(e+":"+n),!1}),"{"+t.join(", ")+"}"},t.prototype.reverseTraversal=function(t){return this.root.reverseTraversal(t)},t.prototype.getIterator=function(){return new pa(this.root,null,this.comparator,!1)},t.prototype.getIteratorFrom=function(t){return new pa(this.root,t,this.comparator,!1)},t.prototype.getReverseIterator=function(){return new pa(this.root,null,this.comparator,!0)},t.prototype.getReverseIteratorFrom=function(t){return new pa(this.root,t,this.comparator,!0)},t}(),pa=function(){function t(t,e,n,r){this.isReverse=r,this.nodeStack=[];for(var i=1;!t.isEmpty();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(0===i){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return t.prototype.getNext=function(){var t=this.nodeStack.pop(),e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e},t.prototype.hasNext=function(){return this.nodeStack.length>0},t.prototype.peek=function(){if(0===this.nodeStack.length)return null;var t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}},t}(),ga=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},t.prototype.minKey=function(){return this.min().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp()},t.prototype.removeMin=function(){if(this.left.isEmpty())return t.EMPTY;var e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),(e=e.copy(null,null,null,e.left.removeMin(),null)).fixUp()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(e,i.key)){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()},t.prototype.isRed=function(){return this.color},t.prototype.fixUp=function(){var t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t},t.prototype.moveRedLeft=function(){var t=this.colorFlip();return t.right.left.isRed()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight())).rotateLeft()).colorFlip()),t},t.prototype.moveRedRight=function(){var t=this.colorFlip();return t.left.left.isRed()&&(t=(t=t.rotateRight()).colorFlip()),t},t.prototype.rotateLeft=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth=function(){var t=this.check();return Math.pow(2,t)<=this.size+1},t.prototype.check=function(){if(this.isRed()&&this.left.isRed())throw Wi();if(this.right.isRed())throw Wi();var t=this.left.check();if(t!==this.right.check())throw Wi();return t+(this.isRed()?0:1)},t}();ga.EMPTY=null,ga.RED=!0,ga.BLACK=!1,ga.EMPTY=new(function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw Wi()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw Wi()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw Wi()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw Wi()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw Wi()},enumerable:!1,configurable:!0}),t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new ga(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.isRed=function(){return!1},t.prototype.checkMaxDepth=function(){return!0},t.prototype.check=function(){return 0},t}());var ya=function(){function t(t){this.comparator=t,this.data=new fa(this.comparator)}return t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.minKey()},t.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.inorderTraversal(function(e,n){return t(e),!1})},t.prototype.forEachInRange=function(t,e){for(var n=this.data.getIteratorFrom(t[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}},t.prototype.forEachWhile=function(t,e){var n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return},t.prototype.firstAfterOrEqual=function(t){var e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null},t.prototype.getIterator=function(){return new ma(this.data.getIterator())},t.prototype.getIteratorFrom=function(t){return new ma(this.data.getIteratorFrom(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).insert(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.isEmpty=function(){return this.data.isEmpty()},t.prototype.unionWith=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach(function(t){e=e.add(t)}),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.getIterator(),r=e.data.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0},t.prototype.toArray=function(){var t=[];return this.forEach(function(e){t.push(e)}),t},t.prototype.toString=function(){var t=[];return this.forEach(function(e){return t.push(e)}),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.comparator);return n.data=e,n},t}(),ma=function(){function t(t){this.iter=t}return t.prototype.getNext=function(){return this.iter.getNext().key},t.prototype.hasNext=function(){return this.iter.hasNext()},t}(),va=new fa(po.comparator);function ba(){return va}function _a(){return ba()}var wa=new fa(po.comparator);function Ca(){return wa}var Oa=new fa(po.comparator);function Ea(){return Oa}var Sa=new ya(po.comparator);function Ta(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=Sa,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var Ia=new ya(Xi);function xa(){return Ia}var Aa=function(){function t(t,e,n,r,i){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}return t.createSynthesizedRemoteEventForCurrentChange=function(e,n){var r=new Map;return r.set(e,ja.createSynthesizedTargetChangeForCurrentChange(e,n)),new t(Es.min(),r,xa(),ba(),Ta())},t}(),ja=function(){function t(t,e,n,r,i){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}return t.createSynthesizedTargetChangeForCurrentChange=function(e,n){return new t(go.EMPTY_BYTE_STRING,n,Ta(),Ta(),Ta())},t}(),ka=function(t,e,n,r){this.C=t,this.removedTargetIds=e,this.key=n,this.N=r},Na=function(t,e){this.targetId=t,this.$=e},Pa=function(t,e,n,r){void 0===n&&(n=go.EMPTY_BYTE_STRING),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},Ra=function(){function t(){this.F=0,this.O=La(),this.k=go.EMPTY_BYTE_STRING,this.M=!1,this.L=!0}return Object.defineProperty(t.prototype,"current",{get:function(){return this.M},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.k},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"B",{get:function(){return 0!==this.F},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"q",{get:function(){return this.L},enumerable:!1,configurable:!0}),t.prototype.U=function(t){t.approximateByteSize()>0&&(this.L=!0,this.k=t)},t.prototype.K=function(){var t=Ta(),e=Ta(),n=Ta();return this.O.forEach(function(r,i){switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:Wi()}}),new ja(this.k,this.M,t,e,n)},t.prototype.W=function(){this.L=!1,this.O=La()},t.prototype.j=function(t,e){this.L=!0,this.O=this.O.insert(t,e)},t.prototype.G=function(t){this.L=!0,this.O=this.O.remove(t)},t.prototype.H=function(){this.F+=1},t.prototype.J=function(){this.F-=1},t.prototype.Y=function(){this.L=!0,this.M=!0},t}(),Da=function(){function t(t){this.X=t,this.Z=new Map,this.tt=ba(),this.et=Ma(),this.nt=new ya(Xi)}return t.prototype.st=function(t){for(var e=0,n=t.C;e<n.length;e++){var r=n[e];t.N instanceof Fo?this.it(r,t.N):t.N instanceof Vo&&this.rt(r,t.key,t.N)}for(var i=0,o=t.removedTargetIds;i<o.length;i++)this.rt(r=o[i],t.key,t.N)},t.prototype.ot=function(t){var e=this;this.forEachTarget(t,function(n){var r=e.ct(n);switch(t.state){case 0:e.at(n)&&r.U(t.resumeToken);break;case 1:r.J(),r.B||r.W(),r.U(t.resumeToken);break;case 2:r.J(),r.B||e.removeTarget(n);break;case 3:e.at(n)&&(r.Y(),r.U(t.resumeToken));break;case 4:e.at(n)&&(e.ut(n),r.U(t.resumeToken));break;default:Wi()}})},t.prototype.forEachTarget=function(t,e){var n=this;t.targetIds.length>0?t.targetIds.forEach(e):this.Z.forEach(function(t,r){n.at(r)&&e(r)})},t.prototype.ht=function(t){var e=t.targetId,n=t.$.count,r=this.lt(e);if(r){var i=r.target;if(Go(i))if(0===n){var o=new po(i.path);this.rt(e,o,new Vo(o,Es.min()))}else Ki(1===n);else this.ft(e)!==n&&(this.ut(e),this.nt=this.nt.add(e))}},t.prototype.dt=function(t){var e=this,n=new Map;this.Z.forEach(function(r,i){var o=e.lt(i);if(o){if(r.current&&Go(o.target)){var s=new po(o.target.path);null!==e.tt.get(s)||e.wt(i,s)||e.rt(i,s,new Vo(s,t))}r.q&&(n.set(i,r.K()),r.W())}});var r=Ta();this.et.forEach(function(t,n){var i=!0;n.forEachWhile(function(t){var n=e.lt(t);return!n||2===n.purpose||(i=!1,!1)}),i&&(r=r.add(t))});var i=new Aa(t,n,this.nt,this.tt,r);return this.tt=ba(),this.et=Ma(),this.nt=new ya(Xi),i},t.prototype.it=function(t,e){if(this.at(t)){var n=this.wt(t,e.key)?2:0;this.ct(t).j(e.key,n),this.tt=this.tt.insert(e.key,e),this.et=this.et.insert(e.key,this._t(e.key).add(t))}},t.prototype.rt=function(t,e,n){if(this.at(t)){var r=this.ct(t);this.wt(t,e)?r.j(e,1):r.G(e),this.et=this.et.insert(e,this._t(e).delete(t)),n&&(this.tt=this.tt.insert(e,n))}},t.prototype.removeTarget=function(t){this.Z.delete(t)},t.prototype.ft=function(t){var e=this.ct(t).K();return this.X.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size},t.prototype.H=function(t){this.ct(t).H()},t.prototype.ct=function(t){var e=this.Z.get(t);return e||(e=new Ra,this.Z.set(t,e)),e},t.prototype._t=function(t){var e=this.et.get(t);return e||(e=new ya(Xi),this.et=this.et.insert(t,e)),e},t.prototype.at=function(t){var e=null!==this.lt(t);return e||Hi("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.lt=function(t){var e=this.Z.get(t);return e&&e.B?null:this.X.yt(t)},t.prototype.ut=function(t){var e=this;this.Z.set(t,new Ra),this.X.getRemoteKeysForTarget(t).forEach(function(n){e.rt(t,n,null)})},t.prototype.wt=function(t,e){return this.X.getRemoteKeysForTarget(t).has(e)},t}();function Ma(){return new fa(po.comparator)}function La(){return new fa(po.comparator)}var Fa={asc:"ASCENDING",desc:"DESCENDING"},Va={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Ua=function(t,e){this.databaseId=t,this.V=e};function qa(t,e){return t.V?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function Ba(t,e){return t.V?e.toBase64():e.toUint8Array()}function Ha(t,e){return qa(t,e.toTimestamp())}function za(t){return Ki(!!t),Es.fromTimestamp(function(t){var e=mo(t);return new _o(e.seconds,e.nanos)}(t))}function Ga(t,e){return function(t){return new lo(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).canonicalString()}function Qa(t){var e=lo.fromString(t);return Ki(yu(e)),e}function Wa(t,e){return Ga(t.databaseId,e.path)}function Ka(t,e){var n=Qa(e);if(n.get(1)!==t.databaseId.projectId)throw new uo(ao.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new uo(ao.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new po(Xa(n))}function Ya(t,e){return Ga(t.databaseId,e)}function $a(t){var e=Qa(t);return 4===e.length?lo.emptyPath():Xa(e)}function Ja(t){return new lo(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Xa(t){return Ki(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function Za(t,e,n){return{name:Wa(t,e),fields:n.proto.mapValue.fields}}function tu(t,e,n){var r=Ka(t,e.name),i=za(e.updateTime),o=new Ts({mapValue:{fields:e.fields}});return new Fo(r,i,o,{hasCommittedMutations:!!n})}function eu(t,e){var n;if(e instanceof ta)n={update:Za(t,e.key,e.value)};else if(e instanceof ua)n={delete:Wa(t,e.key)};else if(e instanceof ea)n={update:Za(t,e.key,e.data),updateMask:gu(e.fieldMask)};else{if(!(e instanceof ca))return Wi();n={verify:Wa(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(function(t){return function(t,e){var n=e.transform;if(n instanceof Ms)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Ls)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Vs)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof qs)return{fieldPath:e.field.canonicalString(),increment:n.S};throw Wi()}(0,t)})),e.precondition.isNone||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:Ha(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:Wi()}(t,e.precondition)),n}function nu(t,e){var n=e.currentDocument?function(t){return void 0!==t.updateTime?Qs.updateTime(za(t.updateTime)):void 0!==t.exists?Qs.exists(t.exists):Qs.none()}(e.currentDocument):Qs.none(),r=e.updateTransforms?e.updateTransforms.map(function(e){return function(t,e){var n=null;"setToServerValue"in e?(Ki("REQUEST_TIME"===e.setToServerValue),n=new Ms):"appendMissingElements"in e?n=new Ls(e.appendMissingElements.values||[]):"removeAllFromArray"in e?n=new Vs(e.removeAllFromArray.values||[]):"increment"in e?n=new qs(t,e.increment):Wi();var r=fo.fromServerFormat(e.fieldPath);return new zs(r,n)}(t,e)}):[];if(e.update){var i=Ka(t,e.update.name),o=new Ts({mapValue:{fields:e.update.fields}});if(e.updateMask){var s=function(t){return new Ss((t.fieldPaths||[]).map(function(t){return fo.fromServerFormat(t)}))}(e.updateMask);return new ea(i,o,s,n,r)}return new ta(i,o,n,r)}if(e.delete){var a=Ka(t,e.delete);return new ua(a,n)}if(e.verify){var u=Ka(t,e.verify);return new ca(u,n)}return Wi()}function ru(t,e){return{documents:[Ya(t,e.path)]}}function iu(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=Ya(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=Ya(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(t){if(0!==t.length){var e=t.map(function(t){return function(t){if("=="===t.op){if(Do(t.value))return{unaryFilter:{field:hu(t.field),op:"IS_NAN"}};if(Ro(t.value))return{unaryFilter:{field:hu(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(Do(t.value))return{unaryFilter:{field:hu(t.field),op:"IS_NOT_NAN"}};if(Ro(t.value))return{unaryFilter:{field:hu(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:hu(t.field),op:lu(t.op),value:t.value}}}(t)});return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}}(e.filters);i&&(n.structuredQuery.where=i);var o=function(t){if(0!==t.length)return t.map(function(t){return function(t){return{field:hu(t.field),direction:cu(t.dir)}}(t)})}(e.orderBy);o&&(n.structuredQuery.orderBy=o);var s=function(t,e){return t.V||io(e)?e:{value:e}}(t,e.limit);return null!==s&&(n.structuredQuery.limit=s),e.startAt&&(n.structuredQuery.startAt=au(e.startAt)),e.endAt&&(n.structuredQuery.endAt=au(e.endAt)),n}function ou(t){var e=$a(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){Ki(1===r);var o=n.from[0];o.allDescendants?i=o.collectionId:e=e.child(o.collectionId)}var s=[];n.where&&(s=su(n.where));var a=[];n.orderBy&&(a=n.orderBy.map(function(t){return function(t){return new rs(du(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t)}));var u=null;n.limit&&(u=function(t){var e;return io(e="object"==typeof t?t.value:t)?null:e}(n.limit));var c=null;n.startAt&&(c=uu(n.startAt));var l=null;return n.endAt&&(l=uu(n.endAt)),us(e,i,a,s,u,"F",c,l)}function su(t){return t?void 0!==t.unaryFilter?[pu(t)]:void 0!==t.fieldFilter?[fu(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map(function(t){return su(t)}).reduce(function(t,e){return t.concat(e)}):Wi():[]}function au(t){return{before:t.before,values:t.position}}function uu(t){return new es(t.values||[],!!t.before)}function cu(t){return Fa[t]}function lu(t){return Va[t]}function hu(t){return{fieldPath:t.canonicalString()}}function du(t){return fo.fromServerFormat(t.fieldPath)}function fu(t){return Qo.create(du(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return Wi()}}(t.fieldFilter.op),t.fieldFilter.value)}function pu(t){switch(t.unaryFilter.op){case"IS_NAN":var e=du(t.unaryFilter.field);return Qo.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=du(t.unaryFilter.field);return Qo.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=du(t.unaryFilter.field);return Qo.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=du(t.unaryFilter.field);return Qo.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return Wi()}}function gu(t){var e=[];return t.fields.forEach(function(t){return e.push(t.canonicalString())}),{fieldPaths:e}}function yu(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}function mu(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=bu(e)),e=vu(t.get(n),e);return bu(e)}function vu(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=o}}return n}function bu(t){return t+"\x01\x01"}function _u(t){var e=t.length;if(Ki(e>=2),2===e)return Ki("\x01"===t.charAt(0)&&"\x01"===t.charAt(1)),lo.emptyPath();for(var n=e-2,r=[],i="",o=0;o<e;){var s=t.indexOf("\x01",o);switch((s<0||s>n)&&Wi(),t.charAt(s+1)){case"\x01":var a=t.substring(o,s),u=void 0;0===i.length?u=a:(u=i+=a,i=""),r.push(u);break;case"\x10":i+=t.substring(o,s),i+="\0";break;case"\x11":i+=t.substring(o,s+1);break;default:Wi()}o=s+2}return new lo(r)}var wu=function(t,e){this.seconds=t,this.nanoseconds=e},Cu=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};Cu.store="owner",Cu.key="owner";var Ou=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};Ou.store="mutationQueues",Ou.keyPath="userId";var Eu=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};Eu.store="mutations",Eu.keyPath="batchId",Eu.userMutationsIndex="userMutationsIndex",Eu.userMutationsKeyPath=["userId","batchId"];var Su=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,mu(e)]},t.key=function(t,e,n){return[t,mu(e),n]},t}();Su.store="documentMutations",Su.PLACEHOLDER=new Su;var Tu=function(t,e){this.path=t,this.readTime=e},Iu=function(t,e){this.path=t,this.version=e},xu=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};xu.store="remoteDocuments",xu.readTimeIndex="readTimeIndex",xu.readTimeIndexPath="readTime",xu.collectionReadTimeIndex="collectionReadTimeIndex",xu.collectionReadTimeIndexPath=["parentPath","readTime"];var Au=function(t){this.byteSize=t};Au.store="remoteDocumentGlobal",Au.key="remoteDocumentGlobalKey";var ju=function(t,e,n,r,i,o,s){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=s};ju.store="targets",ju.keyPath="targetId",ju.queryTargetsIndexName="queryTargetsIndex",ju.queryTargetsKeyPath=["canonicalId","targetId"];var ku=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};ku.store="targetDocuments",ku.keyPath=["targetId","path"],ku.documentTargetsIndex="documentTargetsIndex",ku.documentTargetsKeyPath=["path","targetId"];var Nu=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};Nu.key="targetGlobalKey",Nu.store="targetGlobal";var Pu=function(t,e){this.collectionId=t,this.parent=e};Pu.store="collectionParents",Pu.keyPath=["collectionId","parent"];var Ru=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};Ru.store="clientMetadata",Ru.keyPath="clientId";var Du=function(t,e,n){this.bundleId=t,this.createTime=e,this.version=n};Du.store="bundles",Du.keyPath="bundleId";var Mu=function(t,e,n){this.name=t,this.readTime=e,this.bundledQuery=n};Mu.store="namedQueries",Mu.keyPath="name";var Lu=Object(Vi.f)(Object(Vi.f)([],Object(Vi.f)(Object(Vi.f)([],Object(Vi.f)(Object(Vi.f)([],Object(Vi.f)(Object(Vi.f)([],[Ou.store,Eu.store,Su.store,xu.store,ju.store,Cu.store,Nu.store,ku.store]),[Ru.store])),[Au.store])),[Pu.store])),[Du.store,Mu.store]),Fu="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Vu=function(){function t(){this.onCommittedListeners=[]}return t.prototype.addOnCommittedListener=function(t){this.onCommittedListeners.push(t)},t.prototype.raiseOnCommittedEvent=function(){this.onCommittedListeners.forEach(function(t){return t()})},t}(),Uu=function(){var t=this;this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})},qu=function(){function t(t){var e=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(function(t){e.isDone=!0,e.result=t,e.nextCallback&&e.nextCallback(t)},function(t){e.isDone=!0,e.error=t,e.catchCallback&&e.catchCallback(t)})}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.callbackAttached&&Wi(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t(function(t,i){r.nextCallback=function(n){r.wrapSuccess(e,n).next(t,i)},r.catchCallback=function(e){r.wrapFailure(n,e).next(t,i)}})},t.prototype.toPromise=function(){var t=this;return new Promise(function(e,n){t.next(e,n)})},t.prototype.wrapUserFunction=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(e){return t.reject(e)}},t.prototype.wrapSuccess=function(e,n){return e?this.wrapUserFunction(function(){return e(n)}):t.resolve(n)},t.prototype.wrapFailure=function(e,n){return e?this.wrapUserFunction(function(){return e(n)}):t.reject(n)},t.resolve=function(e){return new t(function(t,n){t(e)})},t.reject=function(e){return new t(function(t,n){n(e)})},t.waitFor=function(e){return new t(function(t,n){var r=0,i=0,o=!1;e.forEach(function(e){++r,e.next(function(){++i,o&&i===r&&t()},function(t){return n(t)})}),o=!0,i===r&&t()})},t.or=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next(function(n){return n?t.resolve(n):e()})},i=0,o=e;i<o.length;i++)r(o[i]);return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach(function(t,i){r.push(e.call(n,t,i))}),this.waitFor(r)},t}(),Bu=function(){function t(t,e){var n=this;this.action=t,this.transaction=e,this.aborted=!1,this.gt=new Uu,this.transaction.oncomplete=function(){n.gt.resolve()},this.transaction.onabort=function(){e.error?n.gt.reject(new Gu(t,e.error)):n.gt.resolve()},this.transaction.onerror=function(e){var r=$u(e.target.error);n.gt.reject(new Gu(t,r))}}return t.open=function(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(e){throw new Gu(n,e)}},Object.defineProperty(t.prototype,"Et",{get:function(){return this.gt.promise},enumerable:!1,configurable:!0}),t.prototype.abort=function(t){t&&this.gt.reject(t),this.aborted||(Hi("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return new Wu(e)},t}(),Hu=function(){function t(e,n,r){this.name=e,this.version=n,this.Tt=r,12.2===t.It(Object(Mt.m)())&&zi("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.delete=function(t){return Hi("SimpleDb","Removing database:",t),Ku(window.indexedDB.deleteDatabase(t)).toPromise()},t.At=function(){if("undefined"==typeof indexedDB)return!1;if(t.Rt())return!0;var e=Object(Mt.m)(),n=t.It(e),r=0<n&&n<10,i=t.bt(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)},t.Rt=function(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.vt)},t.Pt=function(t,e){return t.store(e)},t.It=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},t.bt=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},t.prototype.Vt=function(t){return Object(Vi.b)(this,void 0,void 0,function(){var e,n=this;return Object(Vi.d)(this,function(r){switch(r.label){case 0:return this.db?[3,2]:(Hi("SimpleDb","Opening database:",this.name),e=this,[4,new Promise(function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){e(t.target.result)},i.onblocked=function(){r(new Gu(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;r("VersionError"===n.name?new uo(ao.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):new Gu(t,n))},i.onupgradeneeded=function(t){Hi("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',t.oldVersion),n.Tt.St(t.target.result,i.transaction,t.oldVersion,n.version).next(function(){Hi("SimpleDb","Database upgrade to version "+n.version+" complete")})}})]);case 1:e.db=r.sent(),r.label=2;case 2:return[2,(this.Dt&&(this.db.onversionchange=function(t){return n.Dt(t)}),this.db)]}})})},t.prototype.Ct=function(t){this.Dt=t,this.db&&(this.db.onversionchange=function(e){return t(e)})},t.prototype.runTransaction=function(t,e,n,r){return Object(Vi.b)(this,void 0,void 0,function(){var i,o,s,a,u;return Object(Vi.d)(this,function(c){switch(c.label){case 0:i="readonly"===e,o=0,s=function(){var e,s,u,c,l;return Object(Vi.d)(this,function(h){switch(h.label){case 0:++o,h.label=1;case 1:return h.trys.push([1,4,,5]),[4,a.Vt(t)];case 2:return a.db=h.sent(),e=Bu.open(a.db,t,i?"readonly":"readwrite",n),s=r(e).catch(function(t){return e.abort(t),qu.reject(t)}).toPromise(),u={},s.catch(function(){}),[4,e.Et];case 3:return[2,(u.value=(h.sent(),s),u)];case 4:return Hi("SimpleDb","Transaction failed with error:",(c=h.sent()).message,"Retrying:",l="FirebaseError"!==c.name&&o<3),a.close(),l?[3,5]:[2,{value:Promise.reject(c)}];case 5:return[2]}})},a=this,c.label=1;case 1:return[5,s()];case 2:if("object"==typeof(u=c.sent()))return[2,u.value];c.label=3;case 3:return[3,1];case 4:return[2]}})})},t.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},t}(),zu=function(){function t(t){this.xt=t,this.Nt=!1,this.$t=null}return Object.defineProperty(t.prototype,"isDone",{get:function(){return this.Nt},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Ft",{get:function(){return this.$t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.xt=t},enumerable:!1,configurable:!0}),t.prototype.done=function(){this.Nt=!0},t.prototype.Ot=function(t){this.$t=t},t.prototype.delete=function(){return Ku(this.xt.delete())},t}(),Gu=function(t){function e(e,n){var r=this;return(r=t.call(this,ao.UNAVAILABLE,"IndexedDB transaction '"+e+"' failed: "+n)||this).name="IndexedDbTransactionError",r}return Object(Vi.c)(e,t),e}(uo);function Qu(t){return"IndexedDbTransactionError"===t.name}var Wu=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(Hi("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(Hi("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),Ku(n)},t.prototype.add=function(t){return Hi("SimpleDb","ADD",this.store.name,t,t),Ku(this.store.add(t))},t.prototype.get=function(t){var e=this;return Ku(this.store.get(t)).next(function(n){return void 0===n&&(n=null),Hi("SimpleDb","GET",e.store.name,t,n),n})},t.prototype.delete=function(t){return Hi("SimpleDb","DELETE",this.store.name,t),Ku(this.store.delete(t))},t.prototype.count=function(){return Hi("SimpleDb","COUNT",this.store.name),Ku(this.store.count())},t.prototype.kt=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.Mt(n,function(t,e){r.push(e)}).next(function(){return r})},t.prototype.Lt=function(t,e){Hi("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.Bt=!1;var r=this.cursor(n);return this.Mt(r,function(t,e,n){return n.delete()})},t.prototype.qt=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.Mt(r,e)},t.prototype.Ut=function(t){var e=this.cursor({});return new qu(function(n,r){e.onerror=function(t){var e=$u(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next(function(t){t?r.continue():n()}):n()}})},t.prototype.Mt=function(t,e){var n=[];return new qu(function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var o=new zu(i),s=e(i.primaryKey,i.value,o);if(s instanceof qu){var a=s.catch(function(t){return o.done(),qu.reject(t)});n.push(a)}o.isDone?r():null===o.Ft?i.continue():i.continue(o.Ft)}else r()}}).next(function(){return qu.waitFor(n)})},t.prototype.options=function(t,e){var n;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.Bt?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function Ku(t){return new qu(function(e,n){t.onsuccess=function(t){e(t.target.result)},t.onerror=function(t){var e=$u(t.target.error);n(e)}})}var Yu=!1;function $u(t){var e=Hu.It(Object(Mt.m)());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var r=new uo("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return Yu||(Yu=!0,setTimeout(function(){throw r},0)),r}}return t}var Ju=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Qt=e,r.currentSequenceNumber=n,r}return Object(Vi.c)(e,t),e}(Vu);function Xu(t,e){var n=Yi(t);return Hu.Pt(n.Qt,e)}var Zu=function(){function t(t,e,n,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=r}return t.prototype.applyToRemoteDocument=function(t,e,n){for(var r=n.mutationResults,i=0;i<this.mutations.length;i++){var o=this.mutations[i];o.key.isEqual(t)&&(e=Ys(o,e,r[i]))}return e},t.prototype.applyToLocalView=function(t,e){for(var n=0,r=this.baseMutations;n<r.length;n++)(s=r[n]).key.isEqual(t)&&(e=$s(s,e,this.localWriteTime));for(var i=0,o=this.mutations;i<o.length;i++){var s;(s=o[i]).key.isEqual(t)&&(e=$s(s,e,this.localWriteTime))}return e},t.prototype.applyToLocalDocumentSet=function(t){var e=this,n=t;return this.mutations.forEach(function(r){var i=e.applyToLocalView(r.key,t.get(r.key));i&&(n=n.insert(r.key,i))}),n},t.prototype.keys=function(){return this.mutations.reduce(function(t,e){return t.add(e.key)},Ta())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&Zi(this.mutations,t.mutations,function(t,e){return Xs(t,e)})&&Zi(this.baseMutations,t.baseMutations,function(t,e){return Xs(t,e)})},t}(),tc=function(){function t(t,e,n,r){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.docVersions=r}return t.from=function(e,n,r){Ki(e.mutations.length===r.length);for(var i=Ea(),o=e.mutations,s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new t(e,n,r,i)},t}(),ec=function(){function t(t,e,n,r,i,o,s){void 0===i&&(i=Es.min()),void 0===o&&(o=Es.min()),void 0===s&&(s=go.EMPTY_BYTE_STRING),this.target=t,this.targetId=e,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}return t.prototype.withSequenceNumber=function(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.withResumeToken=function(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.withLastLimboFreeSnapshotVersion=function(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)},t}(),nc=function(t){this.Kt=t};function rc(t,e){if(e.document)return tu(t.Kt,e.document,!!e.hasCommittedMutations);if(e.noDocument){var n=po.fromSegments(e.noDocument.path),r=uc(e.noDocument.readTime);return new Vo(n,r,{hasCommittedMutations:!!e.hasCommittedMutations})}if(e.unknownDocument){var i=po.fromSegments(e.unknownDocument.path);return r=uc(e.unknownDocument.version),new Uo(i,r)}return Wi()}function ic(t,e,n){var r=oc(n),i=e.key.path.popLast().toArray();if(e instanceof Fo){var o=function(t,e){return{name:Wa(t,e.key),fields:e.toProto().mapValue.fields,updateTime:qa(t,e.version.toTimestamp())}}(t.Kt,e),s=e.hasCommittedMutations;return new xu(null,null,o,s,r,i)}if(e instanceof Vo){var a=e.key.path.toArray(),u=ac(e.version);return s=e.hasCommittedMutations,new xu(null,new Tu(a,u),null,s,r,i)}if(e instanceof Uo){var c=e.key.path.toArray(),l=ac(e.version);return new xu(new Iu(c,l),null,null,!0,r,i)}return Wi()}function oc(t){var e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function sc(t){var e=new _o(t[0],t[1]);return Es.fromTimestamp(e)}function ac(t){var e=t.toTimestamp();return new wu(e.seconds,e.nanoseconds)}function uc(t){var e=new _o(t.seconds,t.nanoseconds);return Es.fromTimestamp(e)}function cc(t,e){for(var n=(e.baseMutations||[]).map(function(e){return nu(t.Kt,e)}),r=0;r<e.mutations.length-1;++r)r+1<e.mutations.length&&void 0!==e.mutations[r+1].transform&&(e.mutations[r].updateTransforms=e.mutations[r+1].transform.fieldTransforms,e.mutations.splice(r+1,1),++r);var i=e.mutations.map(function(e){return nu(t.Kt,e)}),o=_o.fromMillis(e.localWriteTimeMs);return new Zu(e.batchId,o,n,i)}function lc(t){var e,n,r=uc(t.readTime),i=void 0!==t.lastLimboFreeSnapshotVersion?uc(t.lastLimboFreeSnapshotVersion):Es.min();return void 0!==t.query.documents?(Ki(1===(n=t.query).documents.length),e=ys(cs($a(n.documents[0])))):e=function(t){return ys(ou(t))}(t.query),new ec(e,t.targetId,0,t.lastListenSequenceNumber,r,i,go.fromBase64String(t.resumeToken))}function hc(t,e){var n,r=ac(e.snapshotVersion),i=ac(e.lastLimboFreeSnapshotVersion);n=Go(e.target)?ru(t.Kt,e.target):iu(t.Kt,e.target);var o=e.resumeToken.toBase64();return new ju(e.targetId,Ho(e.target),r,o,e.sequenceNumber,i,n)}function dc(t){var e=ou({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?ms(e,e.limit,"L"):e}var fc=function(){function t(){}return t.prototype.getBundleMetadata=function(t,e){return pc(t).get(e).next(function(t){if(t)return{id:(e=t).bundleId,createTime:uc(e.createTime),version:e.version};var e})},t.prototype.saveBundleMetadata=function(t,e){return pc(t).put({bundleId:(n=e).id,createTime:ac(za(n.createTime)),version:n.version});var n},t.prototype.getNamedQuery=function(t,e){return gc(t).get(e).next(function(t){if(t)return{name:(e=t).name,query:dc(e.bundledQuery),readTime:uc(e.readTime)};var e})},t.prototype.saveNamedQuery=function(t,e){return gc(t).put(function(t){return{name:t.name,readTime:ac(za(t.readTime)),bundledQuery:t.bundledQuery}}(e))},t}();function pc(t){return Xu(t,Du.store)}function gc(t){return Xu(t,Mu.store)}var yc=function(){function t(){this.Wt=new mc}return t.prototype.addToCollectionParentIndex=function(t,e){return this.Wt.add(e),qu.resolve()},t.prototype.getCollectionParents=function(t,e){return qu.resolve(this.Wt.getEntries(e))},t}(),mc=function(){function t(){this.index={}}return t.prototype.add=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e]||new ya(lo.comparator),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.has=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e];return r&&r.has(n)},t.prototype.getEntries=function(t){return(this.index[t]||new ya(lo.comparator)).toArray()},t}(),vc=function(){function t(){this.jt=new mc}return t.prototype.addToCollectionParentIndex=function(t,e){var n=this;if(!this.jt.has(e)){var r=e.lastSegment(),i=e.popLast();t.addOnCommittedListener(function(){n.jt.add(e)});var o={collectionId:r,parent:mu(i)};return bc(t).put(o)}return qu.resolve()},t.prototype.getCollectionParents=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[to(e),""],!1,!0);return bc(t).kt(r).next(function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.collectionId!==e)break;n.push(_u(o.parent))}return n})},t}();function bc(t){return Xu(t,Pu.store)}var _c={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},wc=function(){function t(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}return t.withCacheSize=function(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},t}();function Cc(t,e,n){var r=t.store(Eu.store),i=t.store(Su.store),o=[],s=IDBKeyRange.only(n.batchId),a=0,u=r.qt({range:s},function(t,e,n){return a++,n.delete()});o.push(u.next(function(){Ki(1===a)}));for(var c=[],l=0,h=n.mutations;l<h.length;l++){var d=h[l],f=Su.key(e,d.key.path,n.batchId);o.push(i.delete(f)),c.push(d.key)}return qu.waitFor(o).next(function(){return c})}function Oc(t){var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Wi();e=t.noDocument}return JSON.stringify(e).length}wc.DEFAULT_COLLECTION_PERCENTILE=10,wc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,wc.DEFAULT=new wc(41943040,wc.DEFAULT_COLLECTION_PERCENTILE,wc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),wc.DISABLED=new wc(-1,0,0);var Ec=function(){function t(t,e,n,r){this.userId=t,this.D=e,this.Gt=n,this.referenceDelegate=r,this.zt={}}return t.Ht=function(e,n,r,i){return Ki(""!==e.uid),new t(e.isAuthenticated()?e.uid:"",n,r,i)},t.prototype.checkEmpty=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Tc(t).qt({index:Eu.userMutationsIndex,range:n},function(t,n,r){e=!1,r.done()}).next(function(){return e})},t.prototype.addMutationBatch=function(t,e,n,r){var i=this,o=Ic(t),s=Tc(t);return s.add({}).next(function(a){Ki("number"==typeof a);for(var u=new Zu(a,e,n,r),c=function(t,e,n){var r=n.baseMutations.map(function(e){return eu(t.Kt,e)}),i=n.mutations.map(function(e){return eu(t.Kt,e)});return new Eu(e,n.batchId,n.localWriteTime.toMillis(),r,i)}(i.D,i.userId,u),l=[],h=new ya(function(t,e){return Xi(t.canonicalString(),e.canonicalString())}),d=0,f=r;d<f.length;d++){var p=f[d],g=Su.key(i.userId,p.key.path,a);h=h.add(p.key.path.popLast()),l.push(s.put(c)),l.push(o.put(g,Su.PLACEHOLDER))}return h.forEach(function(e){l.push(i.Gt.addToCollectionParentIndex(t,e))}),t.addOnCommittedListener(function(){i.zt[a]=u.keys()}),qu.waitFor(l).next(function(){return u})})},t.prototype.lookupMutationBatch=function(t,e){var n=this;return Tc(t).get(e).next(function(t){return t?(Ki(t.userId===n.userId),cc(n.D,t)):null})},t.prototype.Jt=function(t,e){var n=this;return this.zt[e]?qu.resolve(this.zt[e]):this.lookupMutationBatch(t,e).next(function(t){if(t){var r=t.keys();return n.zt[e]=r,r}return null})},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return Tc(t).qt({index:Eu.userMutationsIndex,range:i},function(t,e,i){e.userId===n.userId&&(Ki(e.batchId>=r),o=cc(n.D,e)),i.done()}).next(function(){return o})},t.prototype.getHighestUnacknowledgedBatchId=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return Tc(t).qt({index:Eu.userMutationsIndex,range:e,reverse:!0},function(t,e,r){n=e.batchId,r.done()}).next(function(){return n})},t.prototype.getAllMutationBatches=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Tc(t).kt(Eu.userMutationsIndex,n).next(function(t){return t.map(function(t){return cc(e.D,t)})})},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=Su.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return Ic(t).qt({range:i},function(r,i,s){var a=r[0],u=r[2],c=_u(r[1]);if(a===n.userId&&e.path.isEqual(c))return Tc(t).get(u).next(function(t){if(!t)throw Wi();Ki(t.userId===n.userId),o.push(cc(n.D,t))});s.done()}).next(function(){return o})},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new ya(Xi),i=[];return e.forEach(function(e){var o=Su.prefixForPath(n.userId,e.path),s=IDBKeyRange.lowerBound(o),a=Ic(t).qt({range:s},function(t,i,o){var s=t[0],a=t[2],u=_u(t[1]);s===n.userId&&e.path.isEqual(u)?r=r.add(a):o.done()});i.push(a)}),qu.waitFor(i).next(function(){return n.Yt(t,r)})},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=this,r=e.path,i=r.length+1,o=Su.prefixForPath(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new ya(Xi);return Ic(t).qt({range:s},function(t,e,o){var s=t[0],u=t[2],c=_u(t[1]);s===n.userId&&r.isPrefixOf(c)?c.length===i&&(a=a.add(u)):o.done()}).next(function(){return n.Yt(t,a)})},t.prototype.Yt=function(t,e){var n=this,r=[],i=[];return e.forEach(function(e){i.push(Tc(t).get(e).next(function(t){if(null===t)throw Wi();Ki(t.userId===n.userId),r.push(cc(n.D,t))}))}),qu.waitFor(i).next(function(){return r})},t.prototype.removeMutationBatch=function(t,e){var n=this;return Cc(t.Qt,this.userId,e).next(function(r){return t.addOnCommittedListener(function(){n.Xt(e.batchId)}),qu.forEach(r,function(e){return n.referenceDelegate.markPotentiallyOrphaned(t,e)})})},t.prototype.Xt=function(t){delete this.zt[t]},t.prototype.performConsistencyCheck=function(t){var e=this;return this.checkEmpty(t).next(function(n){if(!n)return qu.resolve();var r=IDBKeyRange.lowerBound(Su.prefixForUser(e.userId)),i=[];return Ic(t).qt({range:r},function(t,n,r){if(t[0]===e.userId){var o=_u(t[1]);i.push(o)}else r.done()}).next(function(){Ki(0===i.length)})})},t.prototype.containsKey=function(t,e){return Sc(t,this.userId,e)},t.prototype.Zt=function(t){var e=this;return xc(t).get(this.userId).next(function(t){return t||new Ou(e.userId,-1,"")})},t}();function Sc(t,e,n){var r=Su.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return Ic(t).qt({range:o,Bt:!0},function(t,n,r){t[0]===e&&t[1]===i&&(s=!0),r.done()}).next(function(){return s})}function Tc(t){return Xu(t,Eu.store)}function Ic(t){return Xu(t,Su.store)}function xc(t){return Xu(t,Ou.store)}var Ac=function(){function t(t){this.te=t}return t.prototype.next=function(){return this.te+=2,this.te},t.ee=function(){return new t(0)},t.ne=function(){return new t(-1)},t}(),jc=function(){function t(t,e){this.referenceDelegate=t,this.D=e}return t.prototype.allocateTargetId=function(t){var e=this;return this.se(t).next(function(n){var r=new Ac(n.highestTargetId);return n.highestTargetId=r.next(),e.ie(t,n).next(function(){return n.highestTargetId})})},t.prototype.getLastRemoteSnapshotVersion=function(t){return this.se(t).next(function(t){return Es.fromTimestamp(new _o(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))})},t.prototype.getHighestSequenceNumber=function(t){return this.se(t).next(function(t){return t.highestListenSequenceNumber})},t.prototype.setTargetsMetadata=function(t,e,n){var r=this;return this.se(t).next(function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.ie(t,i)})},t.prototype.addTargetData=function(t,e){var n=this;return this.re(t,e).next(function(){return n.se(t).next(function(r){return r.targetCount+=1,n.oe(e,r),n.ie(t,r)})})},t.prototype.updateTargetData=function(t,e){return this.re(t,e)},t.prototype.removeTargetData=function(t,e){var n=this;return this.removeMatchingKeysForTargetId(t,e.targetId).next(function(){return kc(t).delete(e.targetId)}).next(function(){return n.se(t)}).next(function(e){return Ki(e.targetCount>0),e.targetCount-=1,n.ie(t,e)})},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return kc(t).qt(function(s,a){var u=lc(a);u.sequenceNumber<=e&&null===n.get(u.targetId)&&(i++,o.push(r.removeTargetData(t,u)))}).next(function(){return qu.waitFor(o)}).next(function(){return i})},t.prototype.forEachTarget=function(t,e){return kc(t).qt(function(t,n){var r=lc(n);e(r)})},t.prototype.se=function(t){return Nc(t).get(Nu.key).next(function(t){return Ki(null!==t),t})},t.prototype.ie=function(t,e){return Nc(t).put(Nu.key,e)},t.prototype.re=function(t,e){return kc(t).put(hc(this.D,e))},t.prototype.oe=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.getTargetCount=function(t){return this.se(t).next(function(t){return t.targetCount})},t.prototype.getTargetData=function(t,e){var n=Ho(e),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return kc(t).qt({range:r,index:ju.queryTargetsIndexName},function(t,n,r){var o=lc(n);zo(e,o.target)&&(i=o,r.done())}).next(function(){return i})},t.prototype.addMatchingKeys=function(t,e,n){var r=this,i=[],o=Pc(t);return e.forEach(function(e){var s=mu(e.path);i.push(o.put(new ku(n,s))),i.push(r.referenceDelegate.addReference(t,n,e))}),qu.waitFor(i)},t.prototype.removeMatchingKeys=function(t,e,n){var r=this,i=Pc(t);return qu.forEach(e,function(e){var o=mu(e.path);return qu.waitFor([i.delete([n,o]),r.referenceDelegate.removeReference(t,n,e)])})},t.prototype.removeMatchingKeysForTargetId=function(t,e){var n=Pc(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=Pc(t),i=Ta();return r.qt({range:n,Bt:!0},function(t,e,n){var r=_u(t[1]),o=new po(r);i=i.add(o)}).next(function(){return i})},t.prototype.containsKey=function(t,e){var n=mu(e.path),r=IDBKeyRange.bound([n],[to(n)],!1,!0),i=0;return Pc(t).qt({index:ku.documentTargetsIndex,Bt:!0,range:r},function(t,e,n){0!==t[0]&&(i++,n.done())}).next(function(){return i>0})},t.prototype.yt=function(t,e){return kc(t).get(e).next(function(t){return t?lc(t):null})},t}();function kc(t){return Xu(t,ju.store)}function Nc(t){return Xu(t,Nu.store)}function Pc(t){return Xu(t,ku.store)}function Rc(t){return Object(Vi.b)(this,void 0,void 0,function(){return Object(Vi.d)(this,function(e){if(t.code!==ao.FAILED_PRECONDITION||t.message!==Fu)throw t;return Hi("LocalStore","Unexpectedly lost primary lease"),[2]})})}function Dc(t,e){var n=t[1],r=e[1],i=Xi(t[0],e[0]);return 0===i?Xi(n,r):i}var Mc=function(){function t(t){this.ce=t,this.buffer=new ya(Dc),this.ae=0}return t.prototype.ue=function(){return++this.ae},t.prototype.he=function(t){var e=[t,this.ue()];if(this.buffer.size<this.ce)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();Dc(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),t}(),Lc=function(){function t(t,e){this.garbageCollector=t,this.asyncQueue=e,this.le=!1,this.fe=null}return t.prototype.start=function(t){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.de(t)},t.prototype.stop=function(){this.fe&&(this.fe.cancel(),this.fe=null)},Object.defineProperty(t.prototype,"started",{get:function(){return null!==this.fe},enumerable:!1,configurable:!0}),t.prototype.de=function(t){var e=this,n=this.le?3e5:6e4;Hi("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.fe=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,function(){return Object(Vi.b)(e,void 0,void 0,function(){var e;return Object(Vi.d)(this,function(n){switch(n.label){case 0:this.fe=null,this.le=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,t.collectGarbage(this.garbageCollector)];case 2:return n.sent(),[3,7];case 3:return Qu(e=n.sent())?(Hi("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,Rc(e)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.de(t)];case 8:return n.sent(),[2]}})})})},t}(),Fc=function(){function t(t,e){this.we=t,this.params=e}return t.prototype.calculateTargetCount=function(t,e){return this.we._e(t).next(function(t){return Math.floor(e/100*t)})},t.prototype.nthSequenceNumber=function(t,e){var n=this;if(0===e)return qu.resolve(Ui.o);var r=new Mc(e);return this.we.forEachTarget(t,function(t){return r.he(t.sequenceNumber)}).next(function(){return n.we.me(t,function(t){return r.he(t)})}).next(function(){return r.maxValue})},t.prototype.removeTargets=function(t,e,n){return this.we.removeTargets(t,e,n)},t.prototype.removeOrphanedDocuments=function(t,e){return this.we.removeOrphanedDocuments(t,e)},t.prototype.collect=function(t,e){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(Hi("LruGarbageCollector","Garbage collection skipped; disabled"),qu.resolve(_c)):this.getCacheSize(t).next(function(r){return r<n.params.cacheSizeCollectionThreshold?(Hi("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.cacheSizeCollectionThreshold),_c):n.ye(t,e)})},t.prototype.getCacheSize=function(t){return this.we.getCacheSize(t)},t.prototype.ye=function(t,e){var n,r,i,o,s,a,u,c=this,l=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(function(e){return e>c.params.maximumSequenceNumbersToCollect?(Hi("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+c.params.maximumSequenceNumbersToCollect+" from "+e),r=c.params.maximumSequenceNumbersToCollect):r=e,o=Date.now(),c.nthSequenceNumber(t,r)}).next(function(r){return n=r,s=Date.now(),c.removeTargets(t,n,e)}).next(function(e){return i=e,a=Date.now(),c.removeOrphanedDocuments(t,n)}).next(function(t){return u=Date.now(),Bi()<=Dt.a.DEBUG&&Hi("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(o-l)+"ms\n\tDetermined least recently used "+r+" in "+(s-o)+"ms\n\tRemoved "+i+" targets in "+(a-s)+"ms\n\tRemoved "+t+" documents in "+(u-a)+"ms\nTotal Duration: "+(u-l)+"ms"),qu.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:t})})},t}(),Vc=function(){function t(t,e){this.db=t,this.garbageCollector=function(t,e){return new Fc(t,e)}(this,e)}return t.prototype._e=function(t){var e=this.ge(t);return this.db.getTargetCache().getTargetCount(t).next(function(t){return e.next(function(e){return t+e})})},t.prototype.ge=function(t){var e=0;return this.me(t,function(t){e++}).next(function(){return e})},t.prototype.forEachTarget=function(t,e){return this.db.getTargetCache().forEachTarget(t,e)},t.prototype.me=function(t,e){return this.pe(t,function(t,n){return e(n)})},t.prototype.addReference=function(t,e,n){return Uc(t,n)},t.prototype.removeReference=function(t,e,n){return Uc(t,n)},t.prototype.removeTargets=function(t,e,n){return this.db.getTargetCache().removeTargets(t,e,n)},t.prototype.markPotentiallyOrphaned=function(t,e){return Uc(t,e)},t.prototype.Ee=function(t,e){return function(t,e){var n=!1;return xc(t).Ut(function(r){return Sc(t,r,e).next(function(t){return t&&(n=!0),qu.resolve(!t)})}).next(function(){return n})}(t,e)},t.prototype.removeOrphanedDocuments=function(t,e){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.pe(t,function(s,a){if(a<=e){var u=n.Ee(t,s).next(function(e){if(!e)return o++,r.getEntry(t,s).next(function(){return r.removeEntry(s),Pc(t).delete([0,mu(s.path)])})});i.push(u)}}).next(function(){return qu.waitFor(i)}).next(function(){return r.apply(t)}).next(function(){return o})},t.prototype.removeTarget=function(t,e){var n=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,n)},t.prototype.updateLimboDocument=function(t,e){return Uc(t,e)},t.prototype.pe=function(t,e){var n,r=Pc(t),i=Ui.o;return r.qt({index:ku.documentTargetsIndex},function(t,r){var o=r.path,s=r.sequenceNumber;0===t[0]?(i!==Ui.o&&e(new po(_u(n)),i),i=s,n=o):i=Ui.o}).next(function(){i!==Ui.o&&e(new po(_u(n)),i)})},t.prototype.getCacheSize=function(t){return this.db.getRemoteDocumentCache().getSize(t)},t}();function Uc(t,e){return Pc(t).put(function(t,e){return new ku(0,mu(t.path),e)}(e,t.currentSequenceNumber))}var qc=function(){function t(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={}}return t.prototype.get=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[1];if(this.equalsFn(o[0],t))return s}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.mapKeyFn(t),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.inner[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],t))return 1===n.length?delete this.inner[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){no(this.inner,function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];t(o[0],o[1])}})},t.prototype.isEmpty=function(){return ro(this.inner)},t}(),Bc=function(){function t(){this.changes=new qc(function(t){return t.toString()},function(t,e){return t.isEqual(e)}),this.changesApplied=!1}return t.prototype.getReadTime=function(t){var e=this.changes.get(t);return e?e.readTime:Es.min()},t.prototype.addEntry=function(t,e){this.assertNotApplied(),this.changes.set(t.key,{maybeDocument:t,readTime:e})},t.prototype.removeEntry=function(t,e){void 0===e&&(e=null),this.assertNotApplied(),this.changes.set(t,{maybeDocument:null,readTime:e})},t.prototype.getEntry=function(t,e){this.assertNotApplied();var n=this.changes.get(e);return void 0!==n?qu.resolve(n.maybeDocument):this.getFromCache(t,e)},t.prototype.getEntries=function(t,e){return this.getAllFromCache(t,e)},t.prototype.apply=function(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)},t.prototype.assertNotApplied=function(){},t}(),Hc=function(){function t(t,e){this.D=t,this.Gt=e}return t.prototype.addEntry=function(t,e,n){return Qc(t).put(Wc(e),n)},t.prototype.removeEntry=function(t,e){var n=Qc(t),r=Wc(e);return n.delete(r)},t.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next(function(r){return r.byteSize+=e,n.Te(t,r)})},t.prototype.getEntry=function(t,e){var n=this;return Qc(t).get(Wc(e)).next(function(t){return n.Ie(t)})},t.prototype.Ae=function(t,e){var n=this;return Qc(t).get(Wc(e)).next(function(t){var e=n.Ie(t);return e?{maybeDocument:e,size:Oc(t)}:null})},t.prototype.getEntries=function(t,e){var n=this,r=_a();return this.Re(t,e,function(t,e){var i=n.Ie(e);r=r.insert(t,i)}).next(function(){return r})},t.prototype.be=function(t,e){var n=this,r=_a(),i=new fa(po.comparator);return this.Re(t,e,function(t,e){var o=n.Ie(e);o?(r=r.insert(t,o),i=i.insert(t,Oc(e))):(r=r.insert(t,null),i=i.insert(t,0))}).next(function(){return{ve:r,Pe:i}})},t.prototype.Re=function(t,e,n){if(e.isEmpty())return qu.resolve();var r=IDBKeyRange.bound(e.first().path.toArray(),e.last().path.toArray()),i=e.getIterator(),o=i.getNext();return Qc(t).qt({range:r},function(t,e,r){for(var s=po.fromSegments(t);o&&po.comparator(o,s)<0;)n(o,null),o=i.getNext();o&&o.isEqual(s)&&(n(o,e),o=i.hasNext()?i.getNext():null),o?r.Ot(o.path.toArray()):r.done()}).next(function(){for(;o;)n(o,null),o=i.hasNext()?i.getNext():null})},t.prototype.getDocumentsMatchingQuery=function(t,e,n){var r=this,i=Ca(),o=e.path.length+1,s={};if(n.isEqual(Es.min())){var a=e.path.toArray();s.range=IDBKeyRange.lowerBound(a)}else{var u=e.path.toArray(),c=oc(n);s.range=IDBKeyRange.lowerBound([u,c],!0),s.index=xu.collectionReadTimeIndex}return Qc(t).qt(s,function(t,n,s){if(t.length===o){var a=rc(r.D,n);e.path.isPrefixOf(a.key.path)?a instanceof Fo&&ws(e,a)&&(i=i.insert(a.key,a)):s.done()}}).next(function(){return i})},t.prototype.newChangeBuffer=function(t){return new zc(this,!!t&&t.trackRemovals)},t.prototype.getSize=function(t){return this.getMetadata(t).next(function(t){return t.byteSize})},t.prototype.getMetadata=function(t){return Gc(t).get(Au.key).next(function(t){return Ki(!!t),t})},t.prototype.Te=function(t,e){return Gc(t).put(Au.key,e)},t.prototype.Ie=function(t){if(t){var e=rc(this.D,t);return e instanceof Vo&&e.version.isEqual(Es.min())?null:e}return null},t}(),zc=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Ve=e,r.trackRemovals=n,r.Se=new qc(function(t){return t.toString()},function(t,e){return t.isEqual(e)}),r}return Object(Vi.c)(e,t),e.prototype.applyChanges=function(t){var e=this,n=[],r=0,i=new ya(function(t,e){return Xi(t.canonicalString(),e.canonicalString())});return this.changes.forEach(function(o,s){var a=e.Se.get(o);if(s.maybeDocument){var u=ic(e.Ve.D,s.maybeDocument,e.getReadTime(o));i=i.add(o.path.popLast());var c=Oc(u);r+=c-a,n.push(e.Ve.addEntry(t,o,u))}else if(r-=a,e.trackRemovals){var l=ic(e.Ve.D,new Vo(o,Es.min()),e.getReadTime(o));n.push(e.Ve.addEntry(t,o,l))}else n.push(e.Ve.removeEntry(t,o))}),i.forEach(function(r){n.push(e.Ve.Gt.addToCollectionParentIndex(t,r))}),n.push(this.Ve.updateMetadata(t,r)),qu.waitFor(n)},e.prototype.getFromCache=function(t,e){var n=this;return this.Ve.Ae(t,e).next(function(t){return null===t?(n.Se.set(e,0),null):(n.Se.set(e,t.size),t.maybeDocument)})},e.prototype.getAllFromCache=function(t,e){var n=this;return this.Ve.be(t,e).next(function(t){var e=t.ve;return t.Pe.forEach(function(t,e){n.Se.set(t,e)}),e})},e}(Bc);function Gc(t){return Xu(t,Au.store)}function Qc(t){return Xu(t,xu.store)}function Wc(t){return t.path.toArray()}var Kc=function(){function t(t){this.D=t}return t.prototype.St=function(t,e,n,r){var i=this;Ki(n<r&&n>=0&&r<=11);var o=new Bu("createOrUpgrade",e);n<1&&r>=1&&(function(t){t.createObjectStore(Cu.store)}(t),function(t){t.createObjectStore(Ou.store,{keyPath:Ou.keyPath}),t.createObjectStore(Eu.store,{keyPath:Eu.keyPath,autoIncrement:!0}).createIndex(Eu.userMutationsIndex,Eu.userMutationsKeyPath,{unique:!0}),t.createObjectStore(Su.store)}(t),Yc(t),function(t){t.createObjectStore(xu.store)}(t));var s=qu.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore(ku.store),t.deleteObjectStore(ju.store),t.deleteObjectStore(Nu.store)}(t),Yc(t)),s=s.next(function(){return function(t){var e=t.store(Nu.store),n=new Nu(0,0,Es.min().toTimestamp(),0);return e.put(Nu.key,n)}(o)})),n<4&&r>=4&&(0!==n&&(s=s.next(function(){return function(t,e){return e.store(Eu.store).kt().next(function(n){t.deleteObjectStore(Eu.store),t.createObjectStore(Eu.store,{keyPath:Eu.keyPath,autoIncrement:!0}).createIndex(Eu.userMutationsIndex,Eu.userMutationsKeyPath,{unique:!0});var r=e.store(Eu.store),i=n.map(function(t){return r.put(t)});return qu.waitFor(i)})}(t,o)})),s=s.next(function(){!function(t){t.createObjectStore(Ru.store,{keyPath:Ru.keyPath})}(t)})),n<5&&r>=5&&(s=s.next(function(){return i.De(o)})),n<6&&r>=6&&(s=s.next(function(){return function(t){t.createObjectStore(Au.store)}(t),i.Ce(o)})),n<7&&r>=7&&(s=s.next(function(){return i.xe(o)})),n<8&&r>=8&&(s=s.next(function(){return i.Ne(t,o)})),n<9&&r>=9&&(s=s.next(function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore(xu.store);e.createIndex(xu.readTimeIndex,xu.readTimeIndexPath,{unique:!1}),e.createIndex(xu.collectionReadTimeIndex,xu.collectionReadTimeIndexPath,{unique:!1})}(e)})),n<10&&r>=10&&(s=s.next(function(){return i.$e(o)})),n<11&&r>=11&&(s=s.next(function(){!function(t){t.createObjectStore(Du.store,{keyPath:Du.keyPath})}(t),function(t){t.createObjectStore(Mu.store,{keyPath:Mu.keyPath})}(t)})),s},t.prototype.Ce=function(t){var e=0;return t.store(xu.store).qt(function(t,n){e+=Oc(n)}).next(function(){var n=new Au(e);return t.store(Au.store).put(Au.key,n)})},t.prototype.De=function(t){var e=this,n=t.store(Ou.store),r=t.store(Eu.store);return n.kt().next(function(n){return qu.forEach(n,function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.kt(Eu.userMutationsIndex,i).next(function(r){return qu.forEach(r,function(r){Ki(r.userId===n.userId);var i=cc(e.D,r);return Cc(t,n.userId,i).next(function(){})})})})})},t.prototype.xe=function(t){var e=t.store(ku.store),n=t.store(xu.store);return t.store(Nu.store).get(Nu.key).next(function(t){var r=[];return n.qt(function(n,i){var o=new lo(n),s=function(t){return[0,mu(t)]}(o);r.push(e.get(s).next(function(n){return n?qu.resolve():function(n){return e.put(new ku(0,mu(n),t.highestListenSequenceNumber))}(o)}))}).next(function(){return qu.waitFor(r)})})},t.prototype.Ne=function(t,e){t.createObjectStore(Pu.store,{keyPath:Pu.keyPath});var n=e.store(Pu.store),r=new mc,i=function(t){if(r.add(t)){var e=t.lastSegment(),i=t.popLast();return n.put({collectionId:e,parent:mu(i)})}};return e.store(xu.store).qt({Bt:!0},function(t,e){var n=new lo(t);return i(n.popLast())}).next(function(){return e.store(Su.store).qt({Bt:!0},function(t,e){var n=_u(t[1]);return i(n.popLast())})})},t.prototype.$e=function(t){var e=this,n=t.store(ju.store);return n.qt(function(t,r){var i=lc(r),o=hc(e.D,i);return n.put(o)})},t}();function Yc(t){t.createObjectStore(ku.store,{keyPath:ku.keyPath}).createIndex(ku.documentTargetsIndex,ku.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(ju.store,{keyPath:ju.keyPath}).createIndex(ju.queryTargetsIndexName,ju.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(Nu.store)}var $c="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Jc=function(){function t(e,n,r,i,o,s,a,u,c,l){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Fe=o,this.window=s,this.document=a,this.Oe=c,this.ke=l,this.Me=null,this.Le=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Be=null,this.inForeground=!1,this.qe=null,this.Ue=null,this.Qe=Number.NEGATIVE_INFINITY,this.Ke=function(t){return Promise.resolve()},!t.At())throw new uo(ao.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Vc(this,i),this.We=n+"main",this.D=new nc(u),this.je=new Hu(this.We,11,new Kc(this.D)),this.Ge=new jc(this.referenceDelegate,this.D),this.Gt=new vc,this.ze=function(t,e){return new Hc(t,e)}(this.D,this.Gt),this.He=new fc,this.window&&this.window.localStorage?this.Je=this.window.localStorage:(this.Je=null,!1===l&&zi("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return t.prototype.start=function(){var t=this;return this.Ye().then(function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new uo(ao.FAILED_PRECONDITION,$c);return t.Xe(),t.Ze(),t.tn(),t.runTransaction("getHighestListenSequenceNumber","readonly",function(e){return t.Ge.getHighestSequenceNumber(e)})}).then(function(e){t.Me=new Ui(e,t.Oe)}).then(function(){t.Le=!0}).catch(function(e){return t.je&&t.je.close(),Promise.reject(e)})},t.prototype.en=function(t){var e=this;return this.Ke=function(n){return Object(Vi.b)(e,void 0,void 0,function(){return Object(Vi.d)(this,function(e){return this.started?[2,t(n)]:[2]})})},t(this.isPrimary)},t.prototype.setDatabaseDeletedListener=function(t){var e=this;this.je.Ct(function(n){return Object(Vi.b)(e,void 0,void 0,function(){return Object(Vi.d)(this,function(e){switch(e.label){case 0:return null===n.newVersion?[4,t()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})})},t.prototype.setNetworkEnabled=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Fe.enqueueAndForget(function(){return Object(Vi.b)(e,void 0,void 0,function(){return Object(Vi.d)(this,function(t){switch(t.label){case 0:return this.started?[4,this.Ye()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})}))},t.prototype.Ye=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",function(e){return Zc(e).put(new Ru(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next(function(){if(t.isPrimary)return t.nn(e).next(function(e){e||(t.isPrimary=!1,t.Fe.enqueueRetryable(function(){return t.Ke(!1)}))})}).next(function(){return t.sn(e)}).next(function(n){return t.isPrimary&&!n?t.rn(e).next(function(){return!1}):!!n&&t.on(e).next(function(){return!0})})}).catch(function(e){if(Qu(e))return Hi("IndexedDbPersistence","Failed to extend owner lease: ",e),t.isPrimary;if(!t.allowTabSynchronization)throw e;return Hi("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(function(e){t.isPrimary!==e&&t.Fe.enqueueRetryable(function(){return t.Ke(e)}),t.isPrimary=e})},t.prototype.nn=function(t){var e=this;return Xc(t).get(Cu.key).next(function(t){return qu.resolve(e.cn(t))})},t.prototype.an=function(t){return Zc(t).delete(this.clientId)},t.prototype.un=function(){return Object(Vi.b)(this,void 0,void 0,function(){var t,e,n,r=this;return Object(Vi.d)(this,function(i){switch(i.label){case 0:return!this.isPrimary||this.hn(this.Qe,18e5)?[3,2]:(this.Qe=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",function(t){var e=Xu(t,Ru.store);return e.kt().next(function(t){var n=r.ln(t,18e5),i=t.filter(function(t){return-1===n.indexOf(t)});return qu.forEach(i,function(t){return e.delete(t.clientId)}).next(function(){return i})})}).catch(function(){return[]})]);case 1:if(t=i.sent(),this.Je)for(e=0,n=t;e<n.length;e++)this.Je.removeItem(this.fn(n[e].clientId));i.label=2;case 2:return[2]}})})},t.prototype.tn=function(){var t=this;this.Ue=this.Fe.enqueueAfterDelay("client_metadata_refresh",4e3,function(){return t.Ye().then(function(){return t.un()}).then(function(){return t.tn()})})},t.prototype.cn=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.sn=function(t){var e=this;return this.ke?qu.resolve(!0):Xc(t).get(Cu.key).next(function(n){if(null!==n&&e.hn(n.leaseTimestampMs,5e3)&&!e.dn(n.ownerId)){if(e.cn(n)&&e.networkEnabled)return!0;if(!e.cn(n)){if(!n.allowTabSynchronization)throw new uo(ao.FAILED_PRECONDITION,$c);return!1}}return!(!e.networkEnabled||!e.inForeground)||Zc(t).kt().next(function(t){return void 0===e.ln(t,5e3).find(function(t){return!(e.clientId===t.clientId||!(!e.networkEnabled&&t.networkEnabled||!e.inForeground&&t.inForeground&&e.networkEnabled===t.networkEnabled))})})}).next(function(t){return e.isPrimary!==t&&Hi("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t})},t.prototype.shutdown=function(){return Object(Vi.b)(this,void 0,void 0,function(){var t=this;return Object(Vi.d)(this,function(e){switch(e.label){case 0:return this.Le=!1,this.wn(),this.Ue&&(this.Ue.cancel(),this.Ue=null),this._n(),this.mn(),[4,this.je.runTransaction("shutdown","readwrite",[Cu.store,Ru.store],function(e){var n=new Ju(e,Ui.o);return t.rn(n).next(function(){return t.an(n)})})];case 1:return e.sent(),this.je.close(),this.yn(),[2]}})})},t.prototype.ln=function(t,e){var n=this;return t.filter(function(t){return n.hn(t.updateTimeMs,e)&&!n.dn(t.clientId)})},t.prototype.gn=function(){var t=this;return this.runTransaction("getActiveClients","readonly",function(e){return Zc(e).kt().next(function(e){return t.ln(e,18e5).map(function(t){return t.clientId})})})},Object.defineProperty(t.prototype,"started",{get:function(){return this.Le},enumerable:!1,configurable:!0}),t.prototype.getMutationQueue=function(t){return Ec.Ht(t,this.D,this.Gt,this.referenceDelegate)},t.prototype.getTargetCache=function(){return this.Ge},t.prototype.getRemoteDocumentCache=function(){return this.ze},t.prototype.getIndexManager=function(){return this.Gt},t.prototype.getBundleCache=function(){return this.He},t.prototype.runTransaction=function(t,e,n){var r,i=this;return Hi("IndexedDbPersistence","Starting transaction:",t),this.je.runTransaction(t,"readonly"===e?"readonly":"readwrite",Lu,function(o){return r=new Ju(o,i.Me?i.Me.next():Ui.o),"readwrite-primary"===e?i.nn(r).next(function(t){return!!t||i.sn(r)}).next(function(e){if(!e)throw zi("Failed to obtain primary lease for action '"+t+"'."),i.isPrimary=!1,i.Fe.enqueueRetryable(function(){return i.Ke(!1)}),new uo(ao.FAILED_PRECONDITION,Fu);return n(r)}).next(function(t){return i.on(r).next(function(){return t})}):i.pn(r).next(function(){return n(r)})}).then(function(t){return r.raiseOnCommittedEvent(),t})},t.prototype.pn=function(t){var e=this;return Xc(t).get(Cu.key).next(function(t){if(null!==t&&e.hn(t.leaseTimestampMs,5e3)&&!e.dn(t.ownerId)&&!e.cn(t)&&!(e.ke||e.allowTabSynchronization&&t.allowTabSynchronization))throw new uo(ao.FAILED_PRECONDITION,$c)})},t.prototype.on=function(t){var e=new Cu(this.clientId,this.allowTabSynchronization,Date.now());return Xc(t).put(Cu.key,e)},t.At=function(){return Hu.At()},t.prototype.rn=function(t){var e=this,n=Xc(t);return n.get(Cu.key).next(function(t){return e.cn(t)?(Hi("IndexedDbPersistence","Releasing primary lease."),n.delete(Cu.key)):qu.resolve()})},t.prototype.hn=function(t,e){var n=Date.now();return!(t<n-e||t>n&&(zi("Detected an update time that is in the future: "+t+" > "+n),1))},t.prototype.Xe=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.qe=function(){t.Fe.enqueueAndForget(function(){return t.inForeground="visible"===t.document.visibilityState,t.Ye()})},this.document.addEventListener("visibilitychange",this.qe),this.inForeground="visible"===this.document.visibilityState)},t.prototype._n=function(){this.qe&&(this.document.removeEventListener("visibilitychange",this.qe),this.qe=null)},t.prototype.Ze=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.Be=function(){e.wn(),e.Fe.enqueueAndForget(function(){return e.shutdown()})},this.window.addEventListener("unload",this.Be))},t.prototype.mn=function(){this.Be&&(this.window.removeEventListener("unload",this.Be),this.Be=null)},t.prototype.dn=function(t){var e;try{var n=null!==(null===(e=this.Je)||void 0===e?void 0:e.getItem(this.fn(t)));return Hi("IndexedDbPersistence","Client '"+t+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(t){return zi("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},t.prototype.wn=function(){if(this.Je)try{this.Je.setItem(this.fn(this.clientId),String(Date.now()))}catch(t){zi("Failed to set zombie client id.",t)}},t.prototype.yn=function(){if(this.Je)try{this.Je.removeItem(this.fn(this.clientId))}catch(t){}},t.prototype.fn=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t}();function Xc(t){return Xu(t,Cu.store)}function Zc(t){return Xu(t,Ru.store)}function tl(t,e){var n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var el=function(t,e){this.progress=t,this.En=e},nl=function(){function t(t,e,n){this.ze=t,this.Tn=e,this.Gt=n}return t.prototype.In=function(t,e){var n=this;return this.Tn.getAllMutationBatchesAffectingDocumentKey(t,e).next(function(r){return n.An(t,e,r)})},t.prototype.An=function(t,e,n){return this.ze.getEntry(t,e).next(function(t){for(var r=0,i=n;r<i.length;r++)t=i[r].applyToLocalView(e,t);return t})},t.prototype.Rn=function(t,e,n){var r=_a();return e.forEach(function(t,e){for(var i=0,o=n;i<o.length;i++)e=o[i].applyToLocalView(t,e);r=r.insert(t,e)}),r},t.prototype.bn=function(t,e){var n=this;return this.ze.getEntries(t,e).next(function(e){return n.vn(t,e)})},t.prototype.vn=function(t,e){var n=this;return this.Tn.getAllMutationBatchesAffectingDocumentKeys(t,e).next(function(r){var i=n.Rn(t,e,r),o=ba();return i.forEach(function(t,e){e||(e=new Vo(t,Es.min())),o=o.insert(t,e)}),o})},t.prototype.getDocumentsMatchingQuery=function(t,e,n){return function(t){return po.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.Pn(t,e.path):ps(e)?this.Vn(t,e,n):this.Sn(t,e,n)},t.prototype.Pn=function(t,e){return this.In(t,new po(e)).next(function(t){var e=Ca();return t instanceof Fo&&(e=e.insert(t.key,t)),e})},t.prototype.Vn=function(t,e,n){var r=this,i=e.collectionGroup,o=Ca();return this.Gt.getCollectionParents(t,i).next(function(s){return qu.forEach(s,function(s){var a=function(t,e){return new as(e,null,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,s.child(i));return r.Sn(t,a,n).next(function(t){t.forEach(function(t,e){o=o.insert(t,e)})})}).next(function(){return o})})},t.prototype.Sn=function(t,e,n){var r,i,o=this;return this.ze.getDocumentsMatchingQuery(t,e,n).next(function(n){return r=n,o.Tn.getAllMutationBatchesAffectingQuery(t,e)}).next(function(e){return o.Dn(t,i=e,r).next(function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var o=n[e],s=0,a=o.mutations;s<a.length;s++){var u=a[s],c=u.key,l=$s(u,r.get(c),o.localWriteTime);r=l instanceof Fo?r.insert(c,l):r.remove(c)}})}).next(function(){return r.forEach(function(t,n){ws(e,n)||(r=r.remove(t))}),r})},t.prototype.Dn=function(t,e,n){for(var r=Ta(),i=0,o=e;i<o.length;i++)for(var s=0,a=o[i].mutations;s<a.length;s++){var u=a[s];u instanceof ea&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.ze.getEntries(t,r).next(function(t){return t.forEach(function(t,e){null!==e&&e instanceof Fo&&(c=c.insert(t,e))}),c})},t}(),rl=function(){function t(t,e,n,r){this.targetId=t,this.fromCache=e,this.Cn=n,this.xn=r}return t.Nn=function(e,n){for(var r=Ta(),i=Ta(),o=0,s=n.docChanges;o<s.length;o++){var a=s[o];switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}}return new t(e,n.fromCache,r,i)},t}(),il=function(){function t(){}return t.prototype.$n=function(t){this.Fn=t},t.prototype.getDocumentsMatchingQuery=function(t,e,n,r){var i=this;return function(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}(e)||n.isEqual(Es.min())?this.On(t,e):this.Fn.bn(t,r).next(function(o){var s=i.kn(e,o);return(ls(e)||hs(e))&&i.Mn(e.limitType,s,r,n)?i.On(t,e):(Bi()<=Dt.a.DEBUG&&Hi("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),_s(e)),i.Fn.getDocumentsMatchingQuery(t,e,n).next(function(t){return s.forEach(function(e){t=t.insert(e.key,e)}),t}))})},t.prototype.kn=function(t,e){var n=new ya(Cs(t));return e.forEach(function(e,r){r instanceof Fo&&ws(t,r)&&(n=n.add(r))}),n},t.prototype.Mn=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)},t.prototype.On=function(t,e){return Bi()<=Dt.a.DEBUG&&Hi("QueryEngine","Using full collection scan to execute query:",_s(e)),this.Fn.getDocumentsMatchingQuery(t,e,Es.min())},t}(),ol=function(){function t(t,e,n,r){this.persistence=t,this.Ln=e,this.D=r,this.Bn=new fa(Xi),this.qn=new qc(function(t){return Ho(t)},zo),this.Un=Es.min(),this.Tn=t.getMutationQueue(n),this.Qn=t.getRemoteDocumentCache(),this.Ge=t.getTargetCache(),this.Kn=new nl(this.Qn,this.Tn,this.persistence.getIndexManager()),this.He=t.getBundleCache(),this.Ln.$n(this.Kn)}return t.prototype.collectGarbage=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",function(n){return t.collect(n,e.Bn)})},t}();function sl(t,e,n,r){return new ol(t,e,n,r)}function al(t,e){return Object(Vi.b)(this,void 0,void 0,function(){var n,r,i,o;return Object(Vi.d)(this,function(s){switch(s.label){case 0:return n=Yi(t),r=n.Tn,i=n.Kn,[4,n.persistence.runTransaction("Handle user change","readonly",function(t){var o;return n.Tn.getAllMutationBatches(t).next(function(s){return o=s,r=n.persistence.getMutationQueue(e),i=new nl(n.Qn,r,n.persistence.getIndexManager()),r.getAllMutationBatches(t)}).next(function(e){for(var n=[],r=[],s=Ta(),a=0,u=o;a<u.length;a++){var c=u[a];n.push(c.batchId);for(var l=0,h=c.mutations;l<h.length;l++)s=s.add(h[l].key)}for(var d=0,f=e;d<f.length;d++){var p=f[d];r.push(p.batchId);for(var g=0,y=p.mutations;g<y.length;g++)s=s.add(y[g].key)}return i.bn(t,s).next(function(t){return{Wn:t,removedBatchIds:n,addedBatchIds:r}})})})];case 1:return o=s.sent(),[2,(n.Tn=r,n.Kn=i,n.Ln.$n(n.Kn),o)]}})})}function ul(t,e){var n=Yi(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",function(t){var r=e.batch.keys(),i=n.Qn.newChangeBuffer({trackRemovals:!0});return function(t,e,n,r){var i=n.batch,o=i.keys(),s=qu.resolve();return o.forEach(function(t){s=s.next(function(){return r.getEntry(e,t)}).next(function(e){var o=e,s=n.docVersions.get(t);Ki(null!==s),(!o||o.version.compareTo(s)<0)&&(o=i.applyToRemoteDocument(t,o,n))&&r.addEntry(o,n.commitVersion)})}),s.next(function(){return t.Tn.removeMutationBatch(e,i)})}(n,t,e,i).next(function(){return i.apply(t)}).next(function(){return n.Tn.performConsistencyCheck(t)}).next(function(){return n.Kn.bn(t,r)})})}function cl(t){var e=Yi(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",function(t){return e.Ge.getLastRemoteSnapshotVersion(t)})}function ll(t,e){var n=Yi(t),r=e.snapshotVersion,i=n.Bn;return n.persistence.runTransaction("Apply remote event","readwrite-primary",function(t){var o=n.Qn.newChangeBuffer({trackRemovals:!0});i=n.Bn;var s=[];e.targetChanges.forEach(function(e,o){var a=i.get(o);if(a){s.push(n.Ge.removeMatchingKeys(t,e.removedDocuments,o).next(function(){return n.Ge.addMatchingKeys(t,e.addedDocuments,o)}));var u=e.resumeToken;if(u.approximateByteSize()>0){var c=a.withResumeToken(u,r).withSequenceNumber(t.currentSequenceNumber);i=i.insert(o,c),function(t,e,n){return Ki(e.resumeToken.approximateByteSize()>0),0===t.resumeToken.approximateByteSize()||e.snapshotVersion.toMicroseconds()-t.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(a,c,e)&&s.push(n.Ge.updateTargetData(t,c))}}});var a=ba();if(e.documentUpdates.forEach(function(r,i){e.resolvedLimboDocuments.has(r)&&s.push(n.persistence.referenceDelegate.updateLimboDocument(t,r))}),s.push(hl(t,o,e.documentUpdates,r,void 0).next(function(t){a=t})),!r.isEqual(Es.min())){var u=n.Ge.getLastRemoteSnapshotVersion(t).next(function(e){return n.Ge.setTargetsMetadata(t,t.currentSequenceNumber,r)});s.push(u)}return qu.waitFor(s).next(function(){return o.apply(t)}).next(function(){return n.Kn.vn(t,a)})}).then(function(t){return n.Bn=i,t})}function hl(t,e,n,r,i){var o=Ta();return n.forEach(function(t){return o=o.add(t)}),e.getEntries(t,o).next(function(t){var o=ba();return n.forEach(function(n,s){var a=t.get(n),u=(null==i?void 0:i.get(n))||r;s instanceof Vo&&s.version.isEqual(Es.min())?(e.removeEntry(n,u),o=o.insert(n,s)):null==a||s.version.compareTo(a.version)>0||0===s.version.compareTo(a.version)&&a.hasPendingWrites?(e.addEntry(s,u),o=o.insert(n,s)):Hi("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",s.version)}),o})}function dl(t,e){var n=Yi(t);return n.persistence.runTransaction("Get next mutation batch","readonly",function(t){return void 0===e&&(e=-1),n.Tn.getNextMutationBatchAfterBatchId(t,e)})}function fl(t,e){var n=Yi(t);return n.persistence.runTransaction("Allocate target","readwrite",function(t){var r;return n.Ge.getTargetData(t,e).next(function(i){return i?qu.resolve(r=i):n.Ge.allocateTargetId(t).next(function(i){return r=new ec(e,i,0,t.currentSequenceNumber),n.Ge.addTargetData(t,r).next(function(){return r})})})}).then(function(t){var r=n.Bn.get(t.targetId);return(null===r||t.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Bn=n.Bn.insert(t.targetId,t),n.qn.set(e,t.targetId)),t})}function pl(t,e,n){return Object(Vi.b)(this,void 0,void 0,function(){var r,i,o,s;return Object(Vi.d)(this,function(a){switch(a.label){case 0:r=Yi(t),i=r.Bn.get(e),o=n?"readwrite":"readwrite-primary",a.label=1;case 1:return a.trys.push([1,4,,5]),n?[3,3]:[4,r.persistence.runTransaction("Release target",o,function(t){return r.persistence.referenceDelegate.removeTarget(t,i)})];case 2:a.sent(),a.label=3;case 3:return[3,5];case 4:if(!Qu(s=a.sent()))throw s;return Hi("LocalStore","Failed to update sequence numbers for target "+e+": "+s),[3,5];case 5:return r.Bn=r.Bn.remove(e),r.qn.delete(i.target),[2]}})})}function gl(t,e,n){var r=Yi(t),i=Es.min(),o=Ta();return r.persistence.runTransaction("Execute query","readonly",function(t){return function(t,e,n){var r=Yi(t),i=r.qn.get(n);return void 0!==i?qu.resolve(r.Bn.get(i)):r.Ge.getTargetData(e,n)}(r,t,ys(e)).next(function(e){if(e)return i=e.lastLimboFreeSnapshotVersion,r.Ge.getMatchingKeysForTargetId(t,e.targetId).next(function(t){o=t})}).next(function(){return r.Ln.getDocumentsMatchingQuery(t,e,n?i:Es.min(),n?o:Ta())}).next(function(t){return{documents:t,jn:o}})})}function yl(t,e){var n=Yi(t),r=Yi(n.Ge),i=n.Bn.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",function(t){return r.yt(t,e).next(function(t){return t?t.target:null})})}function ml(t){var e=Yi(t);return e.persistence.runTransaction("Get new document changes","readonly",function(t){return function(t,e,n){var r=Yi(t),i=ba(),o=oc(n),s=Qc(e),a=IDBKeyRange.lowerBound(o,!0);return s.qt({index:xu.readTimeIndex,range:a},function(t,e){var n=rc(r.D,e);i=i.insert(n.key,n),o=e.readTime}).next(function(){return{En:i,readTime:sc(o)}})}(e.Qn,t,e.Un)}).then(function(t){var n=t.En;return e.Un=t.readTime,n})}function vl(t){return Object(Vi.b)(this,void 0,void 0,function(){var e;return Object(Vi.d)(this,function(n){return[2,(e=Yi(t)).persistence.runTransaction("Synchronize last document change read time","readonly",function(t){return function(t){var e=Qc(t),n=Es.min();return e.qt({index:xu.readTimeIndex,reverse:!0},function(t,e,r){e.readTime&&(n=sc(e.readTime)),r.done()}).next(function(){return n})}(t)}).then(function(t){e.Un=t})]})})}function bl(t,e,n,r){return Object(Vi.b)(this,void 0,void 0,function(){var i,o,s,a,u,c,l,h,d,f;return Object(Vi.d)(this,function(p){switch(p.label){case 0:for(i=Yi(t),o=Ta(),s=ba(),a=Ea(),u=0,c=n;u<c.length;u++)h=e.Gn((l=c[u]).metadata.name),l.document&&(o=o.add(h)),s=s.insert(h,e.zn(l)),a=a.insert(h,e.Hn(l.metadata.readTime));return d=i.Qn.newChangeBuffer({trackRemovals:!0}),[4,fl(i,function(t){return ys(cs(lo.fromString("__bundle__/docs/"+t)))}(r))];case 1:return f=p.sent(),[2,i.persistence.runTransaction("Apply bundle documents","readwrite",function(t){return hl(t,d,s,Es.min(),a).next(function(e){return d.apply(t),e}).next(function(e){return i.Ge.removeMatchingKeysForTargetId(t,f.targetId).next(function(){return i.Ge.addMatchingKeys(t,o,f.targetId)}).next(function(){return i.Kn.vn(t,e)})})})]}})})}function _l(t,e,n){return void 0===n&&(n=Ta()),Object(Vi.b)(this,void 0,void 0,function(){var r,i;return Object(Vi.d)(this,function(o){switch(o.label){case 0:return[4,fl(t,ys(dc(e.bundledQuery)))];case 1:return r=o.sent(),[2,(i=Yi(t)).persistence.runTransaction("Save named query","readwrite",function(t){var o=za(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.He.saveNamedQuery(t,e);var s=r.withResumeToken(go.EMPTY_BYTE_STRING,o);return i.Bn=i.Bn.insert(s.targetId,s),i.Ge.updateTargetData(t,s).next(function(){return i.Ge.removeMatchingKeysForTargetId(t,r.targetId)}).next(function(){return i.Ge.addMatchingKeys(t,n,r.targetId)}).next(function(){return i.He.saveNamedQuery(t,e)})})]}})})}var wl=function(){function t(t){this.D=t,this.Jn=new Map,this.Yn=new Map}return t.prototype.getBundleMetadata=function(t,e){return qu.resolve(this.Jn.get(e))},t.prototype.saveBundleMetadata=function(t,e){var n;return this.Jn.set(e.id,{id:(n=e).id,version:n.version,createTime:za(n.createTime)}),qu.resolve()},t.prototype.getNamedQuery=function(t,e){return qu.resolve(this.Yn.get(e))},t.prototype.saveNamedQuery=function(t,e){return this.Yn.set(e.name,function(t){return{name:t.name,query:dc(t.bundledQuery),readTime:za(t.readTime)}}(e)),qu.resolve()},t}(),Cl=function(){function t(){this.Xn=new ya(Ol.Zn),this.ts=new ya(Ol.es)}return t.prototype.isEmpty=function(){return this.Xn.isEmpty()},t.prototype.addReference=function(t,e){var n=new Ol(t,e);this.Xn=this.Xn.add(n),this.ts=this.ts.add(n)},t.prototype.ns=function(t,e){var n=this;t.forEach(function(t){return n.addReference(t,e)})},t.prototype.removeReference=function(t,e){this.ss(new Ol(t,e))},t.prototype.rs=function(t,e){var n=this;t.forEach(function(t){return n.removeReference(t,e)})},t.prototype.os=function(t){var e=this,n=new po(new lo([])),r=new Ol(n,t),i=new Ol(n,t+1),o=[];return this.ts.forEachInRange([r,i],function(t){e.ss(t),o.push(t.key)}),o},t.prototype.cs=function(){var t=this;this.Xn.forEach(function(e){return t.ss(e)})},t.prototype.ss=function(t){this.Xn=this.Xn.delete(t),this.ts=this.ts.delete(t)},t.prototype.us=function(t){var e=new po(new lo([])),n=new Ol(e,t),r=new Ol(e,t+1),i=Ta();return this.ts.forEachInRange([n,r],function(t){i=i.add(t.key)}),i},t.prototype.containsKey=function(t){var e=new Ol(t,0),n=this.Xn.firstAfterOrEqual(e);return null!==n&&t.isEqual(n.key)},t}(),Ol=function(){function t(t,e){this.key=t,this.hs=e}return t.Zn=function(t,e){return po.comparator(t.key,e.key)||Xi(t.hs,e.hs)},t.es=function(t,e){return Xi(t.hs,e.hs)||po.comparator(t.key,e.key)},t}(),El=function(){function t(t,e){this.Gt=t,this.referenceDelegate=e,this.Tn=[],this.ls=1,this.fs=new ya(Ol.Zn)}return t.prototype.checkEmpty=function(t){return qu.resolve(0===this.Tn.length)},t.prototype.addMutationBatch=function(t,e,n,r){var i=this.ls;this.ls++;var o=new Zu(i,e,n,r);this.Tn.push(o);for(var s=0,a=r;s<a.length;s++){var u=a[s];this.fs=this.fs.add(new Ol(u.key,i)),this.Gt.addToCollectionParentIndex(t,u.key.path.popLast())}return qu.resolve(o)},t.prototype.lookupMutationBatch=function(t,e){return qu.resolve(this.ds(e))},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this.ws(e+1),r=n<0?0:n;return qu.resolve(this.Tn.length>r?this.Tn[r]:null)},t.prototype.getHighestUnacknowledgedBatchId=function(){return qu.resolve(0===this.Tn.length?-1:this.ls-1)},t.prototype.getAllMutationBatches=function(t){return qu.resolve(this.Tn.slice())},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=new Ol(e,0),i=new Ol(e,Number.POSITIVE_INFINITY),o=[];return this.fs.forEachInRange([r,i],function(t){var e=n.ds(t.hs);o.push(e)}),qu.resolve(o)},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new ya(Xi);return e.forEach(function(t){var e=new Ol(t,0),i=new Ol(t,Number.POSITIVE_INFINITY);n.fs.forEachInRange([e,i],function(t){r=r.add(t.hs)})}),qu.resolve(this._s(r))},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=e.path,r=n.length+1,i=n;po.isDocumentKey(i)||(i=i.child(""));var o=new Ol(new po(i),0),s=new ya(Xi);return this.fs.forEachWhile(function(t){var e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===r&&(s=s.add(t.hs)),!0)},o),qu.resolve(this._s(s))},t.prototype._s=function(t){var e=this,n=[];return t.forEach(function(t){var r=e.ds(t);null!==r&&n.push(r)}),n},t.prototype.removeMutationBatch=function(t,e){var n=this;Ki(0===this.ys(e.batchId,"removed")),this.Tn.shift();var r=this.fs;return qu.forEach(e.mutations,function(i){var o=new Ol(i.key,e.batchId);return r=r.delete(o),n.referenceDelegate.markPotentiallyOrphaned(t,i.key)}).next(function(){n.fs=r})},t.prototype.Xt=function(t){},t.prototype.containsKey=function(t,e){var n=new Ol(e,0),r=this.fs.firstAfterOrEqual(n);return qu.resolve(e.isEqual(r&&r.key))},t.prototype.performConsistencyCheck=function(t){return qu.resolve()},t.prototype.ys=function(t,e){return this.ws(t)},t.prototype.ws=function(t){return 0===this.Tn.length?0:t-this.Tn[0].batchId},t.prototype.ds=function(t){var e=this.ws(t);return e<0||e>=this.Tn.length?null:this.Tn[e]},t}(),Sl=function(){function t(t,e){this.Gt=t,this.gs=e,this.docs=new fa(po.comparator),this.size=0}return t.prototype.addEntry=function(t,e,n){var r=e.key,i=this.docs.get(r),o=i?i.size:0,s=this.gs(e);return this.docs=this.docs.insert(r,{maybeDocument:e,size:s,readTime:n}),this.size+=s-o,this.Gt.addToCollectionParentIndex(t,r.path.popLast())},t.prototype.removeEntry=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype.getEntry=function(t,e){var n=this.docs.get(e);return qu.resolve(n?n.maybeDocument:null)},t.prototype.getEntries=function(t,e){var n=this,r=_a();return e.forEach(function(t){var e=n.docs.get(t);r=r.insert(t,e?e.maybeDocument:null)}),qu.resolve(r)},t.prototype.getDocumentsMatchingQuery=function(t,e,n){for(var r=Ca(),i=new po(e.path.child("")),o=this.docs.getIteratorFrom(i);o.hasNext();){var s=o.getNext(),a=s.value,u=a.maybeDocument,c=a.readTime;if(!e.path.isPrefixOf(s.key.path))break;c.compareTo(n)<=0||u instanceof Fo&&ws(e,u)&&(r=r.insert(u.key,u))}return qu.resolve(r)},t.prototype.ps=function(t,e){return qu.forEach(this.docs,function(t){return e(t)})},t.prototype.newChangeBuffer=function(t){return new Tl(this)},t.prototype.getSize=function(t){return qu.resolve(this.size)},t}(),Tl=function(t){function e(e){var n=this;return(n=t.call(this)||this).Ve=e,n}return Object(Vi.c)(e,t),e.prototype.applyChanges=function(t){var e=this,n=[];return this.changes.forEach(function(r,i){i&&i.maybeDocument?n.push(e.Ve.addEntry(t,i.maybeDocument,e.getReadTime(r))):e.Ve.removeEntry(r)}),qu.waitFor(n)},e.prototype.getFromCache=function(t,e){return this.Ve.getEntry(t,e)},e.prototype.getAllFromCache=function(t,e){return this.Ve.getEntries(t,e)},e}(Bc),Il=function(){function t(t){this.persistence=t,this.Es=new qc(function(t){return Ho(t)},zo),this.lastRemoteSnapshotVersion=Es.min(),this.highestTargetId=0,this.Ts=0,this.Is=new Cl,this.targetCount=0,this.As=Ac.ee()}return t.prototype.forEachTarget=function(t,e){return this.Es.forEach(function(t,n){return e(n)}),qu.resolve()},t.prototype.getLastRemoteSnapshotVersion=function(t){return qu.resolve(this.lastRemoteSnapshotVersion)},t.prototype.getHighestSequenceNumber=function(t){return qu.resolve(this.Ts)},t.prototype.allocateTargetId=function(t){return this.highestTargetId=this.As.next(),qu.resolve(this.highestTargetId)},t.prototype.setTargetsMetadata=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.Ts&&(this.Ts=e),qu.resolve()},t.prototype.re=function(t){this.Es.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.As=new Ac(e),this.highestTargetId=e),t.sequenceNumber>this.Ts&&(this.Ts=t.sequenceNumber)},t.prototype.addTargetData=function(t,e){return this.re(e),this.targetCount+=1,qu.resolve()},t.prototype.updateTargetData=function(t,e){return this.re(e),qu.resolve()},t.prototype.removeTargetData=function(t,e){return this.Es.delete(e.target),this.Is.os(e.targetId),this.targetCount-=1,qu.resolve()},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return this.Es.forEach(function(s,a){a.sequenceNumber<=e&&null===n.get(a.targetId)&&(r.Es.delete(s),o.push(r.removeMatchingKeysForTargetId(t,a.targetId)),i++)}),qu.waitFor(o).next(function(){return i})},t.prototype.getTargetCount=function(t){return qu.resolve(this.targetCount)},t.prototype.getTargetData=function(t,e){var n=this.Es.get(e)||null;return qu.resolve(n)},t.prototype.addMatchingKeys=function(t,e,n){return this.Is.ns(e,n),qu.resolve()},t.prototype.removeMatchingKeys=function(t,e,n){this.Is.rs(e,n);var r=this.persistence.referenceDelegate,i=[];return r&&e.forEach(function(e){i.push(r.markPotentiallyOrphaned(t,e))}),qu.waitFor(i)},t.prototype.removeMatchingKeysForTargetId=function(t,e){return this.Is.os(e),qu.resolve()},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=this.Is.us(e);return qu.resolve(n)},t.prototype.containsKey=function(t,e){return qu.resolve(this.Is.containsKey(e))},t}(),xl=function(){function t(t,e){var n=this;this.Rs={},this.Me=new Ui(0),this.Le=!1,this.Le=!0,this.referenceDelegate=t(this),this.Ge=new Il(this),this.Gt=new yc,this.ze=function(t,e){return new Sl(t,function(t){return n.referenceDelegate.bs(t)})}(this.Gt),this.D=new nc(e),this.He=new wl(this.D)}return t.prototype.start=function(){return Promise.resolve()},t.prototype.shutdown=function(){return this.Le=!1,Promise.resolve()},Object.defineProperty(t.prototype,"started",{get:function(){return this.Le},enumerable:!1,configurable:!0}),t.prototype.setDatabaseDeletedListener=function(){},t.prototype.setNetworkEnabled=function(){},t.prototype.getIndexManager=function(){return this.Gt},t.prototype.getMutationQueue=function(t){var e=this.Rs[t.toKey()];return e||(e=new El(this.Gt,this.referenceDelegate),this.Rs[t.toKey()]=e),e},t.prototype.getTargetCache=function(){return this.Ge},t.prototype.getRemoteDocumentCache=function(){return this.ze},t.prototype.getBundleCache=function(){return this.He},t.prototype.runTransaction=function(t,e,n){var r=this;Hi("MemoryPersistence","Starting transaction:",t);var i=new Al(this.Me.next());return this.referenceDelegate.vs(),n(i).next(function(t){return r.referenceDelegate.Ps(i).next(function(){return t})}).toPromise().then(function(t){return i.raiseOnCommittedEvent(),t})},t.prototype.Vs=function(t,e){return qu.or(Object.values(this.Rs).map(function(n){return function(){return n.containsKey(t,e)}}))},t}(),Al=function(t){function e(e){var n=this;return(n=t.call(this)||this).currentSequenceNumber=e,n}return Object(Vi.c)(e,t),e}(Vu),jl=function(){function t(t){this.persistence=t,this.Ss=new Cl,this.Ds=null}return t.Cs=function(e){return new t(e)},Object.defineProperty(t.prototype,"xs",{get:function(){if(this.Ds)return this.Ds;throw Wi()},enumerable:!1,configurable:!0}),t.prototype.addReference=function(t,e,n){return this.Ss.addReference(n,e),this.xs.delete(n.toString()),qu.resolve()},t.prototype.removeReference=function(t,e,n){return this.Ss.removeReference(n,e),this.xs.add(n.toString()),qu.resolve()},t.prototype.markPotentiallyOrphaned=function(t,e){return this.xs.add(e.toString()),qu.resolve()},t.prototype.removeTarget=function(t,e){var n=this;this.Ss.os(e.targetId).forEach(function(t){return n.xs.add(t.toString())});var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,e.targetId).next(function(t){t.forEach(function(t){return n.xs.add(t.toString())})}).next(function(){return r.removeTargetData(t,e)})},t.prototype.vs=function(){this.Ds=new Set},t.prototype.Ps=function(t){var e=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return qu.forEach(this.xs,function(r){var i=po.fromPath(r);return e.Ns(t,i).next(function(t){t||n.removeEntry(i)})}).next(function(){return e.Ds=null,n.apply(t)})},t.prototype.updateLimboDocument=function(t,e){var n=this;return this.Ns(t,e).next(function(t){t?n.xs.delete(e.toString()):n.xs.add(e.toString())})},t.prototype.bs=function(t){return 0},t.prototype.Ns=function(t,e){var n=this;return qu.or([function(){return qu.resolve(n.Ss.containsKey(e))},function(){return n.persistence.getTargetCache().containsKey(t,e)},function(){return n.persistence.Vs(t,e)}])},t}(),kl=function(){function t(t){this.uid=t}return t.prototype.isAuthenticated=function(){return null!=this.uid},t.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t}();function Nl(t,e){return"firestore_clients_"+t+"_"+e}function Pl(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.isAuthenticated()&&(r+="_"+e.uid),r}function Rl(t,e){return"firestore_targets_"+t+"_"+e}kl.UNAUTHENTICATED=new kl(null),kl.GOOGLE_CREDENTIALS=new kl("google-credentials-uid"),kl.FIRST_PARTY=new kl("first-party-uid");var Dl=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}return t.$s=function(e,n,r){var i,o=JSON.parse(r),s="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return s&&o.error&&(s="string"==typeof o.error.message&&"string"==typeof o.error.code)&&(i=new uo(o.error.code,o.error.message)),s?new t(e,n,o.state,i):(zi("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.Fs=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Ml=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n}return t.$s=function(e,n){var r,i=JSON.parse(n),o="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new uo(i.error.code,i.error.message)),o?new t(e,i.state,r):(zi("SharedClientState","Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.Fs=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Ll=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.$s=function(e,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=xa(),s=0;i&&s<r.activeTargetIds.length;++s)i=so(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new t(e,o):(zi("SharedClientState","Failed to parse client data for instance '"+e+"': "+n),null)},t}(),Fl=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.$s=function(e){var n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new t(n.clientId,n.onlineState):(zi("SharedClientState","Failed to parse online state: "+e),null)},t}(),Vl=function(){function t(){this.activeTargetIds=xa()}return t.prototype.Os=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.ks=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.Fs=function(){var t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),Ul=function(){function t(t,e,n,r,i){this.window=t,this.Fe=e,this.persistenceKey=n,this.Ms=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Ls=this.Bs.bind(this),this.qs=new fa(Xi),this.started=!1,this.Us=[];var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.Qs=Nl(this.persistenceKey,this.Ms),this.Ks=function(t){return"firestore_sequence_number_"+t}(this.persistenceKey),this.qs=this.qs.insert(this.Ms,new Vl),this.Ws=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.js=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.Gs=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.zs=function(t){return"firestore_online_state_"+t}(this.persistenceKey),this.Hs=function(t){return"firestore_bundle_loaded_"+t}(this.persistenceKey),this.window.addEventListener("storage",this.Ls)}return t.At=function(t){return!(!t||!t.localStorage)},t.prototype.start=function(){return Object(Vi.b)(this,void 0,void 0,function(){var t,e,n,r,i,o,s,a,u,c,l=this;return Object(Vi.d)(this,function(h){switch(h.label){case 0:return[4,this.syncEngine.gn()];case 1:for(t=h.sent(),e=0,n=t;e<n.length;e++)(r=n[e])!==this.Ms&&(i=this.getItem(Nl(this.persistenceKey,r)))&&(o=Ll.$s(r,i))&&(this.qs=this.qs.insert(o.clientId,o));for(this.Js(),(s=this.storage.getItem(this.zs))&&(a=this.Ys(s))&&this.Xs(a),u=0,c=this.Us;u<c.length;u++)this.Bs(c[u]);return this.Us=[],this.window.addEventListener("unload",function(){return l.shutdown()}),this.started=!0,[2]}})})},t.prototype.writeSequenceNumber=function(t){this.setItem(this.Ks,JSON.stringify(t))},t.prototype.getAllActiveQueryTargets=function(){return this.Zs(this.qs)},t.prototype.isActiveQueryTarget=function(t){var e=!1;return this.qs.forEach(function(n,r){r.activeTargetIds.has(t)&&(e=!0)}),e},t.prototype.addPendingMutation=function(t){this.ti(t,"pending")},t.prototype.updateMutationState=function(t,e,n){this.ti(t,e,n),this.ei(t)},t.prototype.addLocalQueryTarget=function(t){var e="not-current";if(this.isActiveQueryTarget(t)){var n=this.storage.getItem(Rl(this.persistenceKey,t));if(n){var r=Ml.$s(t,n);r&&(e=r.state)}}return this.ni.Os(t),this.Js(),e},t.prototype.removeLocalQueryTarget=function(t){this.ni.ks(t),this.Js()},t.prototype.isLocalQueryTarget=function(t){return this.ni.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){this.removeItem(Rl(this.persistenceKey,t))},t.prototype.updateQueryState=function(t,e,n){this.si(t,e,n)},t.prototype.handleUserChange=function(t,e,n){var r=this;e.forEach(function(t){r.ei(t)}),this.currentUser=t,n.forEach(function(t){r.addPendingMutation(t)})},t.prototype.setOnlineState=function(t){this.ii(t)},t.prototype.notifyBundleLoaded=function(){this.ri()},t.prototype.shutdown=function(){this.started&&(this.window.removeEventListener("storage",this.Ls),this.removeItem(this.Qs),this.started=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return Hi("SharedClientState","READ",t,e),e},t.prototype.setItem=function(t,e){Hi("SharedClientState","SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){Hi("SharedClientState","REMOVE",t),this.storage.removeItem(t)},t.prototype.Bs=function(t){var e=this,n=t;if(n.storageArea===this.storage){if(Hi("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Qs)return void zi("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Fe.enqueueRetryable(function(){return Object(Vi.b)(e,void 0,void 0,function(){var t,e,r,i,o,s;return Object(Vi.d)(this,function(a){if(this.started){if(null!==n.key)if(this.Ws.test(n.key)){if(null==n.newValue)return t=this.oi(n.key),[2,this.ci(t,null)];if(e=this.ai(n.key,n.newValue))return[2,this.ci(e.clientId,e)]}else if(this.js.test(n.key)){if(null!==n.newValue&&(r=this.ui(n.key,n.newValue)))return[2,this.hi(r)]}else if(this.Gs.test(n.key)){if(null!==n.newValue&&(i=this.li(n.key,n.newValue)))return[2,this.fi(i)]}else if(n.key===this.zs){if(null!==n.newValue&&(o=this.Ys(n.newValue)))return[2,this.Xs(o)]}else if(n.key===this.Ks)(s=function(t){var e=Ui.o;if(null!=t)try{var n=JSON.parse(t);Ki("number"==typeof n),e=n}catch(t){zi("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(n.newValue))!==Ui.o&&this.sequenceNumberHandler(s);else if(n.key===this.Hs)return[2,this.syncEngine.di()]}else this.Us.push(n);return[2]})})})}},Object.defineProperty(t.prototype,"ni",{get:function(){return this.qs.get(this.Ms)},enumerable:!1,configurable:!0}),t.prototype.Js=function(){this.setItem(this.Qs,this.ni.Fs())},t.prototype.ti=function(t,e,n){var r=new Dl(this.currentUser,t,e,n),i=Pl(this.persistenceKey,this.currentUser,t);this.setItem(i,r.Fs())},t.prototype.ei=function(t){var e=Pl(this.persistenceKey,this.currentUser,t);this.removeItem(e)},t.prototype.ii=function(t){this.storage.setItem(this.zs,JSON.stringify({clientId:this.Ms,onlineState:t}))},t.prototype.si=function(t,e,n){var r=Rl(this.persistenceKey,t),i=new Ml(t,e,n);this.setItem(r,i.Fs())},t.prototype.ri=function(){this.setItem(this.Hs,"value-not-used")},t.prototype.oi=function(t){var e=this.Ws.exec(t);return e?e[1]:null},t.prototype.ai=function(t,e){var n=this.oi(t);return Ll.$s(n,e)},t.prototype.ui=function(t,e){var n=this.js.exec(t),r=Number(n[1]);return Dl.$s(new kl(void 0!==n[2]?n[2]:null),r,e)},t.prototype.li=function(t,e){var n=this.Gs.exec(t),r=Number(n[1]);return Ml.$s(r,e)},t.prototype.Ys=function(t){return Fl.$s(t)},t.prototype.hi=function(t){return Object(Vi.b)(this,void 0,void 0,function(){return Object(Vi.d)(this,function(e){return t.user.uid===this.currentUser.uid?[2,this.syncEngine.wi(t.batchId,t.state,t.error)]:(Hi("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])})})},t.prototype.fi=function(t){return this.syncEngine._i(t.targetId,t.state,t.error)},t.prototype.ci=function(t,e){var n=this,r=e?this.qs.insert(t,e):this.qs.remove(t),i=this.Zs(this.qs),o=this.Zs(r),s=[],a=[];return o.forEach(function(t){i.has(t)||s.push(t)}),i.forEach(function(t){o.has(t)||a.push(t)}),this.syncEngine.mi(s,a).then(function(){n.qs=r})},t.prototype.Xs=function(t){this.qs.get(t.clientId)&&this.onlineStateHandler(t.onlineState)},t.prototype.Zs=function(t){var e=xa();return t.forEach(function(t,n){e=e.unionWith(n.activeTargetIds)}),e},t}(),ql=function(){function t(){this.yi=new Vl,this.gi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return t.prototype.addPendingMutation=function(t){},t.prototype.updateMutationState=function(t,e,n){},t.prototype.addLocalQueryTarget=function(t){return this.yi.Os(t),this.gi[t]||"not-current"},t.prototype.updateQueryState=function(t,e,n){this.gi[t]=e},t.prototype.removeLocalQueryTarget=function(t){this.yi.ks(t)},t.prototype.isLocalQueryTarget=function(t){return this.yi.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){delete this.gi[t]},t.prototype.getAllActiveQueryTargets=function(){return this.yi.activeTargetIds},t.prototype.isActiveQueryTarget=function(t){return this.yi.activeTargetIds.has(t)},t.prototype.start=function(){return this.yi=new Vl,Promise.resolve()},t.prototype.handleUserChange=function(t,e,n){},t.prototype.setOnlineState=function(t){},t.prototype.shutdown=function(){},t.prototype.writeSequenceNumber=function(t){},t.prototype.notifyBundleLoaded=function(){},t}(),Bl=function(){function t(){}return t.prototype.pi=function(t){},t.prototype.shutdown=function(){},t}(),Hl=function(){function t(){var t=this;this.Ei=function(){return t.Ti()},this.Ii=function(){return t.Ai()},this.Ri=[],this.bi()}return t.prototype.pi=function(t){this.Ri.push(t)},t.prototype.shutdown=function(){window.removeEventListener("online",this.Ei),window.removeEventListener("offline",this.Ii)},t.prototype.bi=function(){window.addEventListener("online",this.Ei),window.addEventListener("offline",this.Ii)},t.prototype.Ti=function(){Hi("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.Ri;t<e.length;t++)(0,e[t])(0)},t.prototype.Ai=function(){Hi("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.Ri;t<e.length;t++)(0,e[t])(1)},t.At=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),zl={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},Gl=function(){function t(t){this.vi=t.vi,this.Pi=t.Pi}return t.prototype.Vi=function(t){this.Si=t},t.prototype.Di=function(t){this.Ci=t},t.prototype.onMessage=function(t){this.xi=t},t.prototype.close=function(){this.Pi()},t.prototype.send=function(t){this.vi(t)},t.prototype.Ni=function(){this.Si()},t.prototype.$i=function(t){this.Ci(t)},t.prototype.Fi=function(t){this.xi(t)},t}(),Ql=function(t){function e(e){var n=this;return(n=t.call(this,e)||this).forceLongPolling=e.forceLongPolling,n.autoDetectLongPolling=e.autoDetectLongPolling,n}return Object(Vi.c)(e,t),e.prototype.qi=function(t,e,n,r){return new Promise(function(i,o){var s=new Fi;s.listenOnce(Di.COMPLETE,function(){try{switch(s.getLastErrorCode()){case Ri.NO_ERROR:var e=s.getResponseJson();Hi("Connection","XHR received:",JSON.stringify(e)),i(e);break;case Ri.TIMEOUT:Hi("Connection",'RPC "'+t+'" timed out'),o(new uo(ao.DEADLINE_EXCEEDED,"Request time out"));break;case Ri.HTTP_ERROR:var n=s.getStatus();if(Hi("Connection",'RPC "'+t+'" failed with status:',n,"response text:",s.getResponseText()),n>0){var r=s.getResponseJson().error;if(r&&r.status&&r.message){var a=function(t){var e=t.toLowerCase().replace(/_/g,"-");return Object.values(ao).indexOf(e)>=0?e:ao.UNKNOWN}(r.status);o(new uo(a,r.message))}else o(new uo(ao.UNKNOWN,"Server responded with status "+s.getStatus()))}else o(new uo(ao.UNAVAILABLE,"Connection failed."));break;default:Wi()}}finally{Hi("Connection",'RPC "'+t+'" completed.')}});var a=JSON.stringify(r);s.send(e,"POST",a,n,15)})},e.prototype.Qi=function(t,e){var n=[this.Oi,"/","google.firestore.v1.Firestore","/",t,"/channel"],r=new Ai,i=Nn(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.Bi(o.initMessageHeaders,e),Object(Mt.t)()||Object(Mt.w)()||Object(Mt.q)()||Object(Mt.s)()||Object(Mt.x)()||Object(Mt.p)()||(o.httpHeadersOverwriteParam="$httpHeaders");var s=n.join("");Hi("Connection","Creating WebChannel: "+s,o);var a=r.createWebChannel(s,o),u=!1,c=!1,l=new Gl({vi:function(t){c?Hi("Connection","Not sending because WebChannel is closed:",t):(u||(Hi("Connection","Opening WebChannel transport."),a.open(),u=!0),Hi("Connection","WebChannel sending:",t),a.send(t))},Pi:function(){return a.close()}}),h=function(t,e,n){t.listen(e,function(t){try{n(t)}catch(t){setTimeout(function(){throw t},0)}})};return h(a,Li.EventType.OPEN,function(){c||Hi("Connection","WebChannel transport opened.")}),h(a,Li.EventType.CLOSE,function(){c||(c=!0,Hi("Connection","WebChannel transport closed"),l.$i())}),h(a,Li.EventType.ERROR,function(t){c||(c=!0,Gi("Connection","WebChannel transport errored:",t),l.$i(new uo(ao.UNAVAILABLE,"The operation could not be completed")))}),h(a,Li.EventType.MESSAGE,function(t){var e;if(!c){var n=t.data[0];Ki(!!n);var r=n.error||(null===(e=n[0])||void 0===e?void 0:e.error);if(r){Hi("Connection","WebChannel received error:",r);var i=r.status,o=function(t){var e=sa[t];if(void 0!==e)return da(e)}(i),s=r.message;void 0===o&&(o=ao.INTERNAL,s="Unknown error status: "+i+" with message "+r.message),c=!0,l.$i(new uo(o,s)),a.close()}else Hi("Connection","WebChannel received:",n),l.Fi(n)}}),h(i,Mi.STAT_EVENT,function(t){10===t.stat?Hi("Connection","Detected buffering proxy"):11===t.stat&&Hi("Connection","Detected no buffering proxy")}),setTimeout(function(){l.Ni()},0),l},e}(function(){function t(t){this.databaseInfo=t,this.databaseId=t.databaseId,this.Oi=(t.ssl?"https":"http")+"://"+t.host,this.ki="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return t.prototype.Mi=function(t,e,n,r){var i=this.Li(t,e);Hi("RestConnection","Sending: ",i,n);var o={};return this.Bi(o,r),this.qi(t,i,o,n).then(function(t){return Hi("RestConnection","Received: ",t),t},function(e){throw Gi("RestConnection",t+" failed with error: ",e,"url: ",i,"request:",n),e})},t.prototype.Ui=function(t,e,n,r){return this.Mi(t,e,n,r)},t.prototype.Bi=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.3.1",t["Content-Type"]="text/plain",e)for(var n in e.authHeaders)e.authHeaders.hasOwnProperty(n)&&(t[n]=e.authHeaders[n])},t.prototype.Li=function(t,e){return this.Oi+"/v1/"+e+":"+zl[t]},t}());function Wl(){return"undefined"!=typeof window?window:null}function Kl(){return"undefined"!=typeof document?document:null}function Yl(t){return new Ua(t,!0)}var $l=function(){function t(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.Fe=t,this.timerId=e,this.Ki=n,this.Wi=r,this.ji=i,this.Gi=0,this.zi=null,this.Hi=Date.now(),this.reset()}return t.prototype.reset=function(){this.Gi=0},t.prototype.Ji=function(){this.Gi=this.ji},t.prototype.Yi=function(t){var e=this;this.cancel();var n=Math.floor(this.Gi+this.Xi()),r=Math.max(0,Date.now()-this.Hi),i=Math.max(0,n-r);i>0&&Hi("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.Gi+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.zi=this.Fe.enqueueAfterDelay(this.timerId,i,function(){return e.Hi=Date.now(),t()}),this.Gi*=this.Wi,this.Gi<this.Ki&&(this.Gi=this.Ki),this.Gi>this.ji&&(this.Gi=this.ji)},t.prototype.Zi=function(){null!==this.zi&&(this.zi.skipDelay(),this.zi=null)},t.prototype.cancel=function(){null!==this.zi&&(this.zi.cancel(),this.zi=null)},t.prototype.Xi=function(){return(Math.random()-.5)*this.Gi},t}(),Jl=function(){function t(t,e,n,r,i,o){this.Fe=t,this.tr=n,this.er=r,this.nr=i,this.listener=o,this.state=0,this.sr=0,this.ir=null,this.stream=null,this.rr=new $l(t,e)}return t.prototype.cr=function(){return 1===this.state||2===this.state||4===this.state},t.prototype.ar=function(){return 2===this.state},t.prototype.start=function(){3!==this.state?this.auth():this.ur()},t.prototype.stop=function(){return Object(Vi.b)(this,void 0,void 0,function(){return Object(Vi.d)(this,function(t){switch(t.label){case 0:return this.cr()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},t.prototype.hr=function(){this.state=0,this.rr.reset()},t.prototype.lr=function(){var t=this;this.ar()&&null===this.ir&&(this.ir=this.Fe.enqueueAfterDelay(this.tr,6e4,function(){return t.dr()}))},t.prototype.wr=function(t){this._r(),this.stream.send(t)},t.prototype.dr=function(){return Object(Vi.b)(this,void 0,void 0,function(){return Object(Vi.d)(this,function(t){return this.ar()?[2,this.close(0)]:[2]})})},t.prototype._r=function(){this.ir&&(this.ir.cancel(),this.ir=null)},t.prototype.close=function(t,e){return Object(Vi.b)(this,void 0,void 0,function(){return Object(Vi.d)(this,function(n){switch(n.label){case 0:return this._r(),this.rr.cancel(),this.sr++,3!==t?this.rr.reset():e&&e.code===ao.RESOURCE_EXHAUSTED?(zi(e.toString()),zi("Using maximum backoff delay to prevent overloading the backend."),this.rr.Ji()):e&&e.code===ao.UNAUTHENTICATED&&this.nr.invalidateToken(),null!==this.stream&&(this.mr(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.Di(e)];case 1:return n.sent(),[2]}})})},t.prototype.mr=function(){},t.prototype.auth=function(){var t=this;this.state=1;var e=this.yr(this.sr),n=this.sr;this.nr.getToken().then(function(e){t.sr===n&&t.gr(e)},function(n){e(function(){var e=new uo(ao.UNKNOWN,"Fetching auth token failed: "+n.message);return t.pr(e)})})},t.prototype.gr=function(t){var e=this,n=this.yr(this.sr);this.stream=this.Er(t),this.stream.Vi(function(){n(function(){return e.state=2,e.listener.Vi()})}),this.stream.Di(function(t){n(function(){return e.pr(t)})}),this.stream.onMessage(function(t){n(function(){return e.onMessage(t)})})},t.prototype.ur=function(){var t=this;this.state=4,this.rr.Yi(function(){return Object(Vi.b)(t,void 0,void 0,function(){return Object(Vi.d)(this,function(t){return this.state=0,this.start(),[2]})})})},t.prototype.pr=function(t){return Hi("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},t.prototype.yr=function(t){var e=this;return function(n){e.Fe.enqueueAndForget(function(){return e.sr===t?n():(Hi("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())})}},t}(),Xl=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",n,r,o)||this).D=i,s}return Object(Vi.c)(e,t),e.prototype.Er=function(t){return this.er.Qi("Listen",t)},e.prototype.onMessage=function(t){this.rr.reset();var e=function(t,e){var n;if("targetChange"in e){var r=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:Wi()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(t,e){return t.V?(Ki(void 0===e||"string"==typeof e),go.fromBase64String(e||"")):(Ki(void 0===e||e instanceof Uint8Array),go.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),s=(a=e.targetChange.cause)&&function(t){var e=void 0===t.code?ao.UNKNOWN:da(t.code);return new uo(e,t.message||"")}(a);n=new Pa(r,i,o,s||null)}else if("documentChange"in e){i=Ka(t,(r=e.documentChange).document.name),o=za(r.document.updateTime);var a=new Ts({mapValue:{fields:r.document.fields}}),u=(s=new Fo(i,o,a,{}),r.targetIds||[]);n=new ka(u,r.removedTargetIds||[],s.key,s)}else if("documentDelete"in e)i=Ka(t,(r=e.documentDelete).document),o=r.readTime?za(r.readTime):Es.min(),a=new Vo(i,o),n=new ka([],s=r.removedTargetIds||[],a.key,a);else if("documentRemove"in e)i=Ka(t,(r=e.documentRemove).document),n=new ka([],o=r.removedTargetIds||[],i,null);else{if(!("filter"in e))return Wi();var c=e.filter;i=new la(r=c.count||0),n=new Na(o=c.targetId,i)}return n}(this.D,t),n=function(t){if(!("targetChange"in t))return Es.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length?Es.min():e.readTime?za(e.readTime):Es.min()}(t);return this.listener.Tr(e,n)},e.prototype.Ir=function(t){var e={};e.database=Ja(this.D),e.addTarget=function(t,e){var n,r=e.target;return(n=Go(r)?{documents:ru(t,r)}:{query:iu(t,r)}).targetId=e.targetId,e.resumeToken.approximateByteSize()>0?n.resumeToken=Ba(t,e.resumeToken):e.snapshotVersion.compareTo(Es.min())>0&&(n.readTime=qa(t,e.snapshotVersion.toTimestamp())),n}(this.D,t);var n=function(t,e){var n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Wi()}}(0,e.purpose);return null==n?null:{"goog-listen-tags":n}}(0,t);n&&(e.labels=n),this.wr(e)},e.prototype.Ar=function(t){var e={};e.database=Ja(this.D),e.removeTarget=t,this.wr(e)},e}(Jl),Zl=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle",n,r,o)||this).D=i,s.Rr=!1,s}return Object(Vi.c)(e,t),Object.defineProperty(e.prototype,"br",{get:function(){return this.Rr},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.Rr=!1,this.lastStreamToken=void 0,t.prototype.start.call(this)},e.prototype.mr=function(){this.Rr&&this.vr([])},e.prototype.Er=function(t){return this.er.Qi("Write",t)},e.prototype.onMessage=function(t){if(Ki(!!t.streamToken),this.lastStreamToken=t.streamToken,this.Rr){this.rr.reset();var e=function(t,e){return t&&t.length>0?(Ki(void 0!==e),t.map(function(t){return function(t,e){var n=za(t.updateTime?t.updateTime:e);return n.isEqual(Es.min())&&(n=za(e)),new Gs(n,t.transformResults||[])}(t,e)})):[]}(t.writeResults,t.commitTime),n=za(t.commitTime);return this.listener.Pr(n,e)}return Ki(!t.writeResults||0===t.writeResults.length),this.Rr=!0,this.listener.Vr()},e.prototype.Sr=function(){var t={};t.database=Ja(this.D),this.wr(t)},e.prototype.vr=function(t){var e=this,n={streamToken:this.lastStreamToken,writes:t.map(function(t){return eu(e.D,t)})};this.wr(n)},e}(Jl),th=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).credentials=e,i.er=n,i.D=r,i.Dr=!1,i}return Object(Vi.c)(e,t),e.prototype.Cr=function(){if(this.Dr)throw new uo(ao.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.Mi=function(t,e,n){var r=this;return this.Cr(),this.credentials.getToken().then(function(i){return r.er.Mi(t,e,n,i)}).catch(function(t){throw t.code===ao.UNAUTHENTICATED&&r.credentials.invalidateToken(),t})},e.prototype.Ui=function(t,e,n){var r=this;return this.Cr(),this.credentials.getToken().then(function(i){return r.er.Ui(t,e,n,i)}).catch(function(t){throw t.code===ao.UNAUTHENTICATED&&r.credentials.invalidateToken(),t})},e.prototype.terminate=function(){this.Dr=!1},e}(function(){}),eh=function(){function t(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.Nr=0,this.$r=null,this.Fr=!0}return t.prototype.Or=function(){var t=this;0===this.Nr&&(this.kr("Unknown"),this.$r=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,function(){return t.$r=null,t.Mr("Backend didn't respond within 10 seconds."),t.kr("Offline"),Promise.resolve()}))},t.prototype.Lr=function(t){"Online"===this.state?this.kr("Unknown"):(this.Nr++,this.Nr>=1&&(this.Br(),this.Mr("Connection failed 1 times. Most recent error: "+t.toString()),this.kr("Offline")))},t.prototype.set=function(t){this.Br(),this.Nr=0,"Online"===t&&(this.Fr=!1),this.kr(t)},t.prototype.kr=function(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))},t.prototype.Mr=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Fr?(zi(e),this.Fr=!1):Hi("OnlineStateTracker",e)},t.prototype.Br=function(){null!==this.$r&&(this.$r.cancel(),this.$r=null)},t}(),nh=function(t,e,n,r,i){var o=this;this.localStore=t,this.datastore=e,this.asyncQueue=n,this.remoteSyncer={},this.qr=[],this.Ur=new Map,this.Qr=new Set,this.Kr=[],this.Wr=i,this.Wr.pi(function(t){n.enqueueAndForget(function(){return Object(Vi.b)(o,void 0,void 0,function(){return Object(Vi.d)(this,function(t){switch(t.label){case 0:return hh(this)?(Hi("RemoteStore","Restarting streams for network reachability change."),[4,function(t){return Object(Vi.b)(this,void 0,void 0,function(){var e;return Object(Vi.d)(this,function(n){switch(n.label){case 0:return(e=Yi(t)).Qr.add(4),[4,ih(e)];case 1:return n.sent(),e.jr.set("Unknown"),e.Qr.delete(4),[4,rh(e)];case 2:return n.sent(),[2]}})})}(this)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})})}),this.jr=new eh(n,r)};function rh(t){return Object(Vi.b)(this,void 0,void 0,function(){var e,n;return Object(Vi.d)(this,function(r){switch(r.label){case 0:if(!hh(t))return[3,4];e=0,n=t.Kr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function ih(t){return Object(Vi.b)(this,void 0,void 0,function(){var e,n;return Object(Vi.d)(this,function(r){switch(r.label){case 0:e=0,n=t.Kr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function oh(t,e){var n=Yi(t);n.Ur.has(e.targetId)||(n.Ur.set(e.targetId,e),lh(n)?ch(n):Th(n).ar()&&ah(n,e))}function sh(t,e){var n=Yi(t),r=Th(n);n.Ur.delete(e),r.ar()&&uh(n,e),0===n.Ur.size&&(r.ar()?r.lr():hh(n)&&n.jr.set("Unknown"))}function ah(t,e){t.Gr.H(e.targetId),Th(t).Ir(e)}function uh(t,e){t.Gr.H(e),Th(t).Ar(e)}function ch(t){t.Gr=new Da({getRemoteKeysForTarget:function(e){return t.remoteSyncer.getRemoteKeysForTarget(e)},yt:function(e){return t.Ur.get(e)||null}}),Th(t).start(),t.jr.Or()}function lh(t){return hh(t)&&!Th(t).cr()&&t.Ur.size>0}function hh(t){return 0===Yi(t).Qr.size}function dh(t){t.Gr=void 0}function fh(t){return Object(Vi.b)(this,void 0,void 0,function(){return Object(Vi.d)(this,function(e){return t.Ur.forEach(function(e,n){ah(t,e)}),[2]})})}function ph(t,e){return Object(Vi.b)(this,void 0,void 0,function(){return Object(Vi.d)(this,function(n){return dh(t),lh(t)?(t.jr.Lr(e),ch(t)):t.jr.set("Unknown"),[2]})})}function gh(t,e,n){return Object(Vi.b)(this,void 0,void 0,function(){var r,i,o;return Object(Vi.d)(this,function(s){switch(s.label){case 0:if(t.jr.set("Online"),!(e instanceof Pa&&2===e.state&&e.cause))return[3,6];s.label=1;case 1:return s.trys.push([1,3,,5]),[4,function(t,e){return Object(Vi.b)(this,void 0,void 0,function(){var n,r,i,o;return Object(Vi.d)(this,function(s){switch(s.label){case 0:n=e.cause,r=0,i=e.targetIds,s.label=1;case 1:return r<i.length?t.Ur.has(o=i[r])?[4,t.remoteSyncer.rejectListen(o,n)]:[3,3]:[3,5];case 2:s.sent(),t.Ur.delete(o),t.Gr.removeTarget(o),s.label=3;case 3:s.label=4;case 4:return r++,[3,1];case 5:return[2]}})})}(t,e)];case 2:return s.sent(),[3,5];case 3:return r=s.sent(),Hi("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),[4,yh(t,r)];case 4:return s.sent(),[3,5];case 5:return[3,13];case 6:if(e instanceof ka?t.Gr.st(e):e instanceof Na?t.Gr.ht(e):t.Gr.ot(e),n.isEqual(Es.min()))return[3,13];s.label=7;case 7:return s.trys.push([7,11,,13]),[4,cl(t.localStore)];case 8:return i=s.sent(),n.compareTo(i)>=0?[4,function(t,e){var n=t.Gr.dt(e);return n.targetChanges.forEach(function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=t.Ur.get(r);i&&t.Ur.set(r,i.withResumeToken(n.resumeToken,e))}}),n.targetMismatches.forEach(function(e){var n=t.Ur.get(e);if(n){t.Ur.set(e,n.withResumeToken(go.EMPTY_BYTE_STRING,n.snapshotVersion)),uh(t,e);var r=new ec(n.target,e,1,n.sequenceNumber);ah(t,r)}}),t.remoteSyncer.applyRemoteEvent(n)}(t,n)]:[3,10];case 9:s.sent(),s.label=10;case 10:return[3,13];case 11:return Hi("RemoteStore","Failed to raise snapshot:",o=s.sent()),[4,yh(t,o)];case 12:return s.sent(),[3,13];case 13:return[2]}})})}function yh(t,e,n){return Object(Vi.b)(this,void 0,void 0,function(){var r=this;return Object(Vi.d)(this,function(i){switch(i.label){case 0:if(!Qu(e))throw e;return t.Qr.add(1),[4,ih(t)];case 1:return i.sent(),t.jr.set("Offline"),n||(n=function(){return cl(t.localStore)}),t.asyncQueue.enqueueRetryable(function(){return Object(Vi.b)(r,void 0,void 0,function(){return Object(Vi.d)(this,function(e){switch(e.label){case 0:return Hi("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return e.sent(),t.Qr.delete(1),[4,rh(t)];case 2:return e.sent(),[2]}})})}),[2]}})})}function mh(t,e){return e().catch(function(n){return yh(t,n,e)})}function vh(t){return Object(Vi.b)(this,void 0,void 0,function(){var e,n,r,i,o;return Object(Vi.d)(this,function(s){switch(s.label){case 0:e=Yi(t),n=Ih(e),r=e.qr.length>0?e.qr[e.qr.length-1].batchId:-1,s.label=1;case 1:if(!function(t){return hh(t)&&t.qr.length<10}(e))return[3,7];s.label=2;case 2:return s.trys.push([2,4,,6]),[4,dl(e.localStore,r)];case 3:return null===(i=s.sent())?(0===e.qr.length&&n.lr(),[3,7]):(r=i.batchId,function(t,e){t.qr.push(e);var n=Ih(t);n.ar()&&n.br&&n.vr(e.mutations)}(e,i),[3,6]);case 4:return o=s.sent(),[4,yh(e,o)];case 5:return s.sent(),[3,6];case 6:return[3,1];case 7:return bh(e)&&_h(e),[2]}})})}function bh(t){return hh(t)&&!Ih(t).cr()&&t.qr.length>0}function _h(t){Ih(t).start()}function wh(t){return Object(Vi.b)(this,void 0,void 0,function(){return Object(Vi.d)(this,function(e){return Ih(t).Sr(),[2]})})}function Ch(t){return Object(Vi.b)(this,void 0,void 0,function(){var e,n,r;return Object(Vi.d)(this,function(i){for(e=Ih(t),n=0,r=t.qr;n<r.length;n++)e.vr(r[n].mutations);return[2]})})}function Oh(t,e,n){return Object(Vi.b)(this,void 0,void 0,function(){var r,i;return Object(Vi.d)(this,function(o){switch(o.label){case 0:return r=t.qr.shift(),i=tc.from(r,e,n),[4,mh(t,function(){return t.remoteSyncer.applySuccessfulWrite(i)})];case 1:return o.sent(),[4,vh(t)];case 2:return o.sent(),[2]}})})}function Eh(t,e){return Object(Vi.b)(this,void 0,void 0,function(){return Object(Vi.d)(this,function(n){switch(n.label){case 0:return e&&Ih(t).br?[4,function(t,e){return Object(Vi.b)(this,void 0,void 0,function(){var n,r;return Object(Vi.d)(this,function(i){switch(i.label){case 0:return ha(r=e.code)&&r!==ao.ABORTED?(n=t.qr.shift(),Ih(t).hr(),[4,mh(t,function(){return t.remoteSyncer.rejectFailedWrite(n.batchId,e)})]):[3,3];case 1:return i.sent(),[4,vh(t)];case 2:i.sent(),i.label=3;case 3:return[2]}})})}(t,e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return bh(t)&&_h(t),[2]}})})}function Sh(t,e){return Object(Vi.b)(this,void 0,void 0,function(){var n;return Object(Vi.d)(this,function(r){switch(r.label){case 0:return n=Yi(t),e?(n.Qr.delete(2),[4,rh(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return e?[3,4]:(n.Qr.add(2),[4,ih(n)]);case 3:r.sent(),n.jr.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}})})}function Th(t){var e=this;return t.zr||(t.zr=function(t,e,n){var r=Yi(t);return r.Cr(),new Xl(e,r.er,r.credentials,r.D,n)}(t.datastore,t.asyncQueue,{Vi:fh.bind(null,t),Di:ph.bind(null,t),Tr:gh.bind(null,t)}),t.Kr.push(function(n){return Object(Vi.b)(e,void 0,void 0,function(){return Object(Vi.d)(this,function(e){switch(e.label){case 0:return n?(t.zr.hr(),lh(t)?ch(t):t.jr.set("Unknown"),[3,3]):[3,1];case 1:return[4,t.zr.stop()];case 2:e.sent(),dh(t),e.label=3;case 3:return[2]}})})})),t.zr}function Ih(t){var e=this;return t.Hr||(t.Hr=function(t,e,n){var r=Yi(t);return r.Cr(),new Zl(e,r.er,r.credentials,r.D,n)}(t.datastore,t.asyncQueue,{Vi:wh.bind(null,t),Di:Eh.bind(null,t),Vr:Ch.bind(null,t),Pr:Oh.bind(null,t)}),t.Kr.push(function(n){return Object(Vi.b)(e,void 0,void 0,function(){return Object(Vi.d)(this,function(e){switch(e.label){case 0:return n?(t.Hr.hr(),[4,vh(t)]):[3,2];case 1:return e.sent(),[3,4];case 2:return[4,t.Hr.stop()];case 3:e.sent(),t.qr.length>0&&(Hi("RemoteStore","Stopping write stream with "+t.qr.length+" pending writes"),t.qr=[]),e.label=4;case 4:return[2]}})})})),t.Hr}var xh=function(){function t(t,e,n,r,i){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new Uu,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(function(t){})}return t.createAndSchedule=function(e,n,r,i,o){var s=new t(e,n,Date.now()+r,i,o);return s.start(r),s},t.prototype.start=function(t){var e=this;this.timerHandle=setTimeout(function(){return e.handleDelayElapsed()},t)},t.prototype.skipDelay=function(){return this.handleDelayElapsed()},t.prototype.cancel=function(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new uo(ao.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.handleDelayElapsed=function(){var t=this;this.asyncQueue.enqueueAndForget(function(){return null!==t.timerHandle?(t.clearTimeout(),t.op().then(function(e){return t.deferred.resolve(e)})):Promise.resolve()})},t.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},t}();function Ah(t,e){if(zi("AsyncQueue",e+": "+t),Qu(t))return new uo(ao.UNAVAILABLE,e+": "+t);throw t}var jh=function(){function t(t){this.comparator=t?function(e,n){return t(e,n)||po.comparator(e.key,n.key)}:function(t,e){return po.comparator(t.key,e.key)},this.keyedMap=Ca(),this.sortedSet=new fa(this.comparator)}return t.emptySet=function(e){return new t(e.comparator)},t.prototype.has=function(t){return null!=this.keyedMap.get(t)},t.prototype.get=function(t){return this.keyedMap.get(t)},t.prototype.first=function(){return this.sortedSet.minKey()},t.prototype.last=function(){return this.sortedSet.maxKey()},t.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},t.prototype.indexOf=function(t){var e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t){this.sortedSet.inorderTraversal(function(e,n){return t(e),!1})},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach(function(e){t.push(e.toString())}),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r},t}(),kh=function(){function t(){this.Jr=new fa(po.comparator)}return t.prototype.track=function(t){var e=t.doc.key,n=this.Jr.get(e);n?0!==t.type&&3===n.type?this.Jr=this.Jr.insert(e,t):3===t.type&&1!==n.type?this.Jr=this.Jr.insert(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.Jr=this.Jr.insert(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.Jr=this.Jr.insert(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.Jr=this.Jr.remove(e):1===t.type&&2===n.type?this.Jr=this.Jr.insert(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.Jr=this.Jr.insert(e,{type:2,doc:t.doc}):Wi():this.Jr=this.Jr.insert(e,t)},t.prototype.Yr=function(){var t=[];return this.Jr.inorderTraversal(function(e,n){t.push(n)}),t},t}(),Nh=function(){function t(t,e,n,r,i,o,s,a){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=s,this.excludesMetadataChanges=a}return t.fromInitialDocuments=function(e,n,r,i){var o=[];return n.forEach(function(t){o.push({type:0,doc:t})}),new t(e,n,jh.emptySet(n),o,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&vs(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),Ph=function(){this.Xr=void 0,this.listeners=[]},Rh=function(){this.queries=new qc(function(t){return bs(t)},vs),this.onlineState="Unknown",this.Zr=new Set};function Dh(t,e){return Object(Vi.b)(this,void 0,void 0,function(){var n,r,i,o,s,a,u;return Object(Vi.d)(this,function(c){switch(c.label){case 0:if(n=Yi(t),i=!1,(o=n.queries.get(r=e.query))||(i=!0,o=new Ph),!i)return[3,4];c.label=1;case 1:return c.trys.push([1,3,,4]),s=o,[4,n.onListen(r)];case 2:return s.Xr=c.sent(),[3,4];case 3:return a=c.sent(),u=Ah(a,"Initialization of query '"+_s(e.query)+"' failed"),[2,void e.onError(u)];case 4:return n.queries.set(r,o),o.listeners.push(e),e.eo(n.onlineState),o.Xr&&e.no(o.Xr)&&Vh(n),[2]}})})}function Mh(t,e){return Object(Vi.b)(this,void 0,void 0,function(){var n,r,i,o,s;return Object(Vi.d)(this,function(a){return n=Yi(t),i=!1,(o=n.queries.get(r=e.query))&&(s=o.listeners.indexOf(e))>=0&&(o.listeners.splice(s,1),i=0===o.listeners.length),i?[2,(n.queries.delete(r),n.onUnlisten(r))]:[2]})})}function Lh(t,e){for(var n=Yi(t),r=!1,i=0,o=e;i<o.length;i++){var s=o[i],a=n.queries.get(s.query);if(a){for(var u=0,c=a.listeners;u<c.length;u++)c[u].no(s)&&(r=!0);a.Xr=s}}r&&Vh(n)}function Fh(t,e,n){var r=Yi(t),i=r.queries.get(e);if(i)for(var o=0,s=i.listeners;o<s.length;o++)s[o].onError(n);r.queries.delete(e)}function Vh(t){t.Zr.forEach(function(t){t.next()})}var Uh=function(){function t(t,e,n){this.query=t,this.so=e,this.io=!1,this.ro=null,this.onlineState="Unknown",this.options=n||{}}return t.prototype.no=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new Nh(t.query,t.docs,t.oldDocs,e,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}var o=!1;return this.io?this.oo(t)&&(this.so.next(t),o=!0):this.co(t,this.onlineState)&&(this.ao(t),o=!0),this.ro=t,o},t.prototype.onError=function(t){this.so.error(t)},t.prototype.eo=function(t){this.onlineState=t;var e=!1;return this.ro&&!this.io&&this.co(this.ro,t)&&(this.ao(this.ro),e=!0),e},t.prototype.co=function(t,e){return!t.fromCache||!(this.options.uo&&"Offline"!==e||t.docs.isEmpty()&&"Offline"!==e)},t.prototype.oo=function(t){return t.docChanges.length>0||!!(t.syncStateChanged||this.ro&&this.ro.hasPendingWrites!==t.hasPendingWrites)&&!0===this.options.includeMetadataChanges},t.prototype.ao=function(t){t=Nh.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.io=!0,this.so.next(t)},t}(),qh=function(){function t(t,e){this.payload=t,this.byteLength=e}return t.prototype.ho=function(){return"metadata"in this.payload},t}(),Bh=function(){function t(t){this.D=t}return t.prototype.Gn=function(t){return Ka(this.D,t)},t.prototype.zn=function(t){return t.metadata.exists?tu(this.D,t.document,!1):new Vo(this.Gn(t.metadata.name),this.Hn(t.metadata.readTime))},t.prototype.Hn=function(t){return za(t)},t}();!function(){function t(t,e,n){this.lo=t,this.localStore=e,this.D=n,this.queries=[],this.documents=[],this.progress=function(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}(t)}t.prototype.fo=function(t){this.progress.bytesLoaded+=t.byteLength;var e=this.progress.documentsLoaded;return t.payload.namedQuery?this.queries.push(t.payload.namedQuery):t.payload.documentMetadata?(this.documents.push({metadata:t.payload.documentMetadata}),t.payload.documentMetadata.exists||++e):t.payload.document&&(this.documents[this.documents.length-1].document=t.payload.document,++e),e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null},t.prototype.wo=function(t){for(var e=new Map,n=new Bh(this.D),r=0,i=t;r<i.length;r++){var o=i[r];if(o.metadata.queries)for(var s=n.Gn(o.metadata.name),a=0,u=o.metadata.queries;a<u.length;a++){var c=u[a],l=(e.get(c)||Ta()).add(s);e.set(c,l)}}return e},t.prototype.complete=function(){return Object(Vi.b)(this,void 0,void 0,function(){var t,e,n,r,i;return Object(Vi.d)(this,function(o){switch(o.label){case 0:return[4,bl(this.localStore,new Bh(this.D),this.documents,this.lo.id)];case 1:t=o.sent(),e=this.wo(this.documents),n=0,r=this.queries,o.label=2;case 2:return n<r.length?[4,_l(this.localStore,i=r[n],e.get(i.name))]:[3,5];case 3:o.sent(),o.label=4;case 4:return n++,[3,2];case 5:return[2,(this.progress.taskState="Success",new el(Object.assign({},this.progress),t))]}})})}}();var Hh=function(t){this.key=t},zh=function(t){this.key=t},Gh=function(){function t(t,e){this.query=t,this._o=e,this.mo=null,this.current=!1,this.yo=Ta(),this.mutatedKeys=Ta(),this.po=Cs(t),this.Eo=new jh(this.po)}return Object.defineProperty(t.prototype,"To",{get:function(){return this._o},enumerable:!1,configurable:!0}),t.prototype.Io=function(t,e){var n=this,r=e?e.Ao:new kh,i=e?e.Eo:this.Eo,o=e?e.mutatedKeys:this.mutatedKeys,s=i,a=!1,u=ls(this.query)&&i.size===this.query.limit?i.last():null,c=hs(this.query)&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal(function(t,e){var l=i.get(t),h=e instanceof Fo?e:null;h&&(h=ws(n.query,h)?h:null);var d=!!l&&n.mutatedKeys.has(l.key),f=!!h&&(h.hasLocalMutations||n.mutatedKeys.has(h.key)&&h.hasCommittedMutations),p=!1;l&&h?l.data().isEqual(h.data())?d!==f&&(r.track({type:3,doc:h}),p=!0):n.Ro(l,h)||(r.track({type:2,doc:h}),p=!0,(u&&n.po(h,u)>0||c&&n.po(h,c)<0)&&(a=!0)):!l&&h?(r.track({type:0,doc:h}),p=!0):l&&!h&&(r.track({type:1,doc:l}),p=!0,(u||c)&&(a=!0)),p&&(h?(s=s.add(h),o=f?o.add(t):o.delete(t)):(s=s.delete(t),o=o.delete(t)))}),ls(this.query)||hs(this.query))for(;s.size>this.query.limit;){var l=ls(this.query)?s.last():s.first();s=s.delete(l.key),o=o.delete(l.key),r.track({type:1,doc:l})}return{Eo:s,Ao:r,Mn:a,mutatedKeys:o}},t.prototype.Ro=function(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations},t.prototype.applyChanges=function(t,e,n){var r=this,i=this.Eo;this.Eo=t.Eo,this.mutatedKeys=t.mutatedKeys;var o=t.Ao.Yr();o.sort(function(t,e){return function(t,e){var n=function(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Wi()}};return n(t)-n(e)}(t.type,e.type)||r.po(t.doc,e.doc)}),this.bo(n);var s=e?this.vo():[],a=0===this.yo.size&&this.current?1:0,u=a!==this.mo;return this.mo=a,0!==o.length||u?{snapshot:new Nh(this.query,t.Eo,i,o,t.mutatedKeys,0===a,u,!1),Po:s}:{Po:s}},t.prototype.eo=function(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({Eo:this.Eo,Ao:new kh,mutatedKeys:this.mutatedKeys,Mn:!1},!1)):{Po:[]}},t.prototype.Vo=function(t){return!this._o.has(t)&&!!this.Eo.has(t)&&!this.Eo.get(t).hasLocalMutations},t.prototype.bo=function(t){var e=this;t&&(t.addedDocuments.forEach(function(t){return e._o=e._o.add(t)}),t.modifiedDocuments.forEach(function(t){}),t.removedDocuments.forEach(function(t){return e._o=e._o.delete(t)}),this.current=t.current)},t.prototype.vo=function(){var t=this;if(!this.current)return[];var e=this.yo;this.yo=Ta(),this.Eo.forEach(function(e){t.Vo(e.key)&&(t.yo=t.yo.add(e.key))});var n=[];return e.forEach(function(e){t.yo.has(e)||n.push(new zh(e))}),this.yo.forEach(function(t){e.has(t)||n.push(new Hh(t))}),n},t.prototype.So=function(t){this._o=t.jn,this.yo=Ta();var e=this.Io(t.documents);return this.applyChanges(e,!0)},t.prototype.Do=function(){return Nh.fromInitialDocuments(this.query,this.Eo,this.mutatedKeys,0===this.mo)},t}(),Qh=function(t,e,n){this.query=t,this.targetId=e,this.view=n},Wh=function(t){this.key=t,this.Co=!1},Kh=function(){function t(t,e,n,r,i,o){this.localStore=t,this.remoteStore=e,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.xo={},this.No=new qc(function(t){return bs(t)},vs),this.$o=new Map,this.Fo=new Set,this.Oo=new fa(po.comparator),this.ko=new Map,this.Mo=new Cl,this.Lo={},this.Bo=new Map,this.qo=Ac.ne(),this.onlineState="Unknown",this.Uo=void 0}return Object.defineProperty(t.prototype,"isPrimaryClient",{get:function(){return!0===this.Uo},enumerable:!1,configurable:!0}),t}();function Yh(t,e){return Object(Vi.b)(this,void 0,void 0,function(){var n,r,i,o,s;return Object(Vi.d)(this,function(a){switch(a.label){case 0:return n=Ed(t),(i=n.No.get(e))?(n.sharedClientState.addLocalQueryTarget(i.targetId),r=i.view.Do(),[3,4]):[3,1];case 1:return[4,fl(n.localStore,ys(e))];case 2:return o=a.sent(),s=n.sharedClientState.addLocalQueryTarget(o.targetId),[4,$h(n,e,o.targetId,"current"===s)];case 3:r=a.sent(),n.isPrimaryClient&&oh(n.remoteStore,o),a.label=4;case 4:return[2,r]}})})}function $h(t,e,n,r){return Object(Vi.b)(this,void 0,void 0,function(){var i,o,s,a,u,c;return Object(Vi.d)(this,function(l){switch(l.label){case 0:return t.Qo=function(e,n,r){return function(t,e,n,r){return Object(Vi.b)(this,void 0,void 0,function(){var i,o,s;return Object(Vi.d)(this,function(a){switch(a.label){case 0:return(i=e.view.Io(n)).Mn?[4,gl(t.localStore,e.query,!1).then(function(t){return e.view.Io(t.documents,i)})]:[3,2];case 1:i=a.sent(),a.label=2;case 2:return o=r&&r.targetChanges.get(e.targetId),s=e.view.applyChanges(i,t.isPrimaryClient,o),[2,(cd(t,e.targetId,s.Po),s.snapshot)]}})})}(t,e,n,r)},[4,gl(t.localStore,e,!0)];case 1:return i=l.sent(),o=new Gh(e,i.jn),s=o.Io(i.documents),a=ja.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==t.onlineState),u=o.applyChanges(s,t.isPrimaryClient,a),cd(t,n,u.Po),c=new Qh(e,n,o),[2,(t.No.set(e,c),t.$o.has(n)?t.$o.get(n).push(e):t.$o.set(n,[e]),u.snapshot)]}})})}function Jh(t,e){return Object(Vi.b)(this,void 0,void 0,function(){var n,r,i;return Object(Vi.d)(this,function(o){switch(o.label){case 0:return n=Yi(t),r=n.No.get(e),(i=n.$o.get(r.targetId)).length>1?[2,(n.$o.set(r.targetId,i.filter(function(t){return!vs(t,e)})),void n.No.delete(e))]:n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)?[3,2]:[4,pl(n.localStore,r.targetId,!1).then(function(){n.sharedClientState.clearQueryState(r.targetId),sh(n.remoteStore,r.targetId),ad(n,r.targetId)}).catch(Rc)]):[3,3];case 1:o.sent(),o.label=2;case 2:return[3,5];case 3:return ad(n,r.targetId),[4,pl(n.localStore,r.targetId,!0)];case 4:o.sent(),o.label=5;case 5:return[2]}})})}function Xh(t,e,n){return Object(Vi.b)(this,void 0,void 0,function(){var r,i,o,s;return Object(Vi.d)(this,function(a){switch(a.label){case 0:r=Sd(t),a.label=1;case 1:return a.trys.push([1,5,,6]),[4,function(t,e){var n,r=Yi(t),i=_o.now(),o=e.reduce(function(t,e){return t.add(e.key)},Ta());return r.persistence.runTransaction("Locally write mutations","readwrite",function(t){return r.Kn.bn(t,o).next(function(o){n=o;for(var s=[],a=0,u=e;a<u.length;a++){var c=u[a],l=Js(c,n.get(c.key));null!=l&&s.push(new ea(c.key,l,xs(l.proto.mapValue),Qs.exists(!0)))}return r.Tn.addMutationBatch(t,i,s,e)})}).then(function(t){var e=t.applyToLocalDocumentSet(n);return{batchId:t.batchId,changes:e}})}(r.localStore,e)];case 2:return i=a.sent(),r.sharedClientState.addPendingMutation(i.batchId),function(t,e,n){var r=t.Lo[t.currentUser.toKey()];r||(r=new fa(Xi)),r=r.insert(e,n),t.Lo[t.currentUser.toKey()]=r}(r,i.batchId,n),[4,dd(r,i.changes)];case 3:return a.sent(),[4,vh(r.remoteStore)];case 4:return a.sent(),[3,6];case 5:return o=a.sent(),s=Ah(o,"Failed to persist write"),n.reject(s),[3,6];case 6:return[2]}})})}function Zh(t,e){return Object(Vi.b)(this,void 0,void 0,function(){var n,r;return Object(Vi.d)(this,function(i){switch(i.label){case 0:n=Yi(t),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,ll(n.localStore,e)];case 2:return r=i.sent(),e.targetChanges.forEach(function(t,e){var r=n.ko.get(e);r&&(Ki(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1),t.addedDocuments.size>0?r.Co=!0:t.modifiedDocuments.size>0?Ki(r.Co):t.removedDocuments.size>0&&(Ki(r.Co),r.Co=!1))}),[4,dd(n,r,e)];case 3:return i.sent(),[3,6];case 4:return[4,Rc(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}})})}function td(t,e,n){var r=Yi(t);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.No.forEach(function(t,n){var r=n.view.eo(e);r.snapshot&&i.push(r.snapshot)}),function(t,e){var n=Yi(t);n.onlineState=e;var r=!1;n.queries.forEach(function(t,n){for(var i=0,o=n.listeners;i<o.length;i++)o[i].eo(e)&&(r=!0)}),r&&Vh(n)}(r.eventManager,e),i.length&&r.xo.Tr(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function ed(t,e,n){return Object(Vi.b)(this,void 0,void 0,function(){var r,i,o,s,a,u;return Object(Vi.d)(this,function(c){switch(c.label){case 0:return(r=Yi(t)).sharedClientState.updateQueryState(e,"rejected",n),i=r.ko.get(e),(o=i&&i.key)?(s=(s=new fa(po.comparator)).insert(o,new Vo(o,Es.min())),a=Ta().add(o),u=new Aa(Es.min(),new Map,new ya(Xi),s,a),[4,Zh(r,u)]):[3,2];case 1:return c.sent(),r.Oo=r.Oo.remove(o),r.ko.delete(e),hd(r),[3,4];case 2:return[4,pl(r.localStore,e,!1).then(function(){return ad(r,e,n)}).catch(Rc)];case 3:c.sent(),c.label=4;case 4:return[2]}})})}function nd(t,e){return Object(Vi.b)(this,void 0,void 0,function(){var n,r,i;return Object(Vi.d)(this,function(o){switch(o.label){case 0:n=Yi(t),r=e.batch.batchId,o.label=1;case 1:return o.trys.push([1,4,,6]),[4,ul(n.localStore,e)];case 2:return i=o.sent(),sd(n,r,null),od(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),[4,dd(n,i)];case 3:return o.sent(),[3,6];case 4:return[4,Rc(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}})})}function rd(t,e,n){return Object(Vi.b)(this,void 0,void 0,function(){var r,i;return Object(Vi.d)(this,function(o){switch(o.label){case 0:r=Yi(t),o.label=1;case 1:return o.trys.push([1,4,,6]),[4,function(t,e){var n=Yi(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",function(t){var r;return n.Tn.lookupMutationBatch(t,e).next(function(e){return Ki(null!==e),r=e.keys(),n.Tn.removeMutationBatch(t,e)}).next(function(){return n.Tn.performConsistencyCheck(t)}).next(function(){return n.Kn.bn(t,r)})})}(r.localStore,e)];case 2:return i=o.sent(),sd(r,e,n),od(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),[4,dd(r,i)];case 3:return o.sent(),[3,6];case 4:return[4,Rc(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}})})}function id(t,e){return Object(Vi.b)(this,void 0,void 0,function(){var n,r,i,o,s;return Object(Vi.d)(this,function(a){switch(a.label){case 0:hh((n=Yi(t)).remoteStore)||Hi("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,function(t){var e=Yi(t);return e.persistence.runTransaction("Get highest unacknowledged batch id","readonly",function(t){return e.Tn.getHighestUnacknowledgedBatchId(t)})}(n.localStore)];case 2:return-1===(r=a.sent())?[2,void e.resolve()]:((i=n.Bo.get(r)||[]).push(e),n.Bo.set(r,i),[3,4]);case 3:return o=a.sent(),s=Ah(o,"Initialization of waitForPendingWrites() operation failed"),e.reject(s),[3,4];case 4:return[2]}})})}function od(t,e){(t.Bo.get(e)||[]).forEach(function(t){t.resolve()}),t.Bo.delete(e)}function sd(t,e,n){var r=Yi(t),i=r.Lo[r.currentUser.toKey()];if(i){var o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.Lo[r.currentUser.toKey()]=i}}function ad(t,e,n){void 0===n&&(n=null),t.sharedClientState.removeLocalQueryTarget(e);for(var r=0,i=t.$o.get(e);r<i.length;r++){var o=i[r];t.No.delete(o),n&&t.xo.Ko(o,n)}t.$o.delete(e),t.isPrimaryClient&&t.Mo.os(e).forEach(function(e){t.Mo.containsKey(e)||ud(t,e)})}function ud(t,e){t.Fo.delete(e.path.canonicalString());var n=t.Oo.get(e);null!==n&&(sh(t.remoteStore,n),t.Oo=t.Oo.remove(e),t.ko.delete(n),hd(t))}function cd(t,e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];o instanceof Hh?(t.Mo.addReference(o.key,e),ld(t,o)):o instanceof zh?(Hi("SyncEngine","Document no longer in limbo: "+o.key),t.Mo.removeReference(o.key,e),t.Mo.containsKey(o.key)||ud(t,o.key)):Wi()}}function ld(t,e){var n=e.key,r=n.path.canonicalString();t.Oo.get(n)||t.Fo.has(r)||(Hi("SyncEngine","New document in limbo: "+n),t.Fo.add(r),hd(t))}function hd(t){for(;t.Fo.size>0&&t.Oo.size<t.maxConcurrentLimboResolutions;){var e=t.Fo.values().next().value;t.Fo.delete(e);var n=new po(lo.fromString(e)),r=t.qo.next();t.ko.set(r,new Wh(n)),t.Oo=t.Oo.insert(n,r),oh(t.remoteStore,new ec(ys(cs(n.path)),r,2,Ui.o))}}function dd(t,e,n){return Object(Vi.b)(this,void 0,void 0,function(){var r,i,o,s;return Object(Vi.d)(this,function(a){switch(a.label){case 0:return r=Yi(t),i=[],o=[],s=[],r.No.isEmpty()?[3,3]:(r.No.forEach(function(t,a){s.push(r.Qo(a,e,n).then(function(t){if(t){r.isPrimaryClient&&r.sharedClientState.updateQueryState(a.targetId,t.fromCache?"not-current":"current"),i.push(t);var e=rl.Nn(a.targetId,t);o.push(e)}}))}),[4,Promise.all(s)]);case 1:return a.sent(),r.xo.Tr(i),[4,function(t,e){return Object(Vi.b)(this,void 0,void 0,function(){var n,r,i,o,s,a,u,c;return Object(Vi.d)(this,function(l){switch(l.label){case 0:n=Yi(t),l.label=1;case 1:return l.trys.push([1,3,,4]),[4,n.persistence.runTransaction("notifyLocalViewChanges","readwrite",function(t){return qu.forEach(e,function(e){return qu.forEach(e.Cn,function(r){return n.persistence.referenceDelegate.addReference(t,e.targetId,r)}).next(function(){return qu.forEach(e.xn,function(r){return n.persistence.referenceDelegate.removeReference(t,e.targetId,r)})})})})];case 2:return l.sent(),[3,4];case 3:if(!Qu(r=l.sent()))throw r;return Hi("LocalStore","Failed to update sequence numbers: "+r),[3,4];case 4:for(i=0,o=e;i<o.length;i++)a=(s=o[i]).targetId,s.fromCache||(u=n.Bn.get(a),c=u.withLastLimboFreeSnapshotVersion(u.snapshotVersion),n.Bn=n.Bn.insert(a,c));return[2]}})})}(r.localStore,o)];case 2:a.sent(),a.label=3;case 3:return[2]}})})}function fd(t,e){return Object(Vi.b)(this,void 0,void 0,function(){var n,r;return Object(Vi.d)(this,function(i){switch(i.label){case 0:return(n=Yi(t)).currentUser.isEqual(e)?[3,3]:(Hi("SyncEngine","User change. New user:",e.toKey()),[4,al(n.localStore,e)]);case 1:return r=i.sent(),n.currentUser=e,function(t,e){t.Bo.forEach(function(t){t.forEach(function(t){t.reject(new uo(ao.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),t.Bo.clear()}(n),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),[4,dd(n,r.Wn)];case 2:i.sent(),i.label=3;case 3:return[2]}})})}function pd(t,e){var n=Yi(t),r=n.ko.get(e);if(r&&r.Co)return Ta().add(r.key);var i=Ta(),o=n.$o.get(e);if(!o)return i;for(var s=0,a=o;s<a.length;s++){var u=n.No.get(a[s]);i=i.unionWith(u.view.To)}return i}function gd(t,e){return Object(Vi.b)(this,void 0,void 0,function(){var n,r,i;return Object(Vi.d)(this,function(o){switch(o.label){case 0:return[4,gl((n=Yi(t)).localStore,e.query,!0)];case 1:return r=o.sent(),i=e.view.So(r),[2,(n.isPrimaryClient&&cd(n,e.targetId,i.Po),i)]}})})}function yd(t){return Object(Vi.b)(this,void 0,void 0,function(){var e;return Object(Vi.d)(this,function(n){return[2,ml((e=Yi(t)).localStore).then(function(t){return dd(e,t)})]})})}function md(t,e,n,r){return Object(Vi.b)(this,void 0,void 0,function(){var i,o;return Object(Vi.d)(this,function(s){switch(s.label){case 0:return[4,function(t,e){var n=Yi(t),r=Yi(n.Tn);return n.persistence.runTransaction("Lookup mutation documents","readonly",function(t){return r.Jt(t,e).next(function(e){return e?n.Kn.bn(t,e):qu.resolve(null)})})}((i=Yi(t)).localStore,e)];case 1:return null===(o=s.sent())?[3,6]:"pending"!==n?[3,3]:[4,vh(i.remoteStore)];case 2:return s.sent(),[3,4];case 3:"acknowledged"===n||"rejected"===n?(sd(i,e,r||null),od(i,e),function(t,e){Yi(Yi(t).Tn).Xt(e)}(i.localStore,e)):Wi(),s.label=4;case 4:return[4,dd(i,o)];case 5:return s.sent(),[3,7];case 6:Hi("SyncEngine","Cannot apply mutation batch with id: "+e),s.label=7;case 7:return[2]}})})}function vd(t,e){return Object(Vi.b)(this,void 0,void 0,function(){var n,r,i,o,s,a,u;return Object(Vi.d)(this,function(c){switch(c.label){case 0:return Ed(n=Yi(t)),Sd(n),!0!==e||!0===n.Uo?[3,3]:(r=n.sharedClientState.getAllActiveQueryTargets(),[4,bd(n,r.toArray())]);case 1:return i=c.sent(),n.Uo=!0,[4,Sh(n.remoteStore,!0)];case 2:for(c.sent(),o=0,s=i;o<s.length;o++)oh(n.remoteStore,s[o]);return[3,7];case 3:return!1!==e||!1===n.Uo?[3,7]:(a=[],u=Promise.resolve(),n.$o.forEach(function(t,e){n.sharedClientState.isLocalQueryTarget(e)?a.push(e):u=u.then(function(){return ad(n,e),pl(n.localStore,e,!0)}),sh(n.remoteStore,e)}),[4,u]);case 4:return c.sent(),[4,bd(n,a)];case 5:return c.sent(),function(t){var e=Yi(t);e.ko.forEach(function(t,n){sh(e.remoteStore,n)}),e.Mo.cs(),e.ko=new Map,e.Oo=new fa(po.comparator)}(n),n.Uo=!1,[4,Sh(n.remoteStore,!1)];case 6:c.sent(),c.label=7;case 7:return[2]}})})}function bd(t,e,n){return Object(Vi.b)(this,void 0,void 0,function(){var n,r,i,o,s,a,u,c,l,h,d,f,p;return Object(Vi.d)(this,function(g){switch(g.label){case 0:n=Yi(t),r=[],i=[],o=0,s=e,g.label=1;case 1:return o<s.length?(u=void 0,(c=n.$o.get(a=s[o]))&&0!==c.length?[4,fl(n.localStore,ys(c[0]))]:[3,7]):[3,13];case 2:u=g.sent(),l=0,h=c,g.label=3;case 3:return l<h.length?(d=n.No.get(h[l]),[4,gd(n,d)]):[3,6];case 4:(f=g.sent()).snapshot&&i.push(f.snapshot),g.label=5;case 5:return l++,[3,3];case 6:return[3,11];case 7:return[4,yl(n.localStore,a)];case 8:return p=g.sent(),[4,fl(n.localStore,p)];case 9:return u=g.sent(),[4,$h(n,_d(p),a,!1)];case 10:g.sent(),g.label=11;case 11:r.push(u),g.label=12;case 12:return o++,[3,1];case 13:return[2,(n.xo.Tr(i),r)]}})})}function _d(t){return us(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function wd(t){var e=Yi(t);return Yi(Yi(e.localStore).persistence).gn()}function Cd(t,e,n,r){return Object(Vi.b)(this,void 0,void 0,function(){var i,o,s;return Object(Vi.d)(this,function(a){switch(a.label){case 0:return(i=Yi(t)).Uo?(Hi("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!i.$o.has(e))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,ml(i.localStore)];case 3:return o=a.sent(),s=Aa.createSynthesizedRemoteEventForCurrentChange(e,"current"===n),[4,dd(i,o,s)];case 4:return a.sent(),[3,8];case 5:return[4,pl(i.localStore,e,!0)];case 6:return a.sent(),ad(i,e,r),[3,8];case 7:Wi(),a.label=8;case 8:return[2]}})})}function Od(t,e,n){return Object(Vi.b)(this,void 0,void 0,function(){var r,i,o,s,a,u,c,l,h;return Object(Vi.d)(this,function(d){switch(d.label){case 0:if(!(r=Ed(t)).Uo)return[3,10];i=0,o=e,d.label=1;case 1:return i<o.length?r.$o.has(s=o[i])?(Hi("SyncEngine","Adding an already active target "+s),[3,5]):[4,yl(r.localStore,s)]:[3,6];case 2:return a=d.sent(),[4,fl(r.localStore,a)];case 3:return u=d.sent(),[4,$h(r,_d(a),u.targetId,!1)];case 4:d.sent(),oh(r.remoteStore,u),d.label=5;case 5:return i++,[3,1];case 6:c=function(t){return Object(Vi.d)(this,function(e){switch(e.label){case 0:return r.$o.has(t)?[4,pl(r.localStore,t,!1).then(function(){sh(r.remoteStore,t),ad(r,t)}).catch(Rc)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})},l=0,h=n,d.label=7;case 7:return l<h.length?[5,c(h[l])]:[3,10];case 8:d.sent(),d.label=9;case 9:return l++,[3,7];case 10:return[2]}})})}function Ed(t){var e=Yi(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Zh.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=pd.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=ed.bind(null,e),e.xo.Tr=Lh.bind(null,e.eventManager),e.xo.Ko=Fh.bind(null,e.eventManager),e}function Sd(t){var e=Yi(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=nd.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=rd.bind(null,e),e}var Td=function(){function t(){this.synchronizeTabs=!1}return t.prototype.initialize=function(t){return Object(Vi.b)(this,void 0,void 0,function(){return Object(Vi.d)(this,function(e){switch(e.label){case 0:return this.D=Yl(t.databaseInfo.databaseId),this.sharedClientState=this.jo(t),this.persistence=this.Go(t),[4,this.persistence.start()];case 1:return e.sent(),this.gcScheduler=this.zo(t),this.localStore=this.Ho(t),[2]}})})},t.prototype.zo=function(t){return null},t.prototype.Ho=function(t){return sl(this.persistence,new il,t.initialUser,this.D)},t.prototype.Go=function(t){return new xl(jl.Cs,this.D)},t.prototype.jo=function(t){return new ql},t.prototype.terminate=function(){return Object(Vi.b)(this,void 0,void 0,function(){return Object(Vi.d)(this,function(t){switch(t.label){case 0:return this.gcScheduler&&this.gcScheduler.stop(),[4,this.sharedClientState.shutdown()];case 1:return t.sent(),[4,this.persistence.shutdown()];case 2:return t.sent(),[2]}})})},t}(),Id=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Jo=e,i.cacheSizeBytes=n,i.forceOwnership=r,i.synchronizeTabs=!1,i}return Object(Vi.c)(e,t),e.prototype.initialize=function(e){return Object(Vi.b)(this,void 0,void 0,function(){return Object(Vi.d)(this,function(n){switch(n.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return n.sent(),[4,vl(this.localStore)];case 2:return n.sent(),[4,this.Jo.initialize(this,e)];case 3:return n.sent(),[4,Sd(this.Jo.syncEngine)];case 4:return n.sent(),[4,vh(this.Jo.remoteStore)];case 5:return n.sent(),[2]}})})},e.prototype.Ho=function(t){return sl(this.persistence,new il,t.initialUser,this.D)},e.prototype.zo=function(t){return new Lc(this.persistence.referenceDelegate.garbageCollector,t.asyncQueue)},e.prototype.Go=function(t){var e=tl(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?wc.withCacheSize(this.cacheSizeBytes):wc.DEFAULT;return new Jc(this.synchronizeTabs,e,t.clientId,n,t.asyncQueue,Wl(),Kl(),this.D,this.sharedClientState,!!this.forceOwnership)},e.prototype.jo=function(t){return new ql},e}(Td),xd=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n,!1)||this).Jo=e,r.cacheSizeBytes=n,r.synchronizeTabs=!0,r}return Object(Vi.c)(e,t),e.prototype.initialize=function(e){return Object(Vi.b)(this,void 0,void 0,function(){var n,r=this;return Object(Vi.d)(this,function(i){switch(i.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return i.sent(),n=this.Jo.syncEngine,this.sharedClientState instanceof Ul?(this.sharedClientState.syncEngine={wi:md.bind(null,n),_i:Cd.bind(null,n),mi:Od.bind(null,n),gn:wd.bind(null,n),di:yd.bind(null,n)},[4,this.sharedClientState.start()]):[3,3];case 2:i.sent(),i.label=3;case 3:return[4,this.persistence.en(function(t){return Object(Vi.b)(r,void 0,void 0,function(){return Object(Vi.d)(this,function(e){switch(e.label){case 0:return[4,vd(this.Jo.syncEngine,t)];case 1:return e.sent(),this.gcScheduler&&(t&&!this.gcScheduler.started?this.gcScheduler.start(this.localStore):t||this.gcScheduler.stop()),[2]}})})})];case 4:return i.sent(),[2]}})})},e.prototype.jo=function(t){var e=Wl();if(!Ul.At(e))throw new uo(ao.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=tl(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new Ul(e,t.asyncQueue,n,t.clientId,t.initialUser)},e}(Id),Ad=function(){function t(){}return t.prototype.initialize=function(t,e){return Object(Vi.b)(this,void 0,void 0,function(){var n=this;return Object(Vi.d)(this,function(r){switch(r.label){case 0:return this.localStore?[3,2]:(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(t){return td(n.syncEngine,t,1)},this.remoteStore.remoteSyncer.handleCredentialChange=fd.bind(null,this.syncEngine),[4,Sh(this.remoteStore,this.syncEngine.isPrimaryClient)]);case 1:r.sent(),r.label=2;case 2:return[2]}})})},t.prototype.createEventManager=function(t){return new Rh},t.prototype.createDatastore=function(t){var e=Yl(t.databaseInfo.databaseId),n=new Ql(t.databaseInfo);return function(t,e,n){return new th(t,e,n)}(t.credentials,n,e)},t.prototype.createRemoteStore=function(t){var e,n,r,i,o,s=this;return e=this.localStore,n=this.datastore,r=t.asyncQueue,i=function(t){return td(s.syncEngine,t,0)},o=Hl.At()?new Hl:new Bl,new nh(e,n,r,i,o)},t.prototype.createSyncEngine=function(t,e){return function(t,e,n,r,i,o,s){var a=new Kh(t,e,n,r,i,o);return s&&(a.Uo=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)},t.prototype.terminate=function(){return function(t){return Object(Vi.b)(this,void 0,void 0,function(){var e;return Object(Vi.d)(this,function(n){switch(n.label){case 0:return e=Yi(t),Hi("RemoteStore","RemoteStore shutting down."),e.Qr.add(5),[4,ih(e)];case 1:return n.sent(),e.Wr.shutdown(),e.jr.set("Unknown"),[2]}})})}(this.remoteStore)},t}(),jd=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.observer.next&&this.Yo(this.observer.next,t)},t.prototype.error=function(t){this.observer.error?this.Yo(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},t.prototype.Xo=function(){this.muted=!0},t.prototype.Yo=function(t,e){var n=this;this.muted||setTimeout(function(){n.muted||t(e)},0)},t}(),kd=(function(){function t(t,e){var n=this;this.Zo=t,this.D=e,this.metadata=new Uu,this.buffer=new Uint8Array,this.tc=new TextDecoder("utf-8"),this.ec().then(function(t){t&&t.ho()?n.metadata.resolve(t.payload.metadata):n.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             "+JSON.stringify(null==t?void 0:t.payload)))},function(t){return n.metadata.reject(t)})}t.prototype.close=function(){return this.Zo.cancel()},t.prototype.getMetadata=function(){return Object(Vi.b)(this,void 0,void 0,function(){return Object(Vi.d)(this,function(t){return[2,this.metadata.promise]})})},t.prototype.Wo=function(){return Object(Vi.b)(this,void 0,void 0,function(){return Object(Vi.d)(this,function(t){switch(t.label){case 0:return[4,this.getMetadata()];case 1:return[2,(t.sent(),this.ec())]}})})},t.prototype.ec=function(){return Object(Vi.b)(this,void 0,void 0,function(){var t,e,n,r;return Object(Vi.d)(this,function(i){switch(i.label){case 0:return[4,this.nc()];case 1:return null===(t=i.sent())?[2,null]:(e=this.tc.decode(t),n=Number(e),isNaN(n)&&this.sc("length string ("+e+") is not valid number"),[4,this.ic(n)]);case 2:return r=i.sent(),[2,new qh(JSON.parse(r),t.length+n)]}})})},t.prototype.rc=function(){return this.buffer.findIndex(function(t){return t==="{".charCodeAt(0)})},t.prototype.nc=function(){return Object(Vi.b)(this,void 0,void 0,function(){var t,e;return Object(Vi.d)(this,function(n){switch(n.label){case 0:return this.rc()<0?[4,this.oc()]:[3,3];case 1:if(n.sent())return[3,3];n.label=2;case 2:return[3,0];case 3:return 0===this.buffer.length?[2,null]:((t=this.rc())<0&&this.sc("Reached the end of bundle when a length string is expected."),e=this.buffer.slice(0,t),[2,(this.buffer=this.buffer.slice(t),e)])}})})},t.prototype.ic=function(t){return Object(Vi.b)(this,void 0,void 0,function(){var e;return Object(Vi.d)(this,function(n){switch(n.label){case 0:return this.buffer.length<t?[4,this.oc()]:[3,3];case 1:n.sent()&&this.sc("Reached the end of bundle when more is expected."),n.label=2;case 2:return[3,0];case 3:return e=this.tc.decode(this.buffer.slice(0,t)),[2,(this.buffer=this.buffer.slice(t),e)]}})})},t.prototype.sc=function(t){throw this.Zo.cancel(),new Error("Invalid bundle format: "+t)},t.prototype.oc=function(){return Object(Vi.b)(this,void 0,void 0,function(){var t,e;return Object(Vi.d)(this,function(n){switch(n.label){case 0:return[4,this.Zo.read()];case 1:return(t=n.sent()).done||((e=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),e.set(t.value,this.buffer.length),this.buffer=e),[2,t.done]}})})}}(),function(){function t(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return t.prototype.lookup=function(t){return Object(Vi.b)(this,void 0,void 0,function(){var e,n=this;return Object(Vi.d)(this,function(r){switch(r.label){case 0:if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new uo(ao.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(t,e){return Object(Vi.b)(this,void 0,void 0,function(){var n,r,i,o,s,a;return Object(Vi.d)(this,function(u){switch(u.label){case 0:return n=Yi(t),r=Ja(n.D)+"/documents",i={documents:e.map(function(t){return Wa(n.D,t)})},[4,n.Ui("BatchGetDocuments",r,i)];case 1:return o=u.sent(),s=new Map,o.forEach(function(t){var e=function(t,e){return"found"in e?function(t,e){Ki(!!e.found);var n=Ka(t,e.found.name),r=za(e.found.updateTime),i=new Ts({mapValue:{fields:e.found.fields}});return new Fo(n,r,i,{})}(t,e):"missing"in e?function(t,e){Ki(!!e.missing),Ki(!!e.readTime);var n=Ka(t,e.missing),r=za(e.readTime);return new Vo(n,r)}(t,e):Wi()}(n.D,t);s.set(e.key.toString(),e)}),a=[],[2,(e.forEach(function(t){var e=s.get(t.toString());Ki(!!e),a.push(e)}),a)]}})})}(this.datastore,t)];case 1:return[2,((e=r.sent()).forEach(function(t){t instanceof Vo||t instanceof Fo?n.recordVersion(t):Wi()}),e)]}})})},t.prototype.set=function(t,e){this.write(e.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.update=function(t,e){try{this.write(e.toMutation(t,this.preconditionForUpdate(t)))}catch(t){this.lastWriteError=t}this.writtenDocs.add(t.toString())},t.prototype.delete=function(t){this.write(new ua(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.commit=function(){return Object(Vi.b)(this,void 0,void 0,function(){var t,e=this;return Object(Vi.d)(this,function(n){switch(n.label){case 0:if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;return t=this.readVersions,this.mutations.forEach(function(e){t.delete(e.key.toString())}),t.forEach(function(t,n){var r=po.fromPath(n);e.mutations.push(new ca(r,e.precondition(r)))}),[4,function(t,e){return Object(Vi.b)(this,void 0,void 0,function(){var n,r,i;return Object(Vi.d)(this,function(o){switch(o.label){case 0:return n=Yi(t),r=Ja(n.D)+"/documents",i={writes:e.map(function(t){return eu(n.D,t)})},[4,n.Mi("Commit",r,i)];case 1:return o.sent(),[2]}})})}(this.datastore,this.mutations)];case 1:return n.sent(),this.committed=!0,[2]}})})},t.prototype.recordVersion=function(t){var e;if(t instanceof Fo)e=t.version;else{if(!(t instanceof Vo))throw Wi();e=Es.min()}var n=this.readVersions.get(t.key.toString());if(n){if(!e.isEqual(n))throw new uo(ao.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),e)},t.prototype.precondition=function(t){var e=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&e?Qs.updateTime(e):Qs.none()},t.prototype.preconditionForUpdate=function(t){var e=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&e){if(e.isEqual(Es.min()))throw new uo(ao.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Qs.updateTime(e)}return Qs.exists(!0)},t.prototype.write=function(t){this.ensureCommitNotCalled(),this.mutations.push(t)},t.prototype.ensureCommitNotCalled=function(){},t}()),Nd=function(){function t(t,e,n,r){this.asyncQueue=t,this.datastore=e,this.updateFunction=n,this.deferred=r,this.cc=5,this.rr=new $l(this.asyncQueue,"transaction_retry")}return t.prototype.run=function(){this.ac()},t.prototype.ac=function(){var t=this;this.rr.Yi(function(){return Object(Vi.b)(t,void 0,void 0,function(){var t,e,n=this;return Object(Vi.d)(this,function(r){return t=new kd(this.datastore),(e=this.uc(t))&&e.then(function(e){n.asyncQueue.enqueueAndForget(function(){return t.commit().then(function(){n.deferred.resolve(e)}).catch(function(t){n.hc(t)})})}).catch(function(t){n.hc(t)}),[2]})})})},t.prototype.uc=function(t){try{var e=this.updateFunction(t);return!io(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}},t.prototype.hc=function(t){var e=this;this.cc>0&&this.lc(t)?(this.cc-=1,this.asyncQueue.enqueueAndForget(function(){return e.ac(),Promise.resolve()})):this.deferred.reject(t)},t.prototype.lc=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!ha(e)}return!1},t}(),Pd=function(){function t(t,e,n){var r=this;this.credentials=t,this.asyncQueue=e,this.databaseInfo=n,this.user=kl.UNAUTHENTICATED,this.clientId=Ji.u(),this.credentialListener=function(){},this.receivedInitialUser=new Uu,this.credentials.setChangeListener(function(t){Hi("FirestoreClient","Received user=",t.uid),r.user=t,r.credentialListener(t),r.receivedInitialUser.resolve()})}return t.prototype.getConfiguration=function(){return Object(Vi.b)(this,void 0,void 0,function(){return Object(Vi.d)(this,function(t){switch(t.label){case 0:return[4,this.receivedInitialUser.promise];case 1:return[2,(t.sent(),{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,credentials:this.credentials,initialUser:this.user,maxConcurrentLimboResolutions:100})]}})})},t.prototype.setCredentialChangeListener=function(t){var e=this;this.credentialListener=t,this.receivedInitialUser.promise.then(function(){return e.credentialListener(e.user)})},t.prototype.verifyNotTerminated=function(){if(this.asyncQueue.isShuttingDown)throw new uo(ao.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.terminate=function(){var t=this;this.asyncQueue.enterRestrictedMode();var e=new Uu;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(function(){return Object(Vi.b)(t,void 0,void 0,function(){var t,n;return Object(Vi.d)(this,function(r){switch(r.label){case 0:return r.trys.push([0,5,,6]),this.onlineComponents?[4,this.onlineComponents.terminate()]:[3,2];case 1:r.sent(),r.label=2;case 2:return this.offlineComponents?[4,this.offlineComponents.terminate()]:[3,4];case 3:r.sent(),r.label=4;case 4:return this.credentials.removeChangeListener(),e.resolve(),[3,6];case 5:return t=r.sent(),n=Ah(t,"Failed to shutdown persistence"),e.reject(n),[3,6];case 6:return[2]}})})}),e.promise},t}();function Rd(t,e){return Object(Vi.b)(this,void 0,void 0,function(){var n,r,i=this;return Object(Vi.d)(this,function(o){switch(o.label){case 0:return t.asyncQueue.verifyOperationInProgress(),Hi("FirestoreClient","Initializing OfflineComponentProvider"),[4,t.getConfiguration()];case 1:return n=o.sent(),[4,e.initialize(n)];case 2:return o.sent(),r=n.initialUser,t.setCredentialChangeListener(function(n){r.isEqual(n)||(r=n,t.asyncQueue.enqueueRetryable(function(){return Object(Vi.b)(i,void 0,void 0,function(){return Object(Vi.d)(this,function(t){switch(t.label){case 0:return[4,al(e.localStore,n)];case 1:return t.sent(),[2]}})})}))}),e.persistence.setDatabaseDeletedListener(function(){return t.terminate()}),t.offlineComponents=e,[2]}})})}function Dd(t,e){return Object(Vi.b)(this,void 0,void 0,function(){var n,r;return Object(Vi.d)(this,function(i){switch(i.label){case 0:return t.asyncQueue.verifyOperationInProgress(),[4,Md(t)];case 1:return n=i.sent(),Hi("FirestoreClient","Initializing OnlineComponentProvider"),[4,t.getConfiguration()];case 2:return r=i.sent(),[4,e.initialize(n,r)];case 3:return i.sent(),t.setCredentialChangeListener(function(n){return t.asyncQueue.enqueueRetryable(function(){return function(t,e){return Object(Vi.b)(this,void 0,void 0,function(){var n,r;return Object(Vi.d)(this,function(i){switch(i.label){case 0:return(n=Yi(t)).asyncQueue.verifyOperationInProgress(),Hi("RemoteStore","RemoteStore received new credentials"),r=hh(n),n.Qr.add(3),[4,ih(n)];case 1:return i.sent(),r&&n.jr.set("Unknown"),[4,n.remoteSyncer.handleCredentialChange(e)];case 2:return i.sent(),n.Qr.delete(3),[4,rh(n)];case 3:return i.sent(),[2]}})})}(e.remoteStore,n)})}),t.onlineComponents=e,[2]}})})}function Md(t){return Object(Vi.b)(this,void 0,void 0,function(){return Object(Vi.d)(this,function(e){switch(e.label){case 0:return t.offlineComponents?[3,2]:(Hi("FirestoreClient","Using default OfflineComponentProvider"),[4,Rd(t,new Td)]);case 1:e.sent(),e.label=2;case 2:return[2,t.offlineComponents]}})})}function Ld(t){return Object(Vi.b)(this,void 0,void 0,function(){return Object(Vi.d)(this,function(e){switch(e.label){case 0:return t.onlineComponents?[3,2]:(Hi("FirestoreClient","Using default OnlineComponentProvider"),[4,Dd(t,new Ad)]);case 1:e.sent(),e.label=2;case 2:return[2,t.onlineComponents]}})})}function Fd(t){return Md(t).then(function(t){return t.persistence})}function Vd(t){return Md(t).then(function(t){return t.localStore})}function Ud(t){return Ld(t).then(function(t){return t.remoteStore})}function qd(t){return Ld(t).then(function(t){return t.syncEngine})}function Bd(t){return Object(Vi.b)(this,void 0,void 0,function(){var e,n;return Object(Vi.d)(this,function(r){switch(r.label){case 0:return[4,Ld(t)];case 1:return e=r.sent(),[2,((n=e.eventManager).onListen=Yh.bind(null,e.syncEngine),n.onUnlisten=Jh.bind(null,e.syncEngine),n)]}})})}function Hd(t,e,n){var r=this;void 0===n&&(n={});var i=new Uu;return t.asyncQueue.enqueueAndForget(function(){return Object(Vi.b)(r,void 0,void 0,function(){var r;return Object(Vi.d)(this,function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new jd({next:function(o){e.enqueueAndForget(function(){return Mh(t,s)});var a=o.docs.has(n);!a&&o.fromCache?i.reject(new uo(ao.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&o.fromCache&&r&&"server"===r.source?i.reject(new uo(ao.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:function(t){return i.reject(t)}}),s=new Uh(cs(n.path),o,{includeMetadataChanges:!0,uo:!0});return Dh(t,s)},[4,Bd(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.asyncQueue,e,n,i])]}})})}),i.promise}function zd(t,e,n){var r=this;void 0===n&&(n={});var i=new Uu;return t.asyncQueue.enqueueAndForget(function(){return Object(Vi.b)(r,void 0,void 0,function(){var r;return Object(Vi.d)(this,function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new jd({next:function(n){e.enqueueAndForget(function(){return Mh(t,s)}),n.fromCache&&"server"===r.source?i.reject(new uo(ao.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(t){return i.reject(t)}}),s=new Uh(n,o,{includeMetadataChanges:!0,uo:!0});return Dh(t,s)},[4,Bd(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.asyncQueue,e,n,i])]}})})}),i.promise}var Gd=function(t,e,n,r,i,o){this.databaseId=t,this.persistenceKey=e,this.host=n,this.ssl=r,this.forceLongPolling=i,this.autoDetectLongPolling=o},Qd=function(){function t(t,e){this.projectId=t,this.database=e||"(default)"}return Object.defineProperty(t.prototype,"isDefaultDatabase",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t}(),Wd=new Map,Kd=function(t,e){this.user=e,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization="Bearer "+t},Yd=function(){function t(){this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t){this.changeListener=t,t(kl.UNAUTHENTICATED)},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),$d=function(){function t(t){var e=this;this.fc=null,this.currentUser=kl.UNAUTHENTICATED,this.receivedInitialUser=!1,this.dc=0,this.changeListener=null,this.forceRefresh=!1,this.fc=function(){e.dc++,e.currentUser=e.wc(),e.receivedInitialUser=!0,e.changeListener&&e.changeListener(e.currentUser)},this.dc=0,this.auth=t.getImmediate({optional:!0}),this.auth?this.auth.addAuthTokenListener(this.fc):(this.fc(null),t.get().then(function(t){e.auth=t,e.fc&&e.auth.addAuthTokenListener(e.fc)},function(){}))}return t.prototype.getToken=function(){var t=this,e=this.dc,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(function(n){return t.dc!==e?(Hi("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):n?(Ki("string"==typeof n.accessToken),new Kd(n.accessToken,t.currentUser)):null}):Promise.resolve(null)},t.prototype.invalidateToken=function(){this.forceRefresh=!0},t.prototype.setChangeListener=function(t){this.changeListener=t,this.receivedInitialUser&&t(this.currentUser)},t.prototype.removeChangeListener=function(){this.auth&&this.auth.removeAuthTokenListener(this.fc),this.fc=null,this.changeListener=null},t.prototype.wc=function(){var t=this.auth&&this.auth.getUid();return Ki(null===t||"string"==typeof t),new kl(t)},t}(),Jd=function(){function t(t,e){this._c=t,this.mc=e,this.type="FirstParty",this.user=kl.FIRST_PARTY}return Object.defineProperty(t.prototype,"authHeaders",{get:function(){var t={"X-Goog-AuthUser":this.mc},e=this._c.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),t},enumerable:!1,configurable:!0}),t}(),Xd=function(){function t(t,e){this._c=t,this.mc=e}return t.prototype.getToken=function(){return Promise.resolve(new Jd(this._c,this.mc))},t.prototype.setChangeListener=function(t){t(kl.FIRST_PARTY)},t.prototype.removeChangeListener=function(){},t.prototype.invalidateToken=function(){},t}();function Zd(t,e,n){if(!n)throw new uo(ao.INVALID_ARGUMENT,"Function "+t+"() cannot be called with an empty "+e+".")}function tf(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new uo(ao.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function ef(t,e,n,r){if(!0===e&&!0===r)throw new uo(ao.INVALID_ARGUMENT,t+" and "+n+" cannot be used together.")}function nf(t){if(!po.isDocumentKey(t))throw new uo(ao.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t+" has "+t.length+".")}function rf(t){if(po.isDocumentKey(t))throw new uo(ao.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t+" has "+t.length+".")}function of(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":Wi()}function sf(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new uo(ao.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=of(t);throw new uo(ao.INVALID_ARGUMENT,"Expected type '"+e.name+"', but it was: "+n)}return t}function af(t,e){if(e<=0)throw new uo(ao.INVALID_ARGUMENT,"Function "+t+"() requires a positive number, but it was: "+e+".")}var uf=function(){function t(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new uo(ao.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new uo(ao.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,ef("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties},t}(),cf=function(){function t(t,e){this._persistenceKey="(lite)",this._settings=new uf({}),this._settingsFrozen=!1,t instanceof Qd?(this._databaseId=t,this._credentials=new Yd):(this._app=t,this._databaseId=function(t){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new uo(ao.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Qd(t.options.projectId)}(t),this._credentials=new $d(e))}return Object.defineProperty(t.prototype,"app",{get:function(){if(!this._app)throw new uo(ao.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_initialized",{get:function(){return this._settingsFrozen},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_terminated",{get:function(){return void 0!==this._terminateTask},enumerable:!1,configurable:!0}),t.prototype._setSettings=function(t){if(this._settingsFrozen)throw new uo(ao.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new uf(t),void 0!==t.credentials&&(this._credentials=function(t){if(!t)return new Yd;switch(t.type){case"gapi":var e=t.client;return Ki(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new Xd(e,t.sessionIndex||"0");case"provider":return t.client;default:throw new uo(ao.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},t.prototype._getSettings=function(){return this._settings},t.prototype._freezeSettings=function(){return this._settingsFrozen=!0,this._settings},t.prototype._delete=function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask},t.prototype.toJSON=function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}},t.prototype._terminate=function(){return(t=Wd.get(this))&&(Hi("ComponentProvider","Removing Datastore"),Wd.delete(this),t.terminate()),Promise.resolve();var t},t}(),lf=function(t){this._delegate=t},hf=function(){function t(t,e,n){this._converter=e,this._key=n,this.type="document",this.firestore=t}return Object.defineProperty(t.prototype,"_path",{get:function(){return this._key.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new ff(this.firestore,this._converter,this._key.path.popLast())},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(e){return new t(this.firestore,e,this._key)},t}(),df=function(){function t(t,e,n){this._converter=e,this._query=n,this.type="query",this.firestore=t}return t.prototype.withConverter=function(e){return new t(this.firestore,e,this._query)},t}(),ff=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,cs(r))||this).firestore=e,i._path=r,i.type="collection",i}return Object(Vi.c)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._path.popLast();return t.isEmpty()?null:new hf(this.firestore,null,new po(t))},enumerable:!1,configurable:!0}),e.prototype.withConverter=function(t){return new e(this.firestore,t,this._path)},e}(df);function pf(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t instanceof lf&&(t=t._delegate),Zd("collection","path",e),t instanceof cf)return rf(n=lo.fromString.apply(lo,Object(Vi.f)([e],r))),new ff(t,null,n);if(!(t instanceof hf||t instanceof ff))throw new uo(ao.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return rf(n=lo.fromString.apply(lo,Object(Vi.f)([t.path],r)).child(lo.fromString(e))),new ff(t.firestore,null,n)}function gf(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t instanceof lf&&(t=t._delegate),1===arguments.length&&(e=Ji.u()),Zd("doc","path",e),t instanceof cf)return nf(n=lo.fromString.apply(lo,Object(Vi.f)([e],r))),new hf(t,null,new po(n));if(!(t instanceof hf||t instanceof ff))throw new uo(ao.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return nf(n=t._path.child(lo.fromString.apply(lo,Object(Vi.f)([e],r)))),new hf(t.firestore,t instanceof ff?t._converter:null,new po(n))}function yf(t,e){return t instanceof lf&&(t=t._delegate),e instanceof lf&&(e=e._delegate),(t instanceof hf||t instanceof ff)&&(e instanceof hf||e instanceof ff)&&t.firestore===e.firestore&&t.path===e.path&&t._converter===e._converter}function mf(t,e){return t instanceof lf&&(t=t._delegate),e instanceof lf&&(e=e._delegate),t instanceof df&&e instanceof df&&t.firestore===e.firestore&&vs(t._query,e._query)&&t._converter===e._converter}var vf=function(){function t(){var t=this;this.yc=Promise.resolve(),this.gc=[],this.Ec=!1,this.Tc=[],this.Ic=null,this.Ac=!1,this.Rc=[],this.rr=new $l(this,"async_queue_retry"),this.bc=function(){var e=Kl();e&&Hi("AsyncQueue","Visibility state changed to "+e.visibilityState),t.rr.Zi()};var e=Kl();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.bc)}return Object.defineProperty(t.prototype,"isShuttingDown",{get:function(){return this.Ec},enumerable:!1,configurable:!0}),t.prototype.enqueueAndForget=function(t){this.enqueue(t)},t.prototype.enqueueAndForgetEvenWhileRestricted=function(t){this.vc(),this.Pc(t)},t.prototype.enterRestrictedMode=function(){if(!this.Ec){this.Ec=!0;var t=Kl();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.bc)}},t.prototype.enqueue=function(t){return this.vc(),this.Ec?new Promise(function(t){}):this.Pc(t)},t.prototype.enqueueRetryable=function(t){var e=this;this.enqueueAndForget(function(){return e.gc.push(t),e.Vc()})},t.prototype.Vc=function(){return Object(Vi.b)(this,void 0,void 0,function(){var t,e=this;return Object(Vi.d)(this,function(n){switch(n.label){case 0:if(0===this.gc.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.gc[0]()];case 2:return n.sent(),this.gc.shift(),this.rr.reset(),[3,4];case 3:if(!Qu(t=n.sent()))throw t;return Hi("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.gc.length>0&&this.rr.Yi(function(){return e.Vc()}),n.label=5;case 5:return[2]}})})},t.prototype.Pc=function(t){var e=this,n=this.yc.then(function(){return e.Ac=!0,t().catch(function(t){throw e.Ic=t,e.Ac=!1,zi("INTERNAL UNHANDLED ERROR: ",function(t){var e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t)),t}).then(function(t){return e.Ac=!1,t})});return this.yc=n,n},t.prototype.enqueueAfterDelay=function(t,e,n){var r=this;this.vc(),this.Rc.indexOf(t)>-1&&(e=0);var i=xh.createAndSchedule(this,t,e,n,function(t){return r.Sc(t)});return this.Tc.push(i),i},t.prototype.vc=function(){this.Ic&&Wi()},t.prototype.verifyOperationInProgress=function(){},t.prototype.Dc=function(){return Object(Vi.b)(this,void 0,void 0,function(){var t;return Object(Vi.d)(this,function(e){switch(e.label){case 0:return[4,t=this.yc];case 1:e.sent(),e.label=2;case 2:if(t!==this.yc)return[3,0];e.label=3;case 3:return[2]}})})},t.prototype.Cc=function(t){for(var e=0,n=this.Tc;e<n.length;e++)if(n[e].timerId===t)return!0;return!1},t.prototype.xc=function(t){var e=this;return this.Dc().then(function(){e.Tc.sort(function(t,e){return t.targetTimeMs-e.targetTimeMs});for(var n=0,r=e.Tc;n<r.length;n++){var i=r[n];if(i.skipDelay(),"all"!==t&&i.timerId===t)break}return e.Dc()})},t.prototype.Nc=function(t){this.Rc.push(t)},t.prototype.Sc=function(t){var e=this.Tc.indexOf(t);this.Tc.splice(e,1)},t}();function bf(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(t)}!function(){function t(){this._progressObserver={},this._taskCompletionResolver=new Uu,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}t.prototype.onProgress=function(t,e,n){this._progressObserver={next:t,error:e,complete:n}},t.prototype.catch=function(t){return this._taskCompletionResolver.promise.catch(t)},t.prototype.then=function(t,e){return this._taskCompletionResolver.promise.then(t,e)},t.prototype._completeWith=function(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)},t.prototype._failWith=function(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)},t.prototype._updateProgress=function(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)}}();var _f=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this)._queue=new vf,r._persistenceKey="name"in e?e.name:"[DEFAULT]",r}return Object(Vi.c)(e,t),e.prototype._terminate=function(){return this._firestoreClient||Cf(this),this._firestoreClient.terminate()},e}(cf);function wf(t){return t._firestoreClient||Cf(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function Cf(t){var e=t._freezeSettings(),n=function(t,e,n){return new Gd(t,e,n.host,n.ssl,n.experimentalForceLongPolling,n.experimentalAutoDetectLongPolling)}(t._databaseId,t._persistenceKey,e);t._firestoreClient=new Pd(t._credentials,t._queue,n)}function Of(t,e,n){var r=this,i=new Uu;return t.asyncQueue.enqueue(function(){return Object(Vi.b)(r,void 0,void 0,function(){var r;return Object(Vi.d)(this,function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),[4,Rd(t,n)];case 1:return o.sent(),[4,Dd(t,e)];case 2:return o.sent(),i.resolve(),[3,4];case 3:if(!function(t){return"FirebaseError"===t.name?t.code===ao.FAILED_PRECONDITION||t.code===ao.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}(r=o.sent()))throw r;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+r),i.reject(r),[3,4];case 4:return[2]}})})}).then(function(){return i.promise})}function Ef(t){if(t._initialized||t._terminated)throw new uo(ao.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var Sf=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0;n<t.length;++n)if(0===t[n].length)throw new uo(ao.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new fo(t)}return t.prototype.isEqual=function(t){return this._internalPath.isEqual(t._internalPath)},t}(),Tf=function(){function t(t){this._byteString=t}return t.fromBase64String=function(e){try{return new t(go.fromBase64String(e))}catch(e){throw new uo(ao.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}},t.fromUint8Array=function(e){return new t(go.fromUint8Array(e))},t.prototype.toBase64=function(){return this._byteString.toBase64()},t.prototype.toUint8Array=function(){return this._byteString.toUint8Array()},t.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this._byteString.isEqual(t._byteString)},t}(),If=function(t){this._methodName=t},xf=function(){function t(t,e){if(!isFinite(t)||t<-90||t>90)throw new uo(ao.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new uo(ao.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this._lat},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this._long},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this._lat===t._lat&&this._long===t._long},t.prototype.toJSON=function(){return{latitude:this._lat,longitude:this._long}},t.prototype._compareTo=function(t){return Xi(this._lat,t._lat)||Xi(this._long,t._long)},t}(),Af=/^__.*__$/,jf=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return null!==this.fieldMask?new ea(t,this.data,this.fieldMask,e,this.fieldTransforms):new ta(t,this.data,e,this.fieldTransforms)},t}(),kf=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return new ea(t,this.data,this.fieldMask,e,this.fieldTransforms)},t}();function Nf(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Wi()}}var Pf=function(){function t(t,e,n,r,i,o){this.settings=t,this.databaseId=e,this.D=n,this.ignoreUndefinedProperties=r,void 0===i&&this.$c(),this.fieldTransforms=i||[],this.fieldMask=o||[]}return Object.defineProperty(t.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Fc",{get:function(){return this.settings.Fc},enumerable:!1,configurable:!0}),t.prototype.Oc=function(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.D,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)},t.prototype.kc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.Oc({path:n,Mc:!1});return r.Lc(t),r},t.prototype.Bc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.Oc({path:n,Mc:!1});return r.$c(),r},t.prototype.qc=function(t){return this.Oc({path:void 0,Mc:!0})},t.prototype.Uc=function(t){return Zf(t,this.settings.methodName,this.settings.Qc||!1,this.path,this.settings.Kc)},t.prototype.contains=function(t){return void 0!==this.fieldMask.find(function(e){return t.isPrefixOf(e)})||void 0!==this.fieldTransforms.find(function(e){return t.isPrefixOf(e.field)})},t.prototype.$c=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.Lc(this.path.get(t))},t.prototype.Lc=function(t){if(0===t.length)throw this.Uc("Document fields must not be empty");if(Nf(this.Fc)&&Af.test(t))throw this.Uc('Document fields cannot begin and end with "__"')},t}(),Rf=function(){function t(t,e,n){this.databaseId=t,this.ignoreUndefinedProperties=e,this.D=n||Yl(t)}return t.prototype.Wc=function(t,e,n,r){return void 0===r&&(r=!1),new Pf({Fc:t,methodName:e,Kc:n,path:fo.emptyPath(),Mc:!1,Qc:r},this.databaseId,this.D,this.ignoreUndefinedProperties)},t}();function Df(t){var e=t._freezeSettings(),n=Yl(t._databaseId);return new Rf(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Mf(t,e,n,r,i,o){void 0===o&&(o={});var s=t.Wc(o.merge||o.mergeFields?2:0,e,n,i);Yf("Data must be an object, but it was:",s,r);var a,u,c=Wf(r,s);if(o.merge)a=new Ss(s.fieldMask),u=s.fieldTransforms;else if(o.mergeFields){for(var l=[],h=0,d=o.mergeFields;h<d.length;h++){var f=$f(e,d[h],n);if(!s.contains(f))throw new uo(ao.INVALID_ARGUMENT,"Field '"+f+"' is specified in your field mask but missing from your input data.");tp(l,f)||l.push(f)}a=new Ss(l),u=s.fieldTransforms.filter(function(t){return a.covers(t.field)})}else a=null,u=s.fieldTransforms;return new jf(new Ts(c),a,u)}var Lf=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Vi.c)(e,t),e.prototype._toFieldTransform=function(t){if(2!==t.Fc)throw t.Uc(1===t.Fc?this._methodName+"() can only appear at the top level of your update data":this._methodName+"() cannot be used with set() unless you pass {merge:true}");return t.fieldMask.push(t.path),null},e.prototype.isEqual=function(t){return t instanceof e},e}(If);function Ff(t,e,n){return new Pf({Fc:3,Kc:e.settings.Kc,methodName:t._methodName,Mc:n},e.databaseId,e.D,e.ignoreUndefinedProperties)}var Vf=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Vi.c)(e,t),e.prototype._toFieldTransform=function(t){return new zs(t.path,new Ms)},e.prototype.isEqual=function(t){return t instanceof e},e}(If),Uf=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).jc=n,r}return Object(Vi.c)(e,t),e.prototype._toFieldTransform=function(t){var e=Ff(this,t,!0),n=this.jc.map(function(t){return Qf(t,e)}),r=new Ls(n);return new zs(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(If),qf=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).jc=n,r}return Object(Vi.c)(e,t),e.prototype._toFieldTransform=function(t){var e=Ff(this,t,!0),n=this.jc.map(function(t){return Qf(t,e)}),r=new Vs(n);return new zs(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(If),Bf=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Gc=n,r}return Object(Vi.c)(e,t),e.prototype._toFieldTransform=function(t){var e=new qs(t.D,ks(t.D,this.Gc));return new zs(t.path,e)},e.prototype.isEqual=function(t){return this===t},e}(If);function Hf(t,e,n,r){var i=t.Wc(1,e,n);Yf("Data must be an object, but it was:",i,r);var o=[],s=new Is;no(r,function(t,r){var a=Xf(e,t,n);r instanceof lf&&(r=r._delegate);var u=i.Bc(a);if(r instanceof Lf)o.push(a);else{var c=Qf(r,u);null!=c&&(o.push(a),s.set(a,c))}});var a=new Ss(o);return new kf(s.v(),a,i.fieldTransforms)}function zf(t,e,n,r,i,o){var s=t.Wc(1,e,n),a=[$f(e,r,n)],u=[i];if(o.length%2!=0)throw new uo(ao.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var c=0;c<o.length;c+=2)a.push($f(e,o[c])),u.push(o[c+1]);for(var l=[],h=new Is,d=a.length-1;d>=0;--d)if(!tp(l,a[d])){var f=a[d],p=u[d];p instanceof lf&&(p=p._delegate);var g=s.Bc(f);if(p instanceof Lf)l.push(f);else{var y=Qf(p,g);null!=y&&(l.push(f),h.set(f,y))}}var m=new Ss(l);return new kf(h.v(),m,s.fieldTransforms)}function Gf(t,e,n,r){return void 0===r&&(r=!1),Qf(n,t.Wc(r?4:3,e))}function Qf(t,e){if(t instanceof lf&&(t=t._delegate),Kf(t))return Yf("Unsupported field value:",e,t),Wf(t,e);if(t instanceof If)return function(t,e){if(!Nf(e.Fc))throw e.Uc(t._methodName+"() can only be used with update() and set()");if(!e.path)throw e.Uc(t._methodName+"() is not currently supported inside arrays");var n=t._toFieldTransform(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Mc&&4!==e.Fc)throw e.Uc("Nested arrays are not supported");return function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var s=Qf(o[i],e.qc(r));null==s&&(s={nullValue:"NULL_VALUE"}),n.push(s),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(t instanceof lf&&(t=t._delegate),null===t)return{nullValue:"NULL_VALUE"};if("number"==typeof t)return ks(e.D,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=_o.fromDate(t);return{timestampValue:qa(e.D,n)}}if(t instanceof _o)return n=new _o(t.seconds,1e3*Math.floor(t.nanoseconds/1e3)),{timestampValue:qa(e.D,n)};if(t instanceof xf)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Tf)return{bytesValue:Ba(e.D,t._byteString)};if(t instanceof hf){var r=t.firestore._databaseId;if(!r.isEqual(n=e.databaseId))throw e.Uc("Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return{referenceValue:Ga(t.firestore._databaseId||e.databaseId,t._key.path)}}throw e.Uc("Unsupported field value: "+of(t))}(t,e)}function Wf(t,e){var n={};return ro(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):no(t,function(t,r){var i=Qf(r,e.kc(t));null!=i&&(n[t]=i)}),{mapValue:{fields:n}}}function Kf(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof _o||t instanceof xf||t instanceof Tf||t instanceof hf||t instanceof If)}function Yf(t,e,n){if(!Kf(n)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){var r=of(n);throw e.Uc("an object"===r?t+" a custom object":t+" "+r)}}function $f(t,e,n){if(e instanceof lf&&(e=e._delegate),e instanceof Sf)return e._internalPath;if("string"==typeof e)return Xf(t,e);throw Zf("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}var Jf=new RegExp("[~\\*/\\[\\]]");function Xf(t,e,n){if(e.search(Jf)>=0)throw Zf("Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'",t,!1,void 0,n);try{return(new(Sf.bind.apply(Sf,Object(Vi.f)([void 0],e.split(".")))))._internalPath}catch(r){throw Zf("Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",t,!1,void 0,n)}}function Zf(t,e,n,r,i){var o=r&&!r.isEmpty(),s=void 0!==i,a="Function "+e+"() called with invalid data";n&&(a+=" (via `toFirestore()`)");var u="";return(o||s)&&(u+=" (found",o&&(u+=" in field "+r),s&&(u+=" in document "+i),u+=")"),new uo(ao.INVALID_ARGUMENT,(a+=". ")+t+u)}function tp(t,e){return t.some(function(t){return t.isEqual(e)})}var ep=function(){function t(t,e,n,r,i){this._firestore=t,this._userDataWriter=e,this._key=n,this._document=r,this._converter=i}return Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new hf(this._firestore,this._converter,this._key)},enumerable:!1,configurable:!0}),t.prototype.exists=function(){return null!==this._document},t.prototype.data=function(){if(this._document){if(this._converter){var t=new np(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.toProto())}},t.prototype.get=function(t){if(this._document){var e=this._document.data().field(rp("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}},t}(),np=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Vi.c)(e,t),e.prototype.data=function(){return t.prototype.data.call(this)},e}(ep);function rp(t,e){return"string"==typeof e?Xf(t,e):e instanceof lf?e._delegate._internalPath:e._internalPath}var ip=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),op=function(t){function e(e,n,r,i,o,s){var a=this;return(a=t.call(this,e,n,r,i,s)||this)._firestore=e,a._firestoreImpl=e,a.metadata=o,a}return Object(Vi.c)(e,t),e.prototype.exists=function(){return t.prototype.exists.call(this)},e.prototype.data=function(t){if(void 0===t&&(t={}),this._document){if(this._converter){var e=new sp(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.toProto(),t.serverTimestamps)}},e.prototype.get=function(t,e){if(void 0===e&&(e={}),this._document){var n=this._document.data().field(rp("DocumentSnapshot.get",t));if(null!==n)return this._userDataWriter.convertValue(n,e.serverTimestamps)}},e}(ep),sp=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Vi.c)(e,t),e.prototype.data=function(e){return void 0===e&&(e={}),t.prototype.data.call(this,e)},e}(op),ap=function(){function t(t,e,n,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new ip(r.hasPendingWrites,r.fromCache),this.query=n}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach(function(e){return t.push(e)}),t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;this._snapshot.docs.forEach(function(r){t.call(e,new sp(n._firestore,n._userDataWriter,r.key,r,new ip(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query._converter))})},t.prototype.docChanges=function(t){void 0===t&&(t={});var e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new uo(ao.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(t,e){if(t._snapshot.oldDocs.isEmpty()){var n=0;return t._snapshot.docChanges.map(function(e){return{type:"added",doc:new sp(t._firestore,t._userDataWriter,e.doc.key,e.doc,new ip(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query._converter),oldIndex:-1,newIndex:n++}})}var r=t._snapshot.oldDocs;return t._snapshot.docChanges.filter(function(t){return e||3!==t.type}).map(function(e){var n=new sp(t._firestore,t._userDataWriter,e.doc.key,e.doc,new ip(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query._converter),i=-1,o=-1;return 0!==e.type&&(i=r.indexOf(e.doc.key),r=r.delete(e.doc.key)),1!==e.type&&(o=(r=r.add(e.doc)).indexOf(e.doc.key)),{type:up(e.type),doc:n,oldIndex:i,newIndex:o}})}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges},t}();function up(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Wi()}}function cp(t,e){return t instanceof op&&e instanceof op?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(null===t._document?null===e._document:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof ap&&e instanceof ap&&t._firestore===e._firestore&&mf(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}function lp(t){if(hs(t)&&0===t.explicitOrderBy.length)throw new uo(ao.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var hp=function(){};function dp(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0,i=e;r<i.length;r++){var o=i[r];t=o._apply(t)}return t}var fp=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).zc=e,i.Hc=n,i.Jc=r,i.type="where",i}return Object(Vi.c)(e,t),e.prototype._apply=function(t){var e=Df(t.firestore),n=function(t,e,n,r,i,o,s){var a;if(i.isKeyField()){if("array-contains"===o||"array-contains-any"===o)throw new uo(ao.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o+"' queries on FieldPath.documentId().");if("in"===o||"not-in"===o){_p(s,o);for(var u=[],c=0,l=s;c<l.length;c++)u.push(bp(r,t,l[c]));a={arrayValue:{values:u}}}else a=bp(r,t,s)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||_p(s,o),a=Gf(n,"where",s,"in"===o||"not-in"===o);var h=Qo.create(i,o,a);return function(t,e){if(e.g()){var n=fs(t);if(null!==n&&!n.isEqual(e.field))throw new uo(ao.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+e.field.toString()+"'");var r=ds(t);null!==r&&wp(0,e.field,r)}var i=function(t,e){for(var n=0,r=t.filters;n<r.length;n++){var i=r[n];if(e.indexOf(i.op)>=0)return i.op}return null}(t,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==i)throw new uo(ao.INVALID_ARGUMENT,i===e.op?"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter.":"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+i.toString()+"' filters.")}(t,h),h}(t._query,0,e,t.firestore._databaseId,this.zc,this.Hc,this.Jc);return new df(t.firestore,t._converter,function(t,e){var n=t.filters.concat([e]);return new as(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}(t._query,n))},e}(hp),pp=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).zc=e,r.Yc=n,r.type="orderBy",r}return Object(Vi.c)(e,t),e.prototype._apply=function(t){var e=function(t,e,n){if(null!==t.startAt)throw new uo(ao.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new uo(ao.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new rs(e,n);return function(t,e){if(null===ds(t)){var n=fs(t);null!==n&&wp(0,n,e.field)}}(t,r),r}(t._query,this.zc,this.Yc);return new df(t.firestore,t._converter,function(t,e){var n=t.explicitOrderBy.concat([e]);return new as(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(t._query,e))},e}(hp),gp=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Xc=n,i.Zc=r,i}return Object(Vi.c)(e,t),e.prototype._apply=function(t){return new df(t.firestore,t._converter,ms(t._query,this.Xc,this.Zc))},e}(hp),yp=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.ta=n,i.ea=r,i}return Object(Vi.c)(e,t),e.prototype._apply=function(t){var e=vp(t,this.type,this.ta,this.ea);return new df(t.firestore,t._converter,function(t,e){return new as(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,e,t.endAt)}(t._query,e))},e}(hp),mp=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.ta=n,i.ea=r,i}return Object(Vi.c)(e,t),e.prototype._apply=function(t){var e=vp(t,this.type,this.ta,this.ea);return new df(t.firestore,t._converter,function(t,e){return new as(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,e)}(t._query,e))},e}(hp);function vp(t,e,n,r){if(n[0]instanceof lf&&(n[0]=n[0]._delegate),n[0]instanceof ep)return function(t,e,n,r,i){if(!r)throw new uo(ao.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+n+"().");for(var o=[],s=0,a=gs(t);s<a.length;s++){var u=a[s];if(u.field.isKeyField())o.push(ko(e,r.key));else{var c=r.field(u.field);if(wo(c))throw new uo(ao.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=u.field.canonicalString();throw new uo(ao.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+l+"' (used as the orderBy) does not exist.")}o.push(c)}}return new es(o,i)}(t._query,t.firestore._databaseId,e,n[0]._document,r);var i=Df(t.firestore);return function(t,e,n,r,i,o){var s=t.explicitOrderBy;if(i.length>s.length)throw new uo(ao.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var a=[],u=0;u<i.length;u++){var c=i[u];if(s[u].field.isKeyField()){if("string"!=typeof c)throw new uo(ao.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof c);if(!ps(t)&&-1!==c.indexOf("/"))throw new uo(ao.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+c+"' contains a slash.");var l=t.path.child(lo.fromString(c));if(!po.isDocumentKey(l))throw new uo(ao.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+l+"' is not because it contains an odd number of segments.");var h=new po(l);a.push(ko(e,h))}else{var d=Gf(n,r,c);a.push(d)}}return new es(a,o)}(t._query,t.firestore._databaseId,i,e,n,r)}function bp(t,e,n){if(n instanceof lf&&(n=n._delegate),"string"==typeof n){if(""===n)throw new uo(ao.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!ps(e)&&-1!==n.indexOf("/"))throw new uo(ao.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=e.path.child(lo.fromString(n));if(!po.isDocumentKey(r))throw new uo(ao.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return ko(t,new po(r))}if(n instanceof hf)return ko(t,n._key);throw new uo(ao.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+of(n)+".")}function _p(t,e){if(!Array.isArray(t)||0===t.length)throw new uo(ao.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new uo(ao.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.")}function wp(t,e,n){if(!n.isEqual(e))throw new uo(ao.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}var Cp=function(){function t(){}return t.prototype.convertValue=function(t,e){switch(void 0===e&&(e="none"),Eo(t)){case 0:return null;case 1:return t.booleanValue;case 2:return vo(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(bo(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw Wi()}},t.prototype.convertObject=function(t,e){var n=this,r={};return no(t.fields||{},function(t,i){r[t]=n.convertValue(i,e)}),r},t.prototype.convertGeoPoint=function(t){return new xf(vo(t.latitude),vo(t.longitude))},t.prototype.convertArray=function(t,e){var n=this;return(t.values||[]).map(function(t){return n.convertValue(t,e)})},t.prototype.convertServerTimestamp=function(t,e){switch(e){case"previous":var n=Co(t);return null==n?null:this.convertValue(n,e);case"estimate":return this.convertTimestamp(Oo(t));default:return null}},t.prototype.convertTimestamp=function(t){var e=mo(t);return new _o(e.seconds,e.nanos)},t.prototype.convertDocumentKey=function(t,e){var n=lo.fromString(t);Ki(yu(n));var r=new Qd(n.get(1),n.get(3)),i=new po(n.popFirst(5));return r.isEqual(e)||zi("Document "+i+" contains a document reference within a different database ("+r.projectId+"/"+r.database+") which is not supported. It will be treated as a reference in the current database ("+e.projectId+"/"+e.database+") instead."),i},t}();function Op(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var Ep=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(Vi.c)(e,t),e.prototype.convertBytes=function(t){return new Tf(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new hf(this.firestore,null,e)},e}(Cp),Sp=function(){function t(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=Df(t)}return t.prototype.set=function(t,e,n){this._verifyNotCommitted();var r=Tp(t,this._firestore),i=Op(r._converter,e,n),o=Mf(this._dataReader,"WriteBatch.set",r._key,i,null!==r._converter,n);return this._mutations.push(o.toMutation(r._key,Qs.none())),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];this._verifyNotCommitted();var o,s=Tp(t,this._firestore);return e instanceof lf&&(e=e._delegate),o="string"==typeof e||e instanceof Sf?zf(this._dataReader,"WriteBatch.update",s._key,e,n,r):Hf(this._dataReader,"WriteBatch.update",s._key,e),this._mutations.push(o.toMutation(s._key,Qs.exists(!0))),this},t.prototype.delete=function(t){this._verifyNotCommitted();var e=Tp(t,this._firestore);return this._mutations=this._mutations.concat(new ua(e._key,Qs.none())),this},t.prototype.commit=function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()},t.prototype._verifyNotCommitted=function(){if(this._committed)throw new uo(ao.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}();function Tp(t,e){if(t instanceof lf&&(t=t._delegate),t.firestore!==e)throw new uo(ao.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}var Ip=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(Vi.c)(e,t),e.prototype.convertBytes=function(t){return new Tf(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new hf(this.firestore,null,e)},e}(Cp);function xp(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];t=sf(t,hf);var o=sf(t.firestore,_f),s=Df(o);return e instanceof lf&&(e=e._delegate),jp(o,[("string"==typeof e||e instanceof Sf?zf(s,"updateDoc",t._key,e,n,r):Hf(s,"updateDoc",t._key,e)).toMutation(t._key,Qs.exists(!0))])}function Ap(t){for(var e,n,r,i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];t instanceof lf&&(t=t._delegate);var s={includeMetadataChanges:!1},a=0;"object"!=typeof i[a]||bf(i[a])||(s=i[a],a++);var u,c,l,h={includeMetadataChanges:s.includeMetadataChanges};if(bf(i[a])){var d=i[a];i[a]=null===(e=d.next)||void 0===e?void 0:e.bind(d),i[a+1]=null===(n=d.error)||void 0===n?void 0:n.bind(d),i[a+2]=null===(r=d.complete)||void 0===r?void 0:r.bind(d)}if(t instanceof hf)c=sf(t.firestore,_f),l=cs(t._key.path),u={next:function(e){i[a]&&i[a](kp(c,t,e))},error:i[a+1],complete:i[a+2]};else{var f=sf(t,df);c=sf(f.firestore,_f),l=f._query;var p=new Ip(c);u={next:function(t){i[a]&&i[a](new ap(c,p,f,t))},error:i[a+1],complete:i[a+2]},lp(t._query)}return function(t,e,n,r){var i=this,o=new jd(r),s=new Uh(e,o,n);return t.asyncQueue.enqueueAndForget(function(){return Object(Vi.b)(i,void 0,void 0,function(){var e;return Object(Vi.d)(this,function(n){switch(n.label){case 0:return e=Dh,[4,Bd(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}})})}),function(){o.Xo(),t.asyncQueue.enqueueAndForget(function(){return Object(Vi.b)(i,void 0,void 0,function(){var e;return Object(Vi.d)(this,function(n){switch(n.label){case 0:return e=Mh,[4,Bd(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}})})})}}(wf(c),l,h,u)}function jp(t,e){return function(t,e){var n=this,r=new Uu;return t.asyncQueue.enqueueAndForget(function(){return Object(Vi.b)(n,void 0,void 0,function(){var n;return Object(Vi.d)(this,function(i){switch(i.label){case 0:return n=Xh,[4,qd(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(wf(t),e)}function kp(t,e,n){var r=n.docs.get(e._key),i=new Ip(t);return new op(t,i,e._key,r,new ip(n.hasPendingWrites,n.fromCache),e._converter)}var Np=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this)._firestore=e,r}return Object(Vi.c)(e,t),e.prototype.get=function(e){var n=this,r=Tp(e,this._firestore),i=new Ip(this._firestore);return t.prototype.get.call(this,e).then(function(t){return new op(n._firestore,i,r._key,t._document,new ip(!1,!1),r._converter)})},e}(function(){function t(t,e){this._firestore=t,this._transaction=e,this._dataReader=Df(t)}return t.prototype.get=function(t){var e=this,n=Tp(t,this._firestore),r=new Ep(this._firestore);return this._transaction.lookup([n._key]).then(function(t){if(!t||1!==t.length)return Wi();var i=t[0];if(i instanceof Vo)return new ep(e._firestore,r,n._key,null,n._converter);if(i instanceof Fo)return new ep(e._firestore,r,i.key,i,n._converter);throw Wi()})},t.prototype.set=function(t,e,n){var r=Tp(t,this._firestore),i=Op(r._converter,e,n),o=Mf(this._dataReader,"Transaction.set",r._key,i,null!==r._converter,n);return this._transaction.set(r._key,o),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o,s=Tp(t,this._firestore);return e instanceof lf&&(e=e._delegate),o="string"==typeof e||e instanceof Sf?zf(this._dataReader,"Transaction.update",s._key,e,n,r):Hf(this._dataReader,"Transaction.update",s._key,e),this._transaction.update(s._key,o),this},t.prototype.delete=function(t){var e=Tp(t,this._firestore);return this._transaction.delete(e._key),this},t}());function Pp(){if("undefined"==typeof Uint8Array)throw new uo(ao.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function Rp(){if("undefined"==typeof atob)throw new uo(ao.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var Dp=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Vi.c)(e,t),e.fromBase64String=function(t){return Rp(),new e(Tf.fromBase64String(t))},e.fromUint8Array=function(t){return Pp(),new e(Tf.fromUint8Array(t))},e.prototype.toBase64=function(){return Rp(),this._delegate.toBase64()},e.prototype.toUint8Array=function(){return Pp(),this._delegate.toUint8Array()},e.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},e.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},e}(lf),Mp=function(){function t(){}return t.prototype.enableIndexedDbPersistence=function(t,e){return function(t,e){Ef(t=sf(t,_f));var n=wf(t),r=t._freezeSettings(),i=new Ad;return Of(n,i,new Id(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(t._delegate,{forceOwnership:e})},t.prototype.enableMultiTabIndexedDbPersistence=function(t){return function(t){Ef(t=sf(t,_f));var e=wf(t),n=t._freezeSettings(),r=new Ad;return Of(e,r,new xd(r,n.cacheSizeBytes))}(t._delegate)},t.prototype.clearIndexedDbPersistence=function(t){return function(t){var e=this;if(t._initialized&&!t._terminated)throw new uo(ao.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var n=new Uu;return t._queue.enqueueAndForgetEvenWhileRestricted(function(){return Object(Vi.b)(e,void 0,void 0,function(){var e;return Object(Vi.d)(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,function(t){return Object(Vi.b)(this,void 0,void 0,function(){return Object(Vi.d)(this,function(e){switch(e.label){case 0:return Hu.At()?[4,Hu.delete(t+"main")]:[2,Promise.resolve()];case 1:return e.sent(),[2]}})})}(tl(t._databaseId,t._persistenceKey))];case 1:return r.sent(),n.resolve(),[3,3];case 2:return e=r.sent(),n.reject(e),[3,3];case 3:return[2]}})})}),n.promise}(t._delegate)},t}(),Lp=function(t){function e(e,n,r){var i=this;return(i=t.call(this,n)||this).na=r,i.INTERNAL={delete:function(){return i.terminate()}},e instanceof Qd||(i.sa=e),i}return Object(Vi.c)(e,t),Object.defineProperty(e.prototype,"_databaseId",{get:function(){return this._delegate._databaseId},enumerable:!1,configurable:!0}),e.prototype.settings=function(t){t.merge&&delete(t=Object.assign(Object.assign({},this._delegate._getSettings()),t)).merge,this._delegate._setSettings(t)},e.prototype.useEmulator=function(t,e){!function(t,e,n){var r=(t=sf(t,cf))._getSettings();"firestore.googleapis.com"!==r.host&&r.host!==e&&Gi("Host has been set in both settings() and useEmulator(), emulator host will be used"),t._setSettings(Object.assign(Object.assign({},r),{host:e+":"+n,ssl:!1}))}(this._delegate,t,e)},e.prototype.enableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue(function(){return Object(Vi.b)(e,void 0,void 0,function(){var e,n;return Object(Vi.d)(this,function(r){switch(r.label){case 0:return[4,Fd(t)];case 1:return e=r.sent(),[4,Ud(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!0),function(t){var e=Yi(t);return e.Qr.delete(0),rh(e)}(n))]}})})})}(wf(sf(this._delegate,_f)))},e.prototype.disableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue(function(){return Object(Vi.b)(e,void 0,void 0,function(){var e,n;return Object(Vi.d)(this,function(r){switch(r.label){case 0:return[4,Fd(t)];case 1:return e=r.sent(),[4,Ud(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!1),function(t){return Object(Vi.b)(this,void 0,void 0,function(){var e;return Object(Vi.d)(this,function(n){switch(n.label){case 0:return(e=Yi(t)).Qr.add(0),[4,ih(e)];case 1:return n.sent(),e.jr.set("Offline"),[2]}})})}(n))]}})})})}(wf(sf(this._delegate,_f)))},e.prototype.enablePersistence=function(t){var e=!1,n=!1;return t&&ef("synchronizeTabs",e=!!t.synchronizeTabs,"experimentalForceOwningTab",n=!!t.experimentalForceOwningTab),e?this.na.enableMultiTabIndexedDbPersistence(this):this.na.enableIndexedDbPersistence(this,n)},e.prototype.clearPersistence=function(){return this.na.clearIndexedDbPersistence(this)},e.prototype.terminate=function(){return this.sa&&(this.sa._removeServiceInstance("firestore"),this.sa._removeServiceInstance("firestore-exp")),this._delegate._delete()},e.prototype.waitForPendingWrites=function(){return function(t){var e=this,n=new Uu;return t.asyncQueue.enqueueAndForget(function(){return Object(Vi.b)(e,void 0,void 0,function(){var e;return Object(Vi.d)(this,function(r){switch(r.label){case 0:return e=id,[4,qd(t)];case 1:return[2,e.apply(void 0,[r.sent(),n])]}})})}),n.promise}(wf(sf(this._delegate,_f)))},e.prototype.onSnapshotsInSync=function(t){return function(t,e){return function(t,e){var n=this,r=new jd(e);return t.asyncQueue.enqueueAndForget(function(){return Object(Vi.b)(n,void 0,void 0,function(){var e;return Object(Vi.d)(this,function(n){switch(n.label){case 0:return e=function(t,e){Yi(t).Zr.add(e),e.next()},[4,Bd(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}})})}),function(){r.Xo(),t.asyncQueue.enqueueAndForget(function(){return Object(Vi.b)(n,void 0,void 0,function(){var e;return Object(Vi.d)(this,function(n){switch(n.label){case 0:return e=function(t,e){Yi(t).Zr.delete(e)},[4,Bd(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}})})})}}(wf(t=sf(t,_f)),bf(e)?e:{next:e})}(this._delegate,t)},Object.defineProperty(e.prototype,"app",{get:function(){if(!this.sa)throw new uo(ao.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.sa},enumerable:!1,configurable:!0}),e.prototype.collection=function(t){try{return new Jp(this,pf(this._delegate,t))}catch(t){throw Hp(t,"collection()","Firestore.collection()")}},e.prototype.doc=function(t){try{return new Bp(this,gf(this._delegate,t))}catch(t){throw Hp(t,"doc()","Firestore.doc()")}},e.prototype.collectionGroup=function(t){try{return new Kp(this,function(t,e){if(t=sf(t,cf),Zd("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new uo(ao.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new df(t,null,function(t){return new as(lo.emptyPath(),t)}(e))}(this._delegate,t))}catch(t){throw Hp(t,"collectionGroup()","Firestore.collectionGroup()")}},e.prototype.runTransaction=function(t){var e=this;return function(t,e){return function(t,e){var n=this,r=new Uu;return t.asyncQueue.enqueueAndForget(function(){return Object(Vi.b)(n,void 0,void 0,function(){var n;return Object(Vi.d)(this,function(i){switch(i.label){case 0:return[4,function(t){return Ld(t).then(function(t){return t.datastore})}(t)];case 1:return n=i.sent(),new Nd(t.asyncQueue,n,e,r).run(),[2]}})})}),r.promise}(wf(t),function(n){return e(new Np(t,n))})}(this._delegate,function(n){return t(new Vp(e,n))})},e.prototype.batch=function(){var t=this;return wf(this._delegate),new Up(new Sp(this._delegate,function(e){return jp(t._delegate,e)}))},e.prototype.loadBundle=function(t){throw new uo(ao.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},e.prototype.namedQuery=function(t){throw new uo(ao.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},e}(lf),Fp=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(Vi.c)(e,t),e.prototype.convertBytes=function(t){return new Dp(new Tf(t))},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return Bp.ia(e,this.firestore,null)},e}(Cp),Vp=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this)._firestore=e,r._userDataWriter=new Fp(e),r}return Object(Vi.c)(e,t),e.prototype.get=function(t){var e=this,n=Xp(t);return this._delegate.get(n).then(function(t){return new Qp(e._firestore,new op(e._firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,n._converter))})},e.prototype.set=function(t,e,n){var r=Xp(t);return n?(tf("Transaction.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},e.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=Xp(t);return 2===arguments.length?this._delegate.update(s,e):(r=this._delegate).update.apply(r,Object(Vi.f)([s,e,n],i)),this},e.prototype.delete=function(t){var e=Xp(t);return this._delegate.delete(e),this},e}(lf),Up=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Vi.c)(e,t),e.prototype.set=function(t,e,n){var r=Xp(t);return n?(tf("WriteBatch.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},e.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=Xp(t);return 2===arguments.length?this._delegate.update(s,e):(r=this._delegate).update.apply(r,Object(Vi.f)([s,e,n],i)),this},e.prototype.delete=function(t){var e=Xp(t);return this._delegate.delete(e),this},e.prototype.commit=function(){return this._delegate.commit()},e}(lf),qp=function(t){function e(e,n,r){var i=this;return(i=t.call(this,r)||this)._firestore=e,i._userDataWriter=n,i}return Object(Vi.c)(e,t),e.prototype.fromFirestore=function(t,e){var n=new sp(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new Wp(this._firestore,n),null!=e?e:{})},e.prototype.toFirestore=function(t,e){return e?this._delegate.toFirestore(t,e):this._delegate.toFirestore(t)},e.ra=function(t,n){var r=e.oa,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var o=i.get(n);return o||(o=new e(t,new Fp(t),n),i.set(n,o)),o},e}(lf);qp.oa=new WeakMap;var Bp=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).firestore=e,r._userDataWriter=new Fp(e),r}return Object(Vi.c)(e,t),e.ca=function(t,n,r){if(t.length%2!=0)throw new uo(ao.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t.canonicalString()+" has "+t.length);return new e(n,new hf(n._delegate,r,new po(t)))},e.ia=function(t,n,r){return new e(n,new hf(n._delegate,r,t))},Object.defineProperty(e.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return new Jp(this.firestore,this._delegate.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),e.prototype.collection=function(t){try{return new Jp(this.firestore,pf(this._delegate,t))}catch(t){throw Hp(t,"collection()","DocumentReference.collection()")}},e.prototype.isEqual=function(t){return t instanceof lf&&(t=t._delegate),t instanceof hf&&yf(this._delegate,t)},e.prototype.set=function(t,e){e=tf("DocumentReference.set",e);try{return function(t,e,n){t=sf(t,hf);var r=sf(t.firestore,_f),i=Op(t._converter,e,n);return jp(r,[Mf(Df(r),"setDoc",t._key,i,null!==t._converter,n).toMutation(t._key,Qs.none())])}(this._delegate,t,e)}catch(t){throw Hp(t,"setDoc()","DocumentReference.set()")}},e.prototype.update=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];try{return 1===arguments.length?xp(this._delegate,t):xp.apply(void 0,Object(Vi.f)([this._delegate,t,e],n))}catch(t){throw Hp(t,"updateDoc()","DocumentReference.update()")}},e.prototype.delete=function(){return jp(sf((t=this._delegate).firestore,_f),[new ua(t._key,Qs.none())]);var t},e.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=zp(e),i=Gp(e,function(e){return new Qp(t.firestore,new op(t.firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,t._delegate._converter))});return Ap(this._delegate,r,i)},e.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=sf(t,hf);var e=sf(t.firestore,_f),n=wf(e),r=new Ip(e);return function(t,e){var n=this,r=new Uu;return t.asyncQueue.enqueueAndForget(function(){return Object(Vi.b)(n,void 0,void 0,function(){var n;return Object(Vi.d)(this,function(i){switch(i.label){case 0:return n=function(t,e,n){return Object(Vi.b)(this,void 0,void 0,function(){var r,i;return Object(Vi.d)(this,function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,function(t,e){var n=Yi(t);return n.persistence.runTransaction("read document","readonly",function(t){return n.Kn.In(t,e)})}(t,e)];case 1:return(i=o.sent())instanceof Fo?n.resolve(i):i instanceof Vo?n.resolve(null):n.reject(new uo(ao.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return r=o.sent(),i=Ah(r,"Failed to get document '"+e+" from cache"),n.reject(i),[3,3];case 3:return[2]}})})},[4,Vd(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(n,t._key).then(function(n){return new op(e,r,t._key,n,new ip(n instanceof Fo&&n.hasLocalMutations,!0),t._converter)})}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=sf(t,hf);var e=sf(t.firestore,_f);return Hd(wf(e),t._key,{source:"server"}).then(function(n){return kp(e,t,n)})}(this._delegate):function(t){t=sf(t,hf);var e=sf(t.firestore,_f);return Hd(wf(e),t._key).then(function(n){return kp(e,t,n)})}(this._delegate)).then(function(t){return new Qp(e.firestore,new op(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate._converter))})},e.prototype.withConverter=function(t){return new e(this.firestore,this._delegate.withConverter(t?qp.ra(this.firestore,t):null))},e}(lf);function Hp(t,e,n){return t.message=t.message.replace(e,n),t}function zp(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if("object"==typeof r&&!bf(r))return r}return{}}function Gp(t,e){var n,r,i;return{next:function(t){i.next&&i.next(e(t))},error:null===(n=(i=bf(t[0])?t[0]:bf(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var Qp=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this)._firestore=e,r}return Object(Vi.c)(e,t),Object.defineProperty(e.prototype,"ref",{get:function(){return new Bp(this._firestore,this._delegate.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"exists",{get:function(){return this._delegate.exists()},enumerable:!1,configurable:!0}),e.prototype.data=function(t){return this._delegate.data(t)},e.prototype.get=function(t,e){return this._delegate.get(t,e)},e.prototype.isEqual=function(t){return cp(this._delegate,t._delegate)},e}(lf),Wp=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Vi.c)(e,t),e.prototype.data=function(t){return this._delegate.data(t)},e}(Qp),Kp=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).firestore=e,r._userDataWriter=new Fp(e),r}return Object(Vi.c)(e,t),e.prototype.where=function(t,n,r){try{return new e(this.firestore,dp(this._delegate,function(t,e,n){var r=e,i=rp("where",t);return new fp(i,r,n)}(t,n,r)))}catch(t){throw Hp(t,/(orderBy|where)\(\)/,"Query.$1()")}},e.prototype.orderBy=function(t,n){try{return new e(this.firestore,dp(this._delegate,function(t,e){void 0===e&&(e="asc");var n=e,r=rp("orderBy",t);return new pp(r,n)}(t,n)))}catch(t){throw Hp(t,/(orderBy|where)\(\)/,"Query.$1()")}},e.prototype.limit=function(t){try{return new e(this.firestore,dp(this._delegate,function(t){return af("limit",t),new gp("limit",t,"F")}(t)))}catch(t){throw Hp(t,"limit()","Query.limit()")}},e.prototype.limitToLast=function(t){try{return new e(this.firestore,dp(this._delegate,function(t){return af("limitToLast",t),new gp("limitToLast",t,"L")}(t)))}catch(t){throw Hp(t,"limitToLast()","Query.limitToLast()")}},e.prototype.startAt=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,dp(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new yp("startAt",t,!0)}).apply(void 0,t)))}catch(t){throw Hp(t,"startAt()","Query.startAt()")}},e.prototype.startAfter=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,dp(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new yp("startAfter",t,!1)}).apply(void 0,t)))}catch(t){throw Hp(t,"startAfter()","Query.startAfter()")}},e.prototype.endBefore=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,dp(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new mp("endBefore",t,!0)}).apply(void 0,t)))}catch(t){throw Hp(t,"endBefore()","Query.endBefore()")}},e.prototype.endAt=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,dp(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new mp("endAt",t,!1)}).apply(void 0,t)))}catch(t){throw Hp(t,"endAt()","Query.endAt()")}},e.prototype.isEqual=function(t){return mf(this._delegate,t._delegate)},e.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=sf(t,df);var e=sf(t.firestore,_f),n=wf(e),r=new Ip(e);return function(t,e){var n=this,r=new Uu;return t.asyncQueue.enqueueAndForget(function(){return Object(Vi.b)(n,void 0,void 0,function(){var n;return Object(Vi.d)(this,function(i){switch(i.label){case 0:return n=function(t,e,n){return Object(Vi.b)(this,void 0,void 0,function(){var r,i,o,s,a;return Object(Vi.d)(this,function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),[4,gl(t,e,!0)];case 1:return a=u.sent(),r=new Gh(e,a.jn),i=r.Io(a.documents),o=r.applyChanges(i,!1),n.resolve(o.snapshot),[3,3];case 2:return s=u.sent(),a=Ah(s,"Failed to execute query '"+e+" against cache"),n.reject(a),[3,3];case 3:return[2]}})})},[4,Vd(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(n,t._query).then(function(n){return new ap(e,r,t,n)})}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=sf(t,df);var e=sf(t.firestore,_f),n=wf(e),r=new Ip(e);return zd(n,t._query,{source:"server"}).then(function(n){return new ap(e,r,t,n)})}(this._delegate):function(t){t=sf(t,df);var e=sf(t.firestore,_f),n=wf(e),r=new Ip(e);return lp(t._query),zd(n,t._query).then(function(n){return new ap(e,r,t,n)})}(this._delegate)).then(function(t){return new $p(e.firestore,new ap(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))})},e.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=zp(e),i=Gp(e,function(e){return new $p(t.firestore,new ap(t.firestore._delegate,t._userDataWriter,t._delegate,e._snapshot))});return Ap(this._delegate,r,i)},e.prototype.withConverter=function(t){return new e(this.firestore,this._delegate.withConverter(t?qp.ra(this.firestore,t):null))},e}(lf),Yp=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this)._firestore=e,r}return Object(Vi.c)(e,t),Object.defineProperty(e.prototype,"type",{get:function(){return this._delegate.type},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"doc",{get:function(){return new Wp(this._firestore,this._delegate.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"oldIndex",{get:function(){return this._delegate.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"newIndex",{get:function(){return this._delegate.newIndex},enumerable:!1,configurable:!0}),e}(lf),$p=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this)._firestore=e,r}return Object(Vi.c)(e,t),Object.defineProperty(e.prototype,"query",{get:function(){return new Kp(this._firestore,this._delegate.query)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this._delegate.size},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"empty",{get:function(){return this._delegate.empty},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"docs",{get:function(){var t=this;return this._delegate.docs.map(function(e){return new Wp(t._firestore,e)})},enumerable:!1,configurable:!0}),e.prototype.docChanges=function(t){var e=this;return this._delegate.docChanges(t).map(function(t){return new Yp(e._firestore,t)})},e.prototype.forEach=function(t,e){var n=this;this._delegate.forEach(function(r){t.call(e,new Wp(n._firestore,r))})},e.prototype.isEqual=function(t){return cp(this._delegate,t._delegate)},e}(lf),Jp=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).firestore=e,r._delegate=n,r}return Object(Vi.c)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._delegate.parent;return t?new Bp(this.firestore,t):null},enumerable:!1,configurable:!0}),e.prototype.doc=function(t){try{return new Bp(this.firestore,void 0===t?gf(this._delegate):gf(this._delegate,t))}catch(t){throw Hp(t,"doc()","CollectionReference.doc()")}},e.prototype.add=function(t){var e=this;return function(t,e){var n=sf(t.firestore,_f),r=gf(t),i=Op(t._converter,e);return jp(n,[Mf(Df(t.firestore),"addDoc",r._key,i,null!==t._converter,{}).toMutation(r._key,Qs.exists(!1))]).then(function(){return r})}(this._delegate,t).then(function(t){return new Bp(e.firestore,t)})},e.prototype.isEqual=function(t){return yf(this._delegate,t._delegate)},e.prototype.withConverter=function(t){return new e(this.firestore,this._delegate.withConverter(t?qp.ra(this.firestore,t):null))},e}(Kp);function Xp(t){return t instanceof lf&&(t=t._delegate),sf(t,hf)}var Zp,tg=function(t){function e(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return t.call(this,new(Sf.bind.apply(Sf,Object(Vi.f)([void 0],e))))||this}return Object(Vi.c)(e,t),e.documentId=function(){return new e(fo.keyField().canonicalString())},e.prototype.isEqual=function(t){return t instanceof lf&&(t=t._delegate),t instanceof Sf&&this._delegate._internalPath.isEqual(t._internalPath)},e}(lf),eg=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Vi.c)(e,t),e.serverTimestamp=function(){var t=new Vf("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)},e.delete=function(){var t=new Lf("deleteField");return t._methodName="FieldValue.delete",new e(t)},e.arrayUnion=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Uf("arrayUnion",t)}).apply(void 0,t);return r._methodName="FieldValue.arrayUnion",new e(r)},e.arrayRemove=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new qf("arrayRemove",t)}).apply(void 0,t);return r._methodName="FieldValue.arrayRemove",new e(r)},e.increment=function(t){var n=function(t){return new Bf("increment",t)}(t);return n._methodName="FieldValue.increment",new e(n)},e.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},e}(lf),ng=n("/6Yf"),rg={Firestore:Lp,GeoPoint:xf,Timestamp:_o,Blob:Dp,Transaction:Vp,WriteBatch:Up,DocumentReference:Bp,DocumentSnapshot:Qp,Query:Kp,QueryDocumentSnapshot:Wp,QuerySnapshot:$p,CollectionReference:Jp,FieldPath:tg,FieldValue:eg,setLogLevel:function(t){qi.setLogLevel(t)},CACHE_SIZE_UNLIMITED:-1};(function(t,e){t.INTERNAL.registerComponent(new ng.a("firestore",function(t){return function(t,e){return new Lp(t,new _f(t,e),new Mp)}(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"))},"PUBLIC").setServiceProps(Object.assign({},rg)))})(Zp=Rt.a),Zp.registerVersion("@firebase/firestore","2.2.1");var ig=n("XNiG"),og=n("VRyK"),sg=n("zx2A");function ag(t,e){return"function"==typeof e?n=>n.pipe(ag((n,r)=>Object(ht.a)(t(n,r)).pipe(Object(wt.a)((t,i)=>e(n,t,r,i))))):e=>e.lift(new ug(t))}class ug{constructor(t){this.project=t}call(t,e){return e.subscribe(new cg(t,this.project))}}class cg extends sg.b{constructor(t,e){super(t),this.project=e,this.index=0}_next(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this._innerSub(e)}_innerSub(t){const e=this.innerSubscription;e&&e.unsubscribe();const n=new sg.a(this),r=this.destination;r.add(n),this.innerSubscription=Object(sg.c)(t,n),this.innerSubscription!==n&&r.add(this.innerSubscription)}_complete(){const{innerSubscription:t}=this;t&&!t.closed||super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(t){this.destination.next(t)}}var lg=n("qgXg"),hg=n("quSY"),dg=n("9ppp"),fg=n("Ylt2");class pg extends ig.a{constructor(t=Number.POSITIVE_INFINITY,e=Number.POSITIVE_INFINITY,n){super(),this.scheduler=n,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=t<1?1:t,this._windowTime=e<1?1:e,e===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(t){if(!this.isStopped){const e=this._events;e.push(t),e.length>this._bufferSize&&e.shift()}super.next(t)}nextTimeWindow(t){this.isStopped||(this._events.push(new gg(this._getNow(),t)),this._trimBufferThenGetEvents()),super.next(t)}_subscribe(t){const e=this._infiniteTimeWindow,n=e?this._events:this._trimBufferThenGetEvents(),r=this.scheduler,i=n.length;let o;if(this.closed)throw new dg.a;if(this.isStopped||this.hasError?o=hg.a.EMPTY:(this.observers.push(t),o=new fg.a(this,t)),r&&t.add(t=new kt.a(t,r)),e)for(let s=0;s<i&&!t.closed;s++)t.next(n[s]);else for(let s=0;s<i&&!t.closed;s++)t.next(n[s].value);return this.hasError?t.error(this.thrownError):this.isStopped&&t.complete(),o}_getNow(){return(this.scheduler||lg.a).now()}_trimBufferThenGetEvents(){const t=this._getNow(),e=this._bufferSize,n=this._windowTime,r=this._events,i=r.length;let o=0;for(;o<i&&!(t-r[o].time<n);)o++;return i>e&&(o=Math.max(o,i-e)),o>0&&r.splice(0,o),r}}class gg{constructor(t,e){this.time=t,this.value=e}}function yg(t,e,n){let r;return r=t&&"object"==typeof t?t:{bufferSize:t,windowTime:e,refCount:!1,scheduler:n},t=>t.lift(function({bufferSize:t=Number.POSITIVE_INFINITY,windowTime:e=Number.POSITIVE_INFINITY,refCount:n,scheduler:r}){let i,o,s=0,a=!1,u=!1;return function(c){let l;s++,!i||a?(a=!1,i=new pg(t,e,r),l=i.subscribe(this),o=c.subscribe({next(t){i.next(t)},error(t){a=!0,i.error(t)},complete(){u=!0,o=void 0,i.complete()}}),u&&(o=void 0)):l=i.subscribe(this),this.add(()=>{s--,l.unsubscribe(),l=void 0,o&&!u&&n&&0===s&&(o.unsubscribe(),o=void 0,i=void 0)})}}(r))}const mg=(()=>{function t(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return t.prototype=Object.create(Error.prototype),t})(),vg=(()=>{function t(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return t.prototype=Object.create(Error.prototype),t})();var bg=n("EY2u");function _g(t){return e=>0===t?Object(bg.b)():e.lift(new wg(t))}class wg{constructor(t){if(this.total=t,this.total<0)throw new vg}call(t,e){return e.subscribe(new Cg(t,this.total))}}class Cg extends mt.a{constructor(t,e){super(t),this.total=e,this.count=0}_next(t){const e=this.total,n=++this.count;n<=e&&(this.destination.next(t),n===e&&(this.destination.complete(),this.unsubscribe()))}}function Og(t=null){return e=>e.lift(new Eg(t))}class Eg{constructor(t){this.defaultValue=t}call(t,e){return e.subscribe(new Sg(t,this.defaultValue))}}class Sg extends mt.a{constructor(t,e){super(t),this.defaultValue=e,this.isEmpty=!0}_next(t){this.isEmpty=!1,this.destination.next(t)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}function Tg(t=Ag){return e=>e.lift(new Ig(t))}class Ig{constructor(t){this.errorFactory=t}call(t,e){return e.subscribe(new xg(t,this.errorFactory))}}class xg extends mt.a{constructor(t,e){super(t),this.errorFactory=e,this.hasValue=!1}_next(t){this.hasValue=!0,this.destination.next(t)}_complete(){if(this.hasValue)return this.destination.complete();{let t;try{t=this.errorFactory()}catch(Zp){t=Zp}this.destination.error(t)}}}function Ag(){return new mg}var jg=n("SpAZ");function kg(t,e){const n=arguments.length>=2;return r=>r.pipe(t?xt((e,n)=>t(e,n,r)):jg.a,_g(1),n?Og(e):Tg(()=>new mg))}function Ng(t,e){return e?ag(()=>t,e):ag(()=>t)}var Pg=n("tf+s");const Rg=new r.r("angularfire2.auth.use-emulator"),Dg=new r.r("angularfire2.auth.settings"),Mg=new r.r("angularfire2.auth.tenant-id"),Lg=new r.r("angularfire2.auth.langugage-code"),Fg=new r.r("angularfire2.auth.use-device-language"),Vg=new r.r("angularfire.auth.persistence");let Ug=(()=>{class t{constructor(t,e,r,i,o,s,a,u,c,l){const h=new Nt.d(i),d=Object(Nt.h)(h),f=new ig.a,p=Object(dt.a)(void 0).pipe(Object(kt.b)(h.outsideAngular),ag(()=>i.runOutsideAngular(()=>n.e(4).then(n.bind(null,"6nsN")))),Object(wt.a)(()=>Object(Nt.g)(t,i,e)),Object(wt.a)(t=>i.runOutsideAngular(()=>{const e=o,n=s;return Object(Nt.f)(`${t.name}.auth`,"AngularFireAuth",t,()=>{const r=i.runOutsideAngular(()=>t.auth());return e&&r.useEmulator(`http://${e.join(":")}`),a&&(r.tenantId=a),r.languageCode=u,c&&r.useDeviceLanguage(),n&&(r.settings=n),l&&r.setPersistence(l),r},[e,a,u,c,n,l])})),yg({bufferSize:1,refCount:!1}));if(j(r))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=Object(dt.a)(null);else{p.pipe(kg()).subscribe();const t=p.pipe(ag(t=>t.getRedirectResult().then(t=>t,()=>null)),d,yg({bufferSize:1,refCount:!1})),e=t=>new lt.a(e=>({unsubscribe:i.runOutsideAngular(()=>t(e))})),n=p.pipe(ag(t=>e(t.onAuthStateChanged.bind(t)))),r=p.pipe(ag(t=>e(t.onIdTokenChanged.bind(t))));this.authState=t.pipe(Ng(n),Object(Pg.a)(h.outsideAngular),Object(kt.b)(h.insideAngular)),this.user=t.pipe(Ng(r),Object(Pg.a)(h.outsideAngular),Object(kt.b)(h.insideAngular)),this.idToken=this.user.pipe(ag(t=>t?Object(ht.a)(t.getIdToken()):Object(dt.a)(null))),this.idTokenResult=this.user.pipe(ag(t=>t?Object(ht.a)(t.getIdTokenResult()):Object(dt.a)(null))),this.credential=Object(og.a)(t,f,this.authState.pipe(xt(t=>!t))).pipe(Object(wt.a)(t=>(null==t?void 0:t.user)?t:null),Object(Pg.a)(h.outsideAngular),Object(kt.b)(h.insideAngular))}return Object(Nt.i)(this,p,i,{spy:{apply:(t,e,n)=>{(t.startsWith("signIn")||t.startsWith("createUser"))&&n.then(t=>f.next(t))}}})}}return t.\u0275fac=function(e){return new(e||t)(r.Yb(Nt.c),r.Yb(Nt.b,8),r.Yb(r.C),r.Yb(r.A),r.Yb(Rg,8),r.Yb(Dg,8),r.Yb(Mg,8),r.Yb(Lg,8),r.Yb(Fg,8),r.Yb(Vg,8))},t.\u0275prov=Object(r.Ib)({factory:function(){return new t(Object(r.Yb)(Nt.c),Object(r.Yb)(Nt.b,8),Object(r.Yb)(r.C),Object(r.Yb)(r.A),Object(r.Yb)(Rg,8),Object(r.Yb)(Dg,8),Object(r.Yb)(Mg,8),Object(r.Yb)(Lg,8),Object(r.Yb)(Fg,8),Object(r.Yb)(Vg,8))},token:t,providedIn:"any"}),t})();Object(Nt.e)(Ug,[{app:null,applyActionCode:null,checkActionCode:null,confirmPasswordReset:null,createUserWithEmailAndPassword:null,currentUser:null,fetchSignInMethodsForEmail:null,isSignInWithEmailLink:null,getRedirectResult:null,languageCode:null,settings:null,onAuthStateChanged:null,onIdTokenChanged:null,sendSignInLinkToEmail:null,sendPasswordResetEmail:null,setPersistence:null,signInAndRetrieveDataWithCredential:null,signInAnonymously:null,signInWithCredential:null,signInWithCustomToken:null,signInWithEmailAndPassword:null,signInWithPhoneNumber:null,signInWithEmailLink:null,signInWithPopup:null,signInWithRedirect:null,signOut:null,tenantId:null,updateCurrentUser:null,useDeviceLanguage:null,useEmulator:null,verifyPasswordResetCode:null}]);let qg=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Kb({type:t}),t.\u0275inj=r.Jb({providers:[Ug]}),t})();function Bg(t,e){return function(t,e=ct.b){return new lt.a(n=>{let r;return null!=e?e.schedule(()=>{r=t.onSnapshot({includeMetadataChanges:!0},n)}):r=t.onSnapshot({includeMetadataChanges:!0},n),()=>{null!=r&&r()}})}(t,e)}function Hg(t,e){return Bg(t,e).pipe(Object(wt.a)(t=>({payload:t,type:"query"})))}function zg(t,e){return Hg(t,e).pipe(yt(void 0),vt(),Object(wt.a)(([t,e])=>{const n=e.payload.docChanges(),r=n.map(t=>({type:t.type,payload:t}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(e.payload.metadata)&&e.payload.docs.forEach((e,i)=>{const o=n.find(t=>t.doc.ref.isEqual(e.ref)),s=null==t?void 0:t.payload.docs.find(t=>t.ref.isEqual(e.ref));o&&JSON.stringify(o.doc.metadata)===JSON.stringify(e.metadata)||!o&&s&&JSON.stringify(s.metadata)===JSON.stringify(e.metadata)||r.push({type:"modified",payload:{oldIndex:i,newIndex:i,type:"modified",doc:e}})}),r}))}function Gg(t,e,n){return zg(t,n).pipe(Ct((t,n)=>function(t,e,n){return e.forEach(e=>{n.indexOf(e.type)>-1&&(t=function(t,e){switch(e.type){case"added":if(!t[e.newIndex]||!t[e.newIndex].doc.ref.isEqual(e.doc.ref))return Qg(t,e.newIndex,0,e);break;case"modified":if(null==t[e.oldIndex]||t[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const n=t.slice();return n.splice(e.oldIndex,1),n.splice(e.newIndex,0,e),n}return Qg(t,e.newIndex,1,e)}break;case"removed":if(t[e.oldIndex]&&t[e.oldIndex].doc.ref.isEqual(e.doc.ref))return Qg(t,e.oldIndex,1)}return t}(t,e))}),t}(t,n.map(t=>t.payload),e),[]),St(),Object(wt.a)(t=>t.map(t=>({type:t.type,payload:t}))))}function Qg(t,e,n,...r){const i=t.slice();return i.splice(e,n,...r),i}function Wg(t){return t&&0!==t.length||(t=["added","removed","modified"]),t}class Kg{constructor(t,e,n){this.ref=t,this.query=e,this.afs=n}stateChanges(t){let e=zg(this.query,this.afs.schedulers.outsideAngular);return t&&t.length>0&&(e=e.pipe(Object(wt.a)(e=>e.filter(e=>t.indexOf(e.type)>-1)))),e.pipe(yt(void 0),vt(),xt(([t,e])=>e.length>0||!t),Object(wt.a)(([t,e])=>e),this.afs.keepUnstableUntilFirst)}auditTrail(t){return this.stateChanges(t).pipe(Ct((t,e)=>[...t,...e],[]))}snapshotChanges(t){const e=Wg(t);return Gg(this.query,e,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return Hg(this.query,this.afs.schedulers.outsideAngular).pipe(Object(wt.a)(e=>e.payload.docs.map(e=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data())),this.afs.keepUnstableUntilFirst)}get(t){return Object(ht.a)(this.query.get(t)).pipe(Object(kt.b)(this.afs.schedulers.insideAngular))}add(t){return this.ref.add(t)}doc(t){return new Yg(this.ref.doc(t),this.afs)}}class Yg{constructor(t,e){this.ref=t,this.afs=e}set(t,e){return this.ref.set(t,e)}update(t){return this.ref.update(t)}delete(){return this.ref.delete()}collection(t,e){const n=this.ref.collection(t),{ref:r,query:i}=ey(n,e);return new Kg(r,i,this.afs)}snapshotChanges(){return Bg(this.ref,this.afs.schedulers.outsideAngular).pipe(yt(void 0),vt(),Object(wt.a)(([t,e])=>e.exists?(null==t?void 0:t.exists)?{payload:e,type:"modified"}:{payload:e,type:"added"}:{payload:e,type:"removed"})).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return this.snapshotChanges().pipe(Object(wt.a)(({payload:e})=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data()))}get(t){return Object(ht.a)(this.ref.get(t)).pipe(Object(kt.b)(this.afs.schedulers.insideAngular))}}class $g{constructor(t,e){this.query=t,this.afs=e}stateChanges(t){return t&&0!==t.length?zg(this.query,this.afs.schedulers.outsideAngular).pipe(Object(wt.a)(e=>e.filter(e=>t.indexOf(e.type)>-1)),xt(t=>t.length>0),this.afs.keepUnstableUntilFirst):zg(this.query,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}auditTrail(t){return this.stateChanges(t).pipe(Ct((t,e)=>[...t,...e],[]))}snapshotChanges(t){const e=Wg(t);return Gg(this.query,e,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return Hg(this.query,this.afs.schedulers.outsideAngular).pipe(Object(wt.a)(e=>e.payload.docs.map(e=>t.idField?Object.assign({[t.idField]:e.id},e.data()):e.data())),this.afs.keepUnstableUntilFirst)}get(t){return Object(ht.a)(this.query.get(t)).pipe(Object(kt.b)(this.afs.schedulers.insideAngular))}}const Jg=new r.r("angularfire2.enableFirestorePersistence"),Xg=new r.r("angularfire2.firestore.persistenceSettings"),Zg=new r.r("angularfire2.firestore.settings"),ty=new r.r("angularfire2.firestore.use-emulator");function ey(t,e=(t=>t)){return{query:e(t),ref:t}}let ny=(()=>{class t{constructor(t,e,n,r,i,o,s,a,u){this.schedulers=new Nt.d(o),this.keepUnstableUntilFirst=Object(Nt.h)(this.schedulers);const c=Object(Nt.g)(t,o,e);!Pt.a.auth&&u&&Object(Nt.j)();const l=a;[this.firestore,this.persistenceEnabled$]=Object(Nt.f)(`${c.name}.firestore`,"AngularFirestore",c,()=>{const t=o.runOutsideAngular(()=>c.firestore());if(r&&t.settings(r),l&&t.useEmulator(...l),n&&!j(i)){const e=()=>{try{return Object(ht.a)(t.enablePersistence(s||void 0).then(()=>!0,()=>!1))}catch(Zp){return"undefined"!=typeof console&&console.warn(Zp),Object(dt.a)(!1)}};return[t,o.runOutsideAngular(e)]}return[t,Object(dt.a)(!1)]},[r,l,n])}collection(t,e){let n;n="string"==typeof t?this.firestore.collection(t):t;const{ref:r,query:i}=ey(n,e),o=this.schedulers.ngZone.run(()=>r);return new Kg(o,i,this)}collectionGroup(t,e){const n=e||(t=>t),r=this.firestore.collectionGroup(t);return new $g(n(r),this)}doc(t){let e;e="string"==typeof t?this.firestore.doc(t):t;const n=this.schedulers.ngZone.run(()=>e);return new Yg(n,this)}createId(){return this.firestore.collection("_").doc().id}}return t.\u0275fac=function(e){return new(e||t)(r.Yb(Nt.c),r.Yb(Nt.b,8),r.Yb(Jg,8),r.Yb(Zg,8),r.Yb(r.C),r.Yb(r.A),r.Yb(Xg,8),r.Yb(ty,8),r.Yb(Rg,8))},t.\u0275prov=Object(r.Ib)({factory:function(){return new t(Object(r.Yb)(Nt.c),Object(r.Yb)(Nt.b,8),Object(r.Yb)(Jg,8),Object(r.Yb)(Zg,8),Object(r.Yb)(r.C),Object(r.Yb)(r.A),Object(r.Yb)(Xg,8),Object(r.Yb)(ty,8),Object(r.Yb)(Rg,8))},token:t,providedIn:"any"}),t})(),ry=(()=>{class t{constructor(t){this.db=t,this.dbpath="/usuarios",this.usuariosRef=t.collection(this.dbpath)}getAll(){return this.usuariosRef}create(t){return this.usuariosRef.add(Object.assign({},t))}obtenerUsuarioPorEmail(t){return this.usuariosRef.ref.get().then(t=>{t.empty||console.log(t.docs[0].data())})}}return t.\u0275fac=function(e){return new(e||t)(r.Yb(ny))},t.\u0275prov=r.Ib({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const iy={apiKey:"AIzaSyD8JloN3a4T1lUUDZxEbaYTD3wp45E40jE",authDomain:"saladejuegos-7da4f.firebaseapp.com",projectId:"saladejuegos-7da4f",storageBucket:"saladejuegos-7da4f.appspot.com",messagingSenderId:"526051580561",appId:"1:526051580561:web:be8676f61e3d6efd40bd30",measurementId:"G-N24ESHKJ34"};class oy extends ig.a{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const e=super._subscribe(t);return e&&!e.closed&&t.next(this._value),e}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new dg.a;return this._value}next(t){super.next(this._value=t)}}var sy=n("DH7j");class ay extends mt.a{notifyNext(t,e,n,r,i){this.destination.next(e)}notifyError(t,e){this.destination.error(t)}notifyComplete(t){this.destination.complete()}}class uy extends mt.a{constructor(t,e,n){super(),this.parent=t,this.outerValue=e,this.outerIndex=n,this.index=0}_next(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)}_error(t){this.parent.notifyError(t,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}var cy=n("SeVD");function ly(t,e,n,r,i=new uy(t,n,r)){if(!i.closed)return e instanceof lt.a?e.subscribe(i):Object(cy.a)(e)(i)}var hy=n("yCtX");const dy={};class fy{constructor(t){this.resultSelector=t}call(t,e){return e.subscribe(new py(t,this.resultSelector))}}class py extends ay{constructor(t,e){super(t),this.resultSelector=e,this.active=0,this.values=[],this.observables=[]}_next(t){this.values.push(dy),this.observables.push(t)}_complete(){const t=this.observables,e=t.length;if(0===e)this.destination.complete();else{this.active=e,this.toRespond=e;for(let n=0;n<e;n++)this.add(ly(this,t[n],void 0,n))}}notifyComplete(t){0==(this.active-=1)&&this.destination.complete()}notifyNext(t,e,n){const r=this.values,i=this.toRespond?r[n]===dy?--this.toRespond:this.toRespond:0;r[n]=e,0===i&&(this.resultSelector?this._tryResultSelector(r):this.destination.next(r.slice()))}_tryResultSelector(t){let e;try{e=this.resultSelector.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}function gy(t){return new lt.a(e=>{let n;try{n=t()}catch(r){return void e.error(r)}return(n?Object(ht.a)(n):Object(bg.b)()).subscribe(e)})}var yy=n("EQ5u");function my(t){return function(e){const n=new vy(t),r=e.lift(n);return n.caught=r}}class vy{constructor(t){this.selector=t}call(t,e){return e.subscribe(new by(t,this.selector,this.caught))}}class by extends sg.b{constructor(t,e,n){super(t),this.selector=e,this.caught=n}error(t){if(!this.isStopped){let n;try{n=this.selector(t,this.caught)}catch(e){return void super.error(e)}this._unsubscribeAndRecycle();const r=new sg.a(this);this.add(r);const i=Object(sg.c)(n,r);i!==r&&this.add(i)}}}var _y=n("5+tZ");function wy(t,e){return Object(_y.a)(t,e,1)}function Cy(t){return function(e){return 0===t?Object(bg.b)():e.lift(new Oy(t))}}class Oy{constructor(t){if(this.total=t,this.total<0)throw new vg}call(t,e){return e.subscribe(new Ey(t,this.total))}}class Ey extends mt.a{constructor(t,e){super(t),this.total=e,this.ring=new Array,this.count=0}_next(t){const e=this.ring,n=this.total,r=this.count++;e.length<n?e.push(t):e[r%n]=t}_complete(){const t=this.destination;let e=this.count;if(e>0){const n=this.count>=this.total?this.total:this.count,r=this.ring;for(let i=0;i<n;i++){const i=e++%n;t.next(r[i])}}t.complete()}}var Sy=n("vkgz"),Ty=n("x+ZX");class Iy{constructor(t){this.callback=t}call(t,e){return e.subscribe(new xy(t,this.callback))}}class xy extends mt.a{constructor(t,e){super(t),this.add(new hg.a(e))}}class Ay{constructor(t,e){this.id=t,this.url=e}}class jy extends Ay{constructor(t,e,n="imperative",r=null){super(t,e),this.navigationTrigger=n,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class ky extends Ay{constructor(t,e,n){super(t,e),this.urlAfterRedirects=n}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Ny extends Ay{constructor(t,e,n){super(t,e),this.reason=n}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Py extends Ay{constructor(t,e,n){super(t,e),this.error=n}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Ry extends Ay{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Dy extends Ay{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class My extends Ay{constructor(t,e,n,r,i){super(t,e),this.urlAfterRedirects=n,this.state=r,this.shouldActivate=i}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Ly extends Ay{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Fy extends Ay{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Vy{constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Uy{constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class qy{constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class By{constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Hy{constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class zy{constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Gy{constructor(t,e,n){this.routerEvent=t,this.position=e,this.anchor=n}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Qy="primary";class Wy{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function Ky(t){return new Wy(t)}function Yy(t){const e=Error("NavigationCancelingError: "+t);return e.ngNavigationCancelingError=!0,e}function $y(t,e,n){const r=n.path.split("/");if(r.length>t.length)return null;if("full"===n.pathMatch&&(e.hasChildren()||r.length<t.length))return null;const i={};for(let o=0;o<r.length;o++){const e=r[o],n=t[o];if(e.startsWith(":"))i[e.substring(1)]=n;else if(e!==n.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function Jy(t,e){const n=t?Object.keys(t):void 0,r=e?Object.keys(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!Xy(t[i],e[i]))return!1;return!0}function Xy(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;const n=[...t].sort(),r=[...e].sort();return n.every((t,e)=>r[e]===t)}return t===e}function Zy(t){return Array.prototype.concat.apply([],t)}function tm(t){return t.length>0?t[t.length-1]:null}function em(t,e){for(const n in t)t.hasOwnProperty(n)&&e(t[n],n)}function nm(t){return Object(r.qb)(t)?t:Object(r.rb)(t)?Object(ht.a)(Promise.resolve(t)):Object(dt.a)(t)}function rm(t,e,n){return n?function(t,e){return Jy(t,e)}(t.queryParams,e.queryParams)&&im(t.root,e.root):function(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>Xy(t[n],e[n]))}(t.queryParams,e.queryParams)&&om(t.root,e.root)}function im(t,e){if(!lm(t.segments,e.segments))return!1;if(t.numberOfChildren!==e.numberOfChildren)return!1;for(const n in e.children){if(!t.children[n])return!1;if(!im(t.children[n],e.children[n]))return!1}return!0}function om(t,e){return sm(t,e,e.segments)}function sm(t,e,n){if(t.segments.length>n.length)return!!lm(t.segments.slice(0,n.length),n)&&!e.hasChildren();if(t.segments.length===n.length){if(!lm(t.segments,n))return!1;for(const n in e.children){if(!t.children[n])return!1;if(!om(t.children[n],e.children[n]))return!1}return!0}{const r=n.slice(0,t.segments.length),i=n.slice(t.segments.length);return!!lm(t.segments,r)&&!!t.children.primary&&sm(t.children.primary,e,i)}}class am{constructor(t,e,n){this.root=t,this.queryParams=e,this.fragment=n}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Ky(this.queryParams)),this._queryParamMap}toString(){return fm.serialize(this)}}class um{constructor(t,e){this.segments=t,this.children=e,this.parent=null,em(e,(t,e)=>t.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return pm(this)}}class cm{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=Ky(this.parameters)),this._parameterMap}toString(){return wm(this)}}function lm(t,e){return t.length===e.length&&t.every((t,n)=>t.path===e[n].path)}class hm{}class dm{parse(t){const e=new Tm(t);return new am(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){var e;return`/${gm(t.root,!0)}${function(t){const e=Object.keys(t).map(e=>{const n=t[e];return Array.isArray(n)?n.map(t=>`${mm(e)}=${mm(t)}`).join("&"):`${mm(e)}=${mm(n)}`});return e.length?`?${e.join("&")}`:""}(t.queryParams)}${"string"==typeof t.fragment?`#${e=t.fragment,encodeURI(e)}`:""}`}}const fm=new dm;function pm(t){return t.segments.map(t=>wm(t)).join("/")}function gm(t,e){if(!t.hasChildren())return pm(t);if(e){const e=t.children.primary?gm(t.children.primary,!1):"",n=[];return em(t.children,(t,e)=>{e!==Qy&&n.push(`${e}:${gm(t,!1)}`)}),n.length>0?`${e}(${n.join("//")})`:e}{const e=function(t,e){let n=[];return em(t.children,(t,r)=>{r===Qy&&(n=n.concat(e(t,r)))}),em(t.children,(t,r)=>{r!==Qy&&(n=n.concat(e(t,r)))}),n}(t,(e,n)=>n===Qy?[gm(t.children.primary,!1)]:[`${n}:${gm(e,!1)}`]);return 1===Object.keys(t.children).length&&null!=t.children.primary?`${pm(t)}/${e[0]}`:`${pm(t)}/(${e.join("//")})`}}function ym(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function mm(t){return ym(t).replace(/%3B/gi,";")}function vm(t){return ym(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function bm(t){return decodeURIComponent(t)}function _m(t){return bm(t.replace(/\+/g,"%20"))}function wm(t){return`${vm(t.path)}${e=t.parameters,Object.keys(e).map(t=>`;${vm(t)}=${vm(e[t])}`).join("")}`;var e}const Cm=/^[^\/()?;=#]+/;function Om(t){const e=t.match(Cm);return e?e[0]:""}const Em=/^[^=?&#]+/,Sm=/^[^?&#]+/;class Tm{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new um([],{}):new um([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(n.primary=new um(t,e)),n}parseSegment(){const t=Om(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(t),new cm(bm(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const e=Om(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=Om(this.remaining);t&&(n=t,this.capture(n))}t[bm(e)]=bm(n)}parseQueryParam(t){const e=function(t){const e=t.match(Em);return e?e[0]:""}(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=function(t){const e=t.match(Sm);return e?e[0]:""}(this.remaining);t&&(n=t,this.capture(n))}const r=_m(e),i=_m(n);if(t.hasOwnProperty(r)){let e=t[r];Array.isArray(e)||(e=[e],t[r]=e),e.push(i)}else t[r]=i}parseParens(t){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const n=Om(this.remaining),r=this.remaining[n.length];if("/"!==r&&")"!==r&&";"!==r)throw new Error(`Cannot parse url '${this.url}'`);let i;n.indexOf(":")>-1?(i=n.substr(0,n.indexOf(":")),this.capture(i),this.capture(":")):t&&(i=Qy);const o=this.parseChildren();e[i]=1===Object.keys(o).length?o.primary:new um([],o),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new Error(`Expected "${t}".`)}}class Im{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){const e=xm(t,this._root);return e?e.children.map(t=>t.value):[]}firstChild(t){const e=xm(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){const e=Am(t,this._root);return e.length<2?[]:e[e.length-2].children.map(t=>t.value).filter(e=>e!==t)}pathFromRoot(t){return Am(t,this._root).map(t=>t.value)}}function xm(t,e){if(t===e.value)return e;for(const n of e.children){const e=xm(t,n);if(e)return e}return null}function Am(t,e){if(t===e.value)return[e];for(const n of e.children){const r=Am(t,n);if(r.length)return r.unshift(e),r}return[]}class jm{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}}function km(t){const e={};return t&&t.children.forEach(t=>e[t.value.outlet]=t),e}class Nm extends Im{constructor(t,e){super(t),this.snapshot=e,Fm(this,t)}toString(){return this.snapshot.toString()}}function Pm(t,e){const n=function(t,e){const n=new Mm([],{},{},"",{},Qy,e,null,t.root,-1,{});return new Lm("",new jm(n,[]))}(t,e),r=new oy([new cm("",{})]),i=new oy({}),o=new oy({}),s=new oy({}),a=new oy(""),u=new Rm(r,i,s,a,o,Qy,e,n.root);return u.snapshot=n.root,new Nm(new jm(u,[]),n)}class Rm{constructor(t,e,n,r,i,o,s,a){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=o,this.component=s,this._futureSnapshot=a}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(Object(wt.a)(t=>Ky(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(Object(wt.a)(t=>Ky(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Dm(t,e="emptyOnly"){const n=t.pathFromRoot;let r=0;if("always"!==e)for(r=n.length-1;r>=1;){const t=n[r],e=n[r-1];if(t.routeConfig&&""===t.routeConfig.path)r--;else{if(e.component)break;r--}}return function(t){return t.reduce((t,e)=>({params:Object.assign(Object.assign({},t.params),e.params),data:Object.assign(Object.assign({},t.data),e.data),resolve:Object.assign(Object.assign({},t.resolve),e._resolvedData)}),{params:{},data:{},resolve:{}})}(n.slice(r))}class Mm{constructor(t,e,n,r,i,o,s,a,u,c,l){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=o,this.component=s,this.routeConfig=a,this._urlSegment=u,this._lastPathIndex=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Ky(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Ky(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(t=>t.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Lm extends Im{constructor(t,e){super(e),this.url=t,Fm(this,e)}toString(){return Vm(this._root)}}function Fm(t,e){e.value._routerState=t,e.children.forEach(e=>Fm(t,e))}function Vm(t){const e=t.children.length>0?` { ${t.children.map(Vm).join(", ")} } `:"";return`${t.value}${e}`}function Um(t){if(t.snapshot){const e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,Jy(e.queryParams,n.queryParams)||t.queryParams.next(n.queryParams),e.fragment!==n.fragment&&t.fragment.next(n.fragment),Jy(e.params,n.params)||t.params.next(n.params),function(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!Jy(t[n],e[n]))return!1;return!0}(e.url,n.url)||t.url.next(n.url),Jy(e.data,n.data)||t.data.next(n.data)}else t.snapshot=t._futureSnapshot,t.data.next(t._futureSnapshot.data)}function qm(t,e){return Jy(t.params,e.params)&&function(t,e){return lm(t,e)&&t.every((t,n)=>Jy(t.parameters,e[n].parameters))}(t.url,e.url)&&!(!t.parent!=!e.parent)&&(!t.parent||qm(t.parent,e.parent))}function Bm(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){const r=n.value;r._futureSnapshot=e.value;const i=function(t,e,n){return e.children.map(e=>{for(const r of n.children)if(t.shouldReuseRoute(e.value,r.value.snapshot))return Bm(t,e,r);return Bm(t,e)})}(t,e,n);return new jm(r,i)}{const n=t.retrieve(e.value);if(n){const t=n.route;return Hm(e,t),t}{const n=new Rm(new oy((r=e.value).url),new oy(r.params),new oy(r.queryParams),new oy(r.fragment),new oy(r.data),r.outlet,r.component,r),i=e.children.map(e=>Bm(t,e));return new jm(n,i)}}var r}function Hm(t,e){if(t.value.routeConfig!==e.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(t.children.length!==e.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");e.value._futureSnapshot=t.value;for(let n=0;n<t.children.length;++n)Hm(t.children[n],e.children[n])}function zm(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function Gm(t){return"object"==typeof t&&null!=t&&t.outlets}function Qm(t,e,n,r,i){let o={};return r&&em(r,(t,e)=>{o[e]=Array.isArray(t)?t.map(t=>`${t}`):`${t}`}),new am(n.root===t?e:Wm(n.root,t,e),o,i)}function Wm(t,e,n){const r={};return em(t.children,(t,i)=>{r[i]=t===e?n:Wm(t,e,n)}),new um(t.segments,r)}class Km{constructor(t,e,n){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=n,t&&n.length>0&&zm(n[0]))throw new Error("Root segment cannot have matrix parameters");const r=n.find(Gm);if(r&&r!==tm(n))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Ym{constructor(t,e,n){this.segmentGroup=t,this.processChildren=e,this.index=n}}function $m(t,e,n){if(t||(t=new um([],{})),0===t.segments.length&&t.hasChildren())return Jm(t,e,n);const r=function(t,e,n){let r=0,i=e;const o={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return o;const e=t.segments[i],s=n[r];if(Gm(s))break;const a=`${s}`,u=r<n.length-1?n[r+1]:null;if(i>0&&void 0===a)break;if(a&&u&&"object"==typeof u&&void 0===u.outlets){if(!ev(a,u,e))return o;r+=2}else{if(!ev(a,{},e))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){const e=new um(t.segments.slice(0,r.pathIndex),{});return e.children.primary=new um(t.segments.slice(r.pathIndex),t.children),Jm(e,0,i)}return r.match&&0===i.length?new um(t.segments,{}):r.match&&!t.hasChildren()?Xm(t,e,n):r.match?Jm(t,0,i):Xm(t,e,n)}function Jm(t,e,n){if(0===n.length)return new um(t.segments,{});{const r=function(t){return Gm(t[0])?t[0].outlets:{[Qy]:t}}(n),i={};return em(r,(n,r)=>{"string"==typeof n&&(n=[n]),null!==n&&(i[r]=$m(t.children[r],e,n))}),em(t.children,(t,e)=>{void 0===r[e]&&(i[e]=t)}),new um(t.segments,i)}}function Xm(t,e,n){const r=t.segments.slice(0,e);let i=0;for(;i<n.length;){const o=n[i];if(Gm(o)){const t=Zm(o.outlets);return new um(r,t)}if(0===i&&zm(n[0])){r.push(new cm(t.segments[e].path,tv(n[0]))),i++;continue}const s=Gm(o)?o.outlets.primary:`${o}`,a=i<n.length-1?n[i+1]:null;s&&a&&zm(a)?(r.push(new cm(s,tv(a))),i+=2):(r.push(new cm(s,{})),i++)}return new um(r,{})}function Zm(t){const e={};return em(t,(t,n)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[n]=Xm(new um([],{}),0,t))}),e}function tv(t){const e={};return em(t,(t,n)=>e[n]=`${t}`),e}function ev(t,e,n){return t==n.path&&Jy(e,n.parameters)}class nv{constructor(t,e,n,r){this.routeReuseStrategy=t,this.futureState=e,this.currState=n,this.forwardEvent=r}activate(t){const e=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,n,t),Um(this.futureState.root),this.activateChildRoutes(e,n,t)}deactivateChildRoutes(t,e,n){const r=km(e);t.children.forEach(t=>{const e=t.value.outlet;this.deactivateRoutes(t,r[e],n),delete r[e]}),em(r,(t,e)=>{this.deactivateRouteAndItsChildren(t,n)})}deactivateRoutes(t,e,n){const r=t.value,i=e?e.value:null;if(r===i)if(r.component){const i=n.getContext(r.outlet);i&&this.deactivateChildRoutes(t,e,i.children)}else this.deactivateChildRoutes(t,e,n);else i&&this.deactivateRouteAndItsChildren(e,n)}deactivateRouteAndItsChildren(t,e){this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){const n=e.getContext(t.value.outlet);if(n&&n.outlet){const e=n.outlet.detach(),r=n.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:e,route:t,contexts:r})}}deactivateRouteAndOutlet(t,e){const n=e.getContext(t.value.outlet),r=n&&t.value.component?n.children:e,i=km(t);for(const o of Object.keys(i))this.deactivateRouteAndItsChildren(i[o],r);n&&n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated())}activateChildRoutes(t,e,n){const r=km(e);t.children.forEach(t=>{this.activateRoutes(t,r[t.value.outlet],n),this.forwardEvent(new zy(t.value.snapshot))}),t.children.length&&this.forwardEvent(new By(t.value.snapshot))}activateRoutes(t,e,n){const r=t.value,i=e?e.value:null;if(Um(r),r===i)if(r.component){const i=n.getOrCreateContext(r.outlet);this.activateChildRoutes(t,e,i.children)}else this.activateChildRoutes(t,e,n);else if(r.component){const e=n.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const t=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),e.children.onOutletReAttached(t.contexts),e.attachRef=t.componentRef,e.route=t.route.value,e.outlet&&e.outlet.attach(t.componentRef,t.route.value),rv(t.route)}else{const n=function(t){for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(r.snapshot),i=n?n.module.componentFactoryResolver:null;e.attachRef=null,e.route=r,e.resolver=i,e.outlet&&e.outlet.activateWith(r,i),this.activateChildRoutes(t,null,e.children)}}else this.activateChildRoutes(t,null,n)}}function rv(t){Um(t.value),t.children.forEach(rv)}class iv{constructor(t,e){this.routes=t,this.module=e}}function ov(t){return"function"==typeof t}function sv(t){return t instanceof am}const av=Symbol("INITIAL_VALUE");function uv(){return ag(t=>function(...t){let e,n;return Object(gt.a)(t[t.length-1])&&(n=t.pop()),"function"==typeof t[t.length-1]&&(e=t.pop()),1===t.length&&Object(sy.a)(t[0])&&(t=t[0]),Object(hy.a)(t,n).lift(new fy(e))}(t.map(t=>t.pipe(_g(1),yt(av)))).pipe(Ct((t,e)=>{let n=!1;return e.reduce((t,r,i)=>{if(t!==av)return t;if(r===av&&(n=!0),!n){if(!1===r)return r;if(i===e.length-1||sv(r))return r}return t},t)},av),xt(t=>t!==av),Object(wt.a)(t=>sv(t)?t:!0===t),_g(1)))}let cv=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Gb({type:t,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,e){1&t&&r.Nb(0,"router-outlet")},directives:function(){return[ib]},encapsulation:2}),t})();function lv(t,e=""){for(let n=0;n<t.length;n++){const r=t[n];hv(r,dv(e,r))}}function hv(t,e){t.children&&lv(t.children,e)}function dv(t,e){return e?t||e.path?t&&!e.path?`${t}/`:!t&&e.path?e.path:`${t}/${e.path}`:"":t}function fv(t){const e=t.children&&t.children.map(fv),n=e?Object.assign(Object.assign({},t),{children:e}):Object.assign({},t);return!n.component&&(e||n.loadChildren)&&n.outlet&&n.outlet!==Qy&&(n.component=cv),n}function pv(t){return t.outlet||Qy}function gv(t,e){const n=t.filter(t=>pv(t)===e);return n.push(...t.filter(t=>pv(t)!==e)),n}const yv={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function mv(t,e,n){var r;if(""===e.path)return"full"===e.pathMatch&&(t.hasChildren()||n.length>0)?Object.assign({},yv):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const i=(e.matcher||$y)(n,t,e);if(!i)return Object.assign({},yv);const o={};em(i.posParams,(t,e)=>{o[e]=t.path});const s=i.consumed.length>0?Object.assign(Object.assign({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,lastChild:i.consumed.length,parameters:s,positionalParamSegments:null!==(r=i.posParams)&&void 0!==r?r:{}}}function vv(t,e,n,r,i="corrected"){if(n.length>0&&function(t,e,n){return n.some(n=>bv(t,e,n)&&pv(n)!==Qy)}(t,n,r)){const i=new um(e,function(t,e,n,r){const i={};i.primary=r,r._sourceSegment=t,r._segmentIndexShift=e.length;for(const o of n)if(""===o.path&&pv(o)!==Qy){const n=new um([],{});n._sourceSegment=t,n._segmentIndexShift=e.length,i[pv(o)]=n}return i}(t,e,r,new um(n,t.children)));return i._sourceSegment=t,i._segmentIndexShift=e.length,{segmentGroup:i,slicedSegments:[]}}if(0===n.length&&function(t,e,n){return n.some(n=>bv(t,e,n))}(t,n,r)){const o=new um(t.segments,function(t,e,n,r,i,o){const s={};for(const a of r)if(bv(t,n,a)&&!i[pv(a)]){const n=new um([],{});n._sourceSegment=t,n._segmentIndexShift="legacy"===o?t.segments.length:e.length,s[pv(a)]=n}return Object.assign(Object.assign({},i),s)}(t,e,n,r,t.children,i));return o._sourceSegment=t,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:n}}const o=new um(t.segments,t.children);return o._sourceSegment=t,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:n}}function bv(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path}function _v(t,e,n,r){return!!(pv(t)===r||r!==Qy&&bv(e,n,t))&&("**"===t.path||mv(e,t,n).matched)}function wv(t,e,n){return 0===e.length&&!t.children[n]}class Cv{constructor(t){this.segmentGroup=t||null}}class Ov{constructor(t){this.urlTree=t}}function Ev(t){return new lt.a(e=>e.error(new Cv(t)))}function Sv(t){return new lt.a(e=>e.error(new Ov(t)))}function Tv(t){return new lt.a(e=>e.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${t}'`)))}class Iv{constructor(t,e,n,i,o){this.configLoader=e,this.urlSerializer=n,this.urlTree=i,this.config=o,this.allowRedirects=!0,this.ngModule=t.get(r.y)}apply(){const t=vv(this.urlTree.root,[],[],this.config).segmentGroup,e=new um(t.segments,t.children);return this.expandSegmentGroup(this.ngModule,this.config,e,Qy).pipe(Object(wt.a)(t=>this.createUrlTree(xv(t),this.urlTree.queryParams,this.urlTree.fragment))).pipe(my(t=>{if(t instanceof Ov)return this.allowRedirects=!1,this.match(t.urlTree);if(t instanceof Cv)throw this.noMatchError(t);throw t}))}match(t){return this.expandSegmentGroup(this.ngModule,this.config,t.root,Qy).pipe(Object(wt.a)(e=>this.createUrlTree(xv(e),t.queryParams,t.fragment))).pipe(my(t=>{if(t instanceof Cv)throw this.noMatchError(t);throw t}))}noMatchError(t){return new Error(`Cannot match any routes. URL Segment: '${t.segmentGroup}'`)}createUrlTree(t,e,n){const r=t.segments.length>0?new um([],{[Qy]:t}):t;return new am(r,e,n)}expandSegmentGroup(t,e,n,r){return 0===n.segments.length&&n.hasChildren()?this.expandChildren(t,e,n).pipe(Object(wt.a)(t=>new um([],t))):this.expandSegment(t,n,e,n.segments,r,!0)}expandChildren(t,e,n){const r=[];for(const i of Object.keys(n.children))"primary"===i?r.unshift(i):r.push(i);return Object(ht.a)(r).pipe(wy(r=>{const i=n.children[r],o=gv(e,r);return this.expandSegmentGroup(t,o,i,r).pipe(Object(wt.a)(t=>({segment:t,outlet:r})))}),Ct((t,e)=>(t[e.outlet]=e.segment,t),{}),function(t,e){const n=arguments.length>=2;return r=>r.pipe(t?xt((e,n)=>t(e,n,r)):jg.a,Cy(1),n?Og(e):Tg(()=>new mg))}())}expandSegment(t,e,n,r,i,o){return Object(ht.a)(n).pipe(wy(s=>this.expandSegmentAgainstRoute(t,e,n,s,r,i,o).pipe(my(t=>{if(t instanceof Cv)return Object(dt.a)(null);throw t}))),kg(t=>!!t),my((t,n)=>{if(t instanceof mg||"EmptyError"===t.name){if(wv(e,r,i))return Object(dt.a)(new um([],{}));throw new Cv(e)}throw t}))}expandSegmentAgainstRoute(t,e,n,r,i,o,s){return _v(r,e,i,o)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(t,e,r,i,o):s&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o):Ev(e):Ev(e)}expandSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,n,r,o):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,e,n,r){const i=this.applyRedirectCommands([],n.redirectTo,{});return n.redirectTo.startsWith("/")?Sv(i):this.lineralizeSegments(n,i).pipe(Object(_y.a)(n=>{const i=new um(n,{});return this.expandSegment(t,i,e,n,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o){const{matched:s,consumedSegments:a,lastChild:u,positionalParamSegments:c}=mv(e,r,i);if(!s)return Ev(e);const l=this.applyRedirectCommands(a,r.redirectTo,c);return r.redirectTo.startsWith("/")?Sv(l):this.lineralizeSegments(r,l).pipe(Object(_y.a)(r=>this.expandSegment(t,e,n,r.concat(i.slice(u)),o,!1)))}matchSegmentAgainstRoute(t,e,n,r,i){if("**"===n.path)return n.loadChildren?(n._loadedConfig?Object(dt.a)(n._loadedConfig):this.configLoader.load(t.injector,n)).pipe(Object(wt.a)(t=>(n._loadedConfig=t,new um(r,{})))):Object(dt.a)(new um(r,{}));const{matched:o,consumedSegments:s,lastChild:a}=mv(e,n,r);if(!o)return Ev(e);const u=r.slice(a);return this.getChildConfig(t,n,r).pipe(Object(_y.a)(t=>{const r=t.module,o=t.routes,{segmentGroup:a,slicedSegments:c}=vv(e,s,u,o),l=new um(a.segments,a.children);if(0===c.length&&l.hasChildren())return this.expandChildren(r,o,l).pipe(Object(wt.a)(t=>new um(s,t)));if(0===o.length&&0===c.length)return Object(dt.a)(new um(s,{}));const h=pv(n)===i;return this.expandSegment(r,l,o,c,h?Qy:i,!0).pipe(Object(wt.a)(t=>new um(s.concat(t.segments),t.children)))}))}getChildConfig(t,e,n){return e.children?Object(dt.a)(new iv(e.children,t)):e.loadChildren?void 0!==e._loadedConfig?Object(dt.a)(e._loadedConfig):this.runCanLoadGuards(t.injector,e,n).pipe(Object(_y.a)(n=>n?this.configLoader.load(t.injector,e).pipe(Object(wt.a)(t=>(e._loadedConfig=t,t))):function(t){return new lt.a(e=>e.error(Yy(`Cannot load children because the guard of the route "path: '${t.path}'" returned false`)))}(e))):Object(dt.a)(new iv([],t))}runCanLoadGuards(t,e,n){const r=e.canLoad;if(!r||0===r.length)return Object(dt.a)(!0);const i=r.map(r=>{const i=t.get(r);let o;if(function(t){return t&&ov(t.canLoad)}(i))o=i.canLoad(e,n);else{if(!ov(i))throw new Error("Invalid CanLoad guard");o=i(e,n)}return nm(o)});return Object(dt.a)(i).pipe(uv(),Object(Sy.a)(t=>{if(!sv(t))return;const e=Yy(`Redirecting to "${this.urlSerializer.serialize(t)}"`);throw e.url=t,e}),Object(wt.a)(t=>!0===t))}lineralizeSegments(t,e){let n=[],r=e.root;for(;;){if(n=n.concat(r.segments),0===r.numberOfChildren)return Object(dt.a)(n);if(r.numberOfChildren>1||!r.children.primary)return Tv(t.redirectTo);r=r.children.primary}}applyRedirectCommands(t,e,n){return this.applyRedirectCreatreUrlTree(e,this.urlSerializer.parse(e),t,n)}applyRedirectCreatreUrlTree(t,e,n,r){const i=this.createSegmentGroup(t,e.root,n,r);return new am(i,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){const n={};return em(t,(t,r)=>{if("string"==typeof t&&t.startsWith(":")){const i=t.substring(1);n[r]=e[i]}else n[r]=t}),n}createSegmentGroup(t,e,n,r){const i=this.createSegments(t,e.segments,n,r);let o={};return em(e.children,(e,i)=>{o[i]=this.createSegmentGroup(t,e,n,r)}),new um(i,o)}createSegments(t,e,n,r){return e.map(e=>e.path.startsWith(":")?this.findPosParam(t,e,r):this.findOrReturn(e,n))}findPosParam(t,e,n){const r=n[e.path.substring(1)];if(!r)throw new Error(`Cannot redirect to '${t}'. Cannot find '${e.path}'.`);return r}findOrReturn(t,e){let n=0;for(const r of e){if(r.path===t.path)return e.splice(n),r;n++}return t}}function xv(t){const e={};for(const n of Object.keys(t.children)){const r=xv(t.children[n]);(r.segments.length>0||r.hasChildren())&&(e[n]=r)}return function(t){if(1===t.numberOfChildren&&t.children.primary){const e=t.children.primary;return new um(t.segments.concat(e.segments),e.children)}return t}(new um(t.segments,e))}class Av{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class jv{constructor(t,e){this.component=t,this.route=e}}function kv(t,e,n){const r=t._root;return Pv(r,e?e._root:null,n,[r.value])}function Nv(t,e,n){const r=function(t){if(!t)return null;for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:n).get(t)}function Pv(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=km(e);return t.children.forEach(t=>{!function(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=t.value,s=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){const u=function(t,e,n){if("function"==typeof n)return n(t,e);switch(n){case"pathParamsChange":return!lm(t.url,e.url);case"pathParamsOrQueryParamsChange":return!lm(t.url,e.url)||!Jy(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!qm(t,e)||!Jy(t.queryParams,e.queryParams);case"paramsChange":default:return!qm(t,e)}}(s,o,o.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new Av(r)):(o.data=s.data,o._resolvedData=s._resolvedData),Pv(t,e,o.component?a?a.children:null:n,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new jv(a.outlet.component,s))}else s&&Rv(e,a,i),i.canActivateChecks.push(new Av(r)),Pv(t,null,o.component?a?a.children:null:n,r,i)}(t,o[t.value.outlet],n,r.concat([t.value]),i),delete o[t.value.outlet]}),em(o,(t,e)=>Rv(t,n.getContext(e),i)),i}function Rv(t,e,n){const r=km(t),i=t.value;em(r,(t,r)=>{Rv(t,i.component?e?e.children.getContext(r):null:e,n)}),n.canDeactivateChecks.push(new jv(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}class Dv{}function Mv(t){return new lt.a(e=>e.error(t))}class Lv{constructor(t,e,n,r,i,o){this.rootComponentType=t,this.config=e,this.urlTree=n,this.url=r,this.paramsInheritanceStrategy=i,this.relativeLinkResolution=o}recognize(){const t=vv(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution).segmentGroup,e=this.processSegmentGroup(this.config,t,Qy);if(null===e)return null;const n=new Mm([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Qy,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new jm(n,e),i=new Lm(this.url,r);return this.inheritParamsAndData(i._root),i}inheritParamsAndData(t){const e=t.value,n=Dm(e,this.paramsInheritanceStrategy);e.params=Object.freeze(n.params),e.data=Object.freeze(n.data),t.children.forEach(t=>this.inheritParamsAndData(t))}processSegmentGroup(t,e,n){return 0===e.segments.length&&e.hasChildren()?this.processChildren(t,e):this.processSegment(t,e,e.segments,n)}processChildren(t,e){const n=[];for(const i of Object.keys(e.children)){const r=e.children[i],o=gv(t,i),s=this.processSegmentGroup(o,r,i);if(null===s)return null;n.push(...s)}const r=function(t){const e=[];for(const n of t){if(!Fv(n)){e.push(n);continue}const t=e.find(t=>n.value.routeConfig===t.value.routeConfig);void 0!==t?t.children.push(...n.children):e.push(n)}return e}(n);return r.sort((t,e)=>t.value.outlet===Qy?-1:e.value.outlet===Qy?1:t.value.outlet.localeCompare(e.value.outlet)),r}processSegment(t,e,n,r){for(const i of t){const t=this.processSegmentAgainstRoute(i,e,n,r);if(null!==t)return t}return wv(e,n,r)?[]:null}processSegmentAgainstRoute(t,e,n,r){if(t.redirectTo||!_v(t,e,n,r))return null;let i,o=[],s=[];if("**"===t.path){const r=n.length>0?tm(n).parameters:{};i=new Mm(n,r,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,qv(t),pv(t),t.component,t,Vv(e),Uv(e)+n.length,Bv(t))}else{const r=mv(e,t,n);if(!r.matched)return null;o=r.consumedSegments,s=n.slice(r.lastChild),i=new Mm(o,r.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,qv(t),pv(t),t.component,t,Vv(e),Uv(e)+o.length,Bv(t))}const a=function(t){return t.children?t.children:t.loadChildren?t._loadedConfig.routes:[]}(t),{segmentGroup:u,slicedSegments:c}=vv(e,o,s,a.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution);if(0===c.length&&u.hasChildren()){const t=this.processChildren(a,u);return null===t?null:[new jm(i,t)]}if(0===a.length&&0===c.length)return[new jm(i,[])];const l=pv(t)===r,h=this.processSegment(a,u,c,l?Qy:r);return null===h?null:[new jm(i,h)]}}function Fv(t){const e=t.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function Vv(t){let e=t;for(;e._sourceSegment;)e=e._sourceSegment;return e}function Uv(t){let e=t,n=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,n+=e._segmentIndexShift?e._segmentIndexShift:0;return n-1}function qv(t){return t.data||{}}function Bv(t){return t.resolve||{}}function Hv(t){return ag(e=>{const n=t(e);return n?Object(ht.a)(n).pipe(Object(wt.a)(()=>e)):Object(dt.a)(e)})}class zv extends class{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}}{}const Gv=new r.r("ROUTES");class Qv{constructor(t,e,n,r){this.loader=t,this.compiler=e,this.onLoadStartListener=n,this.onLoadEndListener=r}load(t,e){if(e._loader$)return e._loader$;this.onLoadStartListener&&this.onLoadStartListener(e);const n=this.loadModuleFactory(e.loadChildren).pipe(Object(wt.a)(n=>{this.onLoadEndListener&&this.onLoadEndListener(e);const i=n.create(t);return new iv(Zy(i.injector.get(Gv,void 0,r.q.Self|r.q.Optional)).map(fv),i)}),my(t=>{throw e._loader$=void 0,t}));return e._loader$=new yy.a(n,()=>new ig.a).pipe(Object(Ty.a)()),e._loader$}loadModuleFactory(t){return"string"==typeof t?Object(ht.a)(this.loader.load(t)):nm(t()).pipe(Object(_y.a)(t=>t instanceof r.w?Object(dt.a)(t):Object(ht.a)(this.compiler.compileModuleAsync(t))))}}class Wv{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Kv,this.attachRef=null}}class Kv{constructor(){this.contexts=new Map}onChildOutletCreated(t,e){const n=this.getOrCreateContext(t);n.outlet=e,this.contexts.set(t,n)}onChildOutletDestroyed(t){const e=this.getContext(t);e&&(e.outlet=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let e=this.getContext(t);return e||(e=new Wv,this.contexts.set(t,e)),e}getContext(t){return this.contexts.get(t)||null}}class Yv{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,e){return t}}function $v(t){throw t}function Jv(t,e,n){return e.parse("/")}function Xv(t,e){return Object(dt.a)(null)}let Zv=(()=>{class t{constructor(t,e,n,i,o,s,a,u){this.rootComponentType=t,this.urlSerializer=e,this.rootContexts=n,this.location=i,this.config=u,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.lastLocationChangeInfo=null,this.navigationId=0,this.isNgZoneEnabled=!1,this.events=new ig.a,this.errorHandler=$v,this.malformedUriErrorHandler=Jv,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:Xv,afterPreactivation:Xv},this.urlHandlingStrategy=new Yv,this.routeReuseStrategy=new zv,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.ngModule=o.get(r.y),this.console=o.get(r.Y);const c=o.get(r.A);this.isNgZoneEnabled=c instanceof r.A&&r.A.isInAngularZone(),this.resetConfig(u),this.currentUrlTree=new am(new um([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new Qv(s,a,t=>this.triggerEvent(new Vy(t)),t=>this.triggerEvent(new Uy(t))),this.routerState=Pm(this.currentUrlTree,this.rootComponentType),this.transitions=new oy({id:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}setupNavigations(t){const e=this.events;return t.pipe(xt(t=>0!==t.id),Object(wt.a)(t=>Object.assign(Object.assign({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl)})),ag(t=>{let n=!1,r=!1;return Object(dt.a)(t).pipe(Object(Sy.a)(t=>{this.currentNavigation={id:t.id,initialUrl:t.currentRawUrl,extractedUrl:t.extractedUrl,trigger:t.source,extras:t.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),ag(t=>{const n=!this.navigated||t.extractedUrl.toString()!==this.browserUrlTree.toString();if(("reload"===this.onSameUrlNavigation||n)&&this.urlHandlingStrategy.shouldProcessUrl(t.rawUrl))return Object(dt.a)(t).pipe(ag(t=>{const n=this.transitions.getValue();return e.next(new jy(t.id,this.serializeUrl(t.extractedUrl),t.source,t.restoredState)),n!==this.transitions.getValue()?bg.a:Promise.resolve(t)}),(r=this.ngModule.injector,i=this.configLoader,o=this.urlSerializer,s=this.config,ag(t=>function(t,e,n,r,i){return new Iv(t,e,n,r,i).apply()}(r,i,o,t.extractedUrl,s).pipe(Object(wt.a)(e=>Object.assign(Object.assign({},t),{urlAfterRedirects:e}))))),Object(Sy.a)(t=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:t.urlAfterRedirects})}),function(t,e,n,r,i){return Object(_y.a)(o=>function(t,e,n,r,i="emptyOnly",o="legacy"){try{const s=new Lv(t,e,n,r,i,o).recognize();return null===s?Mv(new Dv):Object(dt.a)(s)}catch(Zp){return Mv(Zp)}}(t,e,o.urlAfterRedirects,n(o.urlAfterRedirects),r,i).pipe(Object(wt.a)(t=>Object.assign(Object.assign({},o),{targetSnapshot:t}))))}(this.rootComponentType,this.config,t=>this.serializeUrl(t),this.paramsInheritanceStrategy,this.relativeLinkResolution),Object(Sy.a)(t=>{"eager"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(t.urlAfterRedirects,!!t.extras.replaceUrl,t.id,t.extras.state),this.browserUrlTree=t.urlAfterRedirects);const n=new Ry(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);e.next(n)}));var r,i,o,s;if(n&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:n,extractedUrl:r,source:i,restoredState:o,extras:s}=t,a=new jy(n,this.serializeUrl(r),i,o);e.next(a);const u=Pm(r,this.rootComponentType).snapshot;return Object(dt.a)(Object.assign(Object.assign({},t),{targetSnapshot:u,urlAfterRedirects:r,extras:Object.assign(Object.assign({},s),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=t.rawUrl,this.browserUrlTree=t.urlAfterRedirects,t.resolve(null),bg.a}),Hv(t=>{const{targetSnapshot:e,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:o,replaceUrl:s}}=t;return this.hooks.beforePreactivation(e,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!o,replaceUrl:!!s})}),Object(Sy.a)(t=>{const e=new Dy(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),Object(wt.a)(t=>Object.assign(Object.assign({},t),{guards:kv(t.targetSnapshot,t.currentSnapshot,this.rootContexts)})),function(t,e){return Object(_y.a)(n=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return 0===s.length&&0===o.length?Object(dt.a)(Object.assign(Object.assign({},n),{guardsResult:!0})):function(t,e,n,r){return Object(ht.a)(t).pipe(Object(_y.a)(t=>function(t,e,n,r,i){const o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||0===o.length)return Object(dt.a)(!0);const s=o.map(o=>{const s=Nv(o,e,i);let a;if(function(t){return t&&ov(t.canDeactivate)}(s))a=nm(s.canDeactivate(t,e,n,r));else{if(!ov(s))throw new Error("Invalid CanDeactivate guard");a=nm(s(t,e,n,r))}return a.pipe(kg())});return Object(dt.a)(s).pipe(uv())}(t.component,t.route,n,e,r)),kg(t=>!0!==t,!0))}(s,r,i,t).pipe(Object(_y.a)(n=>n&&"boolean"==typeof n?function(t,e,n,r){return Object(ht.a)(e).pipe(wy(e=>pt(function(t,e){return null!==t&&e&&e(new qy(t)),Object(dt.a)(!0)}(e.route.parent,r),function(t,e){return null!==t&&e&&e(new Hy(t)),Object(dt.a)(!0)}(e.route,r),function(t,e,n){const r=e[e.length-1],i=e.slice(0,e.length-1).reverse().map(t=>function(t){const e=t.routeConfig?t.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:t,guards:e}:null}(t)).filter(t=>null!==t).map(e=>gy(()=>{const i=e.guards.map(i=>{const o=Nv(i,e.node,n);let s;if(function(t){return t&&ov(t.canActivateChild)}(o))s=nm(o.canActivateChild(r,t));else{if(!ov(o))throw new Error("Invalid CanActivateChild guard");s=nm(o(r,t))}return s.pipe(kg())});return Object(dt.a)(i).pipe(uv())}));return Object(dt.a)(i).pipe(uv())}(t,e.path,n),function(t,e,n){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return Object(dt.a)(!0);const i=r.map(r=>gy(()=>{const i=Nv(r,e,n);let o;if(function(t){return t&&ov(t.canActivate)}(i))o=nm(i.canActivate(e,t));else{if(!ov(i))throw new Error("Invalid CanActivate guard");o=nm(i(e,t))}return o.pipe(kg())}));return Object(dt.a)(i).pipe(uv())}(t,e.route,n))),kg(t=>!0!==t,!0))}(r,o,t,e):Object(dt.a)(n)),Object(wt.a)(t=>Object.assign(Object.assign({},n),{guardsResult:t})))})}(this.ngModule.injector,t=>this.triggerEvent(t)),Object(Sy.a)(t=>{if(sv(t.guardsResult)){const e=Yy(`Redirecting to "${this.serializeUrl(t.guardsResult)}"`);throw e.url=t.guardsResult,e}const e=new My(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot,!!t.guardsResult);this.triggerEvent(e)}),xt(t=>{if(!t.guardsResult){this.resetUrlToCurrentUrlTree();const n=new Ny(t.id,this.serializeUrl(t.extractedUrl),"");return e.next(n),t.resolve(!1),!1}return!0}),Hv(t=>{if(t.guards.canActivateChecks.length)return Object(dt.a)(t).pipe(Object(Sy.a)(t=>{const e=new Ly(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),ag(t=>{let n=!1;return Object(dt.a)(t).pipe((r=this.paramsInheritanceStrategy,i=this.ngModule.injector,Object(_y.a)(t=>{const{targetSnapshot:e,guards:{canActivateChecks:n}}=t;if(!n.length)return Object(dt.a)(t);let o=0;return Object(ht.a)(n).pipe(wy(t=>function(t,e,n,r){return function(t,e,n,r){const i=Object.keys(t);if(0===i.length)return Object(dt.a)({});const o={};return Object(ht.a)(i).pipe(Object(_y.a)(i=>function(t,e,n,r){const i=Nv(t,e,r);return nm(i.resolve?i.resolve(e,n):i(e,n))}(t[i],e,n,r).pipe(Object(Sy.a)(t=>{o[i]=t}))),Cy(1),Object(_y.a)(()=>Object.keys(o).length===i.length?Object(dt.a)(o):bg.a))}(t._resolve,t,e,r).pipe(Object(wt.a)(e=>(t._resolvedData=e,t.data=Object.assign(Object.assign({},t.data),Dm(t,n).resolve),null)))}(t.route,e,r,i)),Object(Sy.a)(()=>o++),Cy(1),Object(_y.a)(e=>o===n.length?Object(dt.a)(t):bg.a))})),Object(Sy.a)({next:()=>n=!0,complete:()=>{if(!n){const n=new Ny(t.id,this.serializeUrl(t.extractedUrl),"At least one route resolver didn't emit any value.");e.next(n),t.resolve(!1)}}}));var r,i}),Object(Sy.a)(t=>{const e=new Fy(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}))}),Hv(t=>{const{targetSnapshot:e,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:o,replaceUrl:s}}=t;return this.hooks.afterPreactivation(e,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!o,replaceUrl:!!s})}),Object(wt.a)(t=>{const e=function(t,e,n){const r=Bm(t,e._root,n?n._root:void 0);return new Nm(r,e)}(this.routeReuseStrategy,t.targetSnapshot,t.currentRouterState);return Object.assign(Object.assign({},t),{targetRouterState:e})}),Object(Sy.a)(t=>{this.currentUrlTree=t.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl),this.routerState=t.targetRouterState,"deferred"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,!!t.extras.replaceUrl,t.id,t.extras.state),this.browserUrlTree=t.urlAfterRedirects)}),(o=this.rootContexts,s=this.routeReuseStrategy,a=t=>this.triggerEvent(t),Object(wt.a)(t=>(new nv(s,t.targetRouterState,t.currentRouterState,a).activate(o),t))),Object(Sy.a)({next(){n=!0},complete(){n=!0}}),(i=()=>{if(!n&&!r){this.resetUrlToCurrentUrlTree();const n=new Ny(t.id,this.serializeUrl(t.extractedUrl),`Navigation ID ${t.id} is not equal to the current navigation id ${this.navigationId}`);e.next(n),t.resolve(!1)}this.currentNavigation=null},t=>t.lift(new Iy(i))),my(n=>{if(r=!0,(i=n)&&i.ngNavigationCancelingError){const r=sv(n.url);r||(this.navigated=!0,this.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl));const i=new Ny(t.id,this.serializeUrl(t.extractedUrl),n.message);e.next(i),r?setTimeout(()=>{const e=this.urlHandlingStrategy.merge(n.url,this.rawUrlTree);this.scheduleNavigation(e,"imperative",null,{skipLocationChange:t.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy},{resolve:t.resolve,reject:t.reject,promise:t.promise})},0):t.resolve(!1)}else{this.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl);const r=new Py(t.id,this.serializeUrl(t.extractedUrl),n);e.next(r);try{t.resolve(this.errorHandler(n))}catch(ws){t.reject(ws)}}var i;return bg.a}));var i,o,s,a}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}getTransition(){const t=this.transitions.value;return t.urlAfterRedirects=this.browserUrlTree,t}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const e=this.extractLocationChangeInfoFromEvent(t);this.shouldScheduleNavigation(this.lastLocationChangeInfo,e)&&setTimeout(()=>{const{source:t,state:n,urlTree:r}=e,i={replaceUrl:!0};if(n){const t=Object.assign({},n);delete t.navigationId,0!==Object.keys(t).length&&(i.state=t)}this.scheduleNavigation(r,t,n,i)},0),this.lastLocationChangeInfo=e}))}extractLocationChangeInfoFromEvent(t){var e;return{source:"popstate"===t.type?"popstate":"hashchange",urlTree:this.parseUrl(t.url),state:(null===(e=t.state)||void 0===e?void 0:e.navigationId)?t.state:null,transitionId:this.getTransition().id}}shouldScheduleNavigation(t,e){if(!t)return!0;const n=e.urlTree.toString()===t.urlTree.toString();return!(e.transitionId===t.transitionId&&n&&("hashchange"===e.source&&"popstate"===t.source||"popstate"===e.source&&"hashchange"===t.source))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){lv(t),this.config=t.map(fv),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,e={}){const{relativeTo:n,queryParams:r,fragment:i,queryParamsHandling:o,preserveFragment:s}=e,a=n||this.routerState.root,u=s?this.currentUrlTree.fragment:i;let c=null;switch(o){case"merge":c=Object.assign(Object.assign({},this.currentUrlTree.queryParams),r);break;case"preserve":c=this.currentUrlTree.queryParams;break;default:c=r||null}return null!==c&&(c=this.removeEmptyProps(c)),function(t,e,n,r,i){if(0===n.length)return Qm(e.root,e.root,e,r,i);const o=function(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new Km(!0,0,t);let e=0,n=!1;const r=t.reduce((t,r,i)=>{if("object"==typeof r&&null!=r){if(r.outlets){const e={};return em(r.outlets,(t,n)=>{e[n]="string"==typeof t?t.split("/"):t}),[...t,{outlets:e}]}if(r.segmentPath)return[...t,r.segmentPath]}return"string"!=typeof r?[...t,r]:0===i?(r.split("/").forEach((r,i)=>{0==i&&"."===r||(0==i&&""===r?n=!0:".."===r?e++:""!=r&&t.push(r))}),t):[...t,r]},[]);return new Km(n,e,r)}(n);if(o.toRoot())return Qm(e.root,new um([],{}),e,r,i);const s=function(t,e,n){if(t.isAbsolute)return new Ym(e.root,!0,0);if(-1===n.snapshot._lastPathIndex){const t=n.snapshot._urlSegment;return new Ym(t,t===e.root,0)}const r=zm(t.commands[0])?0:1;return function(t,e,n){let r=t,i=e,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new Ym(r,!1,i-o)}(n.snapshot._urlSegment,n.snapshot._lastPathIndex+r,t.numberOfDoubleDots)}(o,e,t),a=s.processChildren?Jm(s.segmentGroup,s.index,o.commands):$m(s.segmentGroup,s.index,o.commands);return Qm(s.segmentGroup,a,e,r,i)}(a,this.currentUrlTree,t,c,u)}navigateByUrl(t,e={skipLocationChange:!1}){const n=sv(t)?t:this.parseUrl(t),r=this.urlHandlingStrategy.merge(n,this.rawUrlTree);return this.scheduleNavigation(r,"imperative",null,e)}navigate(t,e={skipLocationChange:!1}){return function(t){for(let e=0;e<t.length;e++){const n=t[e];if(null==n)throw new Error(`The requested path contains ${n} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,e),e)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let e;try{e=this.urlSerializer.parse(t)}catch(Zp){e=this.malformedUriErrorHandler(Zp,this.urlSerializer,t)}return e}isActive(t,e){if(sv(t))return rm(this.currentUrlTree,t,e);const n=this.parseUrl(t);return rm(this.currentUrlTree,n,e)}removeEmptyProps(t){return Object.keys(t).reduce((e,n)=>{const r=t[n];return null!=r&&(e[n]=r),e},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.events.next(new ky(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.currentNavigation=null,t.resolve(!0)},t=>{this.console.warn("Unhandled Navigation Error: ")})}scheduleNavigation(t,e,n,r,i){if(this.disposed)return Promise.resolve(!1);const o=this.getTransition(),s="imperative"!==e&&"imperative"===(null==o?void 0:o.source),a=(this.lastSuccessfulId===o.id||this.currentNavigation?o.rawUrl:o.urlAfterRedirects).toString()===t.toString();if(s&&a)return Promise.resolve(!0);let u,c,l;i?(u=i.resolve,c=i.reject,l=i.promise):l=new Promise((t,e)=>{u=t,c=e});const h=++this.navigationId;return this.setTransition({id:h,source:e,restoredState:n,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:r,resolve:u,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(t=>Promise.reject(t))}setBrowserUrl(t,e,n,r){const i=this.urlSerializer.serialize(t);r=r||{},this.location.isCurrentPathEqualTo(i)||e?this.location.replaceState(i,"",Object.assign(Object.assign({},r),{navigationId:n})):this.location.go(i,"",Object.assign(Object.assign({},r),{navigationId:n}))}resetStateAndUrl(t,e,n){this.routerState=t,this.currentUrlTree=e,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n),this.resetUrlToCurrentUrlTree()}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",{navigationId:this.lastSuccessfulId})}}return t.\u0275fac=function(e){return new(e||t)(r.Yb(r.N),r.Yb(hm),r.Yb(Kv),r.Yb(w),r.Yb(r.s),r.Yb(r.x),r.Yb(r.i),r.Yb(void 0))},t.\u0275prov=r.Ib({token:t,factory:t.\u0275fac}),t})(),tb=(()=>{class t{constructor(t,e,n,r,i){this.router=t,this.route=e,this.commands=[],this.onChanges=new ig.a,null==n&&r.setAttribute(i.nativeElement,"tabindex","0")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:[]}onClick(){const t={skipLocationChange:nb(this.skipLocationChange),replaceUrl:nb(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,t),!0}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:nb(this.preserveFragment)})}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(Zv),r.Mb(Rm),r.Zb("tabindex"),r.Mb(r.E),r.Mb(r.l))},t.\u0275dir=r.Hb({type:t,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,e){1&t&&r.bc("click",function(){return e.onClick()})},inputs:{routerLink:"routerLink",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo"},features:[r.yb]}),t})(),eb=(()=>{class t{constructor(t,e,n){this.router=t,this.route=e,this.locationStrategy=n,this.commands=[],this.onChanges=new ig.a,this.subscription=t.events.subscribe(t=>{t instanceof ky&&this.updateTargetUrlAndHref()})}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:[]}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,e,n,r,i){if(0!==t||e||n||r||i)return!0;if("string"==typeof this.target&&"_self"!=this.target)return!0;const o={skipLocationChange:nb(this.skipLocationChange),replaceUrl:nb(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,o),!1}updateTargetUrlAndHref(){this.href=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree))}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:nb(this.preserveFragment)})}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(Zv),r.Mb(Rm),r.Mb(y))},t.\u0275dir=r.Hb({type:t,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,e){1&t&&r.bc("click",function(t){return e.onClick(t.button,t.ctrlKey,t.shiftKey,t.altKey,t.metaKey)}),2&t&&(r.Ub("href",e.href,r.rc),r.Bb("target",e.target))},inputs:{routerLink:"routerLink",target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo"},features:[r.yb]}),t})();function nb(t){return""===t||!!t}let rb=(()=>{class t{constructor(t,e,n,r,i,o){this.router=t,this.element=e,this.renderer=n,this.cdr=r,this.link=i,this.linkWithHref=o,this.classes=[],this.isActive=!1,this.routerLinkActiveOptions={exact:!1},this.routerEventsSubscription=t.events.subscribe(t=>{t instanceof ky&&this.update()})}ngAfterContentInit(){Object(dt.a)(this.links.changes,this.linksWithHrefs.changes,Object(dt.a)(null)).pipe(Object(ft.a)()).subscribe(t=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){var t;null===(t=this.linkInputChangesSubscription)||void 0===t||t.unsubscribe();const e=[...this.links.toArray(),...this.linksWithHrefs.toArray(),this.link,this.linkWithHref].filter(t=>!!t).map(t=>t.onChanges);this.linkInputChangesSubscription=Object(ht.a)(e).pipe(Object(ft.a)()).subscribe(t=>{this.isActive!==this.isLinkActive(this.router)(t)&&this.update()})}set routerLinkActive(t){const e=Array.isArray(t)?t:t.split(" ");this.classes=e.filter(t=>!!t)}ngOnChanges(t){this.update()}ngOnDestroy(){var t;this.routerEventsSubscription.unsubscribe(),null===(t=this.linkInputChangesSubscription)||void 0===t||t.unsubscribe()}update(){this.links&&this.linksWithHrefs&&this.router.navigated&&Promise.resolve().then(()=>{const t=this.hasActiveLinks();this.isActive!==t&&(this.isActive=t,this.cdr.markForCheck(),this.classes.forEach(e=>{t?this.renderer.addClass(this.element.nativeElement,e):this.renderer.removeClass(this.element.nativeElement,e)}))})}isLinkActive(t){return e=>t.isActive(e.urlTree,this.routerLinkActiveOptions.exact)}hasActiveLinks(){const t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.linkWithHref&&t(this.linkWithHref)||this.links.some(t)||this.linksWithHrefs.some(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(Zv),r.Mb(r.l),r.Mb(r.E),r.Mb(r.h),r.Mb(tb,8),r.Mb(eb,8))},t.\u0275dir=r.Hb({type:t,selectors:[["","routerLinkActive",""]],contentQueries:function(t,e,n){if(1&t&&(r.Fb(n,tb,1),r.Fb(n,eb,1)),2&t){let t;r.oc(t=r.cc())&&(e.links=t),r.oc(t=r.cc())&&(e.linksWithHrefs=t)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",routerLinkActive:"routerLinkActive"},exportAs:["routerLinkActive"],features:[r.yb]}),t})(),ib=(()=>{class t{constructor(t,e,n,i,o){this.parentContexts=t,this.location=e,this.resolver=n,this.changeDetector=o,this.activated=null,this._activatedRoute=null,this.activateEvents=new r.n,this.deactivateEvents=new r.n,this.name=i||Qy,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,t}attach(t,e){this.activated=t,this._activatedRoute=e,this.location.insert(t.hostView)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,e){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const n=(e=e||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),r=this.parentContexts.getOrCreateContext(this.name).children,i=new ob(t,r,this.location.injector);this.activated=this.location.createComponent(n,this.location.length,i),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(Kv),r.Mb(r.Q),r.Mb(r.j),r.Zb("name"),r.Mb(r.h))},t.\u0275dir=r.Hb({type:t,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),t})();class ob{constructor(t,e,n){this.route=t,this.childContexts=e,this.parent=n}get(t,e){return t===Rm?this.route:t===Kv?this.childContexts:this.parent.get(t,e)}}class sb{}class ab{preload(t,e){return Object(dt.a)(null)}}let ub=(()=>{class t{constructor(t,e,n,r,i){this.router=t,this.injector=r,this.preloadingStrategy=i,this.loader=new Qv(e,n,e=>t.triggerEvent(new Vy(e)),e=>t.triggerEvent(new Uy(e)))}setUpPreloading(){this.subscription=this.router.events.pipe(xt(t=>t instanceof ky),wy(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(r.y);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,e){const n=[];for(const r of e)if(r.loadChildren&&!r.canLoad&&r._loadedConfig){const t=r._loadedConfig;n.push(this.processRoutes(t.module,t.routes))}else r.loadChildren&&!r.canLoad?n.push(this.preloadConfig(t,r)):r.children&&n.push(this.processRoutes(t,r.children));return Object(ht.a)(n).pipe(Object(ft.a)(),Object(wt.a)(t=>{}))}preloadConfig(t,e){return this.preloadingStrategy.preload(e,()=>(e._loadedConfig?Object(dt.a)(e._loadedConfig):this.loader.load(t.injector,e)).pipe(Object(_y.a)(t=>(e._loadedConfig=t,this.processRoutes(t.module,t.routes)))))}}return t.\u0275fac=function(e){return new(e||t)(r.Yb(Zv),r.Yb(r.x),r.Yb(r.i),r.Yb(r.s),r.Yb(sb))},t.\u0275prov=r.Ib({token:t,factory:t.\u0275fac}),t})(),cb=(()=>{class t{constructor(t,e,n={}){this.router=t,this.viewportScroller=e,this.options=n,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},n.scrollPositionRestoration=n.scrollPositionRestoration||"disabled",n.anchorScrolling=n.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof jy?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof ky&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Gy&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,e){this.router.triggerEvent(new Gy(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,e))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(r.Yb(Zv),r.Yb(k),r.Yb(void 0))},t.\u0275prov=r.Ib({token:t,factory:t.\u0275fac}),t})();const lb=new r.r("ROUTER_CONFIGURATION"),hb=new r.r("ROUTER_FORROOT_GUARD"),db=[w,{provide:hm,useClass:dm},{provide:Zv,useFactory:function(t,e,n,r,i,s,a,u={},c,l){const h=new Zv(null,t,e,n,r,i,s,Zy(a));if(c&&(h.urlHandlingStrategy=c),l&&(h.routeReuseStrategy=l),function(t,e){t.errorHandler&&(e.errorHandler=t.errorHandler),t.malformedUriErrorHandler&&(e.malformedUriErrorHandler=t.malformedUriErrorHandler),t.onSameUrlNavigation&&(e.onSameUrlNavigation=t.onSameUrlNavigation),t.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=t.paramsInheritanceStrategy),t.relativeLinkResolution&&(e.relativeLinkResolution=t.relativeLinkResolution),t.urlUpdateStrategy&&(e.urlUpdateStrategy=t.urlUpdateStrategy)}(u,h),u.enableTracing){const t=o();h.events.subscribe(e=>{t.logGroup(`Router Event: ${e.constructor.name}`),t.log(e.toString()),t.log(e),t.logGroupEnd()})}return h},deps:[hm,Kv,w,r.s,r.x,r.i,Gv,lb,[class{},new r.B],[class{},new r.B]]},Kv,{provide:Rm,useFactory:function(t){return t.routerState.root},deps:[Zv]},{provide:r.x,useClass:r.K},ub,ab,class{preload(t,e){return e().pipe(my(()=>Object(dt.a)(null)))}},{provide:lb,useValue:{enableTracing:!1}}];function fb(){return new r.z("Router",Zv)}let pb=(()=>{class t{constructor(t,e){}static forRoot(e,n){return{ngModule:t,providers:[db,vb(e),{provide:hb,useFactory:mb,deps:[[Zv,new r.B,new r.J]]},{provide:lb,useValue:n||{}},{provide:y,useFactory:yb,deps:[a,[new r.p(v),new r.B],lb]},{provide:cb,useFactory:gb,deps:[Zv,k,lb]},{provide:sb,useExisting:n&&n.preloadingStrategy?n.preloadingStrategy:ab},{provide:r.z,multi:!0,useFactory:fb},[bb,{provide:r.d,multi:!0,useFactory:_b,deps:[bb]},{provide:Cb,useFactory:wb,deps:[bb]},{provide:r.b,multi:!0,useExisting:Cb}]]}}static forChild(e){return{ngModule:t,providers:[vb(e)]}}}return t.\u0275fac=function(e){return new(e||t)(r.Yb(hb,8),r.Yb(Zv,8))},t.\u0275mod=r.Kb({type:t}),t.\u0275inj=r.Jb({}),t})();function gb(t,e,n){return n.scrollOffset&&e.setOffset(n.scrollOffset),new cb(t,e,n)}function yb(t,e,n={}){return n.useHash?new _(t,e):new b(t,e)}function mb(t){return"guarded"}function vb(t){return[{provide:r.a,multi:!0,useValue:t},{provide:Gv,multi:!0,useValue:t}]}let bb=(()=>{class t{constructor(t){this.injector=t,this.initNavigation=!1,this.resultOfPreactivationDone=new ig.a}appInitializer(){return this.injector.get(c,Promise.resolve(null)).then(()=>{let t=null;const e=new Promise(e=>t=e),n=this.injector.get(Zv),r=this.injector.get(lb);return"disabled"===r.initialNavigation?(n.setUpLocationChangeListener(),t(!0)):"enabled"===r.initialNavigation||"enabledBlocking"===r.initialNavigation?(n.hooks.afterPreactivation=()=>this.initNavigation?Object(dt.a)(null):(this.initNavigation=!0,t(!0),this.resultOfPreactivationDone),n.initialNavigation()):t(!0),e})}bootstrapListener(t){const e=this.injector.get(lb),n=this.injector.get(ub),i=this.injector.get(cb),o=this.injector.get(Zv),s=this.injector.get(r.g);t===s.components[0]&&("enabledNonBlocking"!==e.initialNavigation&&void 0!==e.initialNavigation||o.initialNavigation(),n.setUpPreloading(),i.init(),o.resetRootComponentType(s.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}}return t.\u0275fac=function(e){return new(e||t)(r.Yb(r.s))},t.\u0275prov=r.Ib({token:t,factory:t.\u0275fac}),t})();function _b(t){return t.appInitializer.bind(t)}function wb(t){return t.bootstrapListener.bind(t)}const Cb=new r.r("Router Initializer");let Ob=(()=>{class t{constructor(t,e){this.afAuth=t,this.router=e,this.isLogged=!1,t.authState.subscribe(t=>this.isLogged=t)}SignIn(t,e){return Object(Vi.b)(this,void 0,void 0,function*(){try{return this.isLogged=t,yield this.afAuth.signInWithEmailAndPassword(t.email,e)}catch(n){return n}})}register(t,e){return Object(Vi.b)(this,void 0,void 0,function*(){try{return yield this.afAuth.createUserWithEmailAndPassword(t.email,e)}catch(n){return console.log("Error on register user",n),n}})}}return t.\u0275fac=function(e){return new(e||t)(r.Yb(Ug),r.Yb(Zv))},t.\u0275prov=r.Ib({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();class Eb{}class Sb{}class Tb{constructor(t){this.normalizedNames=new Map,this.lazyUpdate=null,t?this.lazyInit="string"==typeof t?()=>{this.headers=new Map,t.split("\n").forEach(t=>{const e=t.indexOf(":");if(e>0){const n=t.slice(0,e),r=n.toLowerCase(),i=t.slice(e+1).trim();this.maybeSetNormalizedName(n,r),this.headers.has(r)?this.headers.get(r).push(i):this.headers.set(r,[i])}})}:()=>{this.headers=new Map,Object.keys(t).forEach(e=>{let n=t[e];const r=e.toLowerCase();"string"==typeof n&&(n=[n]),n.length>0&&(this.headers.set(r,n),this.maybeSetNormalizedName(e,r))})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();const e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,e){return this.clone({name:t,value:e,op:"a"})}set(t,e){return this.clone({name:t,value:e,op:"s"})}delete(t,e){return this.clone({name:t,value:e,op:"d"})}maybeSetNormalizedName(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)}init(){this.lazyInit&&(this.lazyInit instanceof Tb?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(e=>{this.headers.set(e,t.headers.get(e)),this.normalizedNames.set(e,t.normalizedNames.get(e))})}clone(t){const e=new Tb;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof Tb?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([t]),e}applyUpdate(t){const e=t.name.toLowerCase();switch(t.op){case"a":case"s":let n=t.value;if("string"==typeof n&&(n=[n]),0===n.length)return;this.maybeSetNormalizedName(t.name,e);const r=("a"===t.op?this.headers.get(e):void 0)||[];r.push(...n),this.headers.set(e,r);break;case"d":const i=t.value;if(i){let t=this.headers.get(e);if(!t)return;t=t.filter(t=>-1===i.indexOf(t)),0===t.length?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,t)}else this.headers.delete(e),this.normalizedNames.delete(e)}}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>t(this.normalizedNames.get(e),this.headers.get(e)))}}class Ib{encodeKey(t){return xb(t)}encodeValue(t){return xb(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}}function xb(t){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/gi,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%2B/gi,"+").replace(/%3D/gi,"=").replace(/%3F/gi,"?").replace(/%2F/gi,"/")}class Ab{constructor(t={}){if(this.updates=null,this.cloneFrom=null,this.encoder=t.encoder||new Ib,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function(t,e){const n=new Map;return t.length>0&&t.replace(/^\?/,"").split("&").forEach(t=>{const r=t.indexOf("="),[i,o]=-1==r?[e.decodeKey(t),""]:[e.decodeKey(t.slice(0,r)),e.decodeValue(t.slice(r+1))],s=n.get(i)||[];s.push(o),n.set(i,s)}),n}(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(e=>{const n=t.fromObject[e];this.map.set(e,Array.isArray(n)?n:[n])})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();const e=this.map.get(t);return e?e[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,e){return this.clone({param:t,value:e,op:"a"})}appendAll(t){const e=[];return Object.keys(t).forEach(n=>{const r=t[n];Array.isArray(r)?r.forEach(t=>{e.push({param:n,value:t,op:"a"})}):e.push({param:n,value:r,op:"a"})}),this.clone(e)}set(t,e){return this.clone({param:t,value:e,op:"s"})}delete(t,e){return this.clone({param:t,value:e,op:"d"})}toString(){return this.init(),this.keys().map(t=>{const e=this.encoder.encodeKey(t);return this.map.get(t).map(t=>e+"="+this.encoder.encodeValue(t)).join("&")}).filter(t=>""!==t).join("&")}clone(t){const e=new Ab({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat(t),e}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":const e=("a"===t.op?this.map.get(t.param):void 0)||[];e.push(t.value),this.map.set(t.param,e);break;case"d":if(void 0===t.value){this.map.delete(t.param);break}{let e=this.map.get(t.param)||[];const n=e.indexOf(t.value);-1!==n&&e.splice(n,1),e.length>0?this.map.set(t.param,e):this.map.delete(t.param)}}}),this.cloneFrom=this.updates=null)}}function jb(t){return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer}function kb(t){return"undefined"!=typeof Blob&&t instanceof Blob}function Nb(t){return"undefined"!=typeof FormData&&t instanceof FormData}class Pb{constructor(t,e,n,r){let i;if(this.url=e,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase(),function(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||r?(this.body=void 0!==n?n:null,i=r):i=n,i&&(this.reportProgress=!!i.reportProgress,this.withCredentials=!!i.withCredentials,i.responseType&&(this.responseType=i.responseType),i.headers&&(this.headers=i.headers),i.params&&(this.params=i.params)),this.headers||(this.headers=new Tb),this.params){const t=this.params.toString();if(0===t.length)this.urlWithParams=e;else{const n=e.indexOf("?");this.urlWithParams=e+(-1===n?"?":n<e.length-1?"&":"")+t}}else this.params=new Ab,this.urlWithParams=e}serializeBody(){return null===this.body?null:jb(this.body)||kb(this.body)||Nb(this.body)||"string"==typeof this.body?this.body:this.body instanceof Ab?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||Nb(this.body)?null:kb(this.body)?this.body.type||null:jb(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Ab?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||Array.isArray(this.body)?"application/json":null}clone(t={}){const e=t.method||this.method,n=t.url||this.url,r=t.responseType||this.responseType,i=void 0!==t.body?t.body:this.body,o=void 0!==t.withCredentials?t.withCredentials:this.withCredentials,s=void 0!==t.reportProgress?t.reportProgress:this.reportProgress;let a=t.headers||this.headers,u=t.params||this.params;return void 0!==t.setHeaders&&(a=Object.keys(t.setHeaders).reduce((e,n)=>e.set(n,t.setHeaders[n]),a)),t.setParams&&(u=Object.keys(t.setParams).reduce((e,n)=>e.set(n,t.setParams[n]),u)),new Pb(e,n,i,{params:u,headers:a,reportProgress:s,responseType:r,withCredentials:o})}}var Rb=function(t){return t[t.Sent=0]="Sent",t[t.UploadProgress=1]="UploadProgress",t[t.ResponseHeader=2]="ResponseHeader",t[t.DownloadProgress=3]="DownloadProgress",t[t.Response=4]="Response",t[t.User=5]="User",t}({});class Db{constructor(t,e=200,n="OK"){this.headers=t.headers||new Tb,this.status=void 0!==t.status?t.status:e,this.statusText=t.statusText||n,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}}class Mb extends Db{constructor(t={}){super(t),this.type=Rb.ResponseHeader}clone(t={}){return new Mb({headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class Lb extends Db{constructor(t={}){super(t),this.type=Rb.Response,this.body=void 0!==t.body?t.body:null}clone(t={}){return new Lb({body:void 0!==t.body?t.body:this.body,headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class Fb extends Db{constructor(t){super(t,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${t.url||"(unknown url)"}`:`Http failure response for ${t.url||"(unknown url)"}: ${t.status} ${t.statusText}`,this.error=t.error||null}}function Vb(t,e){return{body:e,headers:t.headers,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials}}let Ub=(()=>{class t{constructor(t){this.handler=t}request(t,e,n={}){let r;if(t instanceof Pb)r=t;else{let i,o;i=n.headers instanceof Tb?n.headers:new Tb(n.headers),n.params&&(o=n.params instanceof Ab?n.params:new Ab({fromObject:n.params})),r=new Pb(t,e,void 0!==n.body?n.body:null,{headers:i,params:o,reportProgress:n.reportProgress,responseType:n.responseType||"json",withCredentials:n.withCredentials})}const i=Object(dt.a)(r).pipe(wy(t=>this.handler.handle(t)));if(t instanceof Pb||"events"===n.observe)return i;const o=i.pipe(xt(t=>t instanceof Lb));switch(n.observe||"body"){case"body":switch(r.responseType){case"arraybuffer":return o.pipe(Object(wt.a)(t=>{if(null!==t.body&&!(t.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return t.body}));case"blob":return o.pipe(Object(wt.a)(t=>{if(null!==t.body&&!(t.body instanceof Blob))throw new Error("Response is not a Blob.");return t.body}));case"text":return o.pipe(Object(wt.a)(t=>{if(null!==t.body&&"string"!=typeof t.body)throw new Error("Response is not a string.");return t.body}));case"json":default:return o.pipe(Object(wt.a)(t=>t.body))}case"response":return o;default:throw new Error(`Unreachable: unhandled observe type ${n.observe}}`)}}delete(t,e={}){return this.request("DELETE",t,e)}get(t,e={}){return this.request("GET",t,e)}head(t,e={}){return this.request("HEAD",t,e)}jsonp(t,e){return this.request("JSONP",t,{params:(new Ab).append(e,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,e={}){return this.request("OPTIONS",t,e)}patch(t,e,n={}){return this.request("PATCH",t,Vb(n,e))}post(t,e,n={}){return this.request("POST",t,Vb(n,e))}put(t,e,n={}){return this.request("PUT",t,Vb(n,e))}}return t.\u0275fac=function(e){return new(e||t)(r.Yb(Eb))},t.\u0275prov=r.Ib({token:t,factory:t.\u0275fac}),t})();class qb{constructor(t,e){this.next=t,this.interceptor=e}handle(t){return this.interceptor.intercept(t,this.next)}}const Bb=new r.r("HTTP_INTERCEPTORS");let Hb=(()=>{class t{intercept(t,e){return e.handle(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Ib({token:t,factory:t.\u0275fac}),t})();const zb=/^\)\]\}',?\n/;class Gb{}let Qb=(()=>{class t{constructor(){}build(){return new XMLHttpRequest}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Ib({token:t,factory:t.\u0275fac}),t})(),Wb=(()=>{class t{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new lt.a(e=>{const n=this.xhrFactory.build();if(n.open(t.method,t.urlWithParams),t.withCredentials&&(n.withCredentials=!0),t.headers.forEach((t,e)=>n.setRequestHeader(t,e.join(","))),t.headers.has("Accept")||n.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const e=t.detectContentTypeHeader();null!==e&&n.setRequestHeader("Content-Type",e)}if(t.responseType){const e=t.responseType.toLowerCase();n.responseType="json"!==e?e:"text"}const r=t.serializeBody();let i=null;const o=()=>{if(null!==i)return i;const e=1223===n.status?204:n.status,r=n.statusText||"OK",o=new Tb(n.getAllResponseHeaders()),s=function(t){return"responseURL"in t&&t.responseURL?t.responseURL:/^X-Request-URL:/m.test(t.getAllResponseHeaders())?t.getResponseHeader("X-Request-URL"):null}(n)||t.url;return i=new Mb({headers:o,status:e,statusText:r,url:s}),i},s=()=>{let{headers:r,status:i,statusText:s,url:a}=o(),u=null;204!==i&&(u=void 0===n.response?n.responseText:n.response),0===i&&(i=u?200:0);let c=i>=200&&i<300;if("json"===t.responseType&&"string"==typeof u){const t=u;u=u.replace(zb,"");try{u=""!==u?JSON.parse(u):null}catch(l){u=t,c&&(c=!1,u={error:l,text:u})}}c?(e.next(new Lb({body:u,headers:r,status:i,statusText:s,url:a||void 0})),e.complete()):e.error(new Fb({error:u,headers:r,status:i,statusText:s,url:a||void 0}))},a=t=>{const{url:r}=o(),i=new Fb({error:t,status:n.status||0,statusText:n.statusText||"Unknown Error",url:r||void 0});e.error(i)};let u=!1;const c=r=>{u||(e.next(o()),u=!0);let i={type:Rb.DownloadProgress,loaded:r.loaded};r.lengthComputable&&(i.total=r.total),"text"===t.responseType&&n.responseText&&(i.partialText=n.responseText),e.next(i)},l=t=>{let n={type:Rb.UploadProgress,loaded:t.loaded};t.lengthComputable&&(n.total=t.total),e.next(n)};return n.addEventListener("load",s),n.addEventListener("error",a),n.addEventListener("timeout",a),n.addEventListener("abort",a),t.reportProgress&&(n.addEventListener("progress",c),null!==r&&n.upload&&n.upload.addEventListener("progress",l)),n.send(r),e.next({type:Rb.Sent}),()=>{n.removeEventListener("error",a),n.removeEventListener("abort",a),n.removeEventListener("load",s),n.removeEventListener("timeout",a),t.reportProgress&&(n.removeEventListener("progress",c),null!==r&&n.upload&&n.upload.removeEventListener("progress",l)),n.readyState!==n.DONE&&n.abort()}})}}return t.\u0275fac=function(e){return new(e||t)(r.Yb(Gb))},t.\u0275prov=r.Ib({token:t,factory:t.\u0275fac}),t})();const Kb=new r.r("XSRF_COOKIE_NAME"),Yb=new r.r("XSRF_HEADER_NAME");class $b{}let Jb=(()=>{class t{constructor(t,e,n){this.doc=t,this.platform=e,this.cookieName=n,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=x(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return t.\u0275fac=function(e){return new(e||t)(r.Yb(s),r.Yb(r.C),r.Yb(Kb))},t.\u0275prov=r.Ib({token:t,factory:t.\u0275fac}),t})(),Xb=(()=>{class t{constructor(t,e){this.tokenService=t,this.headerName=e}intercept(t,e){const n=t.url.toLowerCase();if("GET"===t.method||"HEAD"===t.method||n.startsWith("http://")||n.startsWith("https://"))return e.handle(t);const r=this.tokenService.getToken();return null===r||t.headers.has(this.headerName)||(t=t.clone({headers:t.headers.set(this.headerName,r)})),e.handle(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Yb($b),r.Yb(Yb))},t.\u0275prov=r.Ib({token:t,factory:t.\u0275fac}),t})(),Zb=(()=>{class t{constructor(t,e){this.backend=t,this.injector=e,this.chain=null}handle(t){if(null===this.chain){const t=this.injector.get(Bb,[]);this.chain=t.reduceRight((t,e)=>new qb(t,e),this.backend)}return this.chain.handle(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Yb(Sb),r.Yb(r.s))},t.\u0275prov=r.Ib({token:t,factory:t.\u0275fac}),t})(),t_=(()=>{class t{static disable(){return{ngModule:t,providers:[{provide:Xb,useClass:Hb}]}}static withOptions(e={}){return{ngModule:t,providers:[e.cookieName?{provide:Kb,useValue:e.cookieName}:[],e.headerName?{provide:Yb,useValue:e.headerName}:[]]}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Kb({type:t}),t.\u0275inj=r.Jb({providers:[Xb,{provide:Bb,useExisting:Xb,multi:!0},{provide:$b,useClass:Jb},{provide:Kb,useValue:"XSRF-TOKEN"},{provide:Yb,useValue:"X-XSRF-TOKEN"}]}),t})(),e_=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Kb({type:t}),t.\u0275inj=r.Jb({providers:[Ub,{provide:Eb,useClass:Zb},Wb,{provide:Sb,useExisting:Wb},Qb,{provide:Gb,useExisting:Qb}],imports:[[t_.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),t})();var n_=n("XoHu");function r_(t,e){return new lt.a(n=>{const r=t.length;if(0===r)return void n.complete();const i=new Array(r);let o=0,s=0;for(let a=0;a<r;a++){const u=Object(ht.a)(t[a]);let c=!1;n.add(u.subscribe({next:t=>{c||(c=!0,s++),i[a]=t},error:t=>n.error(t),complete:()=>{o++,o!==r&&c||(s===r&&n.next(e?e.reduce((t,e,n)=>(t[e]=i[n],t),{}):i),n.complete())}}))}})}const i_=new r.r("NgValueAccessor"),o_={provide:i_,useExisting:Object(r.U)(()=>a_),multi:!0},s_=new r.r("CompositionEventMode");let a_=(()=>{class t{constructor(t,e,n){this._renderer=t,this._elementRef=e,this._compositionMode=n,this.onChange=t=>{},this.onTouched=()=>{},this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const t=o()?o().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}())}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==t?"":t)}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(r.E),r.Mb(r.l),r.Mb(s_,8))},t.\u0275dir=r.Hb({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,e){1&t&&r.bc("input",function(t){return e._handleInput(t.target.value)})("blur",function(){return e.onTouched()})("compositionstart",function(){return e._compositionStart()})("compositionend",function(t){return e._compositionEnd(t.target.value)})},features:[r.zb([o_])]}),t})();const u_=new r.r("NgValidators"),c_=new r.r("NgAsyncValidators");function l_(t){return null!=t}function h_(t){const e=Object(r.rb)(t)?Object(ht.a)(t):t;return Object(r.qb)(e),e}function d_(t){let e={};return t.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function f_(t,e){return e.map(e=>e(t))}function p_(t){return t.map(t=>function(t){return!t.validate}(t)?t:e=>t.validate(e))}function g_(t){return null!=t?function(t){if(!t)return null;const e=t.filter(l_);return 0==e.length?null:function(t){return d_(f_(t,e))}}(p_(t)):null}function y_(t){return null!=t?function(t){if(!t)return null;const e=t.filter(l_);return 0==e.length?null:function(t){return function(...t){if(1===t.length){const e=t[0];if(Object(sy.a)(e))return r_(e,null);if(Object(n_.a)(e)&&Object.getPrototypeOf(e)===Object.prototype){const t=Object.keys(e);return r_(t.map(t=>e[t]),t)}}if("function"==typeof t[t.length-1]){const e=t.pop();return r_(t=1===t.length&&Object(sy.a)(t[0])?t[0]:t,null).pipe(Object(wt.a)(t=>e(...t)))}return r_(t,null)}(f_(t,e).map(h_)).pipe(Object(wt.a)(d_))}}(p_(t)):null}function m_(t,e){return null===t?[e]:Array.isArray(t)?[...t,e]:[t,e]}let v_=(()=>{class t{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=g_(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=y_(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t){this.control&&this.control.reset(t)}hasError(t,e){return!!this.control&&this.control.hasError(t,e)}getError(t,e){return this.control?this.control.getError(t,e):null}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.Hb({type:t}),t})(),b_=(()=>{class t extends v_{get formDirective(){return null}get path(){return null}}return t.\u0275fac=function(e){return __(e||t)},t.\u0275dir=r.Hb({type:t,features:[r.xb]}),t})();const __=r.Tb(b_);class w_ extends v_{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class C_{constructor(t){this._cd=t}is(t){var e,n;return!!(null===(n=null===(e=this._cd)||void 0===e?void 0:e.control)||void 0===n?void 0:n[t])}}let O_=(()=>{class t extends C_{constructor(t){super(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(w_,2))},t.\u0275dir=r.Hb({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,e){2&t&&r.Eb("ng-untouched",e.is("untouched"))("ng-touched",e.is("touched"))("ng-pristine",e.is("pristine"))("ng-dirty",e.is("dirty"))("ng-valid",e.is("valid"))("ng-invalid",e.is("invalid"))("ng-pending",e.is("pending"))},features:[r.xb]}),t})(),E_=(()=>{class t extends C_{constructor(t){super(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(b_,10))},t.\u0275dir=r.Hb({type:t,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:14,hostBindings:function(t,e){2&t&&r.Eb("ng-untouched",e.is("untouched"))("ng-touched",e.is("touched"))("ng-pristine",e.is("pristine"))("ng-dirty",e.is("dirty"))("ng-valid",e.is("valid"))("ng-invalid",e.is("invalid"))("ng-pending",e.is("pending"))},features:[r.xb]}),t})();function S_(t,e){I_(t,e,!0),e.valueAccessor.writeValue(t.value),function(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,"change"===t.updateOn&&x_(t,e)})}(t,e),function(t,e){const n=(t,n)=>{e.valueAccessor.writeValue(t),n&&e.viewToModelUpdate(t)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}(t,e),function(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,"blur"===t.updateOn&&t._pendingChange&&x_(t,e),"submit"!==t.updateOn&&t.markAsTouched()})}(t,e),function(t,e){if(e.valueAccessor.setDisabledState){const n=t=>{e.valueAccessor.setDisabledState(t)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}(t,e)}function T_(t,e){t.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function I_(t,e,n){const r=function(t){return t._rawValidators}(t);null!==e.validator?t.setValidators(m_(r,e.validator)):"function"==typeof r&&t.setValidators([r]);const i=function(t){return t._rawAsyncValidators}(t);if(null!==e.asyncValidator?t.setAsyncValidators(m_(i,e.asyncValidator)):"function"==typeof i&&t.setAsyncValidators([i]),n){const n=()=>t.updateValueAndValidity();T_(e._rawValidators,n),T_(e._rawAsyncValidators,n)}}function x_(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function A_(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const j_="VALID",k_="INVALID",N_="PENDING",P_="DISABLED";function R_(t){return(F_(t)?t.validators:t)||null}function D_(t){return Array.isArray(t)?g_(t):t||null}function M_(t,e){return(F_(e)?e.asyncValidators:t)||null}function L_(t){return Array.isArray(t)?y_(t):t||null}function F_(t){return null!=t&&!Array.isArray(t)&&"object"==typeof t}class V_{constructor(t,e){this._hasOwnPendingAsyncValidator=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=t,this._rawAsyncValidators=e,this._composedValidatorFn=D_(this._rawValidators),this._composedAsyncValidatorFn=L_(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===j_}get invalid(){return this.status===k_}get pending(){return this.status==N_}get disabled(){return this.status===P_}get enabled(){return this.status!==P_}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._rawValidators=t,this._composedValidatorFn=D_(t)}setAsyncValidators(t){this._rawAsyncValidators=t,this._composedAsyncValidatorFn=L_(t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=N_,!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=P_,this.errors=null,this._forEachChild(e=>{e.disable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(t=>t(!0))}enable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=j_,this._forEachChild(e=>{e.enable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(t=>t(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),this.status!==j_&&this.status!==N_||this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?P_:j_}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=N_,this._hasOwnPendingAsyncValidator=!0;const e=h_(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(e=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(e,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(!1!==e.emitEvent)}get(t){return function(t,e,n){if(null==e)return null;if(Array.isArray(e)||(e=e.split(".")),Array.isArray(e)&&0===e.length)return null;let r=t;return e.forEach(t=>{r=r instanceof q_?r.controls.hasOwnProperty(t)?r.controls[t]:null:r instanceof B_&&r.at(t)||null}),r}(this,t)}getError(t,e){const n=e?this.get(e):this;return n&&n.errors?n.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new r.n,this.statusChanges=new r.n}_calculateStatus(){return this._allControlsDisabled()?P_:this.errors?k_:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(N_)?N_:this._anyControlsHaveStatus(k_)?k_:j_}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_isBoxedValue(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){F_(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){return!t&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class U_ extends V_{constructor(t=null,e,n){super(R_(e),M_(n,e)),this._onChange=[],this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!n})}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(t=>t(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=null,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){A_(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){A_(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(t){this._isBoxedValue(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}}class q_ extends V_{constructor(t,e,n){super(R_(e),M_(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!n})}registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e){this.registerControl(t,e),this.updateValueAndValidity(),this._onCollectionChange()}removeControl(t){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity(),this._onCollectionChange()}setControl(t,e){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity(),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){this._checkAllValuesPresent(t),Object.keys(t).forEach(n=>{this._throwIfControlMissing(n),this.controls[n].setValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(Object.keys(t).forEach(n=>{this.controls[n]&&this.controls[n].patchValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t={},e={}){this._forEachChild((n,r)=>{n.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,n)=>(t[n]=e instanceof U_?e.value:e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(t,e)=>!!e._syncPendingControls()||t);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[t])throw new Error(`Cannot find form control with name: ${t}.`)}_forEachChild(t){Object.keys(this.controls).forEach(e=>{const n=this.controls[e];n&&t(n,e)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(const e of Object.keys(this.controls)){const n=this.controls[e];if(this.contains(e)&&t(n))return!0}return!1}_reduceValue(){return this._reduceChildren({},(t,e,n)=>((e.enabled||this.disabled)&&(t[n]=e.value),t))}_reduceChildren(t,e){let n=t;return this._forEachChild((t,r)=>{n=e(n,t,r)}),n}_allControlsDisabled(){for(const t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(t){this._forEachChild((e,n)=>{if(void 0===t[n])throw new Error(`Must supply a value for form control with name: '${n}'.`)})}}class B_ extends V_{constructor(t,e,n){super(R_(e),M_(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!n})}at(t){return this.controls[t]}push(t){this.controls.push(t),this._registerControl(t),this.updateValueAndValidity(),this._onCollectionChange()}insert(t,e){this.controls.splice(t,0,e),this._registerControl(e),this.updateValueAndValidity()}removeAt(t){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),this.updateValueAndValidity()}setControl(t,e){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),e&&(this.controls.splice(t,0,e),this._registerControl(e)),this.updateValueAndValidity(),this._onCollectionChange()}get length(){return this.controls.length}setValue(t,e={}){this._checkAllValuesPresent(t),t.forEach((t,n)=>{this._throwIfControlMissing(n),this.at(n).setValue(t,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(t.forEach((t,n)=>{this.at(n)&&this.at(n).patchValue(t,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t=[],e={}){this._forEachChild((n,r)=>{n.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this.controls.map(t=>t instanceof U_?t.value:t.getRawValue())}clear(){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity())}_syncPendingControls(){let t=this.controls.reduce((t,e)=>!!e._syncPendingControls()||t,!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(t))throw new Error(`Cannot find form control at index ${t}`)}_forEachChild(t){this.controls.forEach((e,n)=>{t(e,n)})}_updateValue(){this.value=this.controls.filter(t=>t.enabled||this.disabled).map(t=>t.value)}_anyControls(t){return this.controls.some(e=>e.enabled&&t(e))}_setUpControls(){this._forEachChild(t=>this._registerControl(t))}_checkAllValuesPresent(t){this._forEachChild((e,n)=>{if(void 0===t[n])throw new Error(`Must supply a value for form control at index: ${n}.`)})}_allControlsDisabled(){for(const t of this.controls)if(t.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}}const H_={provide:b_,useExisting:Object(r.U)(()=>G_)},z_=(()=>Promise.resolve(null))();let G_=(()=>{class t extends b_{constructor(t,e){super(),this.submitted=!1,this._directives=[],this.ngSubmit=new r.n,this.form=new q_({},g_(t),y_(e))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){z_.then(()=>{const e=this._findContainer(t.path);t.control=e.registerControl(t.name,t.control),S_(t.control,t),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.push(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){z_.then(()=>{const e=this._findContainer(t.path);e&&e.removeControl(t.name),A_(this._directives,t)})}addFormGroup(t){z_.then(()=>{const e=this._findContainer(t.path),n=new q_({});(function(t,e){I_(t,e,!1)})(n,t),e.registerControl(t.name,n),n.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){z_.then(()=>{const e=this._findContainer(t.path);e&&e.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,e){z_.then(()=>{this.form.get(t.path).setValue(e)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,e=this._directives,this.form._syncPendingControls(),e.forEach(t=>{const e=t.control;"submit"===e.updateOn&&e._pendingChange&&(t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1)}),this.ngSubmit.emit(t),!1;var e}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(u_,10),r.Mb(c_,10))},t.\u0275dir=r.Hb({type:t,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,e){1&t&&r.bc("submit",function(t){return e.onSubmit(t)})("reset",function(){return e.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[r.zb([H_]),r.xb]}),t})();const Q_={provide:w_,useExisting:Object(r.U)(()=>K_)},W_=(()=>Promise.resolve(null))();let K_=(()=>{class t extends w_{constructor(t,e,n,i){super(),this.control=new U_,this._registered=!1,this.update=new r.n,this._parent=t,this._setValidators(e),this._setAsyncValidators(n),this.valueAccessor=function(t,e){if(!e)return null;let n,r,i;return Array.isArray(e),e.forEach(t=>{t.constructor===a_?n=t:Object.getPrototypeOf(t.constructor)===class{}?r=t:i=t}),i||r||n||null}(0,i)}ngOnChanges(t){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in t&&this._updateDisabled(t),function(t,e){if(!t.hasOwnProperty("model"))return!1;const n=t.model;return!!n.isFirstChange()||!Object.is(e,n.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._parent?[...this._parent.path,this.name]:[this.name]}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){S_(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){W_.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1})})}_updateDisabled(t){const e=t.isDisabled.currentValue,n=""===e||e&&"false"!==e;W_.then(()=>{n&&!this.control.disabled?this.control.disable():!n&&this.control.disabled&&this.control.enable()})}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(b_,9),r.Mb(u_,10),r.Mb(c_,10),r.Mb(i_,10))},t.\u0275dir=r.Hb({type:t,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[r.zb([Q_]),r.xb,r.yb]}),t})(),Y_=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.Hb({type:t,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),t})(),$_=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Kb({type:t}),t.\u0275inj=r.Jb({}),t})();const J_=new r.r("NgModelWithFormControlWarning");let X_=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Kb({type:t}),t.\u0275inj=r.Jb({imports:[[$_]]}),t})(),Z_=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Kb({type:t}),t.\u0275inj=r.Jb({imports:[X_]}),t})(),tw=(()=>{class t{static withConfig(e){return{ngModule:t,providers:[{provide:J_,useValue:e.warnOnNgModelWithFormControl}]}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Kb({type:t}),t.\u0275inj=r.Jb({imports:[X_]}),t})(),ew=(()=>{class t{group(t,e=null){const n=this._reduceControls(t);let r,i=null,o=null;return null!=e&&(function(t){return void 0!==t.asyncValidators||void 0!==t.validators||void 0!==t.updateOn}(e)?(i=null!=e.validators?e.validators:null,o=null!=e.asyncValidators?e.asyncValidators:null,r=null!=e.updateOn?e.updateOn:void 0):(i=null!=e.validator?e.validator:null,o=null!=e.asyncValidator?e.asyncValidator:null)),new q_(n,{asyncValidators:o,updateOn:r,validators:i})}control(t,e,n){return new U_(t,e,n)}array(t,e,n){const r=t.map(t=>this._createControl(t));return new B_(r,e,n)}_reduceControls(t){const e={};return Object.keys(t).forEach(n=>{e[n]=this._createControl(t[n])}),e}_createControl(t){return t instanceof U_||t instanceof q_||t instanceof B_?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Object(r.Ib)({factory:function(){return new t},token:t,providedIn:tw}),t})(),nw=(()=>{class t{constructor(t,e){this.auth=t,this.router=e}canActivate(t,e){return this.auth.isLogged?(this.router.navigate(["/home"]),!0):(console.log("Acces Denied"),this.router.navigate(["login"]),!1)}}return t.\u0275fac=function(e){return new(e||t)(r.Yb(Ob),r.Yb(Zv))},t.\u0275prov=r.Ib({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();class rw{constructor(){this.email="",this.uid="",this.username=""}}var iw=n("n6bG");function ow(t,e,n,r){return Object(iw.a)(n)&&(r=n,n=void 0),r?ow(t,e,n).pipe(Object(wt.a)(t=>Object(sy.a)(t)?r(...t):r(t))):new lt.a(r=>{sw(t,e,function(t){r.next(arguments.length>1?Array.prototype.slice.call(arguments):t)},r,n)})}function sw(t,e,n,r,i){let o;if(function(t){return t&&"function"==typeof t.addEventListener&&"function"==typeof t.removeEventListener}(t)){const r=t;t.addEventListener(e,n,i),o=()=>r.removeEventListener(e,n,i)}else if(function(t){return t&&"function"==typeof t.on&&"function"==typeof t.off}(t)){const r=t;t.on(e,n),o=()=>r.off(e,n)}else if(function(t){return t&&"function"==typeof t.addListener&&"function"==typeof t.removeListener}(t)){const r=t;t.addListener(e,n),o=()=>r.removeListener(e,n)}else{if(!t||!t.length)throw new TypeError("Invalid event target");for(let o=0,s=t.length;o<s;o++)sw(t[o],e,n,r,i)}r.add(o)}var aw=n("Y7HM");function uw(t){const{index:e,period:n,subscriber:r}=t;if(r.next(e),!r.closed){if(-1===n)return r.complete();t.index=e+1,this.schedule(t,n)}}function cw(...t){if(1===t.length){if(!Object(sy.a)(t[0]))return t[0];t=t[0]}return Object(hy.a)(t,void 0).lift(new lw)}class lw{call(t,e){return e.subscribe(new hw(t))}}class hw extends ay{constructor(t){super(t),this.hasFirst=!1,this.observables=[],this.subscriptions=[]}_next(t){this.observables.push(t)}_complete(){const t=this.observables,e=t.length;if(0===e)this.destination.complete();else{for(let n=0;n<e&&!this.hasFirst;n++){const e=ly(this,t[n],void 0,n);this.subscriptions&&this.subscriptions.push(e),this.add(e)}this.observables=null}}notifyNext(t,e,n){if(!this.hasFirst){this.hasFirst=!0;for(let t=0;t<this.subscriptions.length;t++)if(t!==n){let e=this.subscriptions[t];e.unsubscribe(),this.remove(e)}this.subscriptions=null}this.destination.next(e)}}n("KqfI");var dw=n("Lhse");function fw(...t){const e=t[t.length-1];return"function"==typeof e&&t.pop(),Object(hy.a)(t,void 0).lift(new pw(e))}class pw{constructor(t){this.resultSelector=t}call(t,e){return e.subscribe(new gw(t,this.resultSelector))}}class gw extends mt.a{constructor(t,e,n=Object.create(null)){super(t),this.resultSelector=e,this.iterators=[],this.active=0,this.resultSelector="function"==typeof e?e:void 0}_next(t){const e=this.iterators;Object(sy.a)(t)?e.push(new mw(t)):e.push("function"==typeof t[dw.a]?new yw(t[dw.a]()):new vw(this.destination,this,t))}_complete(){const t=this.iterators,e=t.length;if(this.unsubscribe(),0!==e){this.active=e;for(let n=0;n<e;n++){let e=t[n];e.stillUnsubscribed?this.destination.add(e.subscribe()):this.active--}}else this.destination.complete()}notifyInactive(){this.active--,0===this.active&&this.destination.complete()}checkIterators(){const t=this.iterators,e=t.length,n=this.destination;for(let o=0;o<e;o++){let e=t[o];if("function"==typeof e.hasValue&&!e.hasValue())return}let r=!1;const i=[];for(let o=0;o<e;o++){let e=t[o],s=e.next();if(e.hasCompleted()&&(r=!0),s.done)return void n.complete();i.push(s.value)}this.resultSelector?this._tryresultSelector(i):n.next(i),r&&n.complete()}_tryresultSelector(t){let e;try{e=this.resultSelector.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}class yw{constructor(t){this.iterator=t,this.nextResult=t.next()}hasValue(){return!0}next(){const t=this.nextResult;return this.nextResult=this.iterator.next(),t}hasCompleted(){const t=this.nextResult;return Boolean(t&&t.done)}}class mw{constructor(t){this.array=t,this.index=0,this.length=0,this.length=t.length}[dw.a](){return this}next(t){const e=this.index++;return e<this.length?{value:this.array[e],done:!1}:{value:null,done:!0}}hasValue(){return this.array.length>this.index}hasCompleted(){return this.array.length===this.index}}class vw extends sg.b{constructor(t,e,n){super(t),this.parent=e,this.observable=n,this.stillUnsubscribed=!0,this.buffer=[],this.isComplete=!1}[dw.a](){return this}next(){const t=this.buffer;return 0===t.length&&this.isComplete?{value:null,done:!0}:{value:t.shift(),done:!1}}hasValue(){return this.buffer.length>0}hasCompleted(){return 0===this.buffer.length&&this.isComplete}notifyComplete(){this.buffer.length>0?(this.isComplete=!0,this.parent.notifyInactive()):this.destination.complete()}notifyNext(t){this.buffer.push(t),this.parent.checkIterators()}subscribe(){return Object(sg.c)(this.observable,new sg.a(this))}}function bw(t){return e=>e.lift(new _w(t))}class _w{constructor(t){this.notifier=t}call(t,e){const n=new ww(t),r=Object(sg.c)(this.notifier,new sg.a(n));return r&&!n.seenValue?(n.add(r),e.subscribe(n)):n}}class ww extends sg.b{constructor(t){super(t),this.seenValue=!1}notifyNext(){this.seenValue=!0,this.complete()}notifyComplete(){}}function Cw(...t){return e=>{let n;return"function"==typeof t[t.length-1]&&(n=t.pop()),e.lift(new Ow(t,n))}}class Ow{constructor(t,e){this.observables=t,this.project=e}call(t,e){return e.subscribe(new Ew(t,this.observables,this.project))}}class Ew extends ay{constructor(t,e,n){super(t),this.observables=e,this.project=n,this.toRespond=[];const r=e.length;this.values=new Array(r);for(let i=0;i<r;i++)this.toRespond.push(i);for(let i=0;i<r;i++)this.add(ly(this,e[i],void 0,i))}notifyNext(t,e,n){this.values[n]=e;const r=this.toRespond;if(r.length>0){const t=r.indexOf(n);-1!==t&&r.splice(t,1)}}notifyComplete(){}_next(t){if(0===this.toRespond.length){const e=[t,...this.values];this.project?this._tryProject(e):this.destination.next(e)}}_tryProject(t){let e;try{e=this.project.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}var Sw=n("WMd4");class Tw{constructor(t,e){this.delay=t,this.scheduler=e}call(t,e){return e.subscribe(new Iw(t,this.delay,this.scheduler))}}class Iw extends mt.a{constructor(t,e,n){super(t),this.delay=e,this.scheduler=n,this.queue=[],this.active=!1,this.errored=!1}static dispatch(t){const e=t.source,n=e.queue,r=t.scheduler,i=t.destination;for(;n.length>0&&n[0].time-r.now()<=0;)n.shift().notification.observe(i);if(n.length>0){const e=Math.max(0,n[0].time-r.now());this.schedule(t,e)}else this.unsubscribe(),e.active=!1}_schedule(t){this.active=!0,this.destination.add(t.schedule(Iw.dispatch,this.delay,{source:this,destination:this.destination,scheduler:t}))}scheduleNotification(t){if(!0===this.errored)return;const e=this.scheduler,n=new xw(e.now()+this.delay,t);this.queue.push(n),!1===this.active&&this._schedule(e)}_next(t){this.scheduleNotification(Sw.a.createNext(t))}_error(t){this.errored=!0,this.queue=[],this.destination.error(t),this.unsubscribe()}_complete(){this.scheduleNotification(Sw.a.createComplete()),this.unsubscribe()}}class xw{constructor(t,e){this.time=t,this.notification=e}}var Aw=n("w1tV");const jw=["*"],kw=["dialog"];function Nw(t){return null!=t}function Pw(t){return(t||document.body).getBoundingClientRect()}"undefined"==typeof Element||Element.prototype.closest||(Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest=function(t){let e=this;if(!document.documentElement.contains(e))return null;do{if(e.matches(t))return e;e=e.parentElement||e.parentNode}while(null!==e&&1===e.nodeType);return null});const Rw={animation:!0,transitionTimerDelayMs:5};let Dw=(()=>{class t{constructor(){this.animation=Rw.animation}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Object(r.Ib)({factory:function(){return new t},token:t,providedIn:"root"}),t})();const Mw=()=>{},{transitionTimerDelayMs:Lw}=Rw,Fw=new Map,Vw=(t,e,n,r)=>{let i=r.context||{};const o=Fw.get(e);if(o)switch(r.runningTransition){case"continue":return bg.a;case"stop":t.run(()=>o.transition$.complete()),i=Object.assign(o.context,i),Fw.delete(e)}const s=n(e,r.animation,i)||Mw;if(!r.animation||"none"===window.getComputedStyle(e).transitionProperty)return t.run(()=>s()),Object(dt.a)(void 0).pipe(function(t){return e=>new lt.a(n=>e.subscribe(e=>t.run(()=>n.next(e)),e=>t.run(()=>n.error(e)),()=>t.run(()=>n.complete())))}(t));const a=new ig.a,u=new ig.a,c=a.pipe(function(...t){return e=>pt(e,Object(dt.a)(...t))}(!0));Fw.set(e,{transition$:a,complete:()=>{u.next(),u.complete()},context:i});const l=function(t){const{transitionDelay:e,transitionDuration:n}=window.getComputedStyle(t);return 1e3*(parseFloat(e)+parseFloat(n))}(e);return t.runOutsideAngular(()=>{const n=ow(e,"transitionend").pipe(bw(c),xt(({target:t})=>t===e));cw(function(t=0,e,n){let r=-1;return Object(aw.a)(e)?r=Number(e)<1?1:Number(e):Object(gt.a)(e)&&(n=e),Object(gt.a)(n)||(n=ct.a),new lt.a(e=>{const i=Object(aw.a)(t)?t:+t-n.now();return n.schedule(uw,i,{index:0,period:r,subscriber:e})})}(l+Lw).pipe(bw(c)),n,u).pipe(bw(c)).subscribe(()=>{Fw.delete(e),t.run(()=>{s(),a.next(),a.complete()})})}),a.asObservable()},Uw=(t,e,n)=>{let{direction:r,maxHeight:i}=n;const{classList:o}=t;function s(){o.add("collapse"),"show"===r?o.add("show"):o.remove("show")}if(e)return i||(i=function(t){if("undefined"==typeof navigator)return"0px";const{classList:e}=t,n=e.contains("show");n||e.add("show"),t.style.height="";const r=t.getBoundingClientRect().height+"px";return n||e.remove("show"),r}(t),n.maxHeight=i,t.style.height="show"!==r?i:"0px",o.remove("collapse"),o.remove("collapsing"),o.remove("show"),Pw(t),o.add("collapsing")),t.style.height="show"===r?i:"0px",()=>{s(),o.remove("collapsing"),t.style.height=""};s()};let qw=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Kb({type:t}),t.\u0275inj=r.Jb({imports:[[A]]}),t})(),Bw=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Kb({type:t}),t.\u0275inj=r.Jb({imports:[[A]]}),t})(),Hw=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Kb({type:t}),t.\u0275inj=r.Jb({}),t})(),zw=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Kb({type:t}),t.\u0275inj=r.Jb({imports:[[A]]}),t})(),Gw=(()=>{class t{constructor(t){this._ngbConfig=t}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(t){this._animation=t}}return t.\u0275fac=function(e){return new(e||t)(r.Yb(Dw))},t.\u0275prov=Object(r.Ib)({factory:function(){return new t(Object(r.Yb)(Dw))},token:t,providedIn:"root"}),t})(),Qw=(()=>{class t{constructor(t,e,n){this._element=t,this._zone=n,this.collapsed=!1,this.ngbCollapseChange=new r.n,this.shown=new r.n,this.hidden=new r.n,this.animation=e.animation}ngOnInit(){this._runTransition(this.collapsed,!1)}ngOnChanges({collapsed:t}){t.firstChange||this._runTransitionWithEvents(this.collapsed,this.animation)}toggle(t=this.collapsed){this.collapsed=!t,this.ngbCollapseChange.next(this.collapsed),this._runTransitionWithEvents(this.collapsed,this.animation)}_runTransition(t,e){return Vw(this._zone,this._element.nativeElement,Uw,{animation:e,runningTransition:"stop",context:{direction:t?"hide":"show"}})}_runTransitionWithEvents(t,e){this._runTransition(t,e).subscribe(()=>{t?this.hidden.emit():this.shown.emit()})}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(r.l),r.Mb(Gw),r.Mb(r.A))},t.\u0275dir=r.Hb({type:t,selectors:[["","ngbCollapse",""]],inputs:{collapsed:["ngbCollapse","collapsed"],animation:"animation"},outputs:{ngbCollapseChange:"ngbCollapseChange",shown:"shown",hidden:"hidden"},exportAs:["ngbCollapse"],features:[r.yb]}),t})(),Ww=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Kb({type:t}),t.\u0275inj=r.Jb({}),t})();var Kw=function(t){return t[t.Tab=9]="Tab",t[t.Enter=13]="Enter",t[t.Escape=27]="Escape",t[t.Space=32]="Space",t[t.PageUp=33]="PageUp",t[t.PageDown=34]="PageDown",t[t.End=35]="End",t[t.Home=36]="Home",t[t.ArrowLeft=37]="ArrowLeft",t[t.ArrowUp=38]="ArrowUp",t[t.ArrowRight=39]="ArrowRight",t[t.ArrowDown=40]="ArrowDown",t}({});const Yw=(t,e)=>!!e&&e.some(e=>e.contains(t)),$w=(t,e)=>!e||null!=function(t,e){return e?void 0===t.closest?null:t.closest(e):null}(t,e),Jw="undefined"!=typeof navigator&&!!navigator.userAgent&&(/iPad|iPhone|iPod/.test(navigator.userAgent)||/Macintosh/.test(navigator.userAgent)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2||/Android/.test(navigator.userAgent));const Xw=["a[href]","button:not([disabled])",'input:not([disabled]):not([type="hidden"])',"select:not([disabled])","textarea:not([disabled])","[contenteditable]",'[tabindex]:not([tabindex="-1"])'].join(", ");function Zw(t){const e=Array.from(t.querySelectorAll(Xw)).filter(t=>-1!==t.tabIndex);return[e[0],e[e.length-1]]}const tC=/\s+/,eC=new class{getAllStyles(t){return window.getComputedStyle(t)}getStyle(t,e){return this.getAllStyles(t)[e]}isStaticPositioned(t){return"static"===(this.getStyle(t,"position")||"static")}offsetParent(t){let e=t.offsetParent||document.documentElement;for(;e&&e!==document.documentElement&&this.isStaticPositioned(e);)e=e.offsetParent;return e||document.documentElement}position(t,e=!0){let n,r={width:0,height:0,top:0,bottom:0,left:0,right:0};if("fixed"===this.getStyle(t,"position"))n=t.getBoundingClientRect(),n={top:n.top,bottom:n.bottom,left:n.left,right:n.right,height:n.height,width:n.width};else{const e=this.offsetParent(t);n=this.offset(t,!1),e!==document.documentElement&&(r=this.offset(e,!1)),r.top+=e.clientTop,r.left+=e.clientLeft}return n.top-=r.top,n.bottom-=r.top,n.left-=r.left,n.right-=r.left,e&&(n.top=Math.round(n.top),n.bottom=Math.round(n.bottom),n.left=Math.round(n.left),n.right=Math.round(n.right)),n}offset(t,e=!0){const n=t.getBoundingClientRect(),r=window.pageYOffset-document.documentElement.clientTop,i=window.pageXOffset-document.documentElement.clientLeft;let o={height:n.height||t.offsetHeight,width:n.width||t.offsetWidth,top:n.top+r,bottom:n.bottom+r,left:n.left+i,right:n.right+i};return e&&(o.height=Math.round(o.height),o.width=Math.round(o.width),o.top=Math.round(o.top),o.bottom=Math.round(o.bottom),o.left=Math.round(o.left),o.right=Math.round(o.right)),o}positionElements(t,e,n,r){const[i="top",o="center"]=n.split("-"),s=r?this.offset(t,!1):this.position(t,!1),a=this.getAllStyles(e),u=parseFloat(a.marginTop),c=parseFloat(a.marginBottom),l=parseFloat(a.marginLeft),h=parseFloat(a.marginRight);let d=0,f=0;switch(i){case"top":d=s.top-(e.offsetHeight+u+c);break;case"bottom":d=s.top+s.height;break;case"left":f=s.left-(e.offsetWidth+l+h);break;case"right":f=s.left+s.width}switch(o){case"top":d=s.top;break;case"bottom":d=s.top+s.height-e.offsetHeight;break;case"left":f=s.left;break;case"right":f=s.left+s.width-e.offsetWidth;break;case"center":"top"===i||"bottom"===i?f=s.left+s.width/2-e.offsetWidth/2:d=s.top+s.height/2-e.offsetHeight/2}e.style.transform=`translate(${Math.round(f)}px, ${Math.round(d)}px)`;const p=e.getBoundingClientRect(),g=document.documentElement,y=window.innerHeight||g.clientHeight,m=window.innerWidth||g.clientWidth;return p.left>=0&&p.top>=0&&p.right<=m&&p.bottom<=y}};new Date(1882,10,12),new Date(2174,10,25);let nC=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Kb({type:t}),t.\u0275inj=r.Jb({imports:[[A,Z_]]}),t})(),rC=(()=>{class t{constructor(){this.autoClose=!0,this.placement=["bottom-left","bottom-right","top-left","top-right"]}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Object(r.Ib)({factory:function(){return new t},token:t,providedIn:"root"}),t})(),iC=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.Hb({type:t,selectors:[["",8,"navbar"]]}),t})(),oC=(()=>{class t{constructor(t){this.elementRef=t,this._disabled=!1}set disabled(t){this._disabled=""===t||!0===t}get disabled(){return this._disabled}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(r.l))},t.\u0275dir=r.Hb({type:t,selectors:[["","ngbDropdownItem",""]],hostAttrs:[1,"dropdown-item"],hostVars:2,hostBindings:function(t,e){2&t&&r.Eb("disabled",e.disabled)},inputs:{disabled:"disabled"}}),t})(),sC=(()=>{class t{constructor(t,e){this.dropdown=t,this.placement="bottom",this.isOpen=!1,this.nativeElement=e.nativeElement}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(Object(r.U)(()=>cC)),r.Mb(r.l))},t.\u0275dir=r.Hb({type:t,selectors:[["","ngbDropdownMenu",""]],contentQueries:function(t,e,n){if(1&t&&r.Fb(n,oC,0),2&t){let t;r.oc(t=r.cc())&&(e.menuItems=t)}},hostVars:5,hostBindings:function(t,e){1&t&&r.bc("keydown.ArrowUp",function(t){return e.dropdown.onKeyDown(t)})("keydown.ArrowDown",function(t){return e.dropdown.onKeyDown(t)})("keydown.Home",function(t){return e.dropdown.onKeyDown(t)})("keydown.End",function(t){return e.dropdown.onKeyDown(t)})("keydown.Enter",function(t){return e.dropdown.onKeyDown(t)})("keydown.Space",function(t){return e.dropdown.onKeyDown(t)})("keydown.Tab",function(t){return e.dropdown.onKeyDown(t)})("keydown.Shift.Tab",function(t){return e.dropdown.onKeyDown(t)}),2&t&&(r.Bb("x-placement",e.placement),r.Eb("dropdown-menu",!0)("show",e.dropdown.isOpen()))}}),t})(),aC=(()=>{class t{constructor(t,e){this.dropdown=t,this.nativeElement=e.nativeElement}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(Object(r.U)(()=>cC)),r.Mb(r.l))},t.\u0275dir=r.Hb({type:t,selectors:[["","ngbDropdownAnchor",""]],hostAttrs:[1,"dropdown-toggle"],hostVars:1,hostBindings:function(t,e){2&t&&r.Bb("aria-expanded",e.dropdown.isOpen())}}),t})(),uC=(()=>{class t extends aC{constructor(t,e){super(t,e)}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(Object(r.U)(()=>cC)),r.Mb(r.l))},t.\u0275dir=r.Hb({type:t,selectors:[["","ngbDropdownToggle",""]],hostAttrs:[1,"dropdown-toggle"],hostVars:1,hostBindings:function(t,e){1&t&&r.bc("click",function(){return e.dropdown.toggle()})("keydown.ArrowUp",function(t){return e.dropdown.onKeyDown(t)})("keydown.ArrowDown",function(t){return e.dropdown.onKeyDown(t)})("keydown.Home",function(t){return e.dropdown.onKeyDown(t)})("keydown.End",function(t){return e.dropdown.onKeyDown(t)})("keydown.Tab",function(t){return e.dropdown.onKeyDown(t)})("keydown.Shift.Tab",function(t){return e.dropdown.onKeyDown(t)}),2&t&&r.Bb("aria-expanded",e.dropdown.isOpen())},features:[r.zb([{provide:aC,useExisting:Object(r.U)(()=>t)}]),r.xb]}),t})(),cC=(()=>{class t{constructor(t,e,n,i,o,s,a){this._changeDetector=t,this._document=n,this._ngZone=i,this._elementRef=o,this._renderer=s,this._closed$=new ig.a,this._bodyContainer=null,this._open=!1,this.openChange=new r.n,this.placement=e.placement,this.container=e.container,this.autoClose=e.autoClose,this.display=a?"static":"dynamic",this._zoneSubscription=i.onStable.subscribe(()=>{this._positionMenu()})}ngAfterContentInit(){this._ngZone.onStable.pipe(_g(1)).subscribe(()=>{this._applyPlacementClasses(),this._open&&this._setCloseHandlers()})}ngOnChanges(t){if(t.container&&this._open&&this._applyContainer(this.container),t.placement&&!t.placement.isFirstChange&&this._applyPlacementClasses(),t.dropdownClass){const{currentValue:e,previousValue:n}=t.dropdownClass;this._applyCustomDropdownClass(e,n)}}isOpen(){return this._open}open(){this._open||(this._open=!0,this._applyContainer(this.container),this.openChange.emit(!0),this._setCloseHandlers(),this._anchor&&this._anchor.nativeElement.focus())}_setCloseHandlers(){!function(t,e,n,r,i,o,s,a){var u;n&&t.runOutsideAngular((u=()=>{const u=ow(e,"keydown").pipe(bw(i),xt(t=>t.which===Kw.Escape),Object(Sy.a)(t=>t.preventDefault())),c=ow(e,"mousedown").pipe(Object(wt.a)(t=>{const e=t.target;return 2!==t.button&&!Yw(e,s)&&("inside"===n?Yw(e,o)&&$w(e,a):"outside"===n?!Yw(e,o):$w(e,a)||!Yw(e,o))}),bw(i)),l=ow(e,"mouseup").pipe(Cw(c),xt(([t,e])=>e),function(t,e=ct.a){var n;const r=(n=t)instanceof Date&&!isNaN(+n)?+t-e.now():Math.abs(t);return t=>t.lift(new Tw(r,e))}(0),bw(i));cw([u.pipe(Object(wt.a)(t=>0)),l.pipe(Object(wt.a)(t=>1))]).subscribe(e=>t.run(()=>r(e)))},Jw?()=>setTimeout(()=>u(),100):u))}(this._ngZone,this._document,this.autoClose,t=>{this.close(),0===t&&this._anchor.nativeElement.focus()},this._closed$,this._menu?[this._menu.nativeElement]:[],this._anchor?[this._anchor.nativeElement]:[],".dropdown-item,.dropdown-divider")}close(){this._open&&(this._open=!1,this._resetContainer(),this._closed$.next(),this.openChange.emit(!1),this._changeDetector.markForCheck())}toggle(){this.isOpen()?this.close():this.open()}ngOnDestroy(){this._resetContainer(),this._closed$.next(),this._zoneSubscription.unsubscribe()}onKeyDown(t){const e=t.which,n=this._getMenuElements();let r=-1,i=null;const o=this._isEventFromToggle(t);if(!o&&n.length&&n.forEach((e,n)=>{e.contains(t.target)&&(i=e),e===this._document.activeElement&&(r=n)}),e!==Kw.Space&&e!==Kw.Enter){if(e!==Kw.Tab){if(o||i){if(this.open(),n.length){switch(e){case Kw.ArrowDown:r=Math.min(r+1,n.length-1);break;case Kw.ArrowUp:if(this._isDropup()&&-1===r){r=n.length-1;break}r=Math.max(r-1,0);break;case Kw.Home:r=0;break;case Kw.End:r=n.length-1}n[r].focus()}t.preventDefault()}}else if(t.target&&this.isOpen()&&this.autoClose){if(this._anchor.nativeElement===t.target)return void("body"!==this.container||t.shiftKey?t.shiftKey&&this.close():(this._renderer.setAttribute(this._menu.nativeElement,"tabindex","0"),this._menu.nativeElement.focus(),this._renderer.removeAttribute(this._menu.nativeElement,"tabindex")));if("body"===this.container){const e=this._menu.nativeElement.querySelectorAll(Xw);t.shiftKey&&t.target===e[0]?(this._anchor.nativeElement.focus(),t.preventDefault()):t.shiftKey||t.target!==e[e.length-1]||(this._anchor.nativeElement.focus(),this.close())}else ow(t.target,"focusout").pipe(_g(1)).subscribe(({relatedTarget:t})=>{this._elementRef.nativeElement.contains(t)||this.close()})}}else!i||!0!==this.autoClose&&"inside"!==this.autoClose||ow(i,"click").pipe(_g(1)).subscribe(()=>this.close())}_isDropup(){return this._elementRef.nativeElement.classList.contains("dropup")}_isEventFromToggle(t){return this._anchor.nativeElement.contains(t.target)}_getMenuElements(){const t=this._menu;return null==t?[]:t.menuItems.filter(t=>!t.disabled).map(t=>t.elementRef.nativeElement)}_positionMenu(){const t=this._menu;this.isOpen()&&t&&this._applyPlacementClasses("dynamic"===this.display?function(t,e,n,r,i){let o=Array.isArray(n)?n:n.split(tC);const s=["top","bottom","left","right","top-left","top-right","bottom-left","bottom-right","left-top","left-bottom","right-top","right-bottom"],a=t=>{const[e,n]=t.split("-"),r=[];return r};let u=o.findIndex(t=>"auto"===t);u>=0&&s.forEach(function(t){null==o.find(e=>-1!==e.search("^"+t))&&o.splice(u++,1,t)});const c=e.style;c.position="absolute",c.top="0",c.left="0",c["will-change"]="transform";let l=null,h=!1;for(l of o){a(l);if(eC.positionElements(t,e,l,r)){h=!0;break}}return h||(l=o[0],a(l),eC.positionElements(t,e,l,r)),l}(this._anchor.nativeElement,this._bodyContainer||this._menu.nativeElement,this.placement,"body"===this.container):this._getFirstPlacement(this.placement))}_getFirstPlacement(t){return Array.isArray(t)?t[0]:t.split(" ")[0]}_resetContainer(){const t=this._renderer;if(this._menu){const e=this._menu.nativeElement;t.appendChild(this._elementRef.nativeElement,e),t.removeStyle(e,"position"),t.removeStyle(e,"transform")}this._bodyContainer&&(t.removeChild(this._document.body,this._bodyContainer),this._bodyContainer=null)}_applyContainer(t=null){if(this._resetContainer(),"body"===t){const t=this._renderer,e=this._menu.nativeElement,n=this._bodyContainer=this._bodyContainer||t.createElement("div");t.setStyle(n,"position","absolute"),t.setStyle(e,"position","static"),t.setStyle(n,"z-index","1050"),t.appendChild(n,e),t.appendChild(this._document.body,n)}this._applyCustomDropdownClass(this.dropdownClass)}_applyCustomDropdownClass(t,e){const n="body"===this.container?this._bodyContainer:this._elementRef.nativeElement;n&&(e&&this._renderer.removeClass(n,e),t&&this._renderer.addClass(n,t))}_applyPlacementClasses(t){const e=this._menu;if(e){t||(t=this._getFirstPlacement(this.placement));const n=this._renderer,r=this._elementRef.nativeElement;n.removeClass(r,"dropup"),n.removeClass(r,"dropdown"),e.placement="static"===this.display?null:t;const i=-1!==t.search("^top")?"dropup":"dropdown";n.addClass(r,i);const o=this._bodyContainer;o&&(n.removeClass(o,"dropup"),n.removeClass(o,"dropdown"),n.addClass(o,i))}}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(r.h),r.Mb(rC),r.Mb(s),r.Mb(r.A),r.Mb(r.l),r.Mb(r.E),r.Mb(iC,8))},t.\u0275dir=r.Hb({type:t,selectors:[["","ngbDropdown",""]],contentQueries:function(t,e,n){if(1&t&&(r.Fb(n,sC,1),r.Fb(n,aC,1)),2&t){let t;r.oc(t=r.cc())&&(e._menu=t.first),r.oc(t=r.cc())&&(e._anchor=t.first)}},hostVars:2,hostBindings:function(t,e){2&t&&r.Eb("show",e.isOpen())},inputs:{_open:["open","_open"],placement:"placement",container:"container",autoClose:"autoClose",display:"display",dropdownClass:"dropdownClass"},outputs:{openChange:"openChange"},exportAs:["ngbDropdown"],features:[r.yb]}),t})(),lC=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Kb({type:t}),t.\u0275inj=r.Jb({}),t})(),hC=(()=>{class t{constructor(t){this._ngbConfig=t,this.backdrop=!0,this.keyboard=!0}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(t){this._animation=t}}return t.\u0275fac=function(e){return new(e||t)(r.Yb(Dw))},t.\u0275prov=Object(r.Ib)({factory:function(){return new t(Object(r.Yb)(Dw))},token:t,providedIn:"root"}),t})();class dC{constructor(t,e,n){this.nodes=t,this.viewRef=e,this.componentRef=n}}const fC=()=>{};let pC=(()=>{class t{constructor(t){this._document=t}compensate(){const t=this._getWidth();return this._isPresent(t)?this._adjustBody(t):fC}_adjustBody(t){const e=this._document.body,n=e.style.paddingRight,r=parseFloat(window.getComputedStyle(e)["padding-right"]);return e.style["padding-right"]=`${r+t}px`,()=>e.style["padding-right"]=n}_isPresent(t){const e=this._document.body.getBoundingClientRect();return window.innerWidth-(e.left+e.right)>=t-.1*t}_getWidth(){const t=this._document.createElement("div");t.className="modal-scrollbar-measure";const e=this._document.body;e.appendChild(t);const n=t.getBoundingClientRect().width-t.clientWidth;return e.removeChild(t),n}}return t.\u0275fac=function(e){return new(e||t)(r.Yb(s))},t.\u0275prov=Object(r.Ib)({factory:function(){return new t(Object(r.Yb)(s))},token:t,providedIn:"root"}),t})(),gC=(()=>{class t{constructor(t,e){this._el=t,this._zone=e}ngOnInit(){this._zone.onStable.asObservable().pipe(_g(1)).subscribe(()=>{Vw(this._zone,this._el.nativeElement,(t,e)=>{e&&Pw(t),t.classList.add("show")},{animation:this.animation,runningTransition:"continue"})})}hide(){return Vw(this._zone,this._el.nativeElement,({classList:t})=>t.remove("show"),{animation:this.animation,runningTransition:"stop"})}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(r.l),r.Mb(r.A))},t.\u0275cmp=r.Gb({type:t,selectors:[["ngb-modal-backdrop"]],hostAttrs:[2,"z-index","1050"],hostVars:6,hostBindings:function(t,e){2&t&&(r.Cb("modal-backdrop"+(e.backdropClass?" "+e.backdropClass:"")),r.Eb("show",!e.animation)("fade",e.animation))},inputs:{animation:"animation",backdropClass:"backdropClass"},decls:0,vars:0,template:function(t,e){},encapsulation:2}),t})();class yC{close(t){}dismiss(t){}}class mC{constructor(t,e,n,r){this._windowCmptRef=t,this._contentRef=e,this._backdropCmptRef=n,this._beforeDismiss=r,this._closed=new ig.a,this._dismissed=new ig.a,this._hidden=new ig.a,t.instance.dismissEvent.subscribe(t=>{this.dismiss(t)}),this.result=new Promise((t,e)=>{this._resolve=t,this._reject=e}),this.result.then(null,()=>{})}get componentInstance(){if(this._contentRef&&this._contentRef.componentRef)return this._contentRef.componentRef.instance}get closed(){return this._closed.asObservable().pipe(bw(this._hidden))}get dismissed(){return this._dismissed.asObservable().pipe(bw(this._hidden))}get hidden(){return this._hidden.asObservable()}get shown(){return this._windowCmptRef.instance.shown.asObservable()}close(t){this._windowCmptRef&&(this._closed.next(t),this._resolve(t),this._removeModalElements())}_dismiss(t){this._dismissed.next(t),this._reject(t),this._removeModalElements()}dismiss(t){if(this._windowCmptRef)if(this._beforeDismiss){const e=this._beforeDismiss();e&&e.then?e.then(e=>{!1!==e&&this._dismiss(t)},()=>{}):!1!==e&&this._dismiss(t)}else this._dismiss(t)}_removeModalElements(){const t=this._windowCmptRef.instance.hide(),e=this._backdropCmptRef?this._backdropCmptRef.instance.hide():Object(dt.a)(void 0);t.subscribe(()=>{const{nativeElement:t}=this._windowCmptRef.location;t.parentNode.removeChild(t),this._windowCmptRef.destroy(),this._contentRef&&this._contentRef.viewRef&&this._contentRef.viewRef.destroy(),this._windowCmptRef=null,this._contentRef=null}),e.subscribe(()=>{if(this._backdropCmptRef){const{nativeElement:t}=this._backdropCmptRef.location;t.parentNode.removeChild(t),this._backdropCmptRef.destroy(),this._backdropCmptRef=null}}),fw(t,e).subscribe(()=>{this._hidden.next(),this._hidden.complete()})}}var vC=function(t){return t[t.BACKDROP_CLICK=0]="BACKDROP_CLICK",t[t.ESC=1]="ESC",t}({});let bC=(()=>{class t{constructor(t,e,n){this._document=t,this._elRef=e,this._zone=n,this._closed$=new ig.a,this._elWithFocus=null,this.backdrop=!0,this.keyboard=!0,this.dismissEvent=new r.n,this.shown=new ig.a,this.hidden=new ig.a}dismiss(t){this.dismissEvent.emit(t)}ngOnInit(){this._elWithFocus=this._document.activeElement}ngAfterViewInit(){this._show()}ngOnDestroy(){this._disableEventHandling()}hide(){const{nativeElement:t}=this._elRef,e={animation:this.animation,runningTransition:"stop"},n=fw(Vw(this._zone,t,()=>t.classList.remove("show"),e),Vw(this._zone,this._dialogEl.nativeElement,()=>{},e));return n.subscribe(()=>{this.hidden.next(),this.hidden.complete()}),this._disableEventHandling(),this._restoreFocus(),n}_show(){const t={animation:this.animation,runningTransition:"continue"};fw(Vw(this._zone,this._elRef.nativeElement,(t,e)=>{e&&Pw(t),t.classList.add("show")},t),Vw(this._zone,this._dialogEl.nativeElement,()=>{},t)).subscribe(()=>{this.shown.next(),this.shown.complete()}),this._enableEventHandling(),this._setFocus()}_enableEventHandling(){const{nativeElement:t}=this._elRef;this._zone.runOutsideAngular(()=>{ow(t,"keydown").pipe(bw(this._closed$),xt(t=>t.which===Kw.Escape)).subscribe(t=>{this.keyboard?requestAnimationFrame(()=>{t.defaultPrevented||this._zone.run(()=>this.dismiss(vC.ESC))}):"static"===this.backdrop&&this._bumpBackdrop()});let e=!1;ow(this._dialogEl.nativeElement,"mousedown").pipe(bw(this._closed$),Object(Sy.a)(()=>e=!1),ag(()=>ow(t,"mouseup").pipe(bw(this._closed$),_g(1))),xt(({target:e})=>t===e)).subscribe(()=>{e=!0}),ow(t,"click").pipe(bw(this._closed$)).subscribe(({target:n})=>{t===n&&("static"===this.backdrop?this._bumpBackdrop():!0!==this.backdrop||e||this._zone.run(()=>this.dismiss(vC.BACKDROP_CLICK))),e=!1})})}_disableEventHandling(){this._closed$.next()}_setFocus(){const{nativeElement:t}=this._elRef;if(!t.contains(document.activeElement)){const e=t.querySelector("[ngbAutofocus]"),n=Zw(t)[0];(e||n||t).focus()}}_restoreFocus(){const t=this._document.body,e=this._elWithFocus;let n;n=e&&e.focus&&t.contains(e)?e:t,this._zone.runOutsideAngular(()=>{setTimeout(()=>n.focus()),this._elWithFocus=null})}_bumpBackdrop(){"static"===this.backdrop&&Vw(this._zone,this._elRef.nativeElement,({classList:t})=>(t.add("modal-static"),()=>t.remove("modal-static")),{animation:this.animation,runningTransition:"continue"})}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(s),r.Mb(r.l),r.Mb(r.A))},t.\u0275cmp=r.Gb({type:t,selectors:[["ngb-modal-window"]],viewQuery:function(t,e){if(1&t&&r.Ac(kw,3),2&t){let t;r.oc(t=r.cc())&&(e._dialogEl=t.first)}},hostAttrs:["role","dialog","tabindex","-1"],hostVars:7,hostBindings:function(t,e){2&t&&(r.Bb("aria-modal",!0)("aria-labelledby",e.ariaLabelledBy)("aria-describedby",e.ariaDescribedBy),r.Cb("modal d-block"+(e.windowClass?" "+e.windowClass:"")),r.Eb("fade",e.animation))},inputs:{backdrop:"backdrop",keyboard:"keyboard",animation:"animation",ariaLabelledBy:"ariaLabelledBy",ariaDescribedBy:"ariaDescribedBy",centered:"centered",scrollable:"scrollable",size:"size",windowClass:"windowClass",modalDialogClass:"modalDialogClass"},outputs:{dismissEvent:"dismiss"},ngContentSelectors:jw,decls:4,vars:2,consts:[["role","document"],["dialog",""],[1,"modal-content"]],template:function(t,e){1&t&&(r.hc(),r.Rb(0,"div",0,1),r.Rb(2,"div",2),r.gc(3),r.Qb(),r.Qb()),2&t&&r.Cb("modal-dialog"+(e.size?" modal-"+e.size:"")+(e.centered?" modal-dialog-centered":"")+(e.scrollable?" modal-dialog-scrollable":"")+(e.modalDialogClass?" "+e.modalDialogClass:""))},styles:["ngb-modal-window .component-host-scrollable{display:flex;flex-direction:column;overflow:hidden}"],encapsulation:2}),t})(),_C=(()=>{class t{constructor(t,e,n,i,o,s){this._applicationRef=t,this._injector=e,this._document=n,this._scrollBar=i,this._rendererFactory=o,this._ngZone=s,this._activeWindowCmptHasChanged=new ig.a,this._ariaHiddenValues=new Map,this._backdropAttributes=["animation","backdropClass"],this._modalRefs=[],this._windowAttributes=["animation","ariaLabelledBy","ariaDescribedBy","backdrop","centered","keyboard","scrollable","size","windowClass"],this._windowCmpts=[],this._activeInstances=new r.n,this._activeWindowCmptHasChanged.subscribe(()=>{if(this._windowCmpts.length){const t=this._windowCmpts[this._windowCmpts.length-1];((t,e,n,r=!1)=>{this._ngZone.runOutsideAngular(()=>{const t=ow(e,"focusin").pipe(bw(n),Object(wt.a)(t=>t.target));ow(e,"keydown").pipe(bw(n),xt(t=>t.which===Kw.Tab),Cw(t)).subscribe(([t,n])=>{const[r,i]=Zw(e);n!==r&&n!==e||!t.shiftKey||(i.focus(),t.preventDefault()),n!==i||t.shiftKey||(r.focus(),t.preventDefault())}),r&&ow(e,"click").pipe(bw(n),Cw(t),Object(wt.a)(t=>t[1])).subscribe(t=>t.focus())})})(0,t.location.nativeElement,this._activeWindowCmptHasChanged),this._revertAriaHidden(),this._setAriaHidden(t.location.nativeElement)}})}open(t,e,n,r){const i=r.container instanceof HTMLElement?r.container:Nw(r.container)?this._document.querySelector(r.container):this._document.body,o=this._rendererFactory.createRenderer(null,null),s=this._scrollBar.compensate(),a=()=>{this._modalRefs.length||(o.removeClass(this._document.body,"modal-open"),this._revertAriaHidden())};if(!i)throw new Error(`The specified modal container "${r.container||"body"}" was not found in the DOM.`);const u=new yC,c=this._getContentRef(t,r.injector||e,n,u,r);let l=!1!==r.backdrop?this._attachBackdrop(t,i):void 0,h=this._attachWindowComponent(t,i,c),d=new mC(h,c,l,r.beforeDismiss);return this._registerModalRef(d),this._registerWindowCmpt(h),d.result.then(s,s),d.result.then(a,a),u.close=t=>{d.close(t)},u.dismiss=t=>{d.dismiss(t)},this._applyWindowOptions(h.instance,r),1===this._modalRefs.length&&o.addClass(this._document.body,"modal-open"),l&&l.instance&&this._applyBackdropOptions(l.instance,r),d}get activeInstances(){return this._activeInstances}dismissAll(t){this._modalRefs.forEach(e=>e.dismiss(t))}hasOpenModals(){return this._modalRefs.length>0}_attachBackdrop(t,e){let n=t.resolveComponentFactory(gC).create(this._injector);return this._applicationRef.attachView(n.hostView),e.appendChild(n.location.nativeElement),n}_attachWindowComponent(t,e,n){let r=t.resolveComponentFactory(bC).create(this._injector,n.nodes);return this._applicationRef.attachView(r.hostView),e.appendChild(r.location.nativeElement),r}_applyWindowOptions(t,e){this._windowAttributes.forEach(n=>{Nw(e[n])&&(t[n]=e[n])})}_applyBackdropOptions(t,e){this._backdropAttributes.forEach(n=>{Nw(e[n])&&(t[n]=e[n])})}_getContentRef(t,e,n,i,o){return n?n instanceof r.L?this._createFromTemplateRef(n,i):"string"==typeof n?this._createFromString(n):this._createFromComponent(t,e,n,i,o):new dC([])}_createFromTemplateRef(t,e){const n=t.createEmbeddedView({$implicit:e,close(t){e.close(t)},dismiss(t){e.dismiss(t)}});return this._applicationRef.attachView(n),new dC([n.rootNodes],n)}_createFromString(t){const e=this._document.createTextNode(`${t}`);return new dC([[e]])}_createFromComponent(t,e,n,i,o){const s=t.resolveComponentFactory(n),a=r.s.create({providers:[{provide:yC,useValue:i}],parent:e}),u=s.create(a),c=u.location.nativeElement;return o.scrollable&&c.classList.add("component-host-scrollable"),this._applicationRef.attachView(u.hostView),new dC([[c]],u.hostView,u)}_setAriaHidden(t){const e=t.parentElement;e&&t!==this._document.body&&(Array.from(e.children).forEach(e=>{e!==t&&"SCRIPT"!==e.nodeName&&(this._ariaHiddenValues.set(e,e.getAttribute("aria-hidden")),e.setAttribute("aria-hidden","true"))}),this._setAriaHidden(e))}_revertAriaHidden(){this._ariaHiddenValues.forEach((t,e)=>{t?e.setAttribute("aria-hidden",t):e.removeAttribute("aria-hidden")}),this._ariaHiddenValues.clear()}_registerModalRef(t){const e=()=>{const e=this._modalRefs.indexOf(t);e>-1&&(this._modalRefs.splice(e,1),this._activeInstances.emit(this._modalRefs))};this._modalRefs.push(t),this._activeInstances.emit(this._modalRefs),t.result.then(e,e)}_registerWindowCmpt(t){this._windowCmpts.push(t),this._activeWindowCmptHasChanged.next(),t.onDestroy(()=>{const e=this._windowCmpts.indexOf(t);e>-1&&(this._windowCmpts.splice(e,1),this._activeWindowCmptHasChanged.next())})}}return t.\u0275fac=function(e){return new(e||t)(r.Yb(r.g),r.Yb(r.s),r.Yb(s),r.Yb(pC),r.Yb(r.F),r.Yb(r.A))},t.\u0275prov=Object(r.Ib)({factory:function(){return new t(Object(r.Yb)(r.g),Object(r.Yb)(r.o),Object(r.Yb)(s),Object(r.Yb)(pC),Object(r.Yb)(r.F),Object(r.Yb)(r.A))},token:t,providedIn:"root"}),t})(),wC=(()=>{class t{constructor(t,e,n,r){this._moduleCFR=t,this._injector=e,this._modalStack=n,this._config=r}open(t,e={}){const n=Object.assign(Object.assign(Object.assign({},this._config),{animation:this._config.animation}),e);return this._modalStack.open(this._moduleCFR,this._injector,t,n)}get activeInstances(){return this._modalStack.activeInstances}dismissAll(t){this._modalStack.dismissAll(t)}hasOpenModals(){return this._modalStack.hasOpenModals()}}return t.\u0275fac=function(e){return new(e||t)(r.Yb(r.j),r.Yb(r.s),r.Yb(_C),r.Yb(hC))},t.\u0275prov=Object(r.Ib)({factory:function(){return new t(Object(r.Yb)(r.j),Object(r.Yb)(r.o),Object(r.Yb)(_C),Object(r.Yb)(hC))},token:t,providedIn:"root"}),t})(),CC=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Kb({type:t}),t.\u0275inj=r.Jb({providers:[wC]}),t})(),OC=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Kb({type:t}),t.\u0275inj=r.Jb({imports:[[A]]}),t})(),EC=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Kb({type:t}),t.\u0275inj=r.Jb({imports:[[A]]}),t})(),SC=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Kb({type:t}),t.\u0275inj=r.Jb({imports:[[A]]}),t})(),TC=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Kb({type:t}),t.\u0275inj=r.Jb({imports:[[A]]}),t})(),IC=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Kb({type:t}),t.\u0275inj=r.Jb({imports:[[A]]}),t})(),xC=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Kb({type:t}),t.\u0275inj=r.Jb({imports:[[A]]}),t})(),AC=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Kb({type:t}),t.\u0275inj=r.Jb({imports:[[A]]}),t})(),jC=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Kb({type:t}),t.\u0275inj=r.Jb({}),t})();new r.r("live announcer delay",{providedIn:"root",factory:function(){return 100}});let kC=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Kb({type:t}),t.\u0275inj=r.Jb({imports:[[A]]}),t})();const NC=[qw,Bw,Hw,zw,Ww,nC,lC,CC,OC,EC,SC,TC,IC,xC,AC,jC,kC];let PC=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Kb({type:t}),t.\u0275inj=r.Jb({imports:[NC,qw,Bw,Hw,zw,Ww,nC,lC,CC,OC,EC,SC,TC,IC,xC,AC,jC,kC]}),t})(),RC=(()=>{class t{constructor(t){this.authSvc=t,this.toggleNavbar=!0,this.ocultarBotonLogout=!0,this.ocultarLogin=!1,this.ocultarRegistro=!1}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(Ob))},t.\u0275cmp=r.Gb({type:t,selectors:[["app-navbar"]],decls:29,vars:7,consts:[[1,"colorNav"],[1,"navbar","navbar-custom","navbar-expand-lg"],["type","button","data-toggle","collapse","data-target","#navbarToggler","aria-controls","navbarToggler","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler",3,"click"],[1,"navbar-toggler-icon"],["id","navbarToggler",1,"collapse","navbar-collapse",3,"ngbCollapse"],[1,"navbar-brand",3,"routerLink"],["src","assets/joystickIcon.png"],[1,"navbar-nav","mr-auto","mt-2","mt-lg-0"],[1,"nav-item",3,"hidden"],["routerLinkActive","active",1,"nav-link","borderFade",3,"routerLink"],["routerLinkActive","active","href","#",1,"nav-link","borderFade",3,"routerLink"],[1,"nav-item"],[1,"btn-group","mr-3"],["ngbDropdown","","role","group","aria-label","Button group with nested dropdown",1,"btn-group"],["ngbDropdownToggle","",1,"btn","btn-outline-secondary"],["ngbDropdownMenu","",1,"dropdown-menu"],["ngbDropdownItem",""]],template:function(t,e){1&t&&(r.Rb(0,"div",0),r.Rb(1,"nav",1),r.Rb(2,"button",2),r.bc("click",function(){return e.toggleNavbar=!e.toggleNavbar}),r.Nb(3,"span",3),r.Qb(),r.Rb(4,"div",4),r.Rb(5,"a",5),r.Nb(6,"img",6),r.Qb(),r.Rb(7,"ul",7),r.Rb(8,"li",8),r.Rb(9,"a",9),r.wc(10,"Login"),r.Qb(),r.Qb(),r.Rb(11,"li",8),r.Rb(12,"a",10),r.wc(13,"Registrarse"),r.Qb(),r.Qb(),r.Rb(14,"li",11),r.Rb(15,"a",10),r.wc(16,"Quien soy"),r.Qb(),r.Qb(),r.Nb(17,"li",11),r.Qb(),r.Rb(18,"div",12),r.Rb(19,"div",13),r.Rb(20,"button",14),r.wc(21,"Juegos"),r.Qb(),r.Rb(22,"div",15),r.Rb(23,"button",16),r.wc(24,"Tic tac toe"),r.Qb(),r.Rb(25,"button",16),r.wc(26,"Battlefield"),r.Qb(),r.Rb(27,"button",16),r.wc(28,"Call of duty"),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Qb()),2&t&&(r.Ab(4),r.ic("ngbCollapse",e.toggleNavbar),r.Ab(1),r.ic("routerLink","/"),r.Ab(3),r.ic("hidden",e.ocultarLogin),r.Ab(1),r.ic("routerLink","/login"),r.Ab(2),r.ic("hidden",e.ocultarRegistro),r.Ab(1),r.ic("routerLink","/register"),r.Ab(3),r.ic("routerLink","/quienSoy"))},directives:[iC,Qw,eb,rb,cC,uC,sC,oC],styles:["ul[_ngcontent-%COMP%]{margin-top:2%}a[_ngcontent-%COMP%]{color:#c5f0a4}a[_ngcontent-%COMP%]:hover{color:#35b0ab}.navbar-custom[_ngcontent-%COMP%]{background-color:#226b80}.btn[_ngcontent-%COMP%]{background-color:#faffb8}.btn[_ngcontent-%COMP%]:hover{background-color:#35b0ab!important}.btn[_ngcontent-%COMP%]:active, .btn[_ngcontent-%COMP%]:focus{background:#35b0ab!important}"]}),t})(),DC=(()=>{class t{constructor(t){this.authSvc=t,this.ocultarLogin=!1,this.ocultarRegistro=!1,this.ocultarMensaje=!0,this.ocultarBotonLogout=!0}ngOnInit(){this.authSvc.afAuth.authState.subscribe(t=>{t&&t.uid?(this.usuario.email=t.email,this.ocultarMensaje=!1):this.ocultarMensaje=!0})}desloguear(){return Object(Vi.b)(this,void 0,void 0,function*(){this.authSvc.afAuth.authState.subscribe(t=>{t&&t.uid?(this.authSvc.afAuth.signOut(),this.ocultarBotonLogout=!1):this.ocultarBotonLogout=!0})})}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(Ob))},t.\u0275cmp=r.Gb({type:t,selectors:[["app-logged"]],inputs:{usuario:"usuario"},decls:5,vars:3,consts:[[1,"divLogged",3,"hidden"],["type","button",1,"btn","btn-outline-secondary",3,"routerLink","click"]],template:function(t,e){1&t&&(r.Rb(0,"div",0),r.Rb(1,"p"),r.wc(2),r.Qb(),r.Rb(3,"button",1),r.bc("click",function(){return e.desloguear()}),r.wc(4,"Logout"),r.Qb(),r.Qb()),2&t&&(r.ic("hidden",e.ocultarMensaje),r.Ab(2),r.yc(" Bienvenido ",e.usuario.email," "),r.Ab(1),r.ic("routerLink","/"))},directives:[tb],styles:[".divLogged[_ngcontent-%COMP%]{display:flex;align-items:center;flex-direction:column}button[_ngcontent-%COMP%], p[_ngcontent-%COMP%]{margin-top:3%}p[_ngcontent-%COMP%]{color:#226b80}"]}),t})(),MC=(()=>{class t{constructor(t,e){this.usuariosService=t,this.authSvc=e,this.flagLogueado=!0,this.usuarioLogueado="",this.email="",this.usuario=new rw}ngOnInit(){}obtenerUsuario(){this.authSvc.afAuth.authState.subscribe(t=>t&&t.uid?this.usuariosService.obtenerUsuarioPorEmail(this.email):null)}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(ry),r.Mb(Ob))},t.\u0275cmp=r.Gb({type:t,selectors:[["app-home"]],decls:5,vars:1,consts:[[3,"click"],["name","usuario",1,"logged",3,"usuario"]],template:function(t,e){1&t&&(r.Nb(0,"app-navbar"),r.Rb(1,"div"),r.Rb(2,"button",0),r.bc("click",function(){return e.obtenerUsuario()}),r.wc(3,"Obtener usuario"),r.Qb(),r.Qb(),r.Nb(4,"app-logged",1)),2&t&&(r.Ab(4),r.ic("usuario",e.usuario))},directives:[RC,DC],styles:[".logged[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}"]}),t})(),LC=(()=>{class t{constructor(t,e,n){this.authSvc=t,this.router=e,this.usuariosService=n,this.flag=!1,this.email="",this.password="",this.username="",this.user=new rw}ngOnInit(){}register(){return Object(Vi.b)(this,void 0,void 0,function*(){this.user.email=this.email,this.user.username=this.username;const t=yield this.authSvc.register(this.user,this.password);null==t.message?(console.log("Successfully created user!"),this.user.uid=t.user.uid,this.authSvc.SignIn(this.user,this.password),this.usuariosService.create(this.user),this.router.navigateByUrl("/home")):(console.log(t.code),"auth/invalid-email"==t.code&&window.alert("Ingrese un email valido por favor"),"auth/weak-password"==t.code&&window.alert("La contrase\xf1a debe ser mayor a 6 caracteres."),"auth/wrong-password"==t.code&&window.alert("Contrase\xf1a incorrecta, reingrese"),"auth/email-already-in-use"==t.code&&window.alert("Email en uso"))})}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(Ob),r.Mb(Zv),r.Mb(ry))},t.\u0275cmp=r.Gb({type:t,selectors:[["app-register"]],decls:12,vars:5,consts:[[1,"register-page"],[1,"form"],[1,"register-form",3,"hidden"],["type","text","placeholder","Username","name","username",3,"ngModel","ngModelChange"],["type","text","placeholder","Email","name","email",3,"ngModel","ngModelChange"],["type","password","placeholder","Password","name","password",3,"ngModel","ngModelChange"],[3,"click"],[1,"message"],[3,"routerLink"]],template:function(t,e){1&t&&(r.Rb(0,"div",0),r.Rb(1,"div",1),r.Rb(2,"form",2),r.Rb(3,"input",3),r.bc("ngModelChange",function(t){return e.username=t}),r.Qb(),r.Rb(4,"input",4),r.bc("ngModelChange",function(t){return e.email=t}),r.Qb(),r.Rb(5,"input",5),r.bc("ngModelChange",function(t){return e.password=t}),r.Qb(),r.Rb(6,"button",6),r.bc("click",function(){return e.register()}),r.wc(7,"Crear cuenta"),r.Qb(),r.Rb(8,"p",7),r.wc(9,"Ya estas registrado? "),r.Rb(10,"a",8),r.wc(11,"Iniciar Sesion"),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Qb()),2&t&&(r.Ab(2),r.ic("hidden",e.flag),r.Ab(1),r.ic("ngModel",e.username),r.Ab(1),r.ic("ngModel",e.email),r.Ab(1),r.ic("ngModel",e.password),r.Ab(5),r.ic("routerLink","/login"))},directives:[Y_,E_,G_,a_,O_,K_,eb],styles:['@import url(https://fonts.googleapis.com/css?family=Roboto:300);.borderFade[_ngcontent-%COMP%]{padding-bottom:1px;color:#1b202d;position:relative}.borderFade[_ngcontent-%COMP%]:after{content:"";position:absolute;height:2px;width:100%;left:0;bottom:0;opacity:0;transform:translateY(3px);background:#5851ec;transition:opacity .2s ease,transform .2s ease}.borderFade[_ngcontent-%COMP%]:hover:after{opacity:1;transform:translateY(0)}.register-page[_ngcontent-%COMP%]{width:360px;height:auto;padding:8% 0 0;margin:auto;animation-name:loginRegister;animation-duration:.2s}@keyframes loginRegister{0%{width:0;opacity:0}to{width:360px;opacity:1}}.form[_ngcontent-%COMP%]{position:relative;z-index:1;background:#fff;max-width:360px;margin:0 auto 100px;padding:45px;text-align:center;box-shadow:0 0 20px 0 rgba(0,0,0,.2),0 5px 5px 0 rgba(0,0,0,.24)}.form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{background:#f2f2f2;margin:0 0 15px;box-sizing:border-box}.form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%], .form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{font-family:Roboto,sans-serif;outline:0;width:100%;border:0;padding:15px;font-size:14px}.form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{text-transform:uppercase;background:#4caf50;color:#fff;transition:all .3 ease;cursor:pointer}.form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:active, .form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus, .form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:#43a047}.form[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]{margin:15px 0 0;color:#b3b3b3;font-size:12px}.form[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#4caf50;text-decoration:none}.container[_ngcontent-%COMP%]{position:relative;z-index:1;max-width:300px;margin:0 auto}.container[_ngcontent-%COMP%]:after, .container[_ngcontent-%COMP%]:before{content:"";display:block;clear:both}.container[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]{margin:50px auto;text-align:center}.container[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0 0 15px;padding:0;font-size:36px;font-weight:300;color:#1a1a1a}.container[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#4d4d4d;font-size:12px}.container[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#000;text-decoration:none}.container[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   .fa[_ngcontent-%COMP%]{color:#ef3b3a}body[_ngcontent-%COMP%]{background:#76b852;background:linear-gradient(270deg,#76b852,#8dc26f);font-family:Roboto,sans-serif;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}']}),t})();const FC=[{path:"",component:MC,canActivate:[nw]},{path:"login",component:(()=>{class t{constructor(t,e,n,r,i,o){this.afAuth=t,this.router=e,this.fb=n,this.ngZone=r,this.authSvc=i,this.formBuilder=o,this.errorMessage="",this.email="",this.password="",this.emailRegister="",this.passwordRegister="",this.flag=!0,this.user=new rw}ngOnInit(){}login(){return Object(Vi.b)(this,void 0,void 0,function*(){this.user.email=this.email;try{const t=yield this.authSvc.SignIn(this.user,this.password);console.log(t),null==t.message?this.router.navigateByUrl("/"):("auth/invalid-email"==t.code&&window.alert("Ingrese un email valido por favor"),"auth/argument-error"==t.code&&window.alert("Complete la contrase\xf1a por favor."),"auth/wrong-password"==t.code&&window.alert("Contrase\xf1a incorrecta, reingrese"),"auth/user-not-found"==t.code&&window.alert("Usuario inexistente"),console.log(t.message))}catch(t){console.log(t)}})}register(){}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(Ug),r.Mb(Zv),r.Mb(ew),r.Mb(r.A),r.Mb(Ob),r.Mb(ew))},t.\u0275cmp=r.Gb({type:t,selectors:[["app-login"]],decls:11,vars:3,consts:[[1,"login-page"],[1,"form"],[1,"form-group"],["type","text","id","email","placeholder","Email","name","email",1,"form-control",3,"ngModel","ngModelChange"],["type","password","id","password","placeholder","Contrase\xf1a","name","password",1,"form-control",3,"ngModel","ngModelChange"],["type","submit",3,"click"],[1,"message"],[3,"routerLink"]],template:function(t,e){1&t&&(r.Rb(0,"div",0),r.Rb(1,"div",1),r.Rb(2,"form",2),r.Rb(3,"input",3),r.bc("ngModelChange",function(t){return e.email=t}),r.Qb(),r.Rb(4,"input",4),r.bc("ngModelChange",function(t){return e.password=t}),r.Qb(),r.Rb(5,"button",5),r.bc("click",function(){return e.login()}),r.wc(6,"login"),r.Qb(),r.Rb(7,"p",6),r.wc(8,"No est\xe1s registrado? "),r.Rb(9,"a",7),r.wc(10,"Crear cuenta"),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Qb()),2&t&&(r.Ab(3),r.ic("ngModel",e.email),r.Ab(1),r.ic("ngModel",e.password),r.Ab(5),r.ic("routerLink","/register"))},directives:[Y_,E_,G_,a_,O_,K_,eb],styles:['@import url(https://fonts.googleapis.com/css?family=Roboto:300);.borderFade[_ngcontent-%COMP%]{padding-bottom:1px;color:#1b202d;position:relative}.borderFade[_ngcontent-%COMP%]:after{content:"";position:absolute;height:2px;width:100%;left:0;bottom:0;opacity:0;transform:translateY(3px);background:#5851ec;transition:opacity .2s ease,transform .2s ease}.borderFade[_ngcontent-%COMP%]:hover:after{opacity:1;transform:translateY(0)}.login-page[_ngcontent-%COMP%]{width:360px;height:auto;padding:8% 0 0;margin:auto;animation-name:loginRegister;animation-duration:.2s}@keyframes loginRegister{0%{width:0;opacity:0}to{width:360px;opacity:1}}.form[_ngcontent-%COMP%]{position:relative;z-index:1;background:#fff;max-width:360px;margin:0 auto 100px;padding:45px;text-align:center;box-shadow:0 0 20px 0 rgba(0,0,0,.2),0 5px 5px 0 rgba(0,0,0,.24)}.form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{background:#f2f2f2;margin:0 0 15px;box-sizing:border-box}.form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%], .form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{font-family:Roboto,sans-serif;outline:0;width:100%;border:0;padding:15px;font-size:14px}.form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{text-transform:uppercase;background:#4caf50;color:#fff;transition:all .3 ease;cursor:pointer}.form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:active, .form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus, .form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:#43a047}.form[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]{margin:15px 0 0;color:#b3b3b3;font-size:12px}.form[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#4caf50;text-decoration:none}.form[_ngcontent-%COMP%]   .register-form[_ngcontent-%COMP%]{display:none}.container[_ngcontent-%COMP%]{position:relative;z-index:1;max-width:300px;margin:0 auto}.container[_ngcontent-%COMP%]:after, .container[_ngcontent-%COMP%]:before{content:"";display:block;clear:both}.container[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]{margin:50px auto;text-align:center}.container[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0 0 15px;padding:0;font-size:36px;font-weight:300;color:#1a1a1a}.container[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#4d4d4d;font-size:12px}.container[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#000;text-decoration:none}.container[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   .fa[_ngcontent-%COMP%]{color:#ef3b3a}body[_ngcontent-%COMP%]{background:#76b852;background:linear-gradient(270deg,#76b852,#8dc26f);font-family:Roboto,sans-serif;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}']}),t})()},{path:"register",component:LC},{path:"home",component:MC},{path:"quienSoy",component:(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Gb({type:t,selectors:[["app-quiensoy"]],decls:17,vars:1,consts:[[1,"card","w-25","imagen",2,"width","18rem"],["src","assets/image/quiensoy.jpg","alt","Card image cap",1,"card-img-top"],[1,"card-body"],[1,"card-title"],[1,"card-text"],["href","https://github.com/SantiGO055/tpSalaDeJuegos","target","_blank",1,"btn","btn-primary"],["src","assets/image/githublogo.png",1,"logoGithub"],[1,"boton"],[1,"btn","btn-outline-primary",3,"routerLink"]],template:function(t,e){1&t&&(r.Rb(0,"div",0),r.Nb(1,"img",1),r.Rb(2,"div",2),r.Rb(3,"h5",3),r.wc(4,"\xbf Quien soy ?"),r.Qb(),r.Rb(5,"p",4),r.wc(6,"Soy "),r.Rb(7,"b"),r.wc(8,"Santiago Gonzalez"),r.Qb(),r.wc(9," estudiante de tecnicatura universitaria en programaci\xf3n y tecnico de sistemas"),r.Qb(),r.Rb(10,"a",5),r.wc(11,"Github de proyecto"),r.Nb(12,"img",6),r.Qb(),r.Qb(),r.Rb(13,"footer"),r.Rb(14,"div",7),r.Rb(15,"button",8),r.wc(16,"Volver"),r.Qb(),r.Qb(),r.Qb(),r.Qb()),2&t&&(r.Ab(15),r.ic("routerLink","/"))},directives:[tb],styles:["div.imagen[_ngcontent-%COMP%]{width:40%;margin:0 auto;padding:5px;font-family:Roboto,sans-serif}img[_ngcontent-%COMP%]{background-color:#000}div.imagen[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%}.boton[_ngcontent-%COMP%], .container[_ngcontent-%COMP%]{display:flex;align-items:center}.boton[_ngcontent-%COMP%]{justify-content:center}.logoGithub[_ngcontent-%COMP%]{background:transparent;width:5%}.navbar-custom[_ngcontent-%COMP%]{color:#c5f0a4;background-color:#226b80}.btn[_ngcontent-%COMP%]{background-color:#faffb8}.btn[_ngcontent-%COMP%]:hover{background-color:#35b0ab;box-shadow:0 12px 16px 0 rgba(0,0,0,.24),0 17px 50px 0 rgba(0,0,0,.19)}.btn[_ngcontent-%COMP%]:active, .btn[_ngcontent-%COMP%]:focus{background:#35b0ab!important}a[_ngcontent-%COMP%]{color:#35b0ab}a[_ngcontent-%COMP%]:hover{color:#c5f0a4}"]}),t})()}];let VC=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Kb({type:t}),t.\u0275inj=r.Jb({imports:[[pb.forRoot(FC)],pb]}),t})(),UC=(()=>{class t{constructor(){this.title="tpSalaDeJuegos"}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Gb({type:t,selectors:[["app-root"]],decls:1,vars:0,template:function(t,e){1&t&&r.Nb(0,"router-outlet")},directives:[ib],styles:["@import url(https://fonts.googleapis.com/css?family=Roboto:300);"]}),t})();class qC{constructor(t){this.predicate=t}call(t,e){return e.subscribe(new BC(t,this.predicate))}}class BC extends mt.a{constructor(t,e){super(t),this.predicate=e,this.skipping=!0,this.index=0}_next(t){const e=this.destination;this.skipping&&this.tryCallPredicate(t),this.skipping||e.next(t)}tryCallPredicate(t){try{const e=this.predicate(t,this.index++);this.skipping=Boolean(e)}catch(e){this.destination.error(e)}}}function HC(t){return null==t}function zC(t){return"function"==typeof t.set}function GC(t,e){return zC(e)?e:t.ref(e)}function QC(t,e){if("string"==typeof t)return e.stringCase();if(zC(t))return e.firebaseCase();if("function"==typeof t.exportVal)return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof t)}function WC(t,e,n="on",r=ct.b){return new lt.a(i=>{let o=null;return o=t[n](e,(t,e)=>{r.schedule(()=>{i.next({snapshot:t,prevKey:e})}),"once"===n&&r.schedule(()=>i.complete())},t=>{r.schedule(()=>i.error(t))}),"on"===n?{unsubscribe(){null!=o&&t.off(e,o)}}:{unsubscribe(){}}}).pipe(Object(wt.a)(t=>{const{snapshot:n,prevKey:r}=t;let i=null;return n.exists()&&(i=n.key),{type:e,payload:n,prevKey:r,key:i}}),Object(Aw.a)())}function KC(t,e){const n=t.length;for(let r=0;r<n;r++)if(t[r].payload.key===e)return r;return-1}function YC(t,e){const{payload:n,prevKey:r,key:i}=e,o=KC(t,i),s=function(t,e){if(HC(e))return 0;{const n=KC(t,e);return-1===n?t.length:n+1}}(t,r);switch(e.type){case"value":if(e.payload&&e.payload.exists()){let n=null;e.payload.forEach(e=>{const r={payload:e,type:"value",prevKey:n,key:e.key};return n=e.key,t=[...t,r],!1})}return t;case"child_added":if(o>-1){const i=t[o-1];(i&&i.key||null)!==r&&(t=t.filter(t=>t.payload.key!==n.key)).splice(s,0,e)}else{if(null==r)return[e,...t];(t=t.slice()).splice(s,0,e)}return t;case"child_removed":return t.filter(t=>t.payload.key!==n.key);case"child_changed":return t.map(t=>t.payload.key===i?e:t);case"child_moved":if(o>-1){const e=t.splice(o,1)[0];return(t=t.slice()).splice(s,0,e),t}return t;default:return t}}function $C(t){return(HC(t)||0===t.length)&&(t=["child_added","child_removed","child_changed","child_moved"]),t}function JC(t,e,n){return function(t,e,n){return WC(t,"value","once",n).pipe(ag(r=>{const i=[Object(dt.a)(r)];return e.forEach(e=>i.push(WC(t,e,"on",n))),Object(og.a)(...i).pipe(Ct(YC,[]))}),St())}(t,e=$C(e),n)}function XC(t,e,n){const r=(e=$C(e)).map(e=>WC(t,e,"on",n));return Object(og.a)(...r)}function ZC(t,e){return function(n,r){return QC(n,{stringCase:()=>t.child(n)[e](r),firebaseCase:()=>n[e](r),snapshotCase:()=>n.ref[e](r)})}}function tO(t,e){return function(){return WC(t,"value","on",e)}}n("6Uf2");const eO=new r.r("angularfire2.realtimeDatabaseURL"),nO=new r.r("angularfire2.database.use-emulator");let rO=(()=>{class t{constructor(t,e,n,r,i,o,s){this.schedulers=new Nt.d(i),this.keepUnstableUntilFirst=Object(Nt.h)(this.schedulers);const a=o,u=Object(Nt.g)(t,i,e);!Pt.a.auth&&s&&Object(Nt.j)(),this.database=Object(Nt.f)(`${u.name}.database.${n}`,"AngularFireDatabase",u,()=>{const t=i.runOutsideAngular(()=>u.database(n||void 0));return a&&t.useEmulator(...a),t},[a])}list(t,e){const n=this.schedulers.ngZone.runOutsideAngular(()=>GC(this.database,t));let r=n;return e&&(r=e(n)),function(t,e){const n=e.schedulers.outsideAngular,r=e.schedulers.ngZone.run(()=>t.ref);return{query:t,update:ZC(r,"update"),set:ZC(r,"set"),push:t=>r.push(t),remove:(i=r,function(t){return t?QC(t,{stringCase:()=>i.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):i.remove()}),snapshotChanges:r=>JC(t,r,n).pipe(e.keepUnstableUntilFirst),stateChanges:r=>XC(t,r,n).pipe(e.keepUnstableUntilFirst),auditTrail:r=>function(t,e,n){return function(t,e,n){return function(t,e){return WC(t,"value","on",e).pipe(Object(wt.a)(t=>{let e;return t.payload.forEach(t=>(e=t.key,!1)),{data:t,lastKeyToLoad:e}}))}(t,n).pipe(Cw(e),Object(wt.a)(([t,e])=>{const n=t.lastKeyToLoad,r=e.map(t=>t.key);return{actions:e,lastKeyToLoad:n,loadedKeys:r}}),(r=t=>-1===t.loadedKeys.indexOf(t.lastKeyToLoad),t=>t.lift(new qC(r))),Object(wt.a)(t=>t.actions));var r}(t,XC(t,e).pipe(Ct((t,e)=>[...t,e],[])),n)}(t,r,n).pipe(e.keepUnstableUntilFirst),valueChanges:(r,i)=>JC(t,r,n).pipe(Object(wt.a)(t=>t.map(t=>i&&i.idField?Object.assign(Object.assign({},t.payload.val()),{[i.idField]:t.key}):t.payload.val())),e.keepUnstableUntilFirst)};var i}(r,this)}object(t){const e=this.schedulers.ngZone.runOutsideAngular(()=>GC(this.database,t));return r=this,{query:n=e,snapshotChanges:()=>tO(n,r.schedulers.outsideAngular)().pipe(r.keepUnstableUntilFirst),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>tO(n,r.schedulers.outsideAngular)().pipe(r.keepUnstableUntilFirst,Object(wt.a)(t=>t.payload.exists()?t.payload.val():null))};var n,r}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return t.\u0275fac=function(e){return new(e||t)(r.Yb(Nt.c),r.Yb(Nt.b,8),r.Yb(eO,8),r.Yb(r.C),r.Yb(r.A),r.Yb(nO,8),r.Yb(Rg,8))},t.\u0275prov=Object(r.Ib)({factory:function(){return new t(Object(r.Yb)(Nt.c),Object(r.Yb)(Nt.b,8),Object(r.Yb)(eO,8),Object(r.Yb)(r.C),Object(r.Yb)(r.A),Object(r.Yb)(nO,8),Object(r.Yb)(Rg,8))},token:t,providedIn:"any"}),t})(),iO=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Kb({type:t}),t.\u0275inj=r.Jb({providers:[rO]}),t})(),oO=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Kb({type:t,bootstrap:[UC]}),t.\u0275inj=r.Jb({providers:[Ob,ry],imports:[[ut,Z_,e_,VC,Nt.a.initializeApp(iy),qg,tw,A,iO,Ww,PC]]}),t})();Object(r.T)(),st().bootstrapModule(oO).catch(t=>console.error(t))},zn8P:function(t,e){function n(t){return Promise.resolve().then(function(){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e})}n.keys=function(){return[]},n.resolve=n,t.exports=n,n.id="zn8P"},zx2A:function(t,e,n){"use strict";n.d(e,"a",function(){return s}),n.d(e,"b",function(){return a}),n.d(e,"c",function(){return u});var r=n("7o/Q"),i=n("HDdC"),o=n("SeVD");class s extends r.a{constructor(t){super(),this.parent=t}_next(t){this.parent.notifyNext(t)}_error(t){this.parent.notifyError(t),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class a extends r.a{notifyNext(t){this.destination.next(t)}notifyError(t){this.destination.error(t)}notifyComplete(){this.destination.complete()}}function u(t,e){if(!e.closed)return t instanceof i.a?t.subscribe(e):Object(o.a)(t)(e)}}},[[0,0]]]);